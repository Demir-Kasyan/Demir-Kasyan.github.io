{"version":3,"file":"picasso.esm.js","sources":["../../../node_modules/path2d-polyfill/dist/index.esm.js","../../../node_modules/extend/index.js","../src/about.js","../src/core/layout/dock/config.js","../src/core/layout/dock/settings-resolver.js","../src/core/utils/is-number.js","../src/core/geometry/util.js","../src/core/layout/dock/create-rect.js","../src/core/layout/dock/docker.js","../src/core/utils/event-type.js","../src/core/data/data.js","../../../node_modules/d3-path/src/path.js","../../../node_modules/d3-shape/src/constant.js","../../../node_modules/d3-shape/src/math.js","../../../node_modules/d3-shape/src/arc.js","../../../node_modules/d3-shape/src/curve/linear.js","../../../node_modules/d3-shape/src/point.js","../../../node_modules/d3-shape/src/line.js","../../../node_modules/d3-shape/src/area.js","../../../node_modules/d3-shape/src/descending.js","../../../node_modules/d3-shape/src/identity.js","../../../node_modules/d3-shape/src/pie.js","../../../node_modules/d3-shape/src/array.js","../../../node_modules/d3-shape/src/curve/basis.js","../../../node_modules/d3-shape/src/curve/cardinal.js","../../../node_modules/d3-shape/src/curve/catmullRom.js","../../../node_modules/d3-shape/src/curve/monotone.js","../../../node_modules/d3-shape/src/curve/natural.js","../../../node_modules/d3-shape/src/curve/step.js","../../../node_modules/d3-shape/src/offset/none.js","../../../node_modules/d3-shape/src/order/none.js","../../../node_modules/d3-shape/src/stack.js","../../../node_modules/d3-shape/src/offset/expand.js","../../../node_modules/d3-shape/src/offset/diverging.js","../../../node_modules/d3-shape/src/offset/silhouette.js","../../../node_modules/d3-shape/src/offset/wiggle.js","../../../node_modules/d3-shape/src/order/appearance.js","../../../node_modules/d3-shape/src/order/ascending.js","../../../node_modules/d3-shape/src/order/insideOut.js","../../../node_modules/d3-shape/src/order/reverse.js","../src/core/utils/registry.js","../../../node_modules/d3-format/src/formatDecimal.js","../../../node_modules/d3-format/src/exponent.js","../../../node_modules/d3-format/src/formatGroup.js","../../../node_modules/d3-format/src/formatNumerals.js","../../../node_modules/d3-format/src/formatSpecifier.js","../../../node_modules/d3-format/src/formatTrim.js","../../../node_modules/d3-format/src/formatPrefixAuto.js","../../../node_modules/d3-format/src/formatRounded.js","../../../node_modules/d3-format/src/formatTypes.js","../../../node_modules/d3-format/src/identity.js","../../../node_modules/d3-format/src/locale.js","../src/core/formatter/d3/numberFormat.js","../../../node_modules/d3-time/src/interval.js","../../../node_modules/d3-time/src/duration.js","../../../node_modules/d3-time/src/day.js","../../../node_modules/d3-time/src/week.js","../../../node_modules/d3-time/src/year.js","../../../node_modules/d3-time/src/utcDay.js","../../../node_modules/d3-time/src/utcWeek.js","../../../node_modules/d3-time/src/utcYear.js","../../../node_modules/d3-time-format/src/locale.js","../src/core/formatter/d3/timeFormat.js","../src/core/formatter/index.js","../src/core/data/field.js","../src/core/data/stack.js","../src/core/data/extractor.js","../src/core/data/collections.js","../src/core/chart/formatter/index.js","../../../node_modules/d3-array/src/ascending.js","../../../node_modules/d3-array/src/bisector.js","../../../node_modules/d3-array/src/bisect.js","../../../node_modules/d3-array/src/range.js","../../../node_modules/d3-array/src/ticks.js","../../../node_modules/d3-scale/src/init.js","../../../node_modules/d3-collection/src/map.js","../../../node_modules/d3-collection/src/set.js","../../../node_modules/d3-scale/src/array.js","../../../node_modules/d3-scale/src/ordinal.js","../../../node_modules/d3-scale/src/band.js","../../../node_modules/d3-color/src/define.js","../../../node_modules/d3-color/src/color.js","../../../node_modules/d3-interpolate/src/constant.js","../../../node_modules/d3-interpolate/src/color.js","../../../node_modules/d3-interpolate/src/rgb.js","../../../node_modules/d3-interpolate/src/numberArray.js","../../../node_modules/d3-interpolate/src/array.js","../../../node_modules/d3-interpolate/src/date.js","../../../node_modules/d3-interpolate/src/number.js","../../../node_modules/d3-interpolate/src/object.js","../../../node_modules/d3-interpolate/src/string.js","../../../node_modules/d3-interpolate/src/value.js","../../../node_modules/d3-interpolate/src/round.js","../../../node_modules/d3-scale/src/constant.js","../../../node_modules/d3-scale/src/number.js","../../../node_modules/d3-scale/src/continuous.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatDecimal.js","../../../node_modules/d3-scale/node_modules/d3-format/src/exponent.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatGroup.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatNumerals.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatSpecifier.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatTrim.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatPrefixAuto.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatRounded.js","../../../node_modules/d3-scale/node_modules/d3-format/src/formatTypes.js","../../../node_modules/d3-scale/node_modules/d3-format/src/identity.js","../../../node_modules/d3-scale/node_modules/d3-format/src/locale.js","../../../node_modules/d3-scale/node_modules/d3-format/src/defaultLocale.js","../../../node_modules/d3-scale/node_modules/d3-format/src/precisionFixed.js","../../../node_modules/d3-scale/node_modules/d3-format/src/precisionPrefix.js","../../../node_modules/d3-scale/node_modules/d3-format/src/precisionRound.js","../../../node_modules/d3-scale/src/tickFormat.js","../../../node_modules/d3-scale/src/linear.js","../../../node_modules/d3-scale/src/threshold.js","../src/core/scales/ticks/tick-generators.js","../src/core/scales/settings-resolver.js","../src/core/scales/linear.js","../src/core/scales/band.js","../src/core/scales/h-band.js","../src/core/utils/min-max.js","../src/core/scales/color/sequential.js","../src/core/scales/color/threshold.js","../src/core/scales/ordinal.js","../src/core/scales/color/categorical.js","../src/core/chart/scales/index.js","../../../node_modules/node-event-emitter/index.js","../src/core/utils/event-emitter.js","../src/core/scroll-api/index.js","../src/core/chart/scroll-api/index.js","../src/core/brush/range-collection.js","../src/core/brush/value-collection.js","../src/core/brush/brush.js","../src/core/brush/index.js","../../../node_modules/d3-ease/src/cubic.js","../../../node_modules/d3-ease/src/elastic.js","../src/core/component/tween.js","../src/core/chart-components/property-resolver/index.js","../src/core/scales/index.js","../src/core/component/settings-resolver.js","../src/core/component/brushing.js","../src/core/scene-graph/attributes.js","../src/core/symbols/circle.js","../src/core/utils/points-to-path.js","../src/core/symbols/diamond.js","../src/core/symbols/cross.js","../src/core/math/angles.js","../src/core/math/vector.js","../src/core/symbols/saltire.js","../src/core/symbols/square.js","../src/core/symbols/triangle.js","../src/core/symbols/line.js","../src/core/symbols/star.js","../src/core/symbols/n-polygon.js","../src/core/symbols/bar.js","../src/core/symbols/index.js","../src/core/component/component-factory.js","../src/core/mediator/index.js","../src/core/math/intersection.js","../src/core/math/narrow-phase-collision.js","../src/core/style/resolver.js","../src/core/theme/index.js","../src/core/chart/index.js","../src/core/renderer/index.js","../src/core/component/index.js","../src/core/data/util.js","../src/core/data/extractor-matrix.js","../src/core/data/dataset.js","../src/core/data/index.js","../src/web/interactions/native/index.js","../src/core/interaction/index.js","../src/core/chart-components/box/box-math.js","../src/core/chart-components/box/box-shapes-helper.js","../src/core/chart-components/box/box-shapes.js","../src/core/chart-components/box/box-resolver.js","../src/core/chart-components/box/box.js","../src/core/chart-components/box/index.js","../src/core/chart-components/point/point.js","../src/core/chart-components/point/index.js","../src/core/chart-components/pie/pie.js","../src/core/chart-components/pie/index.js","../src/core/transposer/crispifier.js","../src/core/transposer/transposer.js","../src/core/chart-components/grid/line.js","../src/core/chart-components/grid/index.js","../src/core/chart-components/ref-line/oob.js","../src/core/chart-components/ref-line/lines-and-labels.js","../src/core/chart-components/ref-line/refline.js","../src/core/chart-components/ref-line/index.js","../src/core/chart-components/axis/axis-line-node.js","../src/core/chart-components/axis/axis-label-node.js","../src/core/chart-components/axis/axis-tick-node.js","../src/core/chart-components/axis/axis-label-size.js","../src/core/chart-components/axis/get-continuous-label-rect.js","../src/core/chart-components/axis/axis-node-builder.js","../src/core/chart-components/axis/axis-default-settings.js","../src/core/chart-components/axis/axis-size-calculator.js","../src/core/chart-components/axis/axis.js","../src/core/chart-components/axis/index.js","../src/core/chart-components/text/text.js","../src/core/chart-components/text/index.js","../src/core/chart-components/scrollbar/index.js","../src/web/components/brush-range/brush-range-const.js","../src/web/components/brush-range/brush-range-node-builder.js","../src/web/components/brush-range/brush-range-interaction.js","../src/web/components/brush-range/brush-range.js","../src/web/components/brush-range/brush-area-dir.js","../src/web/components/brush-range/index.js","../src/core/chart-components/range/range.js","../src/core/chart-components/range/index.js","../src/core/chart-components/brush-lasso/brush-lasso.js","../src/core/chart-components/brush-lasso/index.js","../src/core/chart-components/labels/strategies/bars-overlapping-filter.js","../src/core/chart-components/labels/strategies/bars.js","../src/core/chart-components/labels/strategies/slices.js","../src/web/text-manipulation/string-tokenizer.js","../src/web/text-manipulation/text-const.js","../src/web/text-manipulation/font-size-to-height.js","../src/web/text-manipulation/word-break.js","../src/web/text-manipulation/line-break-resolver.js","../src/web/text-manipulation/text-ellipsis.js","../src/web/text-manipulation/baseline-heuristic.js","../src/web/text-manipulation/text-metrics.js","../src/core/chart-components/labels/strategies/rows.js","../src/core/chart-components/labels/strategies/index.js","../src/core/chart-components/labels/labels.js","../src/core/chart-components/labels/index.js","../src/core/chart-components/legend-cat/legend-resolver.js","../src/core/chart-components/legend-cat/item-renderer.js","../src/core/utils/class-string.js","../src/core/chart-components/legend-cat/navigation-renderer.js","../src/core/chart-components/legend-cat/title-renderer.js","../src/core/chart-components/legend-cat/legend-layout.js","../src/core/chart-components/legend-cat/legend-cat.js","../src/core/chart-components/legend-cat/index.js","../src/core/chart-components/legend-seq/node-builder.js","../src/core/chart-components/legend-seq/legend-seq.js","../src/core/chart-components/legend-seq/index.js","../src/core/chart-components/line/line.js","../src/core/chart-components/line/index.js","../src/web/components/brush-area/brush-area.js","../src/web/components/brush-area/index.js","../src/web/components/tooltip/extractor.js","../src/web/components/tooltip/render.js","../src/web/components/tooltip/timespan-dispatcher.js","../src/web/components/tooltip/placement.js","../src/web/components/tooltip/instance-handler.js","../src/web/components/tooltip/tooltip.js","../src/web/components/tooltip/index.js","../src/core/chart-components/debug/debug-collider.js","../src/core/math/arc-to-center.js","../src/core/math/curve-flattness.js","../src/core/math/cubic-bezier-curve-interpolation.js","../src/core/math/quad-bezier-curve-interpolation.js","../src/core/scene-graph/parse-path-d.js","../src/core/chart-components/debug/debug-path-to-points.js","../src/core/chart-components/debug/index.js","../src/api/components.js","../src/core/scene-graph/node.js","../src/core/geometry/rect.js","../src/core/geometry/circle.js","../src/core/geometry/line.js","../src/core/geometry/polygon.js","../src/core/geometry/geopolygon.js","../src/core/geometry/polyline.js","../src/core/geometry/index.js","../src/core/geometry/geometry-collection.js","../src/core/math/matrix.js","../src/core/scene-graph/transform-resolver.js","../src/core/scene-graph/node-selector.js","../src/core/scene-graph/scene-node.js","../src/core/scene-graph/collision.js","../src/core/scene-graph/collision-resolver.js","../src/core/scene-graph/display-objects/display-object.js","../src/core/scene-graph/node-container.js","../src/core/scene-graph/display-objects/container.js","../src/core/scene-graph/display-objects/stage.js","../src/core/scene-graph/display-objects/gradient-item.js","../src/core/scene-graph/display-objects/pattern-item.js","../src/core/scene-graph/display-objects/rect.js","../src/core/scene-graph/display-objects/circle.js","../src/core/scene-graph/display-objects/line.js","../src/core/scene-graph/polyline-to-polygon-collider.js","../src/core/utils/flatten-array.js","../src/core/scene-graph/display-objects/path.js","../src/core/scene-graph/display-objects/text.js","../src/core/scene-graph/display-objects/index.js","../src/core/scene-graph/context.js","../src/core/scene-graph/scene.js","../src/web/renderer/canvas-renderer/canvas-gradient.js","../src/web/renderer/canvas-renderer/canvas-pattern.js","../src/web/renderer/renderer-box.js","../src/web/renderer/index.js","../src/web/text-manipulation/inject-textbounds.js","../src/web/renderer/canvas-renderer/canvas-renderer.js","../src/web/renderer/canvas-renderer/shapes/rect.js","../src/web/renderer/canvas-renderer/shapes/circle.js","../src/web/renderer/canvas-renderer/shapes/line.js","../src/core/utils/rtl-util.js","../src/web/renderer/canvas-renderer/shapes/text.js","../src/web/renderer/canvas-renderer/shapes/path.js","../src/web/renderer/canvas-renderer/index.js","../src/web/renderer/node-tree.js","../src/web/renderer/svg-renderer/svg-nodes.js","../src/web/renderer/svg-renderer/svg-tree.js","../src/core/utils/crypto.js","../src/web/renderer/svg-renderer/svg-gradient.js","../src/web/renderer/svg-renderer/svg-pattern.js","../src/web/renderer/svg-renderer/svg-renderer.js","../../../node_modules/preact/dist/preact.module.js","../src/web/renderer/dom-renderer/dom-renderer.js","../src/web/renderer/dom-renderer/index.js","../src/api/renderers.js","../src/api/scales.js","../src/core/utils/logger.js","../src/core/theme/light/index.js","../src/index.js"],"sourcesContent":["var ARG_LENGTH = {\n  a: 7,\n  c: 6,\n  h: 1,\n  l: 2,\n  m: 2,\n  q: 4,\n  s: 4,\n  t: 2,\n  v: 1,\n  z: 0\n};\nvar SEGMENT_PATTERN = /([astvzqmhlc])([^astvzqmhlc]*)/gi;\nvar NUMBER = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/gi;\n\nfunction parseValues(args) {\n  var numbers = args.match(NUMBER);\n  return numbers ? numbers.map(Number) : [];\n}\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * https://www.w3.org/TR/SVG/paths.html#PathDataGeneralInformation\n * @ignore\n *\n * @param {string} path\n * @returns {array}\n */\n\n\nfunction parse(path) {\n  var data = [];\n  var p = String(path).trim(); // A path data segment (if there is one) must begin with a \"moveto\" command\n\n  if (p[0] !== 'M' && p[0] !== 'm') {\n    return data;\n  }\n\n  p.replace(SEGMENT_PATTERN, function (_, command, args) {\n    var type = command.toLowerCase();\n    var theArgs = parseValues(args);\n    var theCommand = command; // overloaded moveTo\n\n    if (type === 'm' && theArgs.length > 2) {\n      data.push([theCommand].concat(theArgs.splice(0, 2)));\n      type = 'l';\n      theCommand = theCommand === 'm' ? 'l' : 'L';\n    } // Ignore invalid commands\n\n\n    if (theArgs.length < ARG_LENGTH[type]) {\n      return '';\n    }\n\n    data.push([theCommand].concat(theArgs.splice(0, ARG_LENGTH[type]))); // The command letter can be eliminated on subsequent commands if the\n    // same command is used multiple times in a row (e.g., you can drop the\n    // second \"L\" in \"M 100 200 L 200 100 L -100 -200\" and use\n    // \"M 100 200 L 200 100 -100 -200\" instead).\n\n    while (theArgs.length >= ARG_LENGTH[type] && theArgs.length && ARG_LENGTH[type]) {\n      data.push([theCommand].concat(theArgs.splice(0, ARG_LENGTH[type])));\n    }\n\n    return '';\n  });\n  return data;\n}\n\nvar parsePath = parse;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n/**\n * Work around for https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8438884/\n * @ignore\n */\n\nfunction supportsSvgPathArgument(window) {\n  var canvas = window.document.createElement('canvas');\n  var g = canvas.getContext('2d');\n  var p = new window.Path2D('M0 0 L1 1');\n  g.strokeStyle = 'red';\n  g.lineWidth = 1;\n  g.stroke(p);\n  var imgData = g.getImageData(0, 0, 1, 1);\n  return imgData.data[0] === 255; // Check if pixel is red\n}\n\nfunction rotatePoint(point, angle) {\n  var nx = point.x * Math.cos(angle) - point.y * Math.sin(angle);\n  var ny = point.y * Math.cos(angle) + point.x * Math.sin(angle);\n  point.x = nx;\n  point.y = ny;\n}\n\nfunction translatePoint(point, dx, dy) {\n  point.x += dx;\n  point.y += dy;\n}\n\nfunction scalePoint(point, s) {\n  point.x *= s;\n  point.y *= s;\n}\n\nfunction polyFillPath2D(window) {\n  if (typeof window === 'undefined' || !window.CanvasRenderingContext2D) {\n    return;\n  }\n\n  if (window.Path2D && supportsSvgPathArgument(window)) {\n    return;\n  }\n  /**\n   * Crates a Path2D polyfill object\n   * @constructor\n   * @ignore\n   * @param {String} path\n   */\n\n\n  var Path2D = /*#__PURE__*/function () {\n    function Path2D(path) {\n      _classCallCheck(this, Path2D);\n\n      this.segments = [];\n\n      if (path && path instanceof Path2D) {\n        var _this$segments;\n\n        (_this$segments = this.segments).push.apply(_this$segments, _toConsumableArray(path.segments));\n      } else if (path) {\n        this.segments = parsePath(path);\n      }\n    }\n\n    _createClass(Path2D, [{\n      key: \"addPath\",\n      value: function addPath(path) {\n        if (path && path instanceof Path2D) {\n          var _this$segments2;\n\n          (_this$segments2 = this.segments).push.apply(_this$segments2, _toConsumableArray(path.segments));\n        }\n      }\n    }, {\n      key: \"moveTo\",\n      value: function moveTo(x, y) {\n        this.segments.push(['M', x, y]);\n      }\n    }, {\n      key: \"lineTo\",\n      value: function lineTo(x, y) {\n        this.segments.push(['L', x, y]);\n      }\n    }, {\n      key: \"arc\",\n      value: function arc(x, y, r, start, end, ccw) {\n        this.segments.push(['AC', x, y, r, start, end, !!ccw]);\n      }\n    }, {\n      key: \"arcTo\",\n      value: function arcTo(x1, y1, x2, y2, r) {\n        this.segments.push(['AT', x1, y1, x2, y2, r]);\n      }\n    }, {\n      key: \"ellipse\",\n      value: function ellipse(x, y, rx, ry, angle, start, end, ccw) {\n        this.segments.push(['E', x, y, rx, ry, angle, start, end, !!ccw]);\n      }\n    }, {\n      key: \"closePath\",\n      value: function closePath() {\n        this.segments.push(['Z']);\n      }\n    }, {\n      key: \"bezierCurveTo\",\n      value: function bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this.segments.push(['C', cp1x, cp1y, cp2x, cp2y, x, y]);\n      }\n    }, {\n      key: \"quadraticCurveTo\",\n      value: function quadraticCurveTo(cpx, cpy, x, y) {\n        this.segments.push(['Q', cpx, cpy, x, y]);\n      }\n    }, {\n      key: \"rect\",\n      value: function rect(x, y, width, height) {\n        this.segments.push(['R', x, y, width, height]);\n      }\n    }]);\n\n    return Path2D;\n  }();\n\n  var cFill = window.CanvasRenderingContext2D.prototype.fill;\n  var cStroke = window.CanvasRenderingContext2D.prototype.stroke;\n\n  function buildPath(canvas, segments) {\n    var endAngle;\n    var startAngle;\n    var largeArcFlag;\n    var sweepFlag;\n    var endPoint;\n    var midPoint;\n    var angle;\n    var lambda;\n    var t1;\n    var t2;\n    var x;\n    var x1;\n    var y;\n    var y1;\n    var r;\n    var rx;\n    var ry;\n    var w;\n    var h;\n    var pathType;\n    var centerPoint;\n    var cpx;\n    var cpy;\n    var qcpx;\n    var qcpy;\n    var ccw;\n    var startPoint = {\n      x: 0,\n      y: 0\n    };\n    var currentPoint = {\n      x: 0,\n      y: 0\n    };\n    canvas.beginPath();\n\n    for (var i = 0; i < segments.length; ++i) {\n      var s = segments[i];\n      pathType = s[0]; // Reset control point if command is not cubic\n\n      if (pathType !== 'S' && pathType !== 's' && pathType !== 'C' && pathType !== 'c') {\n        cpx = null;\n        cpy = null;\n      }\n\n      if (pathType !== 'T' && pathType !== 't' && pathType !== 'Q' && pathType !== 'q') {\n        qcpx = null;\n        qcpy = null;\n      }\n\n      switch (pathType) {\n        case 'm':\n        case 'M':\n          if (pathType === 'm') {\n            x += s[1];\n            y += s[2];\n          } else {\n            x = s[1];\n            y = s[2];\n          }\n\n          if (pathType === 'M' || !startPoint) {\n            startPoint = {\n              x: x,\n              y: y\n            };\n          }\n\n          canvas.moveTo(x, y);\n          break;\n\n        case 'l':\n          x += s[1];\n          y += s[2];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'L':\n          x = s[1];\n          y = s[2];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'H':\n          x = s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'h':\n          x += s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'V':\n          y = s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'v':\n          y += s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'a':\n        case 'A':\n          if (pathType === 'a') {\n            x += s[6];\n            y += s[7];\n          } else {\n            x = s[6];\n            y = s[7];\n          }\n\n          rx = s[1]; // rx\n\n          ry = s[2]; // ry\n\n          angle = s[3] * Math.PI / 180;\n          largeArcFlag = !!s[4];\n          sweepFlag = !!s[5];\n          endPoint = {\n            x: x,\n            y: y\n          }; // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\n          midPoint = {\n            x: (currentPoint.x - endPoint.x) / 2,\n            y: (currentPoint.y - endPoint.y) / 2\n          };\n          rotatePoint(midPoint, -angle); // radius correction\n\n          lambda = midPoint.x * midPoint.x / (rx * rx) + midPoint.y * midPoint.y / (ry * ry);\n\n          if (lambda > 1) {\n            lambda = Math.sqrt(lambda);\n            rx *= lambda;\n            ry *= lambda;\n          }\n\n          centerPoint = {\n            x: rx * midPoint.y / ry,\n            y: -(ry * midPoint.x) / rx\n          };\n          t1 = rx * rx * ry * ry;\n          t2 = rx * rx * midPoint.y * midPoint.y + ry * ry * midPoint.x * midPoint.x;\n\n          if (sweepFlag !== largeArcFlag) {\n            scalePoint(centerPoint, Math.sqrt((t1 - t2) / t2) || 0);\n          } else {\n            scalePoint(centerPoint, -Math.sqrt((t1 - t2) / t2) || 0);\n          }\n\n          startAngle = Math.atan2((midPoint.y - centerPoint.y) / ry, (midPoint.x - centerPoint.x) / rx);\n          endAngle = Math.atan2(-(midPoint.y + centerPoint.y) / ry, -(midPoint.x + centerPoint.x) / rx);\n          rotatePoint(centerPoint, angle);\n          translatePoint(centerPoint, (endPoint.x + currentPoint.x) / 2, (endPoint.y + currentPoint.y) / 2);\n          canvas.save();\n          canvas.translate(centerPoint.x, centerPoint.y);\n          canvas.rotate(angle);\n          canvas.scale(rx, ry);\n          canvas.arc(0, 0, 1, startAngle, endAngle, !sweepFlag);\n          canvas.restore();\n          break;\n\n        case 'C':\n          cpx = s[3]; // Last control point\n\n          cpy = s[4];\n          x = s[5];\n          y = s[6];\n          canvas.bezierCurveTo(s[1], s[2], cpx, cpy, x, y);\n          break;\n\n        case 'c':\n          canvas.bezierCurveTo(s[1] + x, s[2] + y, s[3] + x, s[4] + y, s[5] + x, s[6] + y);\n          cpx = s[3] + x; // Last control point\n\n          cpy = s[4] + y;\n          x += s[5];\n          y += s[6];\n          break;\n\n        case 'S':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(2 * x - cpx, 2 * y - cpy, s[1], s[2], s[3], s[4]);\n          cpx = s[1]; // last control point\n\n          cpy = s[2];\n          x = s[3];\n          y = s[4];\n          break;\n\n        case 's':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(2 * x - cpx, 2 * y - cpy, s[1] + x, s[2] + y, s[3] + x, s[4] + y);\n          cpx = s[1] + x; // last control point\n\n          cpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          break;\n\n        case 'Q':\n          qcpx = s[1]; // last control point\n\n          qcpy = s[2];\n          x = s[3];\n          y = s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 'q':\n          qcpx = s[1] + x; // last control point\n\n          qcpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 'T':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n\n          qcpx = 2 * x - qcpx; // last control point\n\n          qcpy = 2 * y - qcpy;\n          x = s[1];\n          y = s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 't':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n\n          qcpx = 2 * x - qcpx; // last control point\n\n          qcpy = 2 * y - qcpy;\n          x += s[1];\n          y += s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 'z':\n        case 'Z':\n          x = startPoint.x;\n          y = startPoint.y;\n          startPoint = undefined;\n          canvas.closePath();\n          break;\n\n        case 'AC':\n          // arc\n          x = s[1];\n          y = s[2];\n          r = s[3];\n          startAngle = s[4];\n          endAngle = s[5];\n          ccw = s[6];\n          canvas.arc(x, y, r, startAngle, endAngle, ccw);\n          break;\n\n        case 'AT':\n          // arcTo\n          x1 = s[1];\n          y1 = s[2];\n          x = s[3];\n          y = s[4];\n          r = s[5];\n          canvas.arcTo(x1, y1, x, y, r);\n          break;\n\n        case 'E':\n          // ellipse\n          x = s[1];\n          y = s[2];\n          rx = s[3];\n          ry = s[4];\n          angle = s[5];\n          startAngle = s[6];\n          endAngle = s[7];\n          ccw = s[8];\n          canvas.save();\n          canvas.translate(x, y);\n          canvas.rotate(angle);\n          canvas.scale(rx, ry);\n          canvas.arc(0, 0, 1, startAngle, endAngle, ccw);\n          canvas.restore();\n          break;\n\n        case 'R':\n          // rect\n          x = s[1];\n          y = s[2];\n          w = s[3];\n          h = s[4];\n          startPoint = {\n            x: x,\n            y: y\n          };\n          canvas.rect(x, y, w, h);\n          break;\n\n      }\n\n      currentPoint.x = x;\n      currentPoint.y = y;\n    }\n  }\n\n  window.CanvasRenderingContext2D.prototype.fill = function fill() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var fillRule = 'nonzero';\n\n    if (args.length === 0 || args.length === 1 && typeof args[0] === 'string') {\n      cFill.apply(this, args);\n      return;\n    }\n\n    if (arguments.length === 2) {\n      fillRule = args[1];\n    }\n\n    var path = args[0];\n    buildPath(this, path.segments);\n    cFill.call(this, fillRule);\n  };\n\n  window.CanvasRenderingContext2D.prototype.stroke = function stroke(path) {\n    if (!path) {\n      cStroke.call(this);\n      return;\n    }\n\n    buildPath(this, path.segments);\n    cStroke.call(this);\n  };\n\n  window.Path2D = Path2D;\n}\n\nvar path2dPolyfill = polyFillPath2D;\n\nif (typeof window !== 'undefined') {\n  path2dPolyfill(window);\n}\n\nvar src = {\n  path2dPolyfill: path2dPolyfill,\n  parsePath: parsePath\n};\nvar src_1 = src.path2dPolyfill;\nvar src_2 = src.parsePath;\n\nexport default src;\nexport { src_2 as parsePath, src_1 as path2dPolyfill };\n//# sourceMappingURL=index.esm.js.map\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","export default { version: '0.34.0' };\n","/**\n * Initilize a new dock configuration\n * @private\n * @param {object} [settings] - Settings object\n * @returns {object} A dock configuration instance\n * @example\n * let instance = dockConfig({\n *  dock: 'left',\n *  displayOrder: 2,\n *  prioOrder: 1,\n *  preferredSize: 33,\n *  minimumLayoutMode: 'L',\n *  show: true\n * });\n */\nfunction dockConfig(settings = {}, callbackContext = {}) {\n  let {\n    dock = 'center',\n    displayOrder = 0,\n    prioOrder = 0,\n    preferredSize = 0,\n    minimumLayoutMode,\n    show = true,\n  } = settings;\n\n  // avoid empty string dock\n  dock = dock || 'center';\n\n  /**\n   * @private\n   */\n  return {\n    /**\n     * Returns the preferred size of a component.\n     * The return value of the function can either be a number representing the required size in the dock direction\n     * or an object with a `size` and `edgeBleed` property.\n     * @param {object} [inner]\n     * @param {object} [outer]\n     * @returns {number|object} Returns the computed preferred size\n     * @example\n     * dockConfig.computePreferredSize(() => 150); // Require a size of 150 in the dock direction\n     *\n     * dockConfig.computePreferredSize(() => ({\n     *  size: 150,\n     *  edgeBleed: {\n     *    left: 50,\n     *    right: 50\n     *  }\n     * })); // Require a size of 150 in the dock direction and a bleed size of 50 to the left and right dock direction\n     */\n    computePreferredSize({ inner, outer }) {\n      if (typeof preferredSize === 'function') {\n        return preferredSize({ inner, outer, dock: this.dock() }, callbackContext);\n      }\n      return preferredSize;\n    },\n\n    /**\n     * Set the dock direction, supported values are left | right | top | bottom. Any other value will be interpreted as center dock.\n     * @param {string} [val=''] - Dock direction\n     * @returns {this} The current context\n     * @example\n     * dockConfig.dock('left');\n     */\n    dock(val) {\n      if (typeof val !== 'undefined') {\n        dock = val;\n        return this;\n      }\n      return typeof dock === 'function' ? dock(callbackContext) : dock;\n    },\n\n    /**\n     * The `displayOrder` property is used by the layout engine to lay out components.\n     * Components are interpreted in the ascending order of the `displayOrder` value. The layout engine apply the value in two ways,\n     * the first is the order in which components are rendererd. The second is the area components are laid out in\n     * when they have a direction, i.e. docked to either top, bottom, left or right.\n     *\n     * If docked at the same area, the component with a higher `displayOrder` will be rendered\n     * on top of the component with a lower `displayOrder`. It can be seen as defining a z-index.\n     * A lower `displayOrder` also means that a component will be laid out first in a given direction,\n     * i.e. laid out closer to the central area (non-directional area) then a component with a higher `displayOrder`.\n     * It can in this case be seen as the x-index or y-index.\n     * @param {number} [val=0] - The display order\n     * @returns {this|number} The current context or display order\n     * @example\n     * dockConfig.displayOrder(99);\n     */\n    displayOrder(val) {\n      if (typeof val !== 'undefined') {\n        displayOrder = val;\n        return this;\n      }\n      return typeof displayOrder === 'function' ? displayOrder(callbackContext) : displayOrder;\n    },\n\n    /**\n     * The `prioOrder` property is used to define the order in which components are added to the layout engine,\n     * this is done before any components are laid out. When there is not enough space to add any more components\n     * to a given area, all components not all ready added, are then discarded. The `prioOrder` is interpreted\n     * in the ascending order. Such that a lower value is added to the layout engine first.\n     * @param {number} [val=0] - The prio order\n     * @returns {this|number} The current context or prio order\n     * @example\n     * dockConfig.prioOrder(-1);\n     */\n    prioOrder(val) {\n      if (typeof val !== 'undefined') {\n        prioOrder = val;\n        return this;\n      }\n      return typeof prioOrder === 'function' ? prioOrder(callbackContext) : prioOrder;\n    },\n\n    /**\n     * Ger or set the minimumLayoutMode\n     * @param {string|object} [val] - The minimum layout mode\n     * @returns {string|object|this} If no parameter is passed the current context is returned, else the current layout mode.\n     * @example\n     * dockConfig.minimumLayoutMode('L');\n     * dockConfig.minimumLayoutMode({ width: 'S', height: 'L' });\n     */\n    minimumLayoutMode(val) {\n      if (typeof val !== 'undefined') {\n        minimumLayoutMode = val;\n        return this;\n      }\n      return typeof minimumLayoutMode === 'function' ? minimumLayoutMode(callbackContext) : minimumLayoutMode;\n    },\n\n    /**\n     * Set the component visibility. If false the component is not added to the layout engine.\n     * @param {boolean} [val=true] - Toggle visibility\n     * @returns {this|boolean} The current context or show\n     */\n    show(val) {\n      if (typeof val !== 'undefined') {\n        show = val;\n        return this;\n      }\n      return typeof show === 'function' ? show(callbackContext) : show;\n    },\n  };\n}\n\nexport default dockConfig;\n","import extend from 'extend';\n\nfunction roundRect(rect) {\n  rect.x = Math.floor(rect.x);\n  rect.y = Math.floor(rect.y);\n  rect.width = Math.floor(rect.width);\n  rect.height = Math.floor(rect.height);\n}\n\nexport function resolveContainerRects(rect, settings) {\n  const containerRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n  const logicalContainerRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n\n  // Check input object for size\n  containerRect.width = rect.width || 0;\n  containerRect.height = rect.height || 0;\n  if (typeof settings.size !== 'undefined') {\n    containerRect.width = isNaN(settings.size.width) ? containerRect.width : settings.size.width;\n    containerRect.height = isNaN(settings.size.height) ? containerRect.height : settings.size.height;\n  }\n\n  if (typeof settings.logicalSize !== 'undefined') {\n    logicalContainerRect.width = isNaN(settings.logicalSize.width) ? containerRect.width : settings.logicalSize.width;\n    logicalContainerRect.height = isNaN(settings.logicalSize.height)\n      ? containerRect.height\n      : settings.logicalSize.height;\n    logicalContainerRect.align = isNaN(settings.logicalSize.align)\n      ? 0.5\n      : Math.min(Math.max(settings.logicalSize.align, 0), 1);\n    logicalContainerRect.preserveAspectRatio = settings.logicalSize.preserveAspectRatio;\n  } else {\n    logicalContainerRect.width = containerRect.width;\n    logicalContainerRect.height = containerRect.height;\n    logicalContainerRect.preserveAspectRatio = false;\n  }\n\n  roundRect(logicalContainerRect);\n  roundRect(containerRect);\n\n  return { logicalContainerRect, containerRect };\n}\n\nexport function resolveSettings(s) {\n  const settings = {\n    center: {\n      minWidthRatio: 0.5,\n      minHeightRatio: 0.5,\n      minWidth: 0,\n      minHeight: 0,\n    },\n  };\n\n  extend(true, settings, s);\n\n  settings.center.minWidthRatio = Math.min(Math.max(settings.center.minWidthRatio, 0), 1); // Only accept value between 0-1\n  settings.center.minHeightRatio = Math.min(Math.max(settings.center.minHeightRatio, 0), 1); // Only accept value between 0-1\n  settings.center.minWidth = Math.max(settings.center.minWidth, 0); // Consider <= 0 to be falsy and fallback to ratio\n  settings.center.minHeight = Math.max(settings.center.minHeight, 0); // Consider <= 0 to be falsy and fallback to ratio\n\n  return settings;\n}\n","export function isNumber(v) {\n  return typeof v === 'number' && !isNaN(v);\n}\n\nexport function notNumber(value) {\n  return typeof value !== 'number' || isNaN(value);\n}\n","import { isNumber } from '../utils/is-number';\n\nexport function getMinMax(points) {\n  const num = points.length;\n  let xMin = NaN;\n  let xMax = NaN;\n  let yMin = NaN;\n  let yMax = NaN;\n\n  for (let i = 0; i < num; i++) {\n    xMin = isNaN(xMin) ? points[i].x : Math.min(xMin, points[i].x);\n    xMax = isNaN(xMax) ? points[i].x : Math.max(xMax, points[i].x);\n    yMin = isNaN(yMin) ? points[i].y : Math.min(yMin, points[i].y);\n    yMax = isNaN(yMax) ? points[i].y : Math.max(yMax, points[i].y);\n  }\n  return [xMin, yMin, xMax, yMax];\n}\n\n/**\n * @ignore\n * @param {oject} line\n * @returns {point[]} Array of points\n */\nexport function lineToPoints(line) {\n  const x1 = line.x1 || 0;\n  const y1 = line.y1 || 0;\n  const x2 = line.x2 || 0;\n  const y2 = line.y2 || 0;\n  return [\n    { x: x1, y: y1 },\n    { x: x2, y: y2 },\n  ];\n}\n\n/**\n * @ignore\n * @param {oject} rect\n * @returns {point[]} Array of points\n */\nexport function rectToPoints(rect) {\n  return [\n    { x: rect.x, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y + rect.height },\n    { x: rect.x, y: rect.y + rect.height },\n  ];\n}\n\nexport function pointsToRect(points) {\n  const [xMin, yMin, xMax, yMax] = getMinMax(points);\n\n  return {\n    x: xMin,\n    y: yMin,\n    width: xMax - xMin,\n    height: yMax - yMin,\n  };\n}\n\nexport function pointsToCircle(points, r) {\n  return {\n    cx: points[0].x,\n    cy: points[0].y,\n    r,\n  };\n}\n\nexport function pointsToLine(points) {\n  return {\n    x1: points[0].x,\n    y1: points[0].y,\n    x2: points[1].x,\n    y2: points[1].y,\n  };\n}\n\nexport function pointToArray(p) {\n  return [p.x, p.y];\n}\n\nexport function arrayToPoint(ary) {\n  return { x: ary[0], y: ary[1] };\n}\n\n/**\n * @ignore\n * @param {oject}\n * @returns {string} Type of geometry\n */\nexport function getShapeType(shape) {\n  const {\n    x,\n    y, // Point\n    width,\n    height, // Rect\n    x1,\n    x2,\n    y1,\n    y2, // Line\n    cx,\n    cy,\n    r, // Circle\n    vertices, // Polygon or GeoPolygon\n  } = shape || {};\n\n  if (isNumber(cx) && isNumber(cy) && isNumber(r)) {\n    return 'circle';\n  }\n  if (isNumber(x1) && isNumber(x2) && isNumber(y1) && isNumber(y2)) {\n    return 'line';\n  }\n  if (isNumber(x) && isNumber(y) && isNumber(width) && isNumber(height)) {\n    return 'rect';\n  }\n  if (isNumber(x) && isNumber(y)) {\n    return 'point';\n  }\n  if (Array.isArray(vertices)) {\n    return vertices.every((item) => Array.isArray(item)) ? 'geopolygon' : 'polygon';\n  }\n  return null;\n}\n\nexport function expandRect(size, rect) {\n  return {\n    x: rect.x - size,\n    y: rect.y - size,\n    width: rect.width + size,\n    height: rect.height + size,\n  };\n}\n","export default function createRect(x, y, width, height, margin) {\n  return {\n    x: isNaN(x) ? 0 : x,\n    y: isNaN(x) ? 0 : y,\n    width: isNaN(x) ? 0 : width,\n    height: isNaN(x) ? 0 : height,\n    margin: isNaN(margin) ? 0 : margin,\n  };\n}\n","import extend from 'extend';\nimport dockConfig from './config';\nimport { resolveContainerRects, resolveSettings } from './settings-resolver';\nimport { rectToPoints, pointsToRect } from '../../geometry/util';\nimport createRect from './create-rect';\n\nfunction cacheSize(c, reducedRect, layoutRect) {\n  if (typeof c.cachedSize === 'undefined') {\n    const dock = c.config.dock();\n    let size = c.comp.preferredSize({ inner: reducedRect, outer: layoutRect, dock });\n    // backwards compatibility\n    if (!isNaN(size)) {\n      size = { width: size, height: size };\n    } else if (size && !isNaN(size.size)) {\n      size.width = size.size;\n      size.height = size.size;\n    }\n\n    let relevantSize;\n    if (dock === 'top' || dock === 'bottom') {\n      relevantSize = size.height;\n    } else if (dock === 'right' || dock === 'left') {\n      relevantSize = size.width;\n    } else {\n      relevantSize = Math.max(size.width, size.height);\n    }\n    c.cachedSize = Math.ceil(relevantSize);\n    c.edgeBleed = size.edgeBleed || 0;\n  }\n  return c.cachedSize;\n}\n\nfunction validateReduceRect(rect, reducedRect, settings) {\n  // Absolute value for width/height should have predence over relative value\n  const minReduceWidth =\n    Math.min(settings.center.minWidth, rect.width) || Math.max(rect.width * settings.center.minWidthRatio, 1);\n  const minReduceHeight =\n    Math.min(settings.center.minHeight, rect.height) || Math.max(rect.height * settings.center.minHeightRatio, 1);\n  return reducedRect.width >= minReduceWidth && reducedRect.height >= minReduceHeight;\n}\n\nfunction reduceDocRect(reducedRect, c) {\n  switch (c.config.dock()) {\n    case 'top':\n      reducedRect.y += c.cachedSize;\n      reducedRect.height -= c.cachedSize;\n      break;\n    case 'bottom':\n      reducedRect.height -= c.cachedSize;\n      break;\n    case 'left':\n      reducedRect.x += c.cachedSize;\n      reducedRect.width -= c.cachedSize;\n      break;\n    case 'right':\n      reducedRect.width -= c.cachedSize;\n      break;\n    default:\n  }\n}\n\nfunction addEdgeBleed(currentEdgeBleed, c) {\n  const edgeBleed = c.edgeBleed;\n  if (!edgeBleed) {\n    return;\n  }\n  currentEdgeBleed.left = Math.max(currentEdgeBleed.left, edgeBleed.left || 0);\n  currentEdgeBleed.right = Math.max(currentEdgeBleed.right, edgeBleed.right || 0);\n  currentEdgeBleed.top = Math.max(currentEdgeBleed.top, edgeBleed.top || 0);\n  currentEdgeBleed.bottom = Math.max(currentEdgeBleed.bottom, edgeBleed.bottom || 0);\n}\n\nfunction reduceEdgeBleed(layoutRect, reducedRect, edgeBleed) {\n  if (reducedRect.x < edgeBleed.left) {\n    reducedRect.width -= edgeBleed.left - reducedRect.x;\n    reducedRect.x = edgeBleed.left;\n  }\n  const reducedRectRightBoundary = layoutRect.width - (reducedRect.x + reducedRect.width);\n  if (reducedRectRightBoundary < edgeBleed.right) {\n    reducedRect.width -= edgeBleed.right - reducedRectRightBoundary;\n  }\n  if (reducedRect.y < edgeBleed.top) {\n    reducedRect.height -= edgeBleed.top - reducedRect.y;\n    reducedRect.y = edgeBleed.top;\n  }\n  const reducedRectBottomBoundary = layoutRect.height - (reducedRect.y + reducedRect.height);\n  if (reducedRectBottomBoundary < edgeBleed.bottom) {\n    reducedRect.height -= edgeBleed.bottom - reducedRectBottomBoundary;\n  }\n}\n\nfunction reduceSingleLayoutRect(layoutRect, reducedRect, edgeBleed, c, settings) {\n  const newReduceRect = extend({}, reducedRect);\n  const newEdgeBleed = extend({}, edgeBleed);\n  reduceDocRect(newReduceRect, c);\n  addEdgeBleed(newEdgeBleed, c);\n  reduceEdgeBleed(layoutRect, newReduceRect, newEdgeBleed);\n\n  const isValid = validateReduceRect(layoutRect, newReduceRect, settings);\n  if (!isValid) {\n    return false;\n  }\n\n  reduceDocRect(reducedRect, c);\n  addEdgeBleed(edgeBleed, c);\n  return true;\n}\n\n/**\n * Updates the visible and hidden components based on components that are docked to other components.\n * For example, assume a component called myRect:\n * {\n *  key: 'myRect',\n *  type: 'rect',\n *  dock: 'bottom'\n * }\n * and a component called myLine:\n * {\n *  key: 'myLine',\n *  type: 'line',\n *  dock: '@myRect'\n * }\n * if the layout engine decides to hide myRect, then myLine should be hidden as well.\n * @param {Array} visible - Components to be decided if they should be hidden or not.\n * @param {Array} hidden - Components that are already hidden.\n * @returns {Object} containing the new visible components and additional components to be hidden.\n * @ignore\n */\nfunction filterReferencedDocks(visible, hidden) {\n  if (hidden.length === 0) {\n    return;\n  }\n\n  for (let i = 0; i < visible.length; ++i) {\n    let v = visible[i];\n    if (v.referencedDocks.length) {\n      const isAllHidden = v.referencedDocks.every((refDock) => hidden.some((h) => h.key === refDock));\n      if (isAllHidden) {\n        hidden.push(visible.splice(i, 1)[0]);\n      }\n    }\n  }\n}\n\nfunction reduceLayoutRect({ layoutRect, visible, hidden, settings }) {\n  const reducedRect = createRect(layoutRect.x, layoutRect.y, layoutRect.width, layoutRect.height);\n  const edgeBleed = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n  };\n\n  const sortedComponents = visible.slice();\n  sortedComponents.sort((a, b) => a.config.prioOrder() - b.config.prioOrder()); // lower prioOrder will have higher prio\n\n  for (let i = 0; i < sortedComponents.length; ++i) {\n    const c = sortedComponents[i];\n    cacheSize(c, reducedRect, layoutRect);\n\n    if (!reduceSingleLayoutRect(layoutRect, reducedRect, edgeBleed, c, settings)) {\n      hidden.push(sortedComponents.splice(i, 1)[0]);\n      --i;\n    }\n  }\n\n  filterReferencedDocks(visible, hidden);\n\n  const filteredUnsortedComps = visible.filter((c) => sortedComponents.indexOf(c) !== -1);\n  visible.length = 0;\n  visible.push(...filteredUnsortedComps);\n  reduceEdgeBleed(layoutRect, reducedRect, edgeBleed);\n  return reducedRect;\n}\n\nfunction computeRect(rect) {\n  return {\n    x: rect.margin.left + rect.x * rect.scaleRatio.x,\n    y: rect.margin.top + rect.y * rect.scaleRatio.y,\n    width: rect.width * rect.scaleRatio.x,\n    height: rect.height * rect.scaleRatio.y,\n  };\n}\n\nfunction appendScaleRatio(rect, outerRect, layoutRect, containerRect) {\n  const scaleRatio = {\n    x: containerRect.width / layoutRect.width,\n    y: containerRect.height / layoutRect.height,\n  };\n  const margin = {\n    left: 0,\n    top: 0,\n  };\n\n  if (layoutRect.preserveAspectRatio) {\n    const xLessThenY = scaleRatio.x < scaleRatio.y;\n    // To preserve the aspect ratio, take the smallest ratio and apply in both directions to \"meet\" the size of the container\n    const minRatio = Math.min(scaleRatio.x, scaleRatio.y);\n    scaleRatio.x = minRatio;\n    scaleRatio.y = minRatio;\n    const area = xLessThenY ? 'height' : 'width';\n    const spread = (containerRect[area] - layoutRect[area] * scaleRatio.x) * layoutRect.align;\n    margin.left = xLessThenY ? 0 : spread;\n    margin.top = xLessThenY ? spread : 0;\n  }\n\n  rect.scaleRatio = scaleRatio;\n  rect.margin = margin;\n  outerRect.scaleRatio = scaleRatio;\n  outerRect.margin = margin;\n  layoutRect.scaleRatio = scaleRatio;\n  layoutRect.margin = margin;\n}\n\nfunction boundingBox(rects) {\n  const points = [].concat(...rects.map(rectToPoints));\n  return pointsToRect(points);\n}\n\nfunction positionComponents({ visible, layoutRect, reducedRect, containerRect, translation }) {\n  const vRect = createRect(reducedRect.x, reducedRect.y, reducedRect.width, reducedRect.height);\n  const hRect = createRect(reducedRect.x, reducedRect.y, reducedRect.width, reducedRect.height);\n\n  const referencedComponents = {};\n  const referenceArray = visible.slice();\n  const elementOrder = referenceArray.slice().sort((a, b) => a.config.displayOrder() - b.config.displayOrder());\n  visible\n    .sort((a, b) => {\n      if (b.referencedDocks.length > 0) {\n        return -1;\n      }\n      if (a.referencedDocks.length > 0) {\n        return 1;\n      }\n      const diff = a.config.displayOrder() - b.config.displayOrder();\n      if (diff === 0) {\n        return referenceArray.indexOf(a) - referenceArray.indexOf(b);\n      }\n      return diff;\n    })\n    .forEach((c) => {\n      let outerRect = {};\n      let rect = {};\n      const d = c.config.dock();\n      switch (d) {\n        case 'top':\n          outerRect.height = rect.height = c.cachedSize;\n          outerRect.width = layoutRect.width;\n          rect.width = vRect.width;\n          outerRect.x = layoutRect.x;\n          rect.x = vRect.x;\n          outerRect.y = rect.y = vRect.y - c.cachedSize;\n\n          vRect.y -= c.cachedSize;\n          vRect.height += c.cachedSize;\n          break;\n        case 'bottom':\n          outerRect.x = layoutRect.x;\n          rect.x = vRect.x;\n          outerRect.y = rect.y = vRect.y + vRect.height;\n          outerRect.width = layoutRect.width;\n          rect.width = vRect.width;\n          outerRect.height = rect.height = c.cachedSize;\n\n          vRect.height += c.cachedSize;\n          break;\n        case 'left':\n          outerRect.x = rect.x = hRect.x - c.cachedSize;\n          outerRect.y = layoutRect.y;\n          rect.y = hRect.y;\n          outerRect.width = rect.width = c.cachedSize;\n          outerRect.height = layoutRect.height;\n          rect.height = hRect.height;\n\n          hRect.x -= c.cachedSize;\n          hRect.width += c.cachedSize;\n          break;\n        case 'right':\n          outerRect.x = rect.x = hRect.x + hRect.width;\n          outerRect.y = layoutRect.y;\n          rect.y = hRect.y;\n          outerRect.width = rect.width = c.cachedSize;\n          outerRect.height = layoutRect.height;\n          rect.height = hRect.height;\n\n          hRect.width += c.cachedSize;\n          break;\n        case 'center':\n          outerRect.x = rect.x = reducedRect.x;\n          outerRect.y = rect.y = reducedRect.y;\n          outerRect.width = rect.width = reducedRect.width;\n          outerRect.height = rect.height = reducedRect.height;\n          break;\n        default:\n          if (c.referencedDocks.length > 0) {\n            const refs = c.referencedDocks.map((ref) => referencedComponents[ref]).filter((ref) => !!ref);\n            if (refs.length > 0) {\n              outerRect = boundingBox(refs.map((ref) => ref.outerRect));\n              rect = boundingBox(refs.map((ref) => ref.r));\n            }\n          }\n          break;\n      }\n      if (c.key) {\n        referencedComponents[c.key] = {\n          // store the size of this component\n          r: rect,\n          outerRect,\n        };\n      }\n      appendScaleRatio(rect, outerRect, layoutRect, containerRect);\n      rect.edgeBleed = c.edgeBleed;\n      rect.computed = computeRect(rect);\n      outerRect.edgeBleed = c.edgeBleed;\n      outerRect.computed = computeRect(outerRect);\n      rect.x += translation.x;\n      rect.y += translation.y;\n      outerRect.x += translation.x;\n      outerRect.y += translation.y;\n      c.comp.resize(rect, outerRect);\n      c.cachedSize = undefined;\n      c.edgeBleed = undefined;\n    });\n  return visible.map((c) => elementOrder.indexOf(c));\n}\n\nfunction checkShowSettings(strategySettings, dockSettings, logicalContainerRect) {\n  const layoutModes = strategySettings.layoutModes || {};\n  const minimumLayoutMode = dockSettings.minimumLayoutMode();\n  let show = dockSettings.show();\n  if (show && typeof minimumLayoutMode === 'object') {\n    show =\n      layoutModes[minimumLayoutMode.width] &&\n      layoutModes[minimumLayoutMode.height] &&\n      logicalContainerRect.width >= layoutModes[minimumLayoutMode.width].width &&\n      logicalContainerRect.height >= layoutModes[minimumLayoutMode.height].height;\n  } else if (show && minimumLayoutMode !== undefined) {\n    show =\n      layoutModes[minimumLayoutMode] &&\n      logicalContainerRect.width >= layoutModes[minimumLayoutMode].width &&\n      logicalContainerRect.height >= layoutModes[minimumLayoutMode].height;\n  }\n  return show;\n}\n\nfunction validateComponent(component) {\n  if (!component.settings && !component.settings) {\n    throw new Error('Invalid component settings');\n  }\n  if (!component.resize || typeof component.resize !== 'function') {\n    throw new Error('Component is missing resize function');\n  }\n  if (!component.dockConfig && !component.preferredSize) {\n    throw new Error('Component is missing preferredSize function');\n  }\n}\n\nfunction filterComponents(components, settings, rect) {\n  const visible = [];\n  const hidden = [];\n  // check show settings\n  for (let i = 0; i < components.length; ++i) {\n    const comp = components[i];\n    validateComponent(comp);\n    // backwards compatibility\n    let config;\n    if (comp.instance) {\n      config = comp.instance.dockConfig();\n    } else {\n      config = dockConfig(comp.settings.layout);\n    }\n    const key = comp.settings.key;\n    const d = config.dock();\n    const referencedDocks = /@/.test(d) ? d.split(',').map((s) => s.replace(/^\\s*@/, '')) : [];\n    if (checkShowSettings(settings, config, rect)) {\n      visible.push({\n        comp,\n        key,\n        config,\n        referencedDocks,\n      });\n    } else {\n      hidden.push({\n        comp,\n        key,\n        config,\n        referencedDocks,\n      });\n    }\n  }\n  return [visible, hidden];\n}\n\n/**\n * @typedef {object} dock-layout-settings\n * @property {object} [logicalSize] - Logical size\n * @property {number} [logicalSize.width] - Width in pixels\n * @property {number} [logicalSize.height] - Height in pixels\n * @property {boolean} [logicalSize.preserveAspectRatio=false] - If true, takes the smallest ratio of width/height between logical and physical size ( physical / logical )\n * @property {number} [logicalSize.align=0.5] - Normalized value between 0-1. Defines how the space around the scaled axis is spread in the container, with 0.5 meaning the spread is equal on both sides. Only applicable if preserveAspectRatio is set to true\n * @property {object} [center] - Define how much space the center dock area requires\n * @property {number} [center.minWidthRatio=0.5] - Value between 0 and 1\n * @property {number} [center.minHeightRatio=0.5] - Value between 0 and 1\n * @property {number} [center.minWidth] - Width in pixels\n * @property {number} [center.minHeight] - Height in pixels\n * @property {object<string, {width: number, height: number}>} [layoutModes] Dictionary with named sizes\n */\nfunction dockLayout(initialSettings) {\n  let settings = resolveSettings(initialSettings);\n\n  const docker = {};\n\n  docker.layout = function layout(rect, components = []) {\n    if (!rect || isNaN(rect.x) || isNaN(rect.y) || isNaN(rect.width) || isNaN(rect.height)) {\n      throw new Error('Invalid rect');\n    }\n    if (!components.length) {\n      return { visible: [], hidden: [] };\n    }\n\n    const { logicalContainerRect, containerRect } = resolveContainerRects(rect, settings);\n\n    const [visible, hidden] = filterComponents(components, settings, logicalContainerRect);\n\n    const reducedRect = reduceLayoutRect({\n      layoutRect: logicalContainerRect,\n      visible,\n      hidden,\n      settings,\n    });\n\n    const translation = { x: rect.x, y: rect.y };\n\n    const order = positionComponents({\n      visible,\n      layoutRect: logicalContainerRect,\n      reducedRect,\n      containerRect,\n      translation,\n    });\n    hidden.forEach((c) => {\n      c.comp.visible = false;\n      // set empty rects on hidden components\n      const r = createRect();\n      c.comp.resize(r, r);\n    });\n    return { visible: visible.map((v) => v.comp), hidden: hidden.map((h) => h.comp), order };\n  };\n\n  docker.settings = function settingsFn(s) {\n    settings = resolveSettings(s);\n  };\n\n  return docker;\n}\n\nexport default dockLayout;\n","/* global navigator */\n\nexport function detectPointerSupport(e) {\n  if ('onpointerdown' in e && 'onpointerup' in e) {\n    return true;\n  }\n  return false;\n}\n\nexport function detectTouchSupport(e) {\n  if (('ontouchstart' in e && 'ontouchend' in e) || navigator.maxTouchPoints > 1) {\n    return true;\n  }\n  return false;\n}\n\nexport function isTouchEvent(e) {\n  return !!e.changedTouches;\n}\n\nexport function isValidTapEvent(e, eventInfo) {\n  const isTouch = isTouchEvent(e);\n  const ee = isTouch ? e.changedTouches[0] : e;\n  const dt = Date.now() - eventInfo.time;\n  const dx = isNaN(eventInfo.x) ? 0 : Math.abs(ee.clientX - eventInfo.x);\n  const dy = isNaN(eventInfo.y) ? 0 : Math.abs(ee.clientY - eventInfo.y);\n\n  return (e.button === 0 || isTouch) && !eventInfo.multiTouch && dx <= 12 && dy <= 12 && dt <= 300;\n}\n","// import types from './types';\n\n/**\n * @ignore\n * @param {Array<data-source>} dataSources\n * @param {any} { logger }\n * @returns {function}\n */\nexport default function datasets(dataSources, { types, logger }) {\n  const data = {};\n\n  const sets = [];\n  if (!Array.isArray(dataSources)) {\n    logger.warn('Deprecated: \"data-source\" configuration\"');\n    sets.push(dataSources);\n  } else {\n    sets.push(...dataSources);\n  }\n\n  sets.forEach((d, i) => {\n    let datasetFactory = types(d.type);\n    if (datasetFactory) {\n      let key = d.key;\n      if (typeof d.key === 'undefined') {\n        logger.warn(`Missing key for dataset. Using index '${i}' as key.`);\n        key = i;\n      }\n      let dataset = datasetFactory({\n        key,\n        data: d.data,\n        config: d.config,\n      });\n      data[key] = dataset;\n    }\n  });\n\n  /**\n   * Returns the `dataset` which has `key` as identifier\n   * @ignore\n   * @param {string} key - The dataset identifier\n   * @returns {dataset}\n   */\n  const fn = (key) => {\n    if (key) {\n      return data[key];\n    }\n    return data[Object.keys(data)[0]];\n  };\n  return fn;\n}\n\n/**\n * @typedef {object} data-source\n * @property {string} key - Unique identifier for this data source\n * @property {string} type - The dataset type\n * @property {any} data\n */\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","export var slice = Array.prototype.slice;\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport offsetNone from \"./offset/none.js\";\nimport orderNone from \"./order/none.js\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var kz = keys.apply(this, arguments),\n        i,\n        m = data.length,\n        n = kz.length,\n        sz = new Array(n),\n        oz;\n\n    for (i = 0; i < n; ++i) {\n      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {\n        si[j] = sij = [0, +value(data[j], ki, j, data)];\n        sij.data = data[j];\n      }\n      si.key = ki;\n    }\n\n    for (i = 0, oz = order(sz); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = yp;\n      }\n    }\n  }\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var peaks = series.map(peak);\n  return none(series).sort(function(a, b) { return peaks[a] - peaks[b]; });\n}\n\nfunction peak(series) {\n  var i = -1, j = 0, n = series.length, vi, vj = -Infinity;\n  while (++i < n) if ((vi = +series[i][1]) > vj) vj = vi, j = i;\n  return j;\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","import appearance from \"./appearance.js\";\nimport {sum} from \"./ascending.js\";\n\nexport default function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = appearance(series),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  return none(series).reverse();\n}\n","export default function registryFactory(parentRegistry, registerName = 'unspecified', logger) {\n  let defaultValue;\n  const reg = {};\n  const parent = parentRegistry || {\n    get: () => undefined,\n    has: () => false,\n    default: () => undefined,\n  };\n\n  defaultValue = parent.default();\n\n  /**\n   * @private\n   * @param {string} key\n   * @param {any} value\n   * @throws {TypeError} Key must be a non-empty string\n   * @returns {boolean} False if the given key already exists, true otherwise\n   * @example\n   * var r = registry();\n   * r.add( \"marker\", function(args) {\n   *   return new markers[args.type](args);\n   * });\n   *\n   */\n  function add(key, value) {\n    if (!key || typeof key !== 'string') {\n      throw new TypeError('Invalid argument: key must be a non-empty string');\n    }\n    if (key in reg) {\n      return false;\n    }\n    reg[key] = value;\n    return true;\n  }\n\n  function get(key) {\n    return reg[key] || parent.get(key);\n  }\n\n  function has(key) {\n    return !!reg[key] || parent.has(key);\n  }\n\n  function remove(key) {\n    const d = reg[key];\n    delete reg[key];\n    return d;\n  }\n\n  function getKeys() {\n    return Object.keys(reg);\n  }\n\n  function getValues() {\n    return Object.keys(reg).map((key) => reg[key]);\n  }\n\n  function deflt(d) {\n    if (typeof d !== 'undefined') {\n      defaultValue = d;\n    }\n    return defaultValue;\n  }\n\n  /**\n   * @alias registry\n   * @interface\n   * @param {string} key\n   * @param {any} value\n   */\n  function registry(key, value) {\n    if (typeof value !== 'undefined') {\n      return add(key, value);\n    }\n    const ret = get(key);\n    if (logger && typeof ret === 'undefined') {\n      logger.warn(`${key} does not exist in ${registerName} registry`);\n    }\n    return ret || get(defaultValue);\n  }\n\n  registry.add = add;\n  registry.get = get;\n  registry.has = has;\n  registry.remove = remove;\n  registry.getKeys = getKeys;\n  registry.getValues = getValues;\n  registry.default = deflt;\n  registry.register = add; // deprecated\n\n  return registry;\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import { formatLocale } from 'd3-format';\n\nexport default function formatter(pattern, thousand, decimal) {\n  let locale, d3format;\n\n  /**\n   * Format a value according to the specified pattern created at construct\n   * @private\n   *\n   * @param  {Number} value   The number to be formatted\n   * @return {String}         [description]\n   */\n  function format(value) {\n    return d3format(value);\n  }\n\n  /**\n   * Set the locale for the formatter\n   *\n   * @param  {Object} args   Locale object for formatting\n   * @return {Undefined}      Returns nothing\n   */\n  format.locale = function localeFn(settings) {\n    locale = formatLocale(settings);\n    d3format = locale.format(pattern);\n\n    return this;\n  };\n\n  /**\n   * Resets the formatter using format.locale\n   * @ignore\n   */\n  function reset() {\n    format.locale({\n      decimal: decimal || '.',\n      thousands: thousand || ',',\n      grouping: [3],\n      currency: ['$', ''],\n    });\n  }\n  reset();\n\n  /**\n   * Format a value according to a specific pattern\n   * that is not the one specified in the constructor\n   *\n   * @param  {String} p   Pattern\n   * @param  {Number} v   Value\n   * @param  {String} t   Thousand\n   * @param  {String} d   Decimal\n   * @return {String}     Formatted value\n   */\n  format.format = function formatFn(p, v, t, d) {\n    if (t || d) {\n      thousand = t;\n      decimal = d;\n      reset();\n    }\n    return locale.format(p)(v);\n  };\n\n  /**\n   * Change the pattern on existing formatter\n   *\n   * @param  {String} p     Pattern (optional)\n   * @return {String}       Returns the pattern\n   */\n  format.pattern = function patternFn(p) {\n    if (p) {\n      pattern = p;\n      d3format = locale.format(p);\n    }\n    return pattern;\n  };\n\n  return format;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import { timeFormatLocale } from 'd3-time-format';\n\nexport default function formatter(pattern) {\n  // eslint-disable-line import/prefer-default-export\n  let locale = timeFormatLocale({\n    dateTime: '%x, %X',\n    date: '%-m/%-d/%Y',\n    time: '%-I:%M:%S %p',\n    periods: ['AM', 'PM'],\n    days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    shortDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    months: [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December',\n    ],\n    shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  });\n\n  let d3format = locale.format(pattern);\n\n  /**\n   * Format a value according to the specified pattern created at construct\n   *\n   * @param  {Date} value   The number to be formatted\n   * @return {String}         [description]\n   * @private\n   */\n  function format(value) {\n    return d3format(value);\n  }\n\n  /**\n   * Format a value according to a specific pattern\n   * that is not the one specified in the constructor\n   *\n   * @param  {String} p   Pattern\n   * @param  {Date} v   Value\n   * @return {String}     Formatted value\n   */\n  format.format = function formatFn(p, v) {\n    return locale.format(p)(v);\n  };\n\n  /**\n   * Set the locale for the formatter\n   *\n   * @param  {Object} args   Locale object for formatting\n   * @return {Undefined}      Returns nothing\n   */\n  format.locale = function localeFn(...args) {\n    locale = timeFormatLocale(...args);\n    d3format = locale.format(pattern);\n\n    return this;\n  };\n\n  /**\n   * Parse a string to a date according to a pattern\n   *\n   * @param  {String} p   Pattern\n   * @param  {String} v   Value\n   * @return {Date}     Date\n   */\n  format.parse = function parse(p, v) {\n    return locale.parse(p)(v);\n  };\n\n  /**\n   * Returns a parser that parses strings to date according to the pattern\n   *\n   * @param  {String} p   Pattern\n   * @return {Function}   Parser\n   */\n  format.parsePattern = function parsePattern(p) {\n    return locale.parse(p);\n  };\n\n  return format;\n}\n","import registry from '../utils/registry';\n\nimport { numberFormat as d3NumberFormatter, timeFormat as d3TimeFormatter } from './d3';\n\nconst formatterRegistry = registry();\n\nformatterRegistry('d3-number', d3NumberFormatter);\nformatterRegistry('d3-time', d3TimeFormatter);\n\nexport { formatterRegistry as default };\n","/* eslint no-return-assign: 0 */\nimport formatterFn from '../formatter';\n\n// TODO - decide whether usage of .call() is appropriate when invoking accessors, if yes then arrow functions are not allowed!\n\nconst getFormatter = (data) => {\n  if (typeof data.formatter === 'function') {\n    return data.formatter();\n  }\n  const f = data.formatter || {};\n  return formatterFn(f.type || 'd3-number')(f.format || '');\n};\n\nconst accessors = {\n  id: (data) => `${data.source}/${data.key || data.title}`,\n  key: (data) => String(data.key || data.title),\n  tags: (data) => data.tags,\n  min: (data) => data.min,\n  max: (data) => data.max,\n  type: (data) => data.type,\n  title: (data) => String(data.title),\n  values: (data) => data.values,\n  value: (v) => v,\n  label: (v) => v,\n  formatter: (data) => getFormatter(data),\n};\n\n/**\n * Create a new field with default settings\n * @ignore\n * @return {field} Data field\n */\nexport default function field(\n  data,\n  {\n    id = accessors.id,\n    key = accessors.key,\n    min = accessors.min,\n    max = accessors.max,\n    type = accessors.type,\n    tags = accessors.tags,\n    title = accessors.title,\n    values = accessors.values,\n    value = accessors.value,\n    label = accessors.label,\n    formatter = accessors.formatter,\n  } = {}\n) {\n  /**\n   * @alias field\n   */\n  const f = {\n    /**\n     * Returns this field's id\n     * @returns {string}\n     */\n    id: () => id(data),\n\n    /**\n     * Returns this field's key\n     * @returns {string}\n     */\n    key: () => key(data),\n\n    /**\n     * Returns the input data\n     * @returns {any}\n     */\n    raw: () => data,\n    /**\n     * Returns the tags.\n     * @return {Array<string>}\n     */\n    tags: () => tags(data),\n\n    /**\n     * Returns this field's type: 'dimension' or 'measure'.\n     * @return {string}\n     */\n    type: () => type(data),\n\n    /**\n     * Returns the min value of this field.\n     * @return {number}\n     */\n    min: () => min(data),\n\n    /**\n     * Returns the max value of this field.\n     * @return {number}\n     */\n    max: () => max(data),\n\n    /**\n     * Returns this field's title.\n     * @return {string}\n     */\n    title: () => title(data),\n\n    /**\n     * Returns the values of this field.\n     * @return {Array<datum-extract>}\n     */\n    items: () => values(data),\n\n    /**\n     * Returns a formatter adapted to the content of this field.\n     */\n    formatter: () => formatter(data),\n\n    value,\n    label,\n  };\n\n  return f;\n}\n","import {\n  stack,\n  stackOrderAscending,\n  stackOrderInsideOut,\n  stackOrderNone,\n  stackOrderReverse,\n  stackOffsetDiverging,\n  stackOffsetNone,\n  stackOffsetSilhouette,\n  stackOffsetExpand,\n  stackOffsetWiggle,\n} from 'd3-shape';\nimport fieldFn from './field';\n\nconst OFFSETS = {\n  diverging: stackOffsetDiverging,\n  none: stackOffsetNone,\n  silhouette: stackOffsetSilhouette,\n  expand: stackOffsetExpand,\n  wiggle: stackOffsetWiggle,\n};\n\nconst ORDERS = {\n  ascending: stackOrderAscending,\n  insideout: stackOrderInsideOut,\n  none: stackOrderNone,\n  reverse: stackOrderReverse,\n};\n\nfunction stacked(data, config, ds) {\n  const stackIds = {};\n  const stackFn = config.stackKey;\n  const valueFn = config.value;\n  const startProp = config.startProp || 'start';\n  const endProp = config.endProp || 'end';\n  const offset = config.offset || 'none';\n  const order = config.order || 'none';\n  const valueRef = config.valueRef || '';\n\n  let maxStackCount = 0;\n\n  let valueFields = {};\n\n  for (let i = 0; i < data.items.length; i++) {\n    let p = data.items[i];\n    let sourceField = valueRef ? p[valueRef] : null;\n    if (sourceField && sourceField.source) {\n      let ff = `${sourceField.source.key || ''}/${sourceField.source.field}`;\n      if (!valueFields[ff]) {\n        valueFields[ff] = sourceField.source;\n      }\n    }\n    let sid = stackFn(p);\n    stackIds[sid] = stackIds[sid] || { items: [] };\n    stackIds[sid].items.push(p);\n\n    maxStackCount = Math.max(maxStackCount, stackIds[sid].items.length);\n  }\n\n  const keys = Array.apply(null, { length: maxStackCount }).map(Number.call, Number); // eslint-disable-line\n  const matrix = Object.keys(stackIds).map((sid) => stackIds[sid].items);\n\n  const d3Stack = stack()\n    .keys(keys)\n    .value((s, key) => (s[key] ? valueFn(s[key]) : 0))\n    .order(ORDERS[order])\n    .offset(OFFSETS[offset]);\n\n  let series = d3Stack(matrix);\n  let values = [];\n\n  for (let i = 0; i < series.length; i++) {\n    let serie = series[i];\n    for (let s = 0; s < serie.length; s++) {\n      let range = serie[s];\n      let item = serie[s].data[serie.key];\n      if (!item) {\n        continue;\n      }\n      item[startProp] = { value: range[0] };\n      item[endProp] = { value: range[1] };\n      values.push(range[0], range[1]);\n    }\n  }\n\n  let stackedFields = Object.keys(valueFields)\n    .map((f) => {\n      let dSource = ds(valueFields[f].key);\n      return dSource ? dSource.field(valueFields[f].field) : null;\n    })\n    .filter((f) => !!f);\n\n  const field = fieldFn({\n    title: stackedFields.map((f) => f.title()).join(', '),\n    min: Math.min(...values),\n    max: Math.max(...values),\n    type: 'measure',\n    formatter: stackedFields[0] ? stackedFields[0].formatter : undefined,\n  });\n  data.fields.push(field);\n}\n\nexport { stacked as default };\n","import stack from './stack';\n\nexport default function extract(dataConfig, data = {}, opts = {}) {\n  let extracted = {\n    // items: [],\n    // fields: [],\n    // source: null,\n    // value: null,\n    // label: null,\n    // children: null,\n    // root: null,\n    // graph: null\n  };\n\n  const logger = opts.logger;\n\n  if (Array.isArray(dataConfig)) {\n    // if data is an array, assume it's manual data input -> normalize\n    extracted.items = dataConfig.map((v) => ({ value: v, label: String(v) }));\n  } else if (dataConfig) {\n    if ('collection' in dataConfig) {\n      extracted = { ...data.collection(dataConfig.collection) };\n    } else {\n      const source = data.dataset ? data.dataset(dataConfig.source) : null;\n      let valueFn = dataConfig.value || ((d) => d);\n      let labelFn = dataConfig.label || ((d) => d);\n      if (dataConfig.groupBy || dataConfig.mapTo) {\n        // DEPRECATION\n        logger.warn('Deprecated \"data\" configuration', dataConfig);\n        extracted.items = [];\n      } else if (dataConfig.hierarchy) {\n        extracted.root = source.hierarchy ? source.hierarchy(dataConfig.hierarchy) : null;\n        extracted.fields = source.fields();\n      } else if (dataConfig.items) {\n        extracted.items = dataConfig.items.map((v) => ({ value: valueFn(v), label: String(labelFn(v)) }));\n      } else if (dataConfig.extract) {\n        const extractionsConfigs = Array.isArray(dataConfig.extract) ? dataConfig.extract : [dataConfig.extract];\n        extracted.items = [];\n        const sourceFields = [];\n        extractionsConfigs.forEach((cfg) => {\n          const s = cfg.source ? data.dataset(cfg.source) : source;\n          if (!s) {\n            return;\n          }\n          extracted.items.push(...s.extract(cfg));\n          if (typeof cfg.field !== 'undefined') {\n            sourceFields.push(s.field(cfg.field));\n          }\n        });\n        if (sourceFields.length) {\n          extracted.fields = sourceFields;\n        }\n        if (dataConfig.amend && Array.isArray(dataConfig.amend)) {\n          extracted.items.push(...dataConfig.amend);\n        }\n      } else if (typeof dataConfig.field !== 'undefined' && source) {\n        const f = source.field(dataConfig.field);\n        if (f) {\n          if (!extracted.fields) {\n            extracted.fields = [];\n          }\n          extracted.fields.push(f);\n          if (!('value' in dataConfig)) {\n            valueFn = f.value || ((v) => v);\n            labelFn = f.label || ((v) => v);\n            extracted.value = valueFn;\n          }\n          extracted.items = f\n            .items()\n            .map((v) => ({ value: valueFn(v), label: String(labelFn(v)), source: { field: dataConfig.field } }));\n          // TODO - add source: { key: dataConfig.source, field: dataConfig.field, data: v }\n        }\n      } else if (dataConfig.fields) {\n        dataConfig.fields.forEach((obj) => {\n          const s = typeof obj === 'object' && obj.source ? data.dataset(obj.source) : source;\n          if (!s) {\n            return;\n          }\n          let f;\n          if (typeof obj === 'object' && typeof obj.field !== 'undefined') {\n            f = s.field(obj.field);\n          } else {\n            f = s.field(obj);\n          }\n          if (f) {\n            if (!extracted.fields) {\n              extracted.fields = [];\n            }\n            extracted.fields.push(f);\n          }\n        });\n      }\n\n      if (extracted.items && dataConfig.map) {\n        extracted.items = extracted.items.map(dataConfig.map);\n      }\n    }\n\n    if (dataConfig && dataConfig.stack) {\n      stack(extracted, dataConfig.stack, data.dataset);\n    }\n  }\n  if (dataConfig && !Array.isArray(dataConfig) && typeof dataConfig.filter === 'function' && extracted.items) {\n    extracted.items = extracted.items.filter(dataConfig.filter);\n  }\n  if (dataConfig && !Array.isArray(dataConfig) && typeof dataConfig.sort === 'function' && extracted.items) {\n    extracted.items = extracted.items.sort(dataConfig.sort);\n  }\n  return extracted;\n}\n","import extend from 'extend';\nimport extract from './extractor';\n\nfunction create(config, d, opts, extractor = extract) {\n  const collections = {};\n\n  (config || []).forEach((cfg) => {\n    if (!cfg.key) {\n      throw new Error('Data collection is missing \"key\" property');\n    }\n    if (typeof cfg.data === 'object' && 'collection' in cfg.data) {\n      throw new Error('Data config for collections may not reference other collections');\n    }\n    collections[cfg.key] = () => extractor(cfg.data, d, opts);\n  });\n\n  const fn = (key) => {\n    let k;\n    let cfg;\n    if (typeof key === 'string') {\n      k = key;\n    } else if (typeof key === 'object') {\n      k = key.key;\n      cfg = key;\n    }\n    if (!(k in collections)) {\n      throw new Error(`Unknown data collection: ${k}`);\n    }\n    if (typeof collections[k] === 'function') {\n      collections[k] = collections[k]();\n    }\n    let coll = collections[k];\n    if (cfg) {\n      if (cfg.fields && cfg.fields.filter) {\n        let filtered = coll.fields.filter(cfg.fields.filter);\n        if (coll.fields.length !== filtered.length) {\n          coll = extend(coll, { fields: filtered });\n        }\n      }\n    }\n\n    return coll;\n  };\n\n  return fn;\n}\n\nexport { create as default };\n","import extractData from '../../data/extractor';\n\nexport function create(options, data, deps, extractor = extractData) {\n  if (options.data) {\n    const d = extractor(options.data, data, deps);\n    if (d && d.fields && d.fields[0]) {\n      // TODO Have some magic to handle and merge formatters from multiple sources\n      return d.fields[0].formatter();\n    }\n  }\n\n  let formatterType;\n  if (options.formatter) {\n    formatterType = `${options.formatter}-${options.type || 'number'}`;\n  } else {\n    formatterType = options.type || 'd3-number';\n  }\n\n  if (deps.formatter.has(formatterType)) {\n    const f = deps.formatter.get(formatterType)(options.format || '');\n    return f;\n  }\n\n  throw new Error(`Formatter of type '${formatterType}' was not found`);\n}\n\nexport function collection(formattersConfig, data, deps, fn = create) {\n  const formatters = {};\n  return {\n    get(def) {\n      let key;\n      if (typeof def === 'string' && formattersConfig[def]) {\n        key = def;\n      } else if (typeof def === 'object' && 'formatter' in def && formattersConfig[def.formatter]) {\n        key = def.formatter;\n      } else if (typeof def === 'object' && 'type' in def && formattersConfig[def.type]) {\n        key = def.type;\n      }\n\n      if (key) {\n        formatters[key] = formatters[key] || fn(formattersConfig[key], data, deps);\n        return formatters[key];\n      }\n\n      return fn(def || {}, data, deps);\n    },\n    all() {\n      Object.keys(formattersConfig).forEach(this.get);\n      return formatters;\n    },\n  };\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\nimport {initRange} from \"./init\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal() {\n  var index = map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init\";\nimport ordinal from \"./ordinal\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      range = [0, 1],\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = range[1] < range[0],\n        start = range[reverse - 0],\n        stop = range[1 - reverse];\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = [+_[0], +_[1]], round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), range)\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? new Rgb(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? new Rgb((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(domain) {\n  var a = domain[0], b = domain[domain.length - 1], t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous(transform, untransform) {\n  return transformer()(transform, untransform);\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(identity, identity);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\nimport {initRange} from \"./init\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import { notNumber } from '../../utils/is-number';\n\nfunction applyFormat(formatter) {\n  return typeof formatter === 'undefined' ? (t) => t : (t) => formatter(t);\n}\n\nfunction clamp(val) {\n  return Math.max(0, Math.min(1, val));\n}\n\nfunction isObject(obj) {\n  return typeof obj === 'object';\n}\n\nfunction minorTicksGenerator(count, start, end) {\n  const r = Math.abs(start - end);\n  const interval = r / (count + 1);\n  const ticks = [];\n  for (let i = 1; i <= count; i++) {\n    const v = i * interval;\n    ticks.push(start < end ? start + v : start - v);\n  }\n  return ticks;\n}\n\nfunction appendMinorTicks(majorTicks, minorCount, scale) {\n  if (majorTicks.length === 1) {\n    return majorTicks;\n  }\n\n  const ticks = majorTicks.concat([]);\n\n  for (let i = 0; i < majorTicks.length; i++) {\n    let start = majorTicks[i];\n    let end = majorTicks[i + 1];\n\n    if (i === 0 && start !== scale.start()) {\n      // Before and after first major tick\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n      start -= end - start;\n      end = majorTicks[i];\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    } else if (i === majorTicks.length - 1 && end !== scale.end()) {\n      // After last major tick\n      end = start + (start - majorTicks[i - 1]);\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    } else {\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    }\n  }\n\n  return ticks.filter((t) => t >= scale.min() && t <= scale.max());\n}\n\n/**\n * Generate ticks based on a distance, for each 100th unit, one additional tick may be added\n * @private\n * @param  {Number} distance       Distance between each tick\n * @param  {Number} scale         The scale instance\n * @param  {Number} [minorCount=0]     Number of tick added between each distance\n * @param  {Number} [unitDivider=100]   Number to divide distance with\n * @return {Array}               Array of ticks\n */\nexport function looseDistanceBasedGenerator({\n  distance,\n  scale,\n  minorCount = 0,\n  unitDivider = 100,\n  formatter = undefined,\n}) {\n  const step = !notNumber(unitDivider) && !notNumber(distance) ? Math.max(distance / unitDivider, 2) : 2;\n  const count = Math.min(1000, Math.round(step)); // safe guard against huge numbers\n  let majorTicks = scale.ticks(count);\n  if (majorTicks.length <= 1) {\n    majorTicks = scale.ticks(count + 1);\n  }\n\n  const ticks = minorCount > 0 ? appendMinorTicks(majorTicks, minorCount, scale) : majorTicks;\n  ticks.sort((a, b) => a - b);\n\n  const ticksFormatted = ticks.map(applyFormat(formatter));\n\n  return ticks.map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: ticksFormatted[i],\n      value: tick,\n      isMinor: majorTicks.indexOf(tick) === -1,\n    };\n  });\n}\n\n/**\n * Generate ticks based on a distance, for each 100th unit, one additional tick may be added.\n * Will attempt to round the bounds of domain to even values and generate ticks hitting the domain bounds.\n * @private\n * @param  {Number} distance       Distance between each tick\n * @param  {Number} scale         The scale instance\n * @param  {Number} [minorCount=0]     Number of tick added between each distance\n * @param  {Number} [unitDivider=100]   Number to divide distance with\n * @return {Array}               Array of ticks\n */\nexport function tightDistanceBasedGenerator({\n  distance,\n  scale,\n  minorCount = 0,\n  unitDivider = 100,\n  formatter = undefined,\n}) {\n  const step = !notNumber(unitDivider) && !notNumber(distance) ? Math.max(distance / unitDivider, 2) : 2;\n  const count = Math.min(1000, Math.round(step)); // safe guard against huge numbers\n  const n = count > 10 ? 10 : count;\n  scale.nice(n);\n\n  const majorTicks = scale.ticks(count);\n  const ticks = minorCount > 0 ? appendMinorTicks(majorTicks, minorCount, scale) : majorTicks;\n  ticks.sort((a, b) => a - b);\n\n  const ticksFormatted = ticks.map(applyFormat(formatter));\n\n  return ticks.map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: ticksFormatted[i],\n      value: tick,\n      isMinor: majorTicks.indexOf(tick) === -1,\n    };\n  });\n}\n\nfunction ticksByCount({ count, minorCount, scale, formatter }) {\n  return scale.ticks((count - 1) * minorCount + count).map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: formatter(tick),\n      isMinor: i % (minorCount + 1) !== 0,\n      value: tick,\n    };\n  });\n}\n\nfunction ticksByValue({ values, scale, formatter = (v) => v }) {\n  return values\n    .sort((a, b) => (isObject(a) ? a.value : a) - (isObject(b) ? b.value : b))\n    .filter((v, i, ary) => {\n      const val = isObject(v) ? v.value : v;\n      return val <= scale.max() && val >= scale.min() && ary.indexOf(v) === i;\n    })\n    .map((v) => {\n      const isObj = isObject(v);\n      const value = isObj ? v.value : v;\n      const position = scale(value);\n      return {\n        position,\n        value,\n        label: isObj && typeof v.label !== 'undefined' ? v.label : formatter(value),\n        isMinor: isObj ? !!v.isMinor : false,\n        start: isObj && !isNaN(v.start) ? clamp(scale(v.start)) : position, // TODOHandle end < start?\n        end: isObj && !isNaN(v.end) ? clamp(scale(v.end)) : position, // TODO Handle start > end?\n      };\n    });\n}\n\nfunction forceTicksAtBounds(ticks, scale, formatter) {\n  const ticksP = ticks.map((t) => t.position);\n  const range = scale.range();\n\n  if (ticksP.indexOf(range[0]) === -1) {\n    ticks.splice(0, 0, {\n      position: range[0],\n      start: range[0],\n      end: range[0],\n      label: formatter(scale.start()),\n      isMinor: false,\n      value: scale.start(),\n    });\n  } else if (ticks[0] && ticks[0].isMinor) {\n    ticks[0].isMinor = false; // Convert to major tick\n  }\n\n  const lastTick = ticks[ticks.length - 1];\n  if (ticksP.indexOf(range[1]) === -1) {\n    ticks.push({\n      position: range[1],\n      start: range[1],\n      end: range[1],\n      label: formatter(scale.end()),\n      isMinor: false,\n      value: scale.end(),\n    });\n  } else if (lastTick && lastTick.isMinor) {\n    lastTick.isMinor = false; // Convert to major tick\n  }\n}\n\nexport function generateContinuousTicks({ settings, scale, distance, formatter = (val) => val }) {\n  let ticks;\n  const minorCount =\n    settings.minorTicks && !notNumber(settings.minorTicks.count) ? Math.min(100, settings.minorTicks.count) : 0;\n\n  if (Array.isArray(settings.ticks.values)) {\n    const values = settings.ticks.values.filter((v) => (typeof v === 'object' ? !notNumber(v.value) : !notNumber(v)));\n    ticks = ticksByValue({ values, scale: scale.copy(), formatter });\n  } else if (!notNumber(settings.ticks.count)) {\n    const count = Math.min(1000, settings.ticks.count);\n    ticks = ticksByCount({\n      count,\n      minorCount,\n      scale: scale.copy(),\n      formatter,\n    });\n  } else {\n    const tickGen = settings.ticks.tight ? tightDistanceBasedGenerator : looseDistanceBasedGenerator;\n    ticks = tickGen({\n      distance,\n      minorCount,\n      unitDivider: settings.ticks.distance,\n      scale,\n      formatter,\n    });\n\n    if (settings.ticks.forceBounds) {\n      forceTicksAtBounds(ticks, scale, formatter);\n    }\n  }\n\n  return ticks;\n}\n\nexport function generateDiscreteTicks({ scale }) {\n  const domain = scale.domain();\n  const values = domain;\n  const dataItems = scale.data().items;\n  const labels = scale.labels ? scale.labels() : values;\n  const bandwidth = scale.bandwidth();\n\n  return values.map((d, i) => {\n    const start = scale(d);\n    return {\n      position: start + bandwidth / 2,\n      label: `${labels[i]}`,\n      data: dataItems ? dataItems[i] : undefined,\n      start,\n      end: start + bandwidth,\n    };\n  });\n}\n","export default function resolveSettings(settings = {}, defaultSettings = {}, context = {}) {\n  const stngs = {};\n\n  Object.keys(defaultSettings).forEach((key) => {\n    const type = typeof settings[key];\n\n    if (type === 'function') {\n      stngs[key] = settings[key](context);\n    } else if (type === 'undefined') {\n      stngs[key] = defaultSettings[key];\n    } else {\n      stngs[key] = settings[key];\n    }\n  });\n\n  return stngs;\n}\n","import { scaleLinear as d3ScaleLinear } from 'd3-scale';\nimport extend from 'extend';\n\nimport { notNumber } from '../utils/is-number';\nimport { generateContinuousTicks } from './ticks/tick-generators';\nimport resolveSettings from './settings-resolver';\n\nexport const DEFAULT_SETTINGS = {\n  min: NaN,\n  max: NaN,\n  expand: NaN,\n  include: [],\n  invert: false,\n};\n\nexport const DEFAULT_TICKS_SETTINGS = {\n  tight: false,\n  forceBounds: false,\n  values: undefined,\n  count: NaN,\n  distance: 100,\n};\n\nexport const DEFAULT_MINORTICKS_SETTINGS = {\n  count: NaN,\n};\n\n/**\n * @typedef {object} scale--linear\n * @property {string} [type='linear']\n * @property {number} [expand] - Expand the output range\n * @property {boolean} [invert=false] - Invert the output range\n * @property {number[]} [include] - Include specified numbers in the output range\n * @property {object} [ticks]\n * @property {boolean} [ticks.tight = false]\n * @property {boolean} [ticks.forceBounds = false]\n * @property {number} [ticks.distance = 100]  - Approximate distance between each tick\n * @property {number[]|object[]} [ticks.values] - If set, ticks are no longer generated but instead equal to this set\n * @property {number} [ticks.count]\n * @property {object} [minorTicks]\n * @property {number} [minorTicks.count = 3]\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n */\n\nfunction getMinMax(settings, fields) {\n  const min = +settings.min;\n  const max = +settings.max;\n  let fieldMin = 0;\n  let fieldMax = 1;\n  if (fields && fields[0]) {\n    const minValues = fields.map((m) => m.min()).filter((v) => !isNaN(v));\n    const maxValues = fields.map((m) => m.max()).filter((v) => !isNaN(v));\n    fieldMin = minValues.length ? Math.min(...minValues) : Number.NaN;\n    fieldMax = maxValues.length ? Math.max(...maxValues) : Number.NaN;\n\n    if (isNaN(fieldMin) || isNaN(fieldMax)) {\n      fieldMin = -1;\n      fieldMax = 1;\n    } else if (fieldMin === fieldMax && fieldMin === 0) {\n      fieldMin = -1;\n      fieldMax = 1;\n    } else if (fieldMin === fieldMax && fieldMin) {\n      fieldMin -= Math.abs(fieldMin * 0.1);\n      fieldMax += Math.abs(fieldMax * 0.1);\n    } else if (!isNaN(settings.expand)) {\n      const range = fieldMax - fieldMin;\n      fieldMin -= range * settings.expand;\n      fieldMax += range * settings.expand;\n    }\n\n    if (Array.isArray(settings.include)) {\n      const i = settings.include.filter((n) => !isNaN(n));\n      fieldMin = Math.min(...i, fieldMin);\n      fieldMax = Math.max(...i, fieldMax);\n    }\n  }\n\n  return {\n    mini: !isNaN(min) ? min : fieldMin,\n    maxi: !isNaN(max) ? max : fieldMax,\n  };\n}\n\nfunction initNormScale(normScale, scale) {\n  if (normScale.instance) {\n    return;\n  }\n  normScale.instance = scale.copy();\n  normScale.instance.domain([scale.start(), scale.end()]);\n  normScale.instance.clamp(true);\n  normScale.instance.range(normScale.invert ? [1, 0] : [0, 1]);\n}\n/**\n * @alias scaleLinear\n * @private\n * @param { object } settings\n * @param { field[] } [fields]\n * @return { linear }\n */\n\nexport default function scaleLinear(settings = {}, data = {}, resources = {}) {\n  const d3Scale = d3ScaleLinear();\n  const normScale = { instance: null, invert: false };\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  stgns.ticks = resolveSettings(settings.ticks, DEFAULT_TICKS_SETTINGS, ctx);\n  stgns.minorTicks = resolveSettings(settings.minorTicks, DEFAULT_MINORTICKS_SETTINGS, ctx);\n  let tickCache;\n\n  /**\n   * @alias linear\n   * @private\n   * @param { Object } value\n   * @return { number }\n   */\n  function fn(v) {\n    if (notNumber(v)) {\n      return NaN;\n    }\n    return d3Scale(v);\n  }\n\n  fn.data = () => data;\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_invert }\n   * @param { number } value The inverted value\n   * @return { number } The inverted scaled value\n   */\n  fn.invert = function invert(value) {\n    return d3Scale.invert(value);\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_rangeRound }\n   * @param { number[] } values Range values\n   * @return { linear } The instance this method was called on\n   */\n  fn.rangeRound = function rangeRound(values) {\n    d3Scale.rangeRound(values);\n    return fn;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_clamp }\n   * @param { boolean } [ value=true ] TRUE if clamping should be enabled\n   * @return { linear } The instance this method was called on\n   */\n  fn.clamp = function clamp(value = true) {\n    d3Scale.clamp(value);\n    return fn;\n  };\n\n  /**\n   * Get cached ticks (if any)\n   * @return { number | undefined }\n   */\n  fn.cachedTicks = function fnCachedTicks() {\n    return tickCache;\n  };\n\n  /**\n   * Clear the tick cache\n   * @return {number | undefined}\n   */\n  fn.clearTicksCache = function fnClearTicks() {\n    tickCache = undefined;\n    return this;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_ticks }\n   * @param { Object } input Number of ticks to generate or an object passed to tick generator\n   * @return { number[] | Object } Array of ticks or any type the custom tick generator returns\n   */\n  fn.ticks = function ticks(input) {\n    if (input !== null && typeof input === 'object') {\n      input.settings = input.settings || {};\n      // TODO Discontinue support for custom ticks settings as argument\n      input.settings = extend(true, {}, stgns, input.settings);\n      input.scale = fn;\n      tickCache = generateContinuousTicks(input);\n      return tickCache;\n    }\n\n    tickCache = d3Scale.ticks(input);\n    return tickCache;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_nice }\n   * @param { number } count\n   * @return { linear } The instance this method was called on\n   */\n  fn.nice = function nice(count) {\n    d3Scale.nice(count);\n\n    return fn;\n  };\n\n  // TODO Support this?\n  fn.tickFormat = function tickFormat(count, format) {\n    return d3Scale.tickFormat(count, format);\n  };\n\n  // TODO Support this?\n  fn.interpolate = function interpolate(func) {\n    d3Scale.interpolate(func);\n    return fn;\n  };\n\n  /**\n   * @param { number[] } [values] Set or Get domain values\n   * @return { linear | Number[] } The instance this method was called on if a parameter is provided, otherwise the current domain is returned\n   */\n  fn.domain = function domain(values) {\n    if (arguments.length) {\n      d3Scale.domain(values);\n      if (normScale.instance) {\n        normScale.instance.domain([fn.start(), fn.end()]);\n      }\n      return fn;\n    }\n    return d3Scale.domain();\n  };\n\n  /**\n   * @param { number[] } [values] Set or Get range values\n   * @return { linear | number[] } The instance this method was called on if a parameter is provided, otherwise the current range is returned\n   */\n  fn.range = function range(values) {\n    if (arguments.length) {\n      d3Scale.range(values);\n\n      return fn;\n    }\n    return d3Scale.range();\n  };\n\n  /**\n   * Get the first value of the domain\n   * @return { number }\n   */\n  fn.start = function start() {\n    return fn.domain()[0];\n  };\n\n  /**\n   * Get the last value of the domain\n   * @return { number }\n   */\n  fn.end = function end() {\n    return fn.domain()[this.domain().length - 1];\n  };\n\n  /**\n   * Get the minimum value of the domain\n   * @return { number }\n   */\n  fn.min = function min() {\n    return Math.min(this.start(), this.end());\n  };\n\n  /**\n   * Get the maximum value of the domain\n   * @return { number }\n   */\n  fn.max = function max() {\n    return Math.max(this.start(), this.end());\n  };\n\n  /**\n   * Divides the domain and range into uniform segments, based on start and end value\n   * @param  { number } segments The number of segments\n   * @return { function } The instance this method was called on\n   * @example\n   * let s = linear();\n   * s.domain([0, 10]);\n   * s.range([0, 1]);\n   * s.classify( 2 );\n   * s.domain(); // [10, 5, 5, 0]\n   * s.range(); // [0.75, 0.75, 0.25, 0.25]\n   */\n  fn.classify = function classify(segments) {\n    let valueRange = (fn.start() - fn.end()) / segments,\n      domain = [fn.end()],\n      range = [],\n      samplePos = valueRange / 2;\n\n    for (let i = 0; i < segments; i++) {\n      let lastVal = domain[domain.length - 1] || 0,\n        calIntervalPos = lastVal + valueRange,\n        calSamplePos = lastVal + samplePos,\n        sampleColValue = fn(calSamplePos);\n\n      domain.push(...[calIntervalPos, calIntervalPos]);\n      range.push(...[sampleColValue, sampleColValue]);\n    }\n    domain.pop();\n    fn.domain(domain);\n    fn.range(range);\n\n    return fn;\n  };\n\n  fn.copy = function copy() {\n    const cop = scaleLinear(settings, data, resources);\n    cop.domain(fn.domain());\n    cop.range(fn.range());\n    cop.clamp(d3Scale.clamp());\n    return cop;\n  };\n\n  /**\n   * @param {number} d - A domain value\n   * @return {number} A normalized range output given in range 0-1\n   * @example\n   * const scale = scaleLinear().domain([0, 10]).range([0, 10000]);\n   * scale.norm(5); // Returns 0.5\n   * scale(5); // Returns 5000\n   *\n   * scale.domain([0, 2, 10]);\n   * scale.norm(5); // Returns 0.5\n   */\n  fn.norm = function norm(d) {\n    initNormScale(normScale, fn);\n\n    return normScale.instance(d);\n  };\n\n  /**\n   * @param {number} d - A normalized value in range 0-1\n   * @return {number} A corresponding domain value\n   * @example\n   * const scale = scaleLinear().domain([0, 10]).range([0, 10000]);\n   * scale.normInvert(0.5); // Returns 5\n   * scale.invert(5000); // Returns 5\n   */\n  fn.normInvert = function norm(t) {\n    initNormScale(normScale, fn);\n\n    return normScale.instance.invert(t);\n  };\n\n  const { mini, maxi } = getMinMax(stgns, data ? data.fields : []);\n\n  fn.domain([mini, maxi]);\n  fn.range(stgns.invert ? [1, 0] : [0, 1]);\n  normScale.invert = stgns.invert;\n\n  return fn;\n}\n","import extend from 'extend';\nimport { scaleBand as d3ScaleBand } from 'd3-scale';\nimport { generateDiscreteTicks } from './ticks/tick-generators';\nimport resolveSettings from './settings-resolver';\n\nexport const DEFAULT_SETTINGS = {\n  padding: 0,\n  paddingInner: NaN,\n  paddingOuter: NaN,\n  align: 0.5,\n  invert: false,\n  maxPxStep: NaN,\n  range: [0, 1],\n};\n\n/**\n * @typedef {object} scale--band\n * @property {string} [type='band']\n * @property {number} [padding] - {@link https://github.com/d3/d3-scale#band_padding}\n * @property {number} [paddingInner] - {@link https://github.com/d3/d3-scale#band_paddingInner}\n * @property {number} [paddingOuter] - {@link https://github.com/d3/d3-scale#band_paddingOuter}\n * @property {number} [align] - {@link https://github.com/d3/d3-scale#band_align}\n * @property {boolean} [invert=false] - Invert the output range\n * @property {number} [maxPxStep] - Explicitly limit the bandwidth to a pixel value\n * @property {function} [label] - Callback label function, applied on each datum\n * @property {function} [value] - Callback value function, applied on each datum\n * @property {array<number>|function} [range=[0, 1]] - Set range explicitly (ignored when maxPxStep takes effect)\n */\n\n/**\n * @alias scaleBand\n * @memberof picasso\n * @private\n * @param { Object } settings\n * @param { fields[] } [fields]\n * @param { dataset } [dataset]\n * @return { band }\n */\n\nexport default function scaleBand(settings = {}, data = {}, resources = {}) {\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  const items = data.items || [];\n  const domainToDataMapping = {};\n  const values = [];\n  const labels = [];\n\n  // I would like to define this outside of scaleBand but it cause the documentation to be in the wrong order\n  function augmentScaleBand(band, fsettings) {\n    band.data = () => data;\n\n    band.datum = (domainValue) => items[domainToDataMapping[domainValue]];\n\n    /**\n     * Get the first value of the domain\n     * @return { number }\n     */\n    band.start = function start() {\n      return band.domain()[0];\n    };\n\n    /**\n     * Get the last value of the domain\n     * @return { number }\n     */\n    band.end = function end() {\n      return band.domain()[band.domain().length - 1];\n    };\n\n    band.labels = () => labels;\n\n    /**\n     * Generate discrete ticks\n     * @return {Object[]} Array of ticks\n     */\n    band.ticks = function ticks(input = {}) {\n      input.scale = band;\n      return generateDiscreteTicks(input, fsettings.trackBy || 'label');\n    };\n  }\n  /**\n   * An augmented {@link https://github.com/d3/d3-scale#_band|d3 band scale}\n   * @alias band\n   * @private\n   * @kind function\n   * @param { Object } value\n   * @return { number }\n   */\n  const band = d3ScaleBand();\n  augmentScaleBand(band, settings);\n\n  /**\n   * if required creates a new scale with a restricted range\n   * so that step size is at most maxPxStep\n   * otherwise it returns itself\n   * @param { number } size\n   * @return { band }\n   */\n  band.pxScale = function pxScale(size) {\n    const max = stgns.maxPxStep;\n    if (isNaN(max)) {\n      return band;\n    }\n    const n = band.domain().length;\n    const sizeRelativeToStep = Math.max(1, n - band.paddingInner() + 2 * band.paddingOuter());\n\n    if (sizeRelativeToStep * max >= size) {\n      return band;\n    }\n\n    const newBand = band.copy();\n    newBand.type = band.type;\n    augmentScaleBand(newBand, settings);\n    const t = (sizeRelativeToStep * max) / size;\n    const offset = (1 - t) * band.align();\n    newBand.range(stgns.invert ? [t + offset, offset] : [offset, t + offset]);\n\n    return newBand;\n  };\n\n  const valueFn = typeof settings.value === 'function' ? settings.value : (d) => d.datum.value;\n  const labelFn = typeof settings.label === 'function' ? settings.label : (d) => d.datum.label;\n\n  for (let i = 0; i < items.length; i++) {\n    const arg = extend({ datum: items[i] }, ctx);\n    const v = valueFn(arg, i);\n    if (values.indexOf(v) === -1) {\n      values.push(v);\n      labels.push(labelFn(arg, i));\n      domainToDataMapping[v] = i;\n    }\n  }\n\n  band.domain(values);\n  band.range(stgns.invert ? stgns.range.slice().reverse() : stgns.range);\n  band.padding(isNaN(stgns.padding) ? 0 : stgns.padding);\n  if (!isNaN(stgns.paddingInner)) {\n    band.paddingInner(stgns.paddingInner);\n  }\n  if (!isNaN(stgns.paddingOuter)) {\n    band.paddingOuter(stgns.paddingOuter);\n  }\n  band.align(isNaN(stgns.align) ? 0.5 : stgns.align);\n\n  return band;\n}\n","import extend from 'extend';\nimport bandScale, { DEFAULT_SETTINGS } from './band';\nimport resolveSettings from './settings-resolver';\n\nconst DEFAULT_TICKS_SETTINGS = {\n  depth: 0,\n};\n\nfunction keyGen(node, valueFn, ctx) {\n  return node\n    .ancestors()\n    .map((a) => valueFn(extend({ datum: a.data }, ctx)))\n    .reverse()\n    .slice(1) // Delete root node\n    .toString();\n}\n\nfunction flattenTree(rootNode, settings, ctx) {\n  const ticksDepth = settings.ticks.depth;\n  const valueFn = settings.value;\n  const labelFn = settings.label;\n  const values = [];\n  const labels = [];\n  const items = {};\n  const ticks = [];\n  let expando = 0;\n  if (!rootNode) {\n    return {\n      values,\n      labels,\n      items,\n      ticks,\n    };\n  }\n\n  rootNode.eachAfter((node) => {\n    if (node.depth > 0) {\n      const key = keyGen(node, valueFn, ctx);\n      const leaves = node.leaves() || [node]; // If leaf node returns itself\n      const value = valueFn(extend({ datum: node.data }, ctx));\n      const label = labelFn(extend({ datum: node.data }, ctx));\n      const isBranch = Array.isArray(node.children);\n\n      const item = {\n        key,\n        count: leaves.length,\n        value,\n        label,\n        leftEdge: keyGen(leaves[0], valueFn, ctx),\n        rightEdge: keyGen(leaves[Math.max(leaves.length - 1, 0)], valueFn, ctx),\n        node,\n        // isTick: ticksDepth === null ? !isBranch : node.depth === ticksDepth\n      };\n\n      if (isBranch) {\n        values.push(`SPACER_${expando}_SPACER`);\n        expando++;\n      } else {\n        values.push(key);\n        labels.push(label);\n      }\n\n      if ((ticksDepth <= 0 && !isBranch) || node.depth === ticksDepth) {\n        ticks.push(item);\n      }\n\n      items[key] = item;\n    }\n  });\n\n  const spill = rootNode.height - 1;\n  if (spill > 0) {\n    values.splice(-spill);\n  }\n\n  return {\n    values,\n    labels,\n    items,\n    ticks,\n  };\n}\n\n/**\n * @typedef {object} scale-hBand.settings\n * @private\n * @property {number} [padding=0] - Exposes {@link https://github.com/d3/d3-scale#band_padding}\n * @property {boolean} [paddingOuter=0] - Exposes {@link https://github.com/d3/d3-scale#band_paddingOuter}\n * @property {number[]} [paddingInner=0] - Exposes {@link https://github.com/d3/d3-scale#band_paddingInner}\n * @property {object} [align=0.5] - Exposes {@link https://github.com/d3/d3-scale#band_align}\n * @property {boolean} [invert=false] - Invert the output range\n */\n\n/**\n * Hierarchical band scale, that is an augmented band scale, that takes hierarchical data as input\n * @alias scaleHierarchicalBand\n * @private\n * @param { Object } settings\n * @param { fields[] } [fields]\n * @param { dataset } [dataset] - With a root property that is an instance of D3.js Hierarchy\n * @return { h-band }\n */\n\nexport default function scaleHierarchicalBand(settings = {}, data = {}, resources = {}) {\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  stgns.ticks = resolveSettings(settings.ticks, DEFAULT_TICKS_SETTINGS, ctx);\n  stgns.value = typeof settings.value === 'function' ? settings.value : (d) => d.datum.value;\n  stgns.label = typeof settings.label === 'function' ? settings.label : (d) => d.datum.value;\n\n  let bandInstance = bandScale(stgns);\n\n  const { values, labels, items, ticks } = flattenTree(data.root, stgns, ctx);\n\n  /**\n   * @alias h-band\n   * @private\n   * @kind function\n   * @param { Object[] } value - Array where each value is a reference to a node, going from depth 1 to n.\n   * @return { number }\n   */\n  const hBand = function fn(val) {\n    const strVal = String(val);\n    const item = items[strVal];\n    if (item) {\n      return bandInstance(stgns.invert ? item.rightEdge : item.leftEdge);\n    }\n\n    return bandInstance(strVal);\n  };\n\n  extend(true, hBand, bandInstance);\n\n  /**\n   * Wrapped {@link https://github.com/d3/d3-scale#band_bandwidth}\n   * @param { Object[] } [val] - Array where each value is a reference to a node, going from depth 1 to n. If omitted, bandwidth for the leaf nodes is return.\n   * @return { number }\n   */\n\n  hBand.bandwidth = function bandwidth(val) {\n    const item = items[String(val)];\n    const bw = bandInstance.bandwidth();\n    if (item && !item.isLeaf) {\n      const left = hBand(item.leftEdge);\n      const right = hBand(item.rightEdge);\n      return Math.abs(left - right) + bw;\n    }\n    return bw;\n  };\n\n  /**\n   * Wrapped {@link https://github.com/d3/d3-scale#band_step}\n   * @param { Object[] } [val] - Array where each value is a reference to a node, going from depth 1 to n. If omitted, step size for the leaf nodes is return.\n   * @return { number }\n   */\n  hBand.step = function step(val) {\n    const item = items[String(val)];\n    const leafCount = item ? item.count : 1;\n    let stepSize = bandInstance.step();\n    stepSize *= leafCount;\n    return stepSize;\n  };\n\n  /**\n   * @return { dataset }\n   */\n  hBand.data = () => data;\n\n  /**\n   * Return datum for a given node\n   * @param { Object[] } val - Array where each value is a reference to a node, going from depth 1 to n.\n   * @return { Object } The datum\n   */\n  hBand.datum = (val) => {\n    const item = items[String(val)];\n    if (item) {\n      return item.node.data;\n    }\n    return null;\n  };\n\n  hBand.copy = () => scaleHierarchicalBand(settings, data, resources);\n\n  /**\n   * @return { Object[] } Labels for each leaf node\n   */\n  hBand.labels = () => labels;\n\n  /**\n   * Generate discrete ticks\n   * @return { Object[] } Ticks for each leaf node\n   */\n  hBand.ticks = () => {\n    // eslint-disable-line arrow-body-style\n    return ticks.map((item) => {\n      const start = hBand(item.key);\n      const bandwidth = hBand.bandwidth(item.key);\n      return {\n        position: start + bandwidth / 2,\n        label: item.label,\n        data: item.node.data,\n        start,\n        end: start + bandwidth,\n      };\n    });\n  };\n\n  const orgPxScale = bandInstance.pxScale;\n  hBand.pxScale = function pxScale(size) {\n    bandInstance = orgPxScale(size);\n    return hBand;\n  };\n\n  hBand.domain(values);\n\n  return hBand;\n}\n","import { isNumber as numericFilter } from './is-number';\n\nconst minAccessor = (v) => v.min();\nconst maxAccessor = (v) => v.max();\n\n/**\n * Calculate the min/max value based on various inputs.\n *\n * Provided min/max setting takes presedence over all other inputs. If not provided, the respective values are calculated\n * from the given arr input, where each item in the array is expected to have a min/max accessor.\n *\n * @private\n * @param {object} [settings]\n * @param {number} [settings.min] The minimum value. Defaults to 0 if not provided.\n * @param {number} [settings.max] The maximum value. Defaults to 1 if not provided.\n * @param {object} [arr]\n * @returns { object[] } An array containing the min and max values.\n *\n * @example\n * minmax(); // [0, 1]\n *\n * minmax({}, [\n * { min: () => 13, max: () => 15 },\n * { min: () => NaN, max: () => 17 },\n * ]); // [13, 17]\n *\n * minmax({ min: -5, max: 4 }, [\n * { min: () => -20, max: () => 15 },\n * ]); // [-5, 4]\n */\nexport default function minmax(settings, arr) {\n  // const definedMin = settings && typeof settings.min !== 'undefined';\n  // const definedMax = settings && typeof settings.max !== 'undefined';\n  const definedMin = settings && !isNaN(settings.min);\n  const definedMax = settings && !isNaN(settings.max);\n\n  let min = definedMin ? +settings.min : 0;\n  let max = definedMax ? +settings.max : 1;\n\n  if (arr && arr.length) {\n    if (!definedMin) {\n      const arrMin = arr.map(minAccessor).filter(numericFilter);\n      min = arrMin.length ? Math.min(...arrMin) : min;\n    }\n\n    if (!definedMax) {\n      const arrMax = arr.map(maxAccessor).filter(numericFilter);\n      max = arrMax.length ? Math.max(...arrMax) : max;\n    }\n  }\n\n  return [min, max];\n}\n","import { interpolateRgb } from 'd3-interpolate';\nimport extend from 'extend';\nimport minmax from '../../utils/min-max';\nimport linear from '../linear';\nimport resolveSettings from '../settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  invert: false,\n  min: NaN,\n  max: NaN,\n};\n\nfunction generateDomain(range, min, max) {\n  const len = range.length;\n  if (len === 2) {\n    return [min, max];\n  }\n  const domain = [];\n  const part = (max - min) / (len - 1);\n\n  domain.push(min);\n  for (let i = 1; i < len - 1; i++) {\n    domain.push(min + part * i);\n  }\n  domain.push(max);\n\n  return domain;\n}\n\n/**\n * @typedef {object} scale--sequential-color\n * @property {string} [type='sequential-color']\n * @property {string[]} [range] - CSS color values of the output range\n * @property {boolean} [invert=false] - Invert range\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n */\n\n/**\n * @alias scaleSequentialColor\n * @private\n * @param { Object } [settings] Settings for this scale. If both range and domain are specified, they have to fulfill range.length === domain.length, otherwise they will be overriden.\n * @param { number[] } [settings.domain] Numeric values indicating stop limits between start and end values.\n * @param { color[] } [settings.range] CSS color values indicating stop colors between start and end values.\n * @param { field[] } [fields] Fields to dynamically calculate the domain extent.\n * @return { sequentialColor }\n *\n * @example\n * picasso.scaleSequentialColor({\n *  range: ['red', '#fc6', 'green'],\n *  domain: [-40, 0, 100]\n * });\n */\n\nexport default function scaleSequentialColor(settings = {}, data = {}, resources = {}) {\n  const s = linear(settings, data, resources).clamp(true).interpolate(interpolateRgb);\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  const isDomain = Array.isArray(stgns.domain) && stgns.domain.length;\n  const isRange = Array.isArray(stgns.range) && stgns.range.length;\n\n  /**\n   * @alias sequentialColor\n   * @private\n   * @kind function\n   * @param { Object } v Object containing a 'value' property\n   * @return { string } The blended color\n   */\n  const fn = s;\n\n  extend(true, fn, s);\n  const [min, max] = minmax(stgns, data ? data.fields : []);\n  const num = isDomain ? stgns.domain.length : -1;\n  const DEFAULT_COLORS = resources.theme ? resources.theme.palette('sequential', num > 0 ? num : 2) : [];\n\n  const range = isRange ? stgns.range : DEFAULT_COLORS;\n  fn.range(stgns.invert ? range.slice().reverse() : range.slice());\n  fn.domain(isDomain ? stgns.domain : generateDomain(fn.range(), min, max));\n\n  return fn;\n}\n","import { scaleThreshold, scaleLinear } from 'd3-scale';\nimport { notNumber } from '../../utils/is-number';\nimport minmax from '../../utils/min-max';\nimport sequential from './sequential';\nimport resolveSettings from '../settings-resolver';\n\n// const DEFAULT_COLORS = ['rgb(180,221,212)', 'rgb(34, 83, 90)'];\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  invert: false,\n  min: NaN,\n  max: NaN,\n  nice: false,\n};\n\nfunction generateDomain(range, min, max) {\n  const len = range.length;\n  if (len === 2) {\n    return [min + (max - min) / 2];\n  }\n  const domain = [];\n  const part = (max - min) / len;\n\n  for (let i = 1; i < len; i++) {\n    domain.push(min + part * i);\n  }\n  return domain;\n}\n\nfunction getBreaks(domain) {\n  const ret = [];\n  for (let i = 0; i < domain.length - 1; i++) {\n    ret.push((domain[i] + domain[i + 1]) / 2);\n  }\n  return ret;\n}\n\nfunction generateRange(domain, colors, min, max) {\n  min = domain[0];\n  max = domain && domain.length >= 2 ? domain[domain.length - 1] : max;\n  const seq = sequential().domain([min, max]).range(colors);\n  const values = [min, ...getBreaks(domain), max];\n  return values.map((v) => seq(v));\n}\n\nfunction generateNiceDomain(range, min, max) {\n  const numPoints = range.length === 2 ? 10 : Math.max(1, range.length);\n  const lin = scaleLinear().domain([min, max]).nice(numPoints);\n  const domain = lin.ticks(numPoints);\n\n  if (!range || !range.length) {\n    return domain;\n  }\n\n  // remove values from endpoints\n  const num = Math.max(0, range.length - 1);\n  while (domain.length > num) {\n    if (domain[0] - min <= max - domain[domain.length - 1]) {\n      domain.shift();\n    } else {\n      domain.pop();\n    }\n  }\n\n  return domain;\n}\n\n/**\n * @typedef {object} scale--threshold-color\n * @property {string} [type='threshold-color']\n * @property {number[]} [domain] Values defining the thresholds\n * @property {string[]} [range] - CSS color values of the output range\n * @property {boolean} [invert=false] - Invert range\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n * @property {boolean} [nice=false] If set to true, will generate 'nice' domain values. Ignored if domain is set.\n */\n\n/**\n * @alias scaleThresholdColor\n * @private\n * @param { object } [settings] Settings for this scale. If both domain and range are specified, they have to fulfill domain.length === range.length + 1,  otherwise they will be overriden.\n * @param { number[] } [settings.domain] Values defining the thresholds.\n * @param { color[] } [settings.range] CSS color values of the output range.\n * @param { boolean } [settings.nice=false] If set to true, will generate 'nice' domain values. Ignored if domain is set.\n * @param { number } [settings.min] Minimum value to generate domain extent from. Ignored if domain is set.\n * @param { number } [settings.max] Maximum value to generate domain extend from. Ignored if domain is set.\n * @param { field[] } [fields] Fields to dynamically calculate the domain extent from. Ignored if min/max are set.\n * @return { thresholdColor }\n *\n * @example\n * let t = threshold({\n *   range: ['black', 'white'],\n *   domain: [25,50,75],\n *   max: 100,\n *   min: 0\n * });\n * t.domain(); // [25,50,75]\n * t.range(); // Generates from colors and domain: ['rgb(0,0,0)','rgb(85,85,85)','rgb(170,170,170)','rgb(255,255,255)']\n */\n\nexport default function scaleThresholdColor(settings = {}, data = {}, resources = {}) {\n  const d3Scale = scaleThreshold();\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  const isDomain = Array.isArray(stgns.domain) && stgns.domain.length;\n  const isRange = Array.isArray(stgns.range) && stgns.range.length;\n\n  /**\n   * @alias thresholdColor\n   * @private\n   * @param { object } v Object literal containing a 'value' property.\n   * @return { string } A CSS color from the scale's range.\n   */\n  function fn(v) {\n    if (notNumber(v)) {\n      return NaN;\n    }\n    return d3Scale(v);\n  }\n\n  Object.keys(d3Scale).forEach((key) => (fn[key] = d3Scale[key]));\n\n  const fields = data.fields;\n\n  const [min, max] = minmax(stgns, fields);\n  const num = isDomain ? stgns.domain.length : -1;\n  const DEFAULT_COLORS = resources.theme ? resources.theme.palette('sequential', num > 0 ? num : 2) : [];\n\n  let range = isRange ? stgns.range : DEFAULT_COLORS;\n  let domain = [];\n\n  if (isDomain) {\n    domain = stgns.domain;\n  } else if (stgns.nice) {\n    domain = generateNiceDomain(range, min, max);\n  } else {\n    domain = [min + (max - min) / 2];\n  }\n\n  if (range.length > domain.length + 1) {\n    // Generate limits from range\n    domain = generateDomain(range, min, max);\n  } else if (range.length < domain.length + 1) {\n    // Generate additional colors\n    range = generateRange(domain, range, min, max);\n  }\n\n  fn.data = () => data;\n\n  fn.range(stgns.invert ? range.slice().reverse() : range);\n  fn.domain(domain);\n\n  return fn;\n}\n","import { scaleOrdinal } from 'd3-scale';\nimport extend from 'extend';\nimport resolveSettings from './settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n};\n\n/**\n * @alias scaleOrdinal\n * @private\n * @param { Object } settings\n * @param { field[] } [fields]\n * @param { dataset } data\n * @return { ordinal }\n */\nexport default function ordinal(settings = {}, data = {}, resources = {}) {\n  /**\n   * An augmented {@link https://github.com/d3/d3-scale#_ordinal|d3 ordinal scale}\n   * @private\n   * @alias ordinal\n   * @param { Object }\n   * @return { number }\n   */\n  const fn = scaleOrdinal();\n\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n\n  const valueFn = typeof settings.value === 'function' ? settings.value : (d) => d.datum.value;\n  const labelFn = typeof settings.label === 'function' ? settings.label : (d) => d.datum.label;\n  const items = data.items || [];\n  const domainToDataMapping = {};\n  const values = [];\n  const labels = [];\n\n  for (let i = 0; i < items.length; i++) {\n    const arg = extend({ datum: items[i] }, ctx);\n    const v = valueFn(arg, i);\n    if (values.indexOf(v) === -1) {\n      values.push(v);\n      labels.push(labelFn(arg, i));\n      domainToDataMapping[v] = i;\n    }\n  }\n\n  fn.data = () => data;\n\n  fn.labels = () => labels;\n\n  fn.label = (domainValue) => labels[values.indexOf(domainValue)];\n\n  fn.datum = (domainValue) => items[domainToDataMapping[domainValue]];\n\n  fn.range(stgns.range);\n\n  if (Array.isArray(stgns.domain) && stgns.domain.length) {\n    fn.domain(stgns.domain);\n  } else {\n    fn.domain(values);\n  }\n  return fn;\n}\n","import ordinal from '../ordinal';\nimport resolveSettings from '../settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  unknown: undefined,\n};\n\nconst DEFAULT_EXPLICIT_SETTINGS = {\n  domain: [],\n  range: [],\n  override: false,\n};\n\n/**\n * @typedef {object} scale--categorical-color\n * @property {string} [type='categorical-color']\n * @property {string[]} [range=false] - CSS color values of the output range\n * @property {string} [unknown] - {@link https://github.com/d3/d3-scale#ordinal_unknown}\n * @property {object} [explicit] - Explicitly bind values to an output\n * @property {object[]} [explicit.domain[]] - Values to bind\n * @property {string[]} [explicit.range[]] - Output range\n */\n\n/**\n * An ordinal scale with the output range set to default colors, as defined by *scaleCategorical.range*\n * @alias scaleCategorical\n * @private\n * @param { Object } settings\n * @param { field[] } [fields]\n * @param { dataset } [dataset]\n * @return { ordinal }\n */\nexport default function scaleCategorical(settings = {}, data = {}, resources = {}) {\n  const s = ordinal(settings, data, resources);\n  const theme = resources.theme;\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  stgns.explicit = resolveSettings(settings.explicit, DEFAULT_EXPLICIT_SETTINGS, { data, resources });\n\n  let range;\n  if (!Array.isArray(stgns.range) || stgns.range.length === 0) {\n    range = theme ? theme.palette('categorical', s.domain().length).slice() : [];\n  } else {\n    range = stgns.range.slice();\n  }\n\n  if (stgns.unknown) {\n    s.unknown(stgns.unknown);\n  } else if (theme && theme.palette('unknown')) {\n    let un = theme.palette('unknown');\n    s.unknown(un[0]);\n  }\n\n  if (Array.isArray(stgns.explicit.domain) && stgns.explicit.domain.length) {\n    const domain = s.domain().slice();\n    const explicitDomain = stgns.explicit.domain;\n    const explicitRange = Array.isArray(stgns.explicit.range) ? stgns.explicit.range : [];\n\n    // duplicate range values to cover entire domain\n    const numCopies = Math.floor(domain.length / range.length);\n    for (let i = 1; i < numCopies + 1; i *= 2) {\n      range = range.concat(range);\n    }\n\n    if (stgns.explicit.override) {\n      for (let i = 0; i < explicitDomain.length; i++) {\n        const index = domain.indexOf(explicitDomain[i]);\n        if (index > -1) {\n          range[index] = explicitRange[i];\n        }\n      }\n    } else {\n      // inject explicit colors\n      const order = explicitDomain.map((d, i) => [domain.indexOf(d), d, explicitRange[i]]).sort((a, b) => a[0] - b[0]);\n      order.forEach((v) => {\n        const idx = domain.indexOf(v[1]);\n        if (idx !== -1) {\n          range.splice(idx, 0, v[2]);\n        }\n      });\n    }\n\n    // cutoff excess range values\n    range.length = domain.length;\n  }\n\n  s.range(range);\n  return s;\n}\n","import registry from '../../utils/registry';\nimport linear from '../../scales/linear';\nimport band from '../../scales/band';\nimport hBand from '../../scales/h-band';\nimport sequential from '../../scales/color/sequential';\nimport threshold from '../../scales/color/threshold';\nimport categorical from '../../scales/color/categorical';\nimport extractData from '../../data/extractor';\n\nconst scaleRegistry = registry();\n\nscaleRegistry('linear', linear);\nscaleRegistry('band', band);\nscaleRegistry('h-band', hBand);\nscaleRegistry('sequential-color', sequential);\nscaleRegistry('threshold-color', threshold);\nscaleRegistry('categorical-color', categorical);\n\nexport { scaleRegistry as default };\n\nfunction getTypeFromMeta(fields) {\n  const types = fields.map((field) => (field.type() === 'dimension' ? 'band' : 'linear'));\n  return types.indexOf('linear') !== -1 ? 'linear' : 'band';\n}\n\nfunction deduceScaleTypeFromData(data) {\n  if (data.root) {\n    return 'h-band';\n  }\n\n  if (data.fields && data.fields[0]) {\n    return getTypeFromMeta(data.fields);\n  }\n  return 'linear';\n}\n\nexport function create(options, d, deps) {\n  let dataSourceConfig = options.data;\n  if (options.source) {\n    // DEPRECATION\n    deps.logger.warn('Deprecated: Scale data source configuration');\n    dataSourceConfig = {\n      extract: [],\n    };\n    (Array.isArray(options.source) ? options.source : [options.source]).forEach((source) => {\n      dataSourceConfig.extract.push({\n        field: source,\n      });\n    });\n  }\n\n  const data = extractData(dataSourceConfig, d, deps);\n  let type = options.type || deduceScaleTypeFromData(data);\n  let s;\n\n  if (type === 'color') {\n    if (data.fields && data.fields[0] && data.fields[0].type() === 'dimension') {\n      type = 'categorical-color';\n    } else {\n      type = 'sequential-color';\n    }\n  }\n\n  if (deps.scale.has(type)) {\n    s = deps.scale.get(type);\n    s = s(options, data, { theme: deps.theme, logger: deps.logger });\n    s.type = type;\n  }\n  return s;\n}\n\nexport function collection(scalesConfig, data, deps, fn = create) {\n  const scales = {};\n\n  return {\n    get(def) {\n      let key;\n      if (typeof def === 'string' && scalesConfig[def]) {\n        key = def;\n      } else if (typeof def === 'object' && 'scale' in def && scalesConfig[def.scale]) {\n        key = def.scale;\n      }\n\n      if (key) {\n        scales[key] = scales[key] || fn(scalesConfig[key], data, deps);\n        return scales[key];\n      }\n\n      return fn(def, data, deps);\n    },\n    all() {\n      Object.keys(scalesConfig).forEach(this.get);\n      return scales;\n    },\n  };\n}\n","/**\n * Utility functions\n */\n\nvar util = {};\n\nutil.isObject = function isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nutil.isNumber = function isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nutil.isUndefined = function isUndefined(arg) {\n  return arg === void 0;\n}\n\nutil.isFunction = function isFunction(arg){\n  return typeof arg === 'function';\n}\n\n\n/**\n * EventEmitter class\n */\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!util.isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error' && !this._events.error) {\n    er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      throw Error('Uncaught, unspecified \"error\" event.');\n    }\n    return false;\n  }\n\n  handler = this._events[type];\n\n  if (util.isUndefined(handler))\n    return false;\n\n  if (util.isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (util.isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              util.isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (util.isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (util.isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!util.isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n\n      if (util.isFunction(console.error)) {\n        console.error('(node) warning: possible EventEmitter memory ' +\n                      'leak detected. %d listeners added. ' +\n                      'Use emitter.setMaxListeners() to increase limit.',\n                      this._events[type].length);\n      }\n      if (util.isFunction(console.trace))\n        console.trace();\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (util.isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (util.isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (util.isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (Array.isArray(listeners)) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (util.isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (util.isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n","import EventEmitter from 'node-event-emitter';\n\nexport default {\n  /**\n   * Function used to add event handling to objects passed in.\n   * @private\n   * @param {Object} obj Object instance that will get event handling.\n   */\n  mixin(obj) {\n    Object.keys(EventEmitter.prototype).forEach((key) => {\n      obj[key] = EventEmitter.prototype[key];\n    });\n    EventEmitter.init(obj);\n    return obj;\n  },\n};\n","import EventEmitter from '../utils/event-emitter';\n\nexport default function scrollApi() {\n  let min = 0;\n  let max = 0;\n  let start = 0;\n  let viewSize = 0;\n  start = start || min;\n\n  /**\n   * The scroll api\n   * @private\n   * @alias scroll\n   */\n  const s = {\n    /**\n     * Move the current scroll\n     * @param {number} value\n     * @emits update\n     */\n    move(value) {\n      this.moveTo(start + value);\n    },\n\n    /**\n     * Change the current scroll to a specific value\n     * @param {number} value\n     * @emits update\n     */\n    moveTo(value) {\n      const newStart = Math.max(min, Math.min(max - viewSize, value));\n      if (start !== newStart) {\n        start = newStart;\n        s.emit('update');\n      }\n    },\n\n    /**\n     * Update scroll settings\n     * @param {number} [settings.min]\n     * @param {number} [settings.max]\n     * @param {number} [settings.viewSize]\n     * @emits update\n     */\n    update(settings) {\n      let triggerUpdate = false;\n      ({ min = min, max = max } = settings);\n      if (settings.viewSize !== undefined && settings.viewSize !== viewSize) {\n        viewSize = settings.viewSize;\n        triggerUpdate = true;\n      }\n\n      // update scroll to be within the new bounds\n      const newStart = Math.max(min, Math.min(max - viewSize, start));\n      if (start !== newStart) {\n        start = newStart;\n        triggerUpdate = true;\n      }\n\n      if (triggerUpdate) {\n        s.emit('update');\n      }\n    },\n\n    /**\n     * Get the current scroll state\n     * @return {object} with min, max, start & viewSize\n     */\n    getState() {\n      return {\n        min,\n        max,\n        start,\n        viewSize,\n      };\n    },\n  };\n\n  EventEmitter.mixin(s);\n\n  return s;\n}\n","import scrollApi from '../../scroll-api';\n\nexport function createOrUpdate(options, oldApi) {\n  const min = options.min || 0;\n  const max = options.max || 0;\n  const viewSize = options.viewSize || 0;\n\n  const s = oldApi || scrollApi();\n  s.update({ min, max, viewSize });\n\n  return s;\n}\n\nexport default function builder(obj, oldScrollApis) {\n  const scrollApis = {};\n  for (const n in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, n)) {\n      scrollApis[n] = createOrUpdate(obj[n], oldScrollApis ? oldScrollApis[n] : null);\n    }\n  }\n  return scrollApis;\n}\n\nexport function getOrCreateScrollApi(v, scrollApis) {\n  if (!scrollApis[v]) {\n    scrollApis[v] = scrollApi();\n  }\n  return scrollApis[v];\n}\n","function lessThanOrEqual(value, limit) {\n  return value <= limit;\n}\n\nfunction lessThan(value, limit) {\n  return value < limit;\n}\n\nfunction index(boundaries, point, after) {\n  let i = 0;\n  while (i < boundaries.length && point > boundaries[i]) {\n    ++i;\n  }\n  if (boundaries[i] === point && after) {\n    ++i;\n  }\n  return i;\n}\n\nfunction contains(boundaries, point, minCondition, maxCondition) {\n  const len = boundaries.length;\n\n  for (let i = 1; i < len; i += 2) {\n    if (minCondition(boundaries[i - 1], point) && maxCondition(point, boundaries[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default function rangeCollection(config = {}) {\n  let maxCondition;\n  let minCondition;\n  let boundaries = [];\n\n  function fn() {}\n\n  fn.configure = (c = {}) => {\n    const { includeMax = true, includeMin = true } = c;\n    maxCondition = includeMax ? lessThanOrEqual : lessThan;\n    minCondition = includeMin ? lessThanOrEqual : lessThan;\n  };\n\n  fn.add = ({ min, max }) => {\n    const i0 = index(boundaries, min);\n    const i1 = index(boundaries, max, true);\n\n    const args = [i0, i1 - i0];\n    if (i0 % 2 === 0) {\n      args.push(min);\n    }\n    if (i1 % 2 === 0) {\n      args.push(max);\n    }\n\n    const before = boundaries.join(',');\n    boundaries.splice(...args);\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.remove = ({ min, max }) => {\n    const i0 = index(boundaries, min);\n    const i1 = index(boundaries, max, true);\n\n    const args = [i0, i1 - i0];\n    if (i0 % 2 === 1) {\n      args.push(min);\n    }\n    if (i1 % 2 === 1) {\n      args.push(max);\n    }\n    const before = boundaries.join(',');\n    boundaries.splice(...args);\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.set = (range) => {\n    const before = boundaries.join(',');\n    boundaries = [];\n    if (Array.isArray(range)) {\n      range.forEach(fn.add);\n    } else {\n      fn.add(range);\n    }\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.clear = () => {\n    const before = boundaries.length > 0;\n    boundaries = [];\n    return before;\n  };\n\n  fn.containsValue = (value) => contains(boundaries, value, minCondition, maxCondition);\n\n  fn.containsRange = ({ min, max }) => {\n    const i0 = index(boundaries, min, true);\n    const i1 = index(boundaries, max);\n\n    return i0 === i1 && i1 % 2 === 1;\n  };\n\n  fn.toggle = (range) => {\n    if (fn.containsRange(range)) {\n      return fn.remove(range);\n    }\n    return fn.add(range);\n  };\n\n  fn.ranges = () => {\n    const collection = [];\n    for (let i = 1; i < boundaries.length; i += 2) {\n      collection.push({\n        min: boundaries[i - 1],\n        max: boundaries[i],\n      });\n    }\n    return collection;\n  };\n\n  fn.configure(config);\n\n  return fn;\n}\n","export default function valueCollection() {\n  let values = [];\n  function vc() {}\n\n  vc.add = (value) => {\n    if (values.indexOf(value) === -1) {\n      values.push(value);\n      return true;\n    }\n    return false;\n  };\n\n  vc.remove = (value) => {\n    const idx = values.indexOf(value);\n    if (idx !== -1) {\n      values.splice(idx, 1);\n      return true;\n    }\n    return false;\n  };\n\n  vc.contains = (value) => values.indexOf(value) !== -1;\n\n  vc.values = () => values.slice();\n\n  vc.clear = () => (values = []);\n\n  vc.toString = () => values.join(';');\n\n  return vc;\n}\n","import extend from 'extend';\n\nimport EventEmitter from '../utils/event-emitter';\n\nimport rangeCollection from './range-collection';\nimport valueCollection from './value-collection';\n\n/**\n * @typedef {object} brush-config\n * @property {Array<brush-config--ranges>} [ranges] - Range configurations\n */\n\n/**\n * @typedef {object}\n * @alias brush-config--ranges\n */\nconst DEFAULT_RANGE_CONFIG = {\n  /**\n   * An identifier that represents the data source of the value\n   * @type {string=}\n   */\n  key: undefined,\n  /**\n   * Whether or not the minimum value of a range should be included when determening if a value is brushed.\n   * @type {boolean=} */\n  includeMin: true,\n  /**\n   * Whether or not the maximum value of a range should be included when determening if a value is brushed.\n   * @type {boolean=} */\n  includeMax: true,\n};\n\nfunction add({ items, collection, vc }) {\n  const changedMap = {};\n  const changed = [];\n  let key;\n  let values;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    if (!collection[key]) {\n      collection[key] = vc();\n    }\n    values = items[i].values || [items[i].value];\n    for (let vi = 0; vi < values.length; vi++) {\n      if (collection[key].add(values[vi])) {\n        changedMap[key] = changedMap[key] || [];\n        changedMap[key].push(values[vi]);\n      }\n    }\n  }\n\n  const keys = Object.keys(changedMap);\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    changed.push({ id: key, values: changedMap[key] });\n  }\n\n  return changed;\n}\n\nfunction remove({ items, collection }) {\n  const changedMap = {};\n  const changed = [];\n  let key;\n  let values;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    if (!collection[key]) {\n      continue;\n    }\n    values = items[i].values || [items[i].value];\n    for (let vi = 0; vi < values.length; vi++) {\n      if (collection[key].remove(values[vi])) {\n        changedMap[key] = changedMap[key] || [];\n        changedMap[key].push(values[vi]);\n      }\n    }\n  }\n\n  const keys = Object.keys(changedMap);\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    changed.push({ id: key, values: changedMap[key] });\n  }\n\n  return changed;\n}\n\nfunction collectUnique(items) {\n  const filteredSet = {};\n  let key;\n  let values;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    values = items[i].values || [items[i].value];\n    if (!filteredSet[key]) {\n      filteredSet[key] = [];\n    }\n    for (let vi = 0; vi < values.length; vi++) {\n      const idx = filteredSet[key].indexOf(values[vi]);\n      if (idx === -1) {\n        filteredSet[key].push(values[vi]);\n      }\n    }\n  }\n\n  return filteredSet;\n}\n\nfunction createValueCollection({ key, collection, obj, fn, value }) {\n  if (!collection[key]) {\n    collection[key] = fn();\n  }\n  obj[key] = obj[key] || [];\n  obj[key].push(value);\n  collection[key].add(value);\n}\n\nexport function toggle({ items, values, vc }) {\n  const addedMap = {};\n  const removedMap = {};\n  const added = [];\n  const removed = [];\n  const filteredSet = collectUnique(items);\n  let key;\n  let value;\n  let fs;\n\n  const setKeys = Object.keys(filteredSet);\n  for (let i = 0, num = setKeys.length; i < num; i++) {\n    key = setKeys[i];\n    fs = filteredSet[key];\n\n    for (let k = 0, len = fs.length; k < len; k++) {\n      value = fs[k];\n      if (!values[key] || !values[key].contains(value)) {\n        createValueCollection({\n          key,\n          value,\n          collection: values,\n          obj: addedMap,\n          fn: vc,\n        });\n      } else if (values[key] && values[key].contains(value)) {\n        removedMap[key] = removedMap[key] || [];\n        removedMap[key].push(value);\n        values[key].remove(value);\n      }\n    }\n  }\n\n  const addedKeys = Object.keys(addedMap);\n  for (let i = 0, num = addedKeys.length; i < num; i++) {\n    key = addedKeys[i];\n    added.push({ id: key, values: addedMap[key] });\n  }\n\n  const removedKeys = Object.keys(removedMap);\n  for (let i = 0, num = removedKeys.length; i < num; i++) {\n    key = removedKeys[i];\n    removed.push({ id: key, values: removedMap[key] });\n  }\n\n  return [added, removed];\n}\n\nfunction diff(old, current) {\n  const changed = [];\n  const keys = Object.keys(old);\n  let key;\n  let changedValues;\n  const filterFn = (v) => current[key].indexOf(v) === -1;\n\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    if (!current[key]) {\n      changed.push({ id: key, values: old[key] });\n    } else {\n      changedValues = old[key].filter(filterFn);\n      if (changedValues.length) {\n        changed.push({ id: key, values: changedValues });\n      }\n    }\n  }\n\n  return changed;\n}\n\nexport function set({ items, vCollection, vc }) {\n  const addedMap = {};\n  const filteredSet = collectUnique(items);\n  let added = [];\n  let removed = [];\n  let key;\n\n  const oldMap = {};\n  const vcKeys = Object.keys(vCollection);\n  for (let i = 0, num = vcKeys.length; i < num; i++) {\n    key = vcKeys[i];\n    oldMap[key] = vCollection[key].values().slice();\n    delete vCollection[key];\n  }\n\n  const createValueCollectionFn = (value) => {\n    if (!vCollection[key] || !vCollection[key].contains(value)) {\n      createValueCollection({\n        key,\n        value,\n        collection: vCollection,\n        obj: addedMap,\n        fn: vc,\n      });\n    }\n  };\n\n  const fsKeys = Object.keys(filteredSet);\n  for (let i = 0, num = fsKeys.length; i < num; i++) {\n    key = fsKeys[i];\n    filteredSet[key].forEach(createValueCollectionFn);\n  }\n\n  removed = diff(oldMap, addedMap);\n  added = diff(addedMap, oldMap);\n\n  return [added, removed];\n}\n\nfunction applyAliases(items, aliases) {\n  if (!Object.keys(aliases).length) {\n    return items;\n  }\n  const len = items.length;\n  const its = Array(len);\n  for (let i = 0; i < len; i++) {\n    its[i] = items[i].key in aliases ? extend({}, items[i], { key: aliases[items[i].key] }) : items[i];\n  }\n  return its;\n}\n\nfunction intercept(handlers, items, aliases) {\n  const its = applyAliases(items, aliases);\n  return handlers && handlers.length ? handlers.reduce((value, interceptor) => interceptor(value), its) : its;\n}\n\nfunction toCamelCase(s) {\n  return s.replace(/(-[a-z])/g, ($1) => $1.toUpperCase().replace('-', ''));\n}\n\nfunction toSnakeCase(s) {\n  return s.replace(/([A-Z])/g, ($1) => `-${$1.toLowerCase()}`);\n}\n\nfunction updateRange(items, action, { ranges, interceptors, rc, aliases, rangeConfig }) {\n  const inter = `${action}Ranges`;\n  const its = intercept(interceptors[inter], items, aliases);\n  let changed = false;\n  its.forEach((item) => {\n    const key = item.key;\n    if (!ranges[key]) {\n      ranges[key] = rc(rangeConfig.sources[key] || rangeConfig.default);\n    }\n    if (action === 'set') {\n      changed = ranges[key][action](item.ranges || item.range) || changed;\n    } else {\n      const rangeValues = item.ranges || [item.range];\n      for (let i = 0; i < rangeValues.length; i++) {\n        changed = ranges[key][action](rangeValues[i]) || changed;\n      }\n    }\n  });\n\n  return changed;\n}\n\nexport default function brush({ vc = valueCollection, rc = rangeCollection } = {}) {\n  let activated = false;\n  let ranges = {};\n  let values = {};\n  let aliases = {};\n  let rangeConfig = {\n    sources: {},\n    default: extend({}, DEFAULT_RANGE_CONFIG),\n  };\n  const interceptors = {\n    addValues: [],\n    removeValues: [],\n    toggleValues: [],\n    setValues: [],\n    addRanges: [],\n    setRanges: [],\n    removeRanges: [],\n    toggleRanges: [],\n  };\n\n  const getState = () => {\n    const state = {\n      values: {},\n      ranges: {},\n    };\n    Object.keys(values).forEach((key) => {\n      state.values[key] = values[key].values();\n    });\n    Object.keys(ranges).forEach((key) => {\n      state.ranges[key] = ranges[key].ranges();\n    });\n    return state;\n  };\n\n  const links = {\n    ls: [],\n    clear() {\n      this.ls.forEach((b) => b.clear());\n    },\n    start() {\n      this.ls.forEach((b) => b.start());\n    },\n    end() {\n      this.ls.forEach((b) => b.end());\n    },\n    update() {\n      const s = getState();\n      this.ls.forEach((b) => b._state(s));\n    },\n    updateValues() {\n      const s = getState();\n      this.ls.forEach((b) =>\n        b._state({\n          values: s.values,\n        })\n      );\n    },\n    updateRanges() {\n      const s = getState();\n      this.ls.forEach((b) =>\n        b._state({\n          ranges: s.ranges,\n        })\n      );\n    },\n  };\n\n  /**\n   * A brush context\n   * @alias brush\n   * @interface\n   */\n  const fn = {};\n\n  /**\n   * Triggered when this brush is activated\n   * @event brush#start\n   * @type {string}\n   */\n\n  /**\n   * Triggered when this brush is updated\n   * @event brush#update\n   * @type {string}\n   * @param {Array<object>} added - The added items\n   * @param {Array<object>} removed - The removed items\n   */\n\n  /**\n   * Triggered when this brush is deactivated\n   * @event brush#end\n   * @type {string}\n   */\n\n  /**\n   * Configure the brush instance.\n   *\n   * @param {brush-config} config\n   * @example\n   * brushInstance.configure({\n   *   ranges: [\n   *     { key: 'some key', includeMax: false },\n   *     { includeMax: true, includeMin: true },\n   *   ]\n   * })\n   */\n  fn.configure = (config = {}) => {\n    if (Array.isArray(config.ranges) && config.ranges.length) {\n      rangeConfig = {\n        sources: {},\n        default: extend({}, DEFAULT_RANGE_CONFIG),\n      };\n\n      config.ranges.forEach((cfg) => {\n        const c = {};\n        Object.keys(DEFAULT_RANGE_CONFIG)\n          .filter((attr) => attr !== 'key')\n          .forEach((attr) => {\n            c[attr] = typeof cfg[attr] !== 'undefined' ? cfg[attr] : DEFAULT_RANGE_CONFIG[attr];\n          });\n\n        if (typeof cfg.key !== 'undefined') {\n          rangeConfig.sources[cfg.key] = c;\n        } else {\n          rangeConfig.default = c;\n        }\n      });\n\n      Object.keys(ranges).forEach((key) => ranges[key].configure(rangeConfig.sources[key] || rangeConfig.default));\n\n      // TODO only emit update if config has changed\n      fn.emit('update', [], []);\n    }\n  };\n\n  /**\n   * Link this brush to another brush instance.\n   *\n   * When linked, the `target` will receive updates whenever this brush changes.\n   * @param {brush} target - The brush instance to link to\n   */\n  fn.link = (target) => {\n    if (fn === target) {\n      throw new Error(\"Can't link to self\");\n    }\n    links.ls.push(target);\n    target._state(getState());\n  };\n\n  fn._state = (s) => {\n    if (!s) {\n      return getState();\n    }\n    if (s.values) {\n      const arr = [];\n      Object.keys(s.values).forEach((key) => {\n        if (!values[key] || s.values[key].join(';') !== values[key].toString()) {\n          arr.push({\n            key,\n            values: s.values[key],\n          });\n        }\n      });\n      Object.keys(values).forEach((key) => {\n        if (!s.values[key]) {\n          arr.push({\n            key,\n            values: [],\n          });\n        }\n      });\n      if (arr.length) {\n        fn.setValues(arr);\n      }\n    }\n    if (s.ranges) {\n      const arr = [];\n      Object.keys(s.ranges).forEach((key) => {\n        if (!ranges[key] || s.ranges[key].join(';') !== ranges[key].toString()) {\n          arr.push({\n            key,\n            ranges: s.ranges[key],\n          });\n        }\n      });\n      Object.keys(ranges).forEach((key) => {\n        if (!s.ranges[key]) {\n          arr.push({\n            key,\n            ranges: [],\n          });\n        }\n      });\n      if (arr.length) {\n        fn.setRanges(arr);\n      }\n    }\n    return undefined;\n  };\n\n  /**\n   * Starts this brush context\n   *\n   * Starts this brush context and emits a 'start' event if it is not already started.\n   * @param {...any} args - arguments to be passed to 'start' listeners\n   * @emits brush#start\n   */\n  fn.start = (...args) => {\n    if (!activated) {\n      activated = true;\n      fn.emit('start', ...args);\n      links.start();\n    }\n  };\n\n  /**\n   * Ends this brush context\n   *\n   * Ends this brush context and emits an 'end' event if it is not already ended.\n   * @param {...any} args - arguments to be passed to 'end' listeners\n   * @emits brush#end\n   */\n  fn.end = (...args) => {\n    if (!activated) {\n      return;\n    }\n    activated = false;\n    ranges = {};\n    values = {};\n    fn.emit('end', ...args);\n    links.end();\n  };\n\n  /**\n   * Checks if this brush is activated\n   *\n   * Returns true if started, false otherwise\n   * @return {boolean}\n   */\n  fn.isActive = () => activated;\n\n  /**\n   * Clears this brush context\n   */\n  fn.clear = () => {\n    const removed = fn\n      .brushes()\n      .filter((b) => b.type === 'value' && b.brush.values().length)\n      .map((b) => ({ id: b.id, values: b.brush.values() }));\n    const hasChanged = Object.keys(ranges).length > 0 || removed.length;\n    ranges = {};\n    values = {};\n    if (hasChanged) {\n      fn.emit('update', [], removed); // TODO - do not emit update if state hasn't changed\n      links.clear();\n    }\n  };\n\n  /**\n   * Returns all brushes within this context\n   * @return {object}\n   */\n  fn.brushes = () => {\n    let result = [];\n    result = result.concat(\n      Object.keys(ranges).map((key) => ({\n        type: 'range',\n        id: key,\n        brush: ranges[key],\n      }))\n    );\n\n    result = result.concat(\n      Object.keys(values).map((key) => ({\n        type: 'value',\n        id: key,\n        brush: values[key],\n      }))\n    );\n\n    return result;\n  };\n\n  /**\n   * Adds a primitive value to this brush context\n   *\n   * If this brush context is not started, a 'start' event is emitted.\n   * If the state of the brush changes, ie. if the added value does not already exist, an 'update' event is emitted.\n   *\n   * @param {string} key  An identifier that represents the data source of the value\n   * @param {string|number} value The value to add\n   * @emits brush#start\n   * @emits brush#update\n   * @example\n   * brush.addValue('countries', 'Sweden');\n   * brush.addValue('/qHyperCube/qDimensionInfo/0', 3);\n   */\n  fn.addValue = (key, value) => {\n    fn.addValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to add\n   */\n  fn.addValues = (items) => {\n    const its = intercept(interceptors.addValues, items, aliases);\n    const added = add({\n      vc,\n      collection: values,\n      items: its,\n    });\n\n    fn.emit('add-values', its);\n\n    if (added.length) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', added, []);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * @param {object[]} items Items to set\n   */\n  fn.setValues = (items) => {\n    const its = intercept(interceptors.setValues, items, aliases);\n    const changed = set({\n      items: its,\n      vCollection: values,\n      vc,\n    });\n\n    fn.emit('set-values', its);\n\n    if (changed[0].length > 0 || changed[1].length > 0) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', changed[0], changed[1]);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * Removes a primitive values from this brush context\n   *\n   * If the state of the brush changes, ie. if the removed value does exist, an 'update' event is emitted.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to remove\n   * @example\n   * brush.removeValue('countries', 'Sweden');\n   */\n  fn.removeValue = (key, value) => {\n    fn.removeValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to remove\n   */\n  fn.removeValues = (items) => {\n    const its = intercept(interceptors.removeValues, items, aliases);\n    const removed = remove({\n      collection: values,\n      items: its,\n    });\n\n    fn.emit('remove-values', its);\n\n    if (removed.length) {\n      fn.emit('update', [], removed);\n      links.updateValues();\n      // TODO - emit 'end' event if there are no remaining active brushes\n    }\n  };\n\n  /**\n   * Add and remove values in a single operation\n   * almost the same as calling addValues and removeValues but only triggers one 'update' event\n   *\n   * If the state of the brush changes, an 'update' event is emitted.\n   *\n   * @param {object[]} addItems Items to add\n   * @param {object[]} removeItems Items to remove\n   */\n  fn.addAndRemoveValues = (addItems, removeItems) => {\n    const addIts = intercept(interceptors.addValues, addItems, aliases);\n    const removeIts = intercept(interceptors.removeValues, removeItems, aliases);\n    const added = add({\n      vc,\n      collection: values,\n      items: addIts,\n    });\n    const removed = remove({\n      collection: values,\n      items: removeIts,\n    });\n\n    fn.emit('add-values', addIts);\n    fn.emit('remove-values', removeIts);\n\n    if (added.length || removed.length) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', added, removed);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * Toggles a primitive value in this brush context\n   *\n   * If the given value exist in this brush context, it will be removed. If it does not exist it will be added.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to toggle\n   * @example\n   * brush.toggleValue('countries', 'Sweden');\n   */\n  fn.toggleValue = (key, value) => {\n    fn.toggleValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to toggle\n   */\n  fn.toggleValues = (items) => {\n    const its = intercept(interceptors.toggleValues, items, aliases);\n    const toggled = toggle({\n      items: its,\n      values,\n      vc,\n    });\n\n    fn.emit('toggle-values', its);\n\n    if (toggled[0].length > 0 || toggled[1].length > 0) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', toggled[0], toggled[1]);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * Checks if a certain value exists in this brush context\n   *\n   * Returns true if the values exists for the provided key, returns false otherwise.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to check for\n   * @return {boolean}\n   * @example\n   * brush.addValue('countries', 'Sweden');\n   * brush.containsValue('countries', 'Sweden'); // true\n   * brush.toggleValue('countries', 'Sweden'); // remove 'Sweden'\n   * brush.containsValue('countries', 'Sweden'); // false\n   */\n  fn.containsValue = (key, value) => {\n    let k = aliases[key] || key;\n    if (!values[k]) {\n      return false;\n    }\n    return values[k].contains(value);\n  };\n\n  /**\n   * Adds a numeric range to this brush context\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to add to this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   * @example\n   * brush.addRange('Sales', { min: 20, max: 50 });\n   */\n  fn.addRange = (key, range) => {\n    fn.addRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.addRange}\n   * @param {object[]} items - Items containing the ranges to remove\n   * @param {string} items[].key\n   * @param {object} items[].range\n   */\n  fn.addRanges = (items) => {\n    const changed = updateRange(items, 'add', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Removes a numeric range from this brush context\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to remove from this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.removeRange = (key, range) => {\n    fn.removeRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.removeRange}\n   * @param {object[]} items - Items containing the ranges to remove\n   */\n  fn.removeRanges = (items) => {\n    const changed = updateRange(items, 'remove', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Sets a numeric range to this brush context\n   *\n   * Overwrites any active ranges identified by `key`\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to set on this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.setRange = (key, range) => {\n    fn.setRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.setRange}\n   * @param {object[]} items - Items containing the ranges to set\n   */\n  fn.setRanges = (items) => {\n    const changed = updateRange(items, 'set', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Toggles a numeric range in this brush context\n   *\n   * Removes the range if it's already contained within the given identifier,\n   * otherwise the given range is added to the brush.\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to toggle in this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.toggleRange = (key, range) => {\n    fn.toggleRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.toggleRange}\n   * @param {object[]} items - Items containing the ranges to toggle\n   */\n  fn.toggleRanges = (items) => {\n    const changed = updateRange(items, 'toggle', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Checks if a value is contained within a range in this brush context\n   *\n   * Returns true if the values exists for the provided key, returns false otherwise.\n   *\n   * @param  {string} key - An identifier that represents the data source of the value\n   * @param  {number} value - The value to check for\n   * @return {boolean}\n   * @example\n   * brush.addRange('Sales', { min: 10, max: 50 });\n   * brush.containsRangeValue('Sales', 30); // true\n   * brush.containsRangeValue('Sales', 5); // false\n   */\n  fn.containsRangeValue = (key, value) => {\n    let k = aliases[key] || key;\n    if (!ranges[k]) {\n      return false;\n    }\n    return ranges[k].containsValue(value);\n  };\n\n  /**\n   * Checks if a range segment is contained within this brush context\n   *\n   * Returns true if the range segment exists for the provided key, returns false otherwise.\n   *\n   * @param {string} key - An identifier that represents the data source of the value\n   * @param {object} range - The range to check for\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   * @return {boolean}\n   * @example\n   * brush.addRange('Sales', { min: 10, max: 50 });\n   * brush.containsRange('Sales', { min: 15, max: 20 }); // true - the range segment is fully contained within [10, 50]\n   * brush.containsRange('Sales', { min: 5, max: 20 }); // false - part of the range segment is outside [10, 50]\n   * brush.containsRange('Sales', { min: 30, max: 80 }); // false - part of the range segment is outside [10, 50]\n   */\n  fn.containsRange = (key, range) => {\n    let k = aliases[key] || key;\n    if (!ranges[k]) {\n      return false;\n    }\n    return ranges[k].containsRange(range);\n  };\n\n  fn.containsMappedData = (d, props, mode) => {\n    let status = [];\n    const keys = Object.keys(d);\n    let key;\n    let item;\n    let source;\n    let value;\n\n    for (let i = 0, num = keys.length; i < num; i++) {\n      key = keys[i];\n      if (key === 'value') {\n        item = d;\n        status[i] = { key: '', i, bool: false };\n      } else if (key === 'source') {\n        continue;\n      } else {\n        item = d[key];\n        status[i] = { key, i, bool: false };\n      }\n      source = item.source && item.source.field;\n      if (typeof source === 'undefined') {\n        continue;\n      }\n      if (typeof item.source.key !== 'undefined') {\n        source = `${item.source.key}/${source}`;\n      }\n\n      if (source in aliases) {\n        source = aliases[source];\n      }\n\n      value = item.value;\n      if (ranges[source]) {\n        status[i].bool = Array.isArray(value)\n          ? ranges[source].containsRange({ min: value[0], max: value[1] })\n          : ranges[source].containsValue(value);\n      } else if (values[source] && values[source].contains(value)) {\n        status[i].bool = true;\n      }\n    }\n\n    if (props) {\n      status = status.filter((b) => props.indexOf(b.key) !== -1);\n      if (mode === 'and') {\n        return !!status.length && !status.some((s) => s.bool === false);\n      }\n      if (mode === 'xor') {\n        return !!status.length && status.some((s) => s.bool) && status.some((s) => s.bool === false);\n      }\n      // !mode || mode === 'or'\n      return status.some((s) => s.bool);\n    }\n    return status.some((s) => s.bool);\n  };\n\n  /**\n   * Adds an event interceptor\n   *\n   * @param {string} name Name of the event to intercept\n   * @param {function} ic Handler to call before event is triggered\n   * @example\n   * brush.intercept('add-values', items => {\n   *  console.log('about to add the following items', items);\n   *  return items;\n   * });\n   */\n  fn.intercept = (name, ic) => {\n    const s = toCamelCase(name);\n    if (!interceptors[s]) {\n      return;\n    }\n    interceptors[s].push(ic);\n  };\n\n  /**\n   * Removes an interceptor\n   *\n   * @param {string} name Name of the event to intercept\n   * @param {function} ic Handler to remove\n   */\n  fn.removeInterceptor = (name, ic) => {\n    const s = toCamelCase(name);\n    if (!interceptors[s]) {\n      return;\n    }\n    const idx = interceptors[s].indexOf(ic);\n    if (idx !== -1) {\n      interceptors[s].splice(idx, 1);\n    }\n  };\n\n  /**\n   * Removes all interceptors\n   *\n   * @param {string} [name] Name of the event to remove interceptors for. If not provided, removes all interceptors.\n   */\n  fn.removeAllInterceptors = (name) => {\n    const toRemove = [];\n    if (name) {\n      const s = toCamelCase(name);\n      if (interceptors[s] && interceptors[s].length) {\n        toRemove.push({ name, handlers: interceptors[s] });\n      }\n    } else {\n      Object.keys(interceptors).forEach((n) => {\n        if (interceptors[n].length) {\n          toRemove.push({ name: toSnakeCase(n), handlers: interceptors[n] });\n        }\n      });\n    }\n\n    toRemove.forEach((ic) => {\n      const interceptorHandlers = ic.handlers.slice();\n      interceptorHandlers.forEach((handler) => fn.removeInterceptor(ic.name, handler));\n    });\n  };\n\n  /**\n   * Adds an alias to the given key\n   *\n   * @param {string} key - Value to be replaced\n   * @param {string} alias - Value to replace key with\n   * @example\n   * brush.addKeyAlias('BadFieldName', 'Region');\n   * brush.addValue('BadFieldName', 'Sweden'); // 'BadFieldName' will be stored as 'Region'\n   * brush.containsValue('Region', 'Sweden'); // true\n   * brush.containsValue('BadFieldName', 'Sweden'); // true\n   */\n  fn.addKeyAlias = (key, alias) => {\n    aliases[key] = alias;\n  };\n\n  /**\n   * Removes an alias\n   *\n   * This will only remove the key to alias mapping for new manipulations of the brush,\n   * no changes will be made to the current state of this brush.\n   *\n   * @param {string} key - Value to remove as alias\n   * @example\n   * brush.removeKeyAlias('BadFieldName');\n   */\n  fn.removeKeyAlias = (key) => {\n    delete aliases[key];\n  };\n\n  EventEmitter.mixin(fn);\n\n  return fn;\n}\n","import brush from './brush';\nimport registry from '../utils/registry';\n\nconst reg = registry();\n\nexport function register(type, b) {\n  if (b) {\n    reg.add(type, b);\n  }\n  return reg.get(type);\n}\n\nexport default brush;\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","import extend from 'extend';\nimport { interpolateObject } from 'd3-interpolate';\nimport { easeCubic, easeElasticOut } from 'd3-ease';\n\n/* globals window */\n\nfunction nodeId(node, i) {\n  if (node.data) {\n    return node.data.value;\n  }\n  if (node.type === 'text') {\n    return node.text;\n  }\n  return i;\n}\n\nfunction tween({ old, current }, { renderer }, config) {\n  let ticker;\n  // let staticNodes = [];\n  let toBeUpdated = [];\n  let entered = { nodes: [], ips: [] };\n  let exited = { nodes: [], ips: [] };\n  let updated = { nodes: [], ips: [] };\n  let stages = [];\n  const trackBy = config.trackBy || nodeId;\n\n  const tweener = {\n    start() {\n      let ids = {};\n      old.forEach((node, i) => {\n        let id = trackBy(node, i);\n        ids[id] = node;\n      });\n      current.forEach((node, i) => {\n        let id = trackBy(node, i);\n        if (ids[id]) {\n          updated.ips.push(interpolateObject(ids[id], node));\n          updated.nodes.push(node);\n          toBeUpdated.push(ids[id]);\n          ids[id] = false;\n        } else {\n          entered.nodes.push(node);\n          entered.ips.push(\n            interpolateObject(\n              {\n                r: 0.001,\n                opacity: 0,\n              },\n              node\n            )\n          );\n        }\n      });\n      Object.keys(ids).forEach((key) => {\n        if (ids[key]) {\n          exited.nodes.push(ids[key]);\n          exited.ips.push(interpolateObject(ids[key], extend({}, ids[key], { r: 0.0001, opacity: 0 })));\n        }\n      });\n      if (exited.ips.length) {\n        stages.push({\n          easing: easeCubic,\n          duration: 200,\n          tweens: exited.ips,\n          nodes: [...toBeUpdated],\n        });\n      }\n      if (updated.ips.length) {\n        stages.push({\n          easing: easeCubic,\n          duration: 400,\n          tweens: updated.ips,\n          nodes: [],\n        });\n      }\n      if (entered.ips.length) {\n        stages.push({\n          easing: easeElasticOut,\n          duration: 1200,\n          tweens: entered.ips,\n          nodes: [...updated.nodes],\n        });\n      }\n      // console.log(stages);\n      if (stages.length) {\n        stages[0].started = Date.now();\n        if (typeof window !== 'undefined') {\n          ticker = window.requestAnimationFrame(tweener.tick);\n        }\n      }\n    },\n    tick() {\n      let currentStage = stages[0];\n      if (!currentStage) {\n        tweener.stop();\n      }\n      if (!currentStage.started) {\n        currentStage.started = Date.now();\n      }\n      let t = (Date.now() - currentStage.started) / currentStage.duration;\n      let currentNodes = [];\n      let tweenedNodes = currentStage.tweens.map((ip) => ip(currentStage.easing(Math.min(1, t))));\n      currentNodes.push(...tweenedNodes);\n      currentNodes.push(...currentStage.nodes);\n      // currentNodes.push(...staticNodes);\n      // stages.slice(1).forEach(stage => currentNodes.push(...stage.nodes));\n      renderer.render(currentNodes);\n      if (t >= 1) {\n        // staticNodes.push(...currentStage.nodes);\n        stages.shift();\n        if (!stages.length) {\n          tweener.stop();\n        }\n      }\n      if (ticker) {\n        ticker = window.requestAnimationFrame(tweener.tick);\n      }\n    },\n    stop() {\n      if (ticker) {\n        window.cancelAnimationFrame(ticker);\n        ticker = false;\n      }\n    },\n  };\n\n  return tweener;\n}\n\nexport { tween as default };\n","import extend from 'extend';\n\nconst GLOBAL_DEFAULTS = {\n  fontFamily: 'Arial',\n  fontSize: '13px',\n  color: '#595959',\n  backgroundColor: '#ffffff',\n  stroke: '#000000',\n  strokeWidth: 0,\n  $fill: '#333333',\n};\n\nconst REF_RX = /^\\$/;\n\nfunction isPrimitive(x) {\n  const type = typeof x;\n  return type !== 'object' && type !== 'function' && type !== 'undefined';\n}\n\n/**\n * @callback datum-accessor\n * @param {datum-extract} d\n */\n\n/**\n * @typedef {object} datum-config\n * @property {string} [scale]\n * @property {datum-accessor} fn\n * @property {string} ref - A reference to a datum-extract property\n */\n\n/**\n * @typedef {string|datum-config|datum-accessor} datum-string\n */\n\n/**\n * @typedef {number|datum-config|datum-accessor} datum-number\n */\n\n/**\n * @typedef {boolean|datum-config|datum-accessor} datum-boolean\n */\n\n/**\n * Normalizes property settings\n *\n * @ignore\n * @export\n * @param {any} settings\n * @param {any} defaults\n * @param {any} chart\n * @returns {any}\n */\nexport function normalizeSettings(settings, defaults, chart) {\n  const composition = extend({}, settings);\n  const defs = extend({}, defaults);\n  Object.keys(composition).forEach((key) => {\n    defs[key] = {};\n    const v = composition[key];\n    const vType = typeof v;\n    if (typeof v === 'function') {\n      defs[key].fn = v;\n    } else if (isPrimitive(v)) {\n      let defaultValue = defaults[key];\n      if (typeof defaultValue === 'string' && REF_RX.test(defaultValue)) {\n        defaultValue = GLOBAL_DEFAULTS[defaultValue];\n      }\n      const defaultType = typeof defaultValue;\n      if (defaultType === 'undefined') {\n        // if property has no default, assign provided value\n        defs[key] = v;\n      } else {\n        // assign provided value if it's of same type as default, otherwise use default\n        defs[key] = defaultType === vType ? v : defaultValue;\n      }\n    } else if (v && typeof v === 'object') {\n      if (typeof v.fn === 'function') {\n        defs[key].fn = v.fn;\n      }\n      if (typeof v.scale !== 'undefined') {\n        defs[key].scale = chart.scale(v.scale);\n      }\n      if (typeof v.ref === 'string') {\n        defs[key].ref = v.ref;\n      }\n    }\n  });\n\n  Object.keys(defaults).forEach((key) => {\n    if (key in composition) {\n      // don't process same props again\n      return;\n    }\n    const v = defaults[key];\n    const defaultType = typeof v;\n    if (defaultType === 'string' && REF_RX.test(v)) {\n      defs[key] = GLOBAL_DEFAULTS[v];\n    } else {\n      defs[key] = v;\n    }\n  });\n\n  return defs;\n}\n\nexport function resolveForItem(context, normalized, idx) {\n  const ret = {};\n  const keys = Object.keys(normalized);\n  const len = keys.length;\n  const fallbackData = context.datum;\n  const datum = context.datum;\n  for (let i = 0; i < len; i++) {\n    const key = keys[i];\n    const normalizedProp = normalized[key];\n    const exists = typeof datum === 'object' && typeof normalizedProp !== 'undefined';\n    const hasExplicitDataProp = exists && typeof normalizedProp.ref === 'string';\n    const hasImplicitDataProp = exists && key in datum;\n    const propData = hasExplicitDataProp ? datum[normalizedProp.ref] : hasImplicitDataProp ? datum[key] : fallbackData; // eslint-disable-line\n    if (isPrimitive(normalizedProp)) {\n      ret[key] = normalizedProp;\n    } else if (exists && normalizedProp.fn) {\n      // callback function\n      if (normalizedProp.scale) {\n        context.scale = normalizedProp.scale;\n      }\n      ret[key] = normalizedProp.fn.call(null, context, idx);\n    } else if (exists && normalizedProp.scale && propData) {\n      ret[key] = normalizedProp.scale(propData.value);\n      if (normalizedProp.scale.bandwidth) {\n        ret[key] += normalizedProp.scale.bandwidth() / 2;\n      }\n    } else if (hasExplicitDataProp && propData) {\n      ret[key] = propData.value;\n    } else if (normalizedProp.fn) {\n      ret[key] = normalizedProp.fn.call(null, context, idx);\n    } else {\n      ret[key] = normalizedProp;\n    }\n  }\n  return ret;\n}\n","export function updateScaleSize(object, path, size) {\n  const o = object[path];\n  if (o && o.scale && o.scale.pxScale) {\n    o.scale = o.scale.pxScale(size);\n  } else if (o && o.pxScale) {\n    object[path] = o.pxScale(size);\n  }\n}\n\nexport function scaleWithSize(scale, size) {\n  return scale.pxScale ? scale.pxScale(size) : scale;\n}\n","import { normalizeSettings, resolveForItem } from '../chart-components/property-resolver';\nimport { updateScaleSize } from '../scales';\n\nconst externals = {\n  normalizeSettings,\n  resolveForItem,\n  updateScaleSize,\n};\n\nexport default function (resources, deps = externals) {\n  let cache = {};\n\n  function resolve({ data, settings, defaults = {}, scaled }) {\n    const norm = (cache.norm = deps.normalizeSettings(settings, defaults, resources.chart));\n\n    const res = {\n      scale: resources.chart.scale,\n      formatter: resources.chart.formatter,\n    };\n\n    if (scaled) {\n      Object.keys(scaled).forEach((key) => {\n        if (norm[key]) {\n          deps.updateScaleSize(norm, key, scaled[key]);\n        }\n      });\n    }\n\n    const resolved = [];\n    if (data && Array.isArray(data.items)) {\n      let context;\n      for (let i = 0, len = data.items.length; i < len; i++) {\n        context = {\n          datum: data.items[i],\n          data,\n          resources: res,\n        };\n        let obj = deps.resolveForItem(context, cache.norm, i);\n        obj.data = data.items[i];\n        resolved.push(obj);\n      }\n    } else {\n      const context = {\n        data,\n        resources: res,\n      };\n      let obj = deps.resolveForItem(context, cache.norm, -1);\n      return {\n        settings: cache.norm,\n        item: obj,\n      };\n    }\n    return {\n      settings: cache.norm,\n      items: resolved,\n    };\n  }\n\n  return {\n    resolve,\n  };\n}\n","import extend from 'extend';\nimport { isTouchEvent } from '../utils/event-type';\n\n/**\n * Flatten the array of nodes by removing any containers as they do not support styling, thus unable to brush them.\n * @param {array} nodes\n * @ignore\n */\nexport function reduceToLeafNodes(nodes = []) {\n  return nodes.reduce((ary, node) => {\n    if (Array.isArray(node.children)) {\n      ary.push(...reduceToLeafNodes(node.children));\n      return ary;\n    }\n    ary.push(node);\n    return ary;\n  }, []);\n}\n\nexport function styler(obj, { context, data, style, filter, mode }) {\n  const brusher = obj.chart.brush(context);\n  const dataProps = data;\n  const active = style.active || {};\n  const inactive = style.inactive || {};\n  const styleProps = [];\n  Object.keys(active).forEach((key) => {\n    styleProps.push(key);\n  });\n\n  Object.keys(inactive).forEach((key) => {\n    if (styleProps.indexOf(key) === -1) {\n      styleProps.push(key);\n    }\n  });\n\n  const activeNodes = [];\n  let globalActivation = false; // track when we need to loop through all nodes, not just the active ones\n\n  const getNodes = () => {\n    let nodes = reduceToLeafNodes(obj.nodes);\n    if (typeof filter === 'function') {\n      nodes = nodes.filter(filter);\n    }\n    return nodes;\n  };\n\n  const update = () => {\n    // TODO - render nodes only once, i.e. don't render for each brush, update nodes for all brushes and then render\n    const nodes = getNodes();\n    const len = nodes.length;\n    let nodeData;\n    let globalChanged = false;\n\n    for (let i = 0; i < len; i++) {\n      // TODO - update only added and removed nodes\n      nodeData = nodes[i].data;\n      if (!nodeData) {\n        continue;\n      }\n\n      if (!nodes[i].__style) {\n        nodes[i].__style = {};\n        styleProps.forEach((s) => {\n          nodes[i].__style[s] = nodes[i][s]; // store original value\n        });\n      }\n\n      const isActive = brusher.containsMappedData(nodeData, dataProps, mode);\n      const activeIdx = activeNodes.indexOf(nodes[i]);\n      let changed = false;\n      if (isActive && activeIdx === -1) {\n        // activated\n        activeNodes.push(nodes[i]);\n        changed = true;\n      } else if (!isActive && activeIdx !== -1) {\n        // was active\n        activeNodes.splice(activeIdx, 1);\n        changed = true;\n      }\n      if (changed || globalActivation) {\n        const original = extend({}, nodes[i], nodes[i].__style);\n        styleProps.forEach((s) => {\n          if (isActive && s in active) {\n            nodes[i][s] = typeof active[s] === 'function' ? active[s].call(null, original) : active[s];\n          } else if (!isActive && s in inactive) {\n            nodes[i][s] = typeof inactive[s] === 'function' ? inactive[s].call(null, original) : inactive[s];\n          } else {\n            nodes[i][s] = nodes[i].__style[s];\n          }\n        });\n        globalChanged = true;\n      }\n    }\n    globalActivation = false;\n    return globalChanged;\n  };\n\n  const onStart = (opts = { suppressRender: false }) => {\n    const { suppressRender } = opts;\n    const nodes = getNodes();\n    const len = nodes.length;\n    for (let i = 0; i < len; i++) {\n      if (!nodes[i].data) {\n        continue;\n      }\n\n      nodes[i].__style = nodes[i].__style || {};\n      styleProps.forEach((s) => {\n        nodes[i].__style[s] = nodes[i][s]; // store original value\n        if (s in inactive) {\n          nodes[i][s] = typeof inactive[s] === 'function' ? inactive[s].call(null, nodes[i]) : inactive[s];\n        }\n      });\n    }\n    globalActivation = true;\n    activeNodes.length = 0;\n    if (!suppressRender) {\n      obj.renderer.render(obj.nodes);\n    }\n  };\n\n  const onEnd = (opts = { suppressRender: false }) => {\n    const { suppressRender } = opts;\n    const nodes = getNodes();\n    const len = nodes.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodes[i].__style) {\n        Object.keys(nodes[i].__style).forEach((s) => {\n          nodes[i][s] = nodes[i].__style[s];\n        });\n        nodes[i].__style = undefined;\n      }\n    }\n    activeNodes.length = 0;\n    if (!suppressRender) {\n      obj.renderer.render(obj.nodes);\n    }\n  };\n  const onUpdate = () => {\n    const changed = update();\n    if (changed) {\n      obj.renderer.render(obj.nodes);\n    }\n  };\n\n  const externalUpdate = () => {\n    activeNodes.length = 0;\n    globalActivation = true;\n    update();\n  };\n\n  brusher.on('start', onStart);\n  brusher.on('end', onEnd);\n  brusher.on('update', onUpdate);\n\n  function cleanUp() {\n    brusher.removeListener('start', onStart);\n    brusher.removeListener('end', onEnd);\n    brusher.removeListener('update', onUpdate);\n  }\n\n  return {\n    isActive() {\n      return brusher.isActive();\n    },\n    update: externalUpdate,\n    cleanUp,\n  };\n}\n\nexport function brushDataPoints({ dataPoints, action, chart, trigger }) {\n  if (!trigger) {\n    return;\n  }\n\n  const dataProps = trigger.data || [''];\n\n  let rangeBrush = {\n    items: [],\n    actionFn: 'toggleRanges',\n  };\n  let valueBrush = {\n    items: [],\n    actionFn: 'toggleValues',\n  };\n\n  if (['add', 'remove', 'set', 'toggle'].indexOf(action) !== -1) {\n    rangeBrush.actionFn = `${action}Ranges`;\n    valueBrush.actionFn = `${action}Values`;\n  }\n\n  for (let i = 0; i < dataPoints.length; i++) {\n    const dataPoint = dataPoints[i];\n    if (!dataPoint) {\n      continue;\n    }\n    dataProps.forEach((p) => {\n      let d = dataPoint && !p ? dataPoint : dataPoint[p];\n      if (d) {\n        let it = { key: d.source.field };\n        if (typeof d.source.key !== 'undefined') {\n          it.key = `${d.source.key}/${d.source.field}`;\n        }\n        if (Array.isArray(d.value)) {\n          it.range = { min: d.value[0], max: d.value[1] };\n          rangeBrush.items.push(it);\n        } else {\n          it.value = d.value;\n          valueBrush.items.push(it);\n        }\n      }\n    });\n  }\n\n  trigger.contexts.forEach((c) => {\n    if (rangeBrush.items.length) {\n      chart.brush(c)[rangeBrush.actionFn](rangeBrush.items);\n    } else {\n      chart.brush(c)[valueBrush.actionFn](valueBrush.items); // call action even if there are items to potentially clear what is currently in the brush\n    }\n  });\n}\n\nexport function brushFromSceneNodes({ nodes, action, chart, trigger }) {\n  const dataPoints = [];\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    let nodeData = node.data;\n    if (nodeData !== null) {\n      dataPoints.push(nodeData);\n    }\n  }\n\n  brushDataPoints({\n    dataPoints,\n    action,\n    chart,\n    trigger,\n  });\n}\n\nexport function resolveEvent({ collisions, t, config, action }) {\n  let brushCollisions = [];\n  let resolved = false;\n\n  if (collisions.length > 0) {\n    brushCollisions = collisions;\n    resolved = true;\n\n    if (t.propagation === 'stop') {\n      brushCollisions = [collisions[collisions.length - 1]];\n    }\n  }\n\n  const nodes = brushCollisions.map((c) => c.node);\n  brushFromSceneNodes({\n    nodes,\n    action,\n    chart: config.chart,\n    data: config.data,\n    trigger: t,\n  });\n\n  return resolved;\n}\n\nfunction touchSingleContactPoint(e, rect) {\n  if (e.changedTouches.length !== 1) {\n    return null;\n  }\n\n  return {\n    x: e.changedTouches[0].clientX - rect.left,\n    y: e.changedTouches[0].clientY - rect.top,\n  };\n}\n\nfunction singleContactPoint(e, rect) {\n  return {\n    x: e.clientX - rect.left,\n    y: e.clientY - rect.top,\n  };\n}\n\nfunction resolveCollisions(e, t, renderer) {\n  const rect = renderer.element().getBoundingClientRect();\n  let p = isTouchEvent(e) ? touchSingleContactPoint(e, rect) : singleContactPoint(e, rect);\n\n  if (p === null || p.x < 0 || p.y < 0 || p.x > rect.width || p.y > rect.height) {\n    // TODO include radius in this check?\n    return [];\n  }\n\n  if (t.touchRadius > 0 && isTouchEvent(e)) {\n    p = {\n      cx: p.x,\n      cy: p.y,\n      r: t.touchRadius, // TODO Use touch event radius/width value (Need to handle dpi scaling as well)\n    };\n  } else if (t.mouseRadius > 0 && !isTouchEvent(e)) {\n    p = {\n      cx: p.x,\n      cy: p.y,\n      r: t.mouseRadius,\n    };\n  }\n\n  return renderer.itemsAt(p);\n}\n\nfunction resolveAction(action, e, def) {\n  if (action) {\n    if (typeof action === 'function') {\n      return action(e);\n    }\n    return action;\n  }\n  return def;\n}\n\nexport function resolveTapEvent({ e, t, config }) {\n  const collisions = resolveCollisions(e, t, config.renderer);\n\n  return resolveEvent({\n    collisions,\n    t,\n    config,\n    action: resolveAction(t.action, e, 'toggle'),\n  });\n}\n\nexport function resolveOverEvent({ e, t, config }) {\n  const collisions = resolveCollisions(e, t, config.renderer);\n\n  return resolveEvent({\n    collisions,\n    t,\n    config,\n    action: resolveAction(t.action, e, 'set'),\n  });\n}\n","/**\n * A list of supported attributes in lower camelCase notation mapped to corresponding kebab-case notation.\n * The kebab-case notations are a sub-set of SVG attributes (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute).\n * @ignore\n */\nconst mappedAttributes = {\n  fill: 'fill',\n  stroke: 'stroke',\n  opacity: 'opacity',\n  strokeWidth: 'stroke-width',\n  strokeLinejoin: 'stroke-linejoin',\n  fontFamily: 'font-family',\n  fontSize: 'font-size',\n  baseline: 'dominant-baseline', // Special case where we have defined our own attribute name\n  dominantBaseline: 'dominant-baseline',\n  anchor: 'text-anchor', // Special case where we have defined our own attribute name\n  textAnchor: 'text-anchor',\n  maxWidth: 'maxWidth',\n  transform: 'transform',\n  strokeDasharray: 'stroke-dasharray',\n  id: 'id',\n};\n\n/**\n * Takes a target object and assign each supported attribute from a source object to that target.\n * Each supported attributes is converted to a mapped kebab-case notation.\n * @ignore\n *\n * @param {object} target - Target object on which to assign mapped attribute values\n * @param {object} source - Source object\n */\nfunction assignMappedAttribute(target, source) {\n  Object.keys(mappedAttributes).forEach((key) => {\n    const sourceValue = source[key];\n    if (typeof sourceValue !== 'undefined') {\n      const mappedKey = mappedAttributes[key];\n      target[mappedKey] = sourceValue;\n    }\n  });\n}\n\nexport { mappedAttributes, assignMappedAttribute };\n","/**\n * @extends symbol-config\n * @typedef {object} symbol--circle\n */\nfunction circle(options) {\n  return {\n    type: 'circle',\n    fill: 'black',\n    cx: options.x,\n    cy: options.y,\n    r: options.size / 2,\n  };\n}\n\nexport { circle as default };\n","export default function pointsToPath(points, close = true) {\n  let d = '';\n\n  for (let i = 0; i < points.length; i++) {\n    const p = points[i];\n    if (i === 0) {\n      d += `M${p.x} ${p.y}`;\n    } else {\n      d += `L${p.x} ${p.y}`;\n    }\n\n    d += ' ';\n  }\n\n  if (close) {\n    d += 'Z';\n  }\n\n  return d;\n}\n","import pointsToPath from '../utils/points-to-path';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--diamond\n */\nfunction diamond(options) {\n  const size = options.size;\n  const left = options.x - size / 2;\n  const top = options.y - size / 2;\n  const points = [\n    { x: left, y: top + size / 2 },\n    { x: left + size / 2, y: top },\n    { x: left + size, y: top + size / 2 },\n    { x: left + size / 2, y: top + size },\n    { x: left, y: top + size / 2 },\n  ];\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { diamond as default };\n","import pointsToPath from '../utils/points-to-path';\n\nexport function generateCrossPoints(x, y, size, barWidth) {\n  const r = size / 2;\n  const innerLeft = x - barWidth / 2;\n  const innerTop = y - barWidth / 2;\n  const left = x - r;\n  const top = y - r;\n\n  return [\n    { x: innerLeft, y: innerTop }, // Top\n    { x: innerLeft, y: top },\n    { x: innerLeft + barWidth, y: top },\n    { x: innerLeft + barWidth, y: innerTop }, // Right\n    { x: left + size, y: innerTop },\n    { x: left + size, y: innerTop + barWidth },\n    { x: innerLeft + barWidth, y: innerTop + barWidth }, // Bottom\n    { x: innerLeft + barWidth, y: top + size },\n    { x: innerLeft, y: top + size },\n    { x: innerLeft, y: innerTop + barWidth }, // Left\n    { x: left, y: innerTop + barWidth },\n    { x: left, y: innerTop },\n  ];\n}\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--cross\n * @property {number} [width] - Width of the diagonals\n */\nfunction cross(options) {\n  const x = options.x;\n  const y = options.y;\n  const r = options.size / 2;\n  const width = isNaN(options.width) ? r / 2 : options.width;\n  const barWidth = Math.min(width, r);\n\n  const points = generateCrossPoints(x, y, options.size, barWidth);\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { cross as default };\n","/**\n * Get x1, y1, x2, y2 point from angle\n * Source: {@link https://codepen.io/NV/pen/jcnmK}\n * @private\n *\n * @param  {number} angle Radians\n * @return {object}       Point with x1, y2, x2, y2.\n */\nexport function angleToPoints(angle) {\n  let segment = Math.floor((angle / Math.PI) * 2) + 2;\n  let diagonal = (0.5 * segment + 0.25) * Math.PI;\n  let op = Math.cos(Math.abs(diagonal - angle)) * Math.sqrt(2);\n  let x = op * Math.cos(angle);\n  let y = op * Math.sin(angle);\n\n  return {\n    x1: x < 0 ? 1 : 0,\n    y1: y < 0 ? 1 : 0,\n    x2: x >= 0 ? x : x + 1,\n    y2: y >= 0 ? y : y + 1,\n  };\n}\n\n/**\n * Turns degrees into radians\n * @private\n *\n * @param  {number} degrees Degrees\n * @return {number}         Radians\n */\nexport function toRadians(d) {\n  return (-d / 180) * Math.PI;\n}\n\n/**\n * Turns radians into degrees\n * @private\n *\n * @param  {number} degrees Degrees\n * @return {number}         Radians\n */\nexport function toDegrees(r) {\n  return r * (180 / Math.PI);\n}\n\n/**\n * Get x1, y1, x2, y2 point from degree\n * @private\n *\n * @param  {number} d Degree\n * @return {object}   Point with x1, y2, x2, y2.\n */\nexport function degreesToPoints(d) {\n  return angleToPoints(toRadians(d));\n}\n","export function add(v1, v2) {\n  return {\n    x: v1.x + v2.x,\n    y: v1.y + v2.y,\n  };\n}\n\nexport function sub(v1, v2) {\n  return {\n    x: v1.x - v2.x,\n    y: v1.y - v2.y,\n  };\n}\n\nexport function scalarMultiply(v, s) {\n  return {\n    x: v.x * s,\n    y: v.y * s,\n  };\n}\n\nexport function sqrMagnitude(v) {\n  return Math.pow(v.x, 2) + Math.pow(v.y, 2);\n}\n\nexport function magnitude(v) {\n  return Math.sqrt(sqrMagnitude(v));\n}\n\nexport function distanceX(v1, v2) {\n  return v1.x - v2.x;\n}\n\nexport function distanceY(v1, v2) {\n  return v1.y - v2.y;\n}\n\nexport function sqrDistance(v1, v2) {\n  return Math.pow(distanceX(v1, v2), 2) + Math.pow(distanceY(v1, v2), 2);\n}\n\nexport function distance(v1, v2) {\n  return Math.sqrt(sqrDistance(v1, v2));\n}\n\nexport function determinant(v1, v2) {\n  return v1.x * v2.y - v2.x * v1.y;\n}\n\nexport function dot(v1, v2) {\n  return v1.x * v2.x + v1.y * v2.y;\n}\n\nexport function projectOnto(v1, v2) {\n  const m = dot(v1, v2) / dot(v2, v2) || 1;\n  return {\n    x: v2.x * m,\n    y: v2.y * m,\n  };\n}\n\nexport function rotate(v, radians, origin = { x: 0, y: 0 }) {\n  const cos = Math.cos(radians);\n  const sin = Math.sin(radians);\n\n  const t1 = sub(v, origin);\n\n  const t2 = {\n    x: cos * t1.x - sin * t1.y,\n    y: sin * t1.x + cos * t1.y,\n  };\n\n  return add(t2, origin);\n}\n\nexport function unit(v) {\n  const m = magnitude(v);\n  return { x: v.x / m, y: v.y / m };\n}\n\nexport function cross(u, v, a) {\n  return (v.x - u.x) * (a.y - u.y) - (v.y - u.y) * (v.x - u.x);\n}\n","import { generateCrossPoints } from './cross';\nimport { toRadians } from '../math/angles';\nimport { rotate } from '../math/vector';\nimport pointsToPath from '../utils/points-to-path';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--saltire\n * @property {number} [width] - Width of the diagonals\n */\nfunction saltire(options) {\n  const radians = toRadians(45);\n  const r = options.size / 2;\n  const width = isNaN(options.width) ? r / 2 : options.width;\n  const barWidth = Math.min(width, r);\n  let adjustedSize = options.size;\n\n  // Adjust for the barwidth and rotation angle, so that the visual part is always inside the symbol area\n  const h = Math.sin(Math.asin(-radians)) * (barWidth / 2);\n  const c = r / Math.sin(-radians);\n  adjustedSize += (c - r) * 2;\n  adjustedSize -= h * 2;\n\n  const centroid = { x: options.x, y: options.y };\n  const points = generateCrossPoints(options.x, options.y, adjustedSize, barWidth).map((p) =>\n    rotate(p, radians, centroid)\n  );\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { saltire as default };\n","/**\n * @extends symbol-config\n * @typedef {object} symbol--square\n */\nfunction square(options) {\n  const size = options.size;\n\n  return {\n    type: 'rect',\n    fill: 'black',\n    x: options.x - size / 2,\n    y: options.y - size / 2,\n    width: size,\n    height: size,\n  };\n}\n\nexport { square as default };\n","import pointsToPath from '../utils/points-to-path';\nimport { rotate } from '../math/vector';\nimport { toRadians } from '../math/angles';\n\nconst DIRECTION_TO_ANGLE = {\n  up: 0,\n  down: 180,\n  left: 90,\n  right: -90,\n};\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--triangle\n * @property {string} [direction='up'] - Direction of the triangle ('up'|'down'|'left'|'right')\n */\nfunction triangle(options) {\n  const size = options.size;\n  const p = { x: options.x, y: options.y };\n  const directionAngle = DIRECTION_TO_ANGLE[options.direction] || 0;\n  const halfSize = size / 2;\n  const left = options.x - halfSize;\n  const top = options.y - halfSize;\n  let points = [\n    { x: left, y: top + size },\n    { x: left + halfSize, y: top },\n    { x: left + size, y: top + size },\n    { x: left, y: top + size },\n  ];\n\n  const radians = toRadians(directionAngle);\n  points = points.map((pp) => rotate(pp, radians, p));\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { triangle as default };\n","function createRectCollider({ x, y, size }) {\n  const r = size / 2;\n  return {\n    type: 'rect',\n    x: x - r,\n    y: y - r,\n    width: size,\n    height: size,\n  };\n}\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--line\n * @property {string} [direction='horizontal'] - Direction of line ('horizontal'|'vertical').\n */\nfunction line(options) {\n  const isVertical = options.direction === 'vertical';\n  const r = options.size / 2;\n  const x = options.x;\n  const y = options.y;\n\n  return {\n    type: 'line',\n    stroke: 'black',\n    strokeWidth: 1,\n    x1: x - (isVertical ? 0 : r),\n    y1: y - (isVertical ? r : 0),\n    x2: x + (isVertical ? 0 : r),\n    y2: y + (isVertical ? r : 0),\n    collider: createRectCollider(options), // TODO Use visual collider?\n  };\n}\n\nexport { line as default };\n","import pointsToPath from '../utils/points-to-path';\nimport { toRadians } from '../math/angles';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--star\n * @property {number} [points=5] - Number of points on the star\n * @property {number} [startAngle=90] - Start drawing angle\n * @property {number} [innerRadius=size/2] - Size of the star core. My not exceed size of symbol.\n */\nfunction star(options) {\n  const size = options.size;\n  const points = [];\n  const outerRadius = size / 2;\n  const drawPoints = options.points || 5;\n  const innerRadius = Math.min(options.innerRadius || size / 2, size) / 2;\n  const startAngle = isNaN(options.startAngle) ? 90 : options.startAngle;\n  const angle = 360 / drawPoints;\n\n  for (let i = 1; i <= drawPoints; i++) {\n    const pAngle = angle * i + startAngle;\n    const radians = toRadians(pAngle);\n    const innerRadians = toRadians(pAngle + angle / 2);\n    const y = Math.sin(radians);\n    const x = Math.cos(radians);\n    const iy = Math.sin(innerRadians);\n    const ix = Math.cos(innerRadians);\n\n    points.push({\n      x: options.x + x * outerRadius,\n      y: options.y + y * outerRadius,\n    });\n\n    points.push({\n      x: options.x + ix * innerRadius,\n      y: options.y + iy * innerRadius,\n    });\n  }\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { star as default };\n","import pointsToPath from '../utils/points-to-path';\nimport { toRadians } from '../math/angles';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--n-polygon\n * @property {object} [sides=6] - Number of sides on the regular polygon\n * @property {object} [startAngle=0] - Start drawing angle\n */\nfunction nPolygon(options) {\n  const points = [];\n  const radius = options.size / 2;\n  const drawPoints = Math.max(isNaN(options.sides) ? 6 : options.sides, 3);\n  const angle = 360 / drawPoints;\n  const startAngle = isNaN(options.startAngle) ? 0 : options.startAngle;\n\n  for (let i = 1; i <= drawPoints; i++) {\n    const radians = toRadians(angle * i + startAngle);\n    const y = Math.sin(radians);\n    const x = Math.cos(radians);\n    points.push({\n      x: options.x + x * radius,\n      y: options.y + y * radius,\n    });\n  }\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { nPolygon as default };\n","import { rotate } from '../math/vector';\nimport { pointsToRect } from '../geometry/util';\nimport { toRadians } from '../math/angles';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--bar\n * @property {string} [direction='horizontal'] - Direction of bar ('horizontal'|'vertical').\n */\nfunction bar(options) {\n  const p = { x: options.x, y: options.y };\n  const isVertical = options.direction === 'vertical';\n  const r = options.size / 2;\n  const width = r / 2;\n  const halfWidth = width / 2;\n\n  let points = [\n    { x: p.x - r, y: p.y + halfWidth },\n    { x: p.x - r, y: p.y - halfWidth },\n    { x: p.x + r, y: p.y - halfWidth },\n    { x: p.x + r, y: p.y + halfWidth },\n  ];\n\n  if (isVertical) {\n    const radians = toRadians(90);\n    points = points.map((pp) => rotate(pp, radians, p));\n  }\n\n  const rect = pointsToRect(points);\n  rect.type = 'rect';\n  rect.fill = 'black';\n\n  return rect;\n}\n\nexport { bar as default };\n","import { mappedAttributes } from '../scene-graph/attributes';\nimport circle from './circle';\nimport diamond from './diamond';\nimport saltire from './saltire';\nimport square from './square';\nimport triangle from './triangle';\nimport line from './line';\nimport star from './star';\nimport nPolygon from './n-polygon';\nimport cross from './cross';\nimport bar from './bar';\nimport registry from '../utils/registry';\n\nconst parentReg = registry();\n\nparentReg.add('circle', circle);\nparentReg.add('diamond', diamond);\nparentReg.add('saltire', saltire);\nparentReg.add('square', square);\nparentReg.add('triangle', triangle);\nparentReg.add('line', line);\nparentReg.add('star', star);\nparentReg.add('n-polygon', nPolygon);\nparentReg.add('cross', cross);\nparentReg.add('bar', bar);\n\nfunction applyOpts(obj, opts = {}) {\n  Object.keys(opts).forEach((key) => {\n    if (typeof mappedAttributes[key] !== 'undefined' && key !== 'transform') {\n      obj[key] = opts[key];\n    }\n  });\n}\n\n/**\n * Factory function for symbols.\n * Options object is passed to symbols function.\n * @private\n * @param {symbol--bar|symbol--circle|symbol--cross|symbol--diamond|symbol--line|symbol--n-polygon|symbol--saltire|symbol--square|symbol--star|symbol--triangle} options - Options definition may contain any of the supported display-object attributes\n * @returns {object} A node definition\n */\nconst create = (reg = parentReg) => (options = {}) => {\n  // TODO handle reserverd properties x, y, size, data, etc..\n  const fn = reg.get(options.type);\n  if (fn) {\n    const s = fn(options);\n    applyOpts(s, options);\n\n    if (typeof options.data !== 'undefined') {\n      s.data = options.data;\n    }\n\n    return s;\n  }\n  return fn;\n};\n\nexport { create as default, parentReg as symbolRegistry };\n\n/**\n * Mandatory symbol config\n * @typedef {object} symbol-config\n * @property {object} options - Options definition may contain any of the supported display-object attributes\n * @property {string} options.type - Type of symbol\n * @property {number} options.x - x-coordinate\n * @property {number} options.y - y-coordinate\n * @property {number} options.size\n * @property {object} [options.data]\n */\n","/* eslint camelcase: 1 */\nimport extend from 'extend';\nimport EventEmitter from '../utils/event-emitter';\nimport extractData from '../data/extractor';\nimport tween from './tween';\nimport settingsResolver from './settings-resolver';\nimport { styler as brushStyler, resolveTapEvent, resolveOverEvent, brushFromSceneNodes } from './brushing';\nimport createSymbolFactory from '../symbols';\nimport createDockConfig from '../layout/dock/config';\n\nconst isReservedProperty = (prop) =>\n  [\n    'on',\n    'preferredSize',\n    'created',\n    'beforeMount',\n    'mounted',\n    'resize',\n    'beforeUpdate',\n    'updated',\n    'beforeRender',\n    'render',\n    'beforeUnmount',\n    'beforeDestroy',\n    'destroyed',\n    'defaultSettings',\n    'data',\n    'settings',\n    'formatter',\n    'scale',\n    'chart',\n    'dockConfig',\n    'mediator',\n    'style',\n    'resolver',\n    'registries',\n    '_DO_NOT_USE_getInfo',\n    'symbol',\n    'isVisible',\n  ].some((name) => name === prop);\n\nfunction prepareContext(ctx, definition, opts) {\n  const { require = [] } = definition;\n  const mediatorSettings = definition.mediator || {};\n  const {\n    settings,\n    formatter,\n    scale,\n    data,\n    renderer,\n    chart,\n    dockConfig,\n    mediator,\n    instance,\n    rect,\n    style,\n    registries,\n    resolver,\n    update,\n    _DO_NOT_USE_getInfo,\n    symbol,\n    isVisible,\n  } = opts;\n\n  ctx.emit = () => {};\n\n  if (isVisible) {\n    ctx.isVisible = isVisible;\n  }\n\n  // TODO add setters and log warnings / errors to console\n  Object.defineProperty(ctx, 'settings', {\n    get: settings,\n  });\n  Object.defineProperty(ctx, 'data', {\n    get: data,\n  });\n  Object.defineProperty(ctx, 'formatter', {\n    get: formatter,\n  });\n  Object.defineProperty(ctx, 'scale', {\n    get: scale,\n  });\n  Object.defineProperty(ctx, 'mediator', {\n    get: mediator,\n  });\n  Object.defineProperty(ctx, 'style', {\n    get: style,\n  });\n  Object.defineProperty(ctx, 'registries', {\n    get: registries,\n  });\n  if (rect) {\n    Object.defineProperty(ctx, 'rect', {\n      get: rect,\n    });\n  }\n\n  // TODO _DO_NOT_USE_getInfo is a temporary solution to expose info from a component\n  // It should replace ASAP with a proper solution.\n  // The only component activaly in need of it is the legend-cat\n  if (_DO_NOT_USE_getInfo) {\n    ctx._DO_NOT_USE_getInfo = _DO_NOT_USE_getInfo;\n  }\n\n  Object.keys(definition).forEach((key) => {\n    if (!isReservedProperty(key)) {\n      // Add non-lifecycle methods to the context\n      if (typeof definition[key] === 'function') {\n        ctx[key] = definition[key].bind(ctx);\n      } else {\n        ctx[key] = definition[key];\n      }\n    }\n  });\n\n  // Add properties to context\n  require.forEach((req) => {\n    if (req === 'renderer') {\n      Object.defineProperty(ctx, 'renderer', {\n        get: renderer,\n      });\n    } else if (req === 'chart') {\n      Object.defineProperty(ctx, 'chart', {\n        get: chart,\n      });\n    } else if (req === 'dockConfig') {\n      Object.defineProperty(ctx, 'dockConfig', {\n        get: dockConfig,\n      });\n    } else if (req === 'instance') {\n      Object.defineProperty(ctx, 'instance', {\n        get: instance,\n      });\n    } else if (req === 'update' && update) {\n      Object.defineProperty(ctx, 'update', {\n        get: update,\n      });\n    } else if (req === 'resolver') {\n      Object.defineProperty(ctx, 'resolver', {\n        get: resolver,\n      });\n    } else if (req === 'symbol') {\n      Object.defineProperty(ctx, 'symbol', {\n        get: symbol,\n      });\n    }\n  });\n\n  Object.keys(mediatorSettings).forEach((eventName) => {\n    ctx.mediator.on(eventName, mediatorSettings[eventName].bind(ctx));\n  });\n}\n\nfunction createDockDefinition(settings, preferredSize, logger) {\n  const getLayoutProperty = (propName) => {\n    if (settings[propName]) {\n      logger.warn(`Deprecation Warning the ${propName} property should be moved into layout: {} property`); // eslint-disable-line no-console\n      return settings[propName];\n    }\n    return settings.layout ? settings.layout[propName] : undefined;\n  };\n\n  const def = {};\n  def.displayOrder = getLayoutProperty('displayOrder');\n  def.dock = getLayoutProperty('dock');\n  def.prioOrder = getLayoutProperty('prioOrder');\n  def.minimumLayoutMode = getLayoutProperty('minimumLayoutMode');\n\n  // move layout properties to layout object\n  settings.layout = settings.layout || {};\n  settings.layout.displayOrder =\n    typeof def.displayOrder !== 'undefined' ? def.displayOrder : settings.layout.displayOrder;\n  settings.layout.prioOrder = typeof def.prioOrder !== 'undefined' ? def.prioOrder : settings.layout.prioOrder;\n  settings.layout.dock = def.dock || settings.layout.dock;\n  settings.layout.minimumLayoutMode = def.minimumLayoutMode || settings.layout.minimumLayoutMode;\n\n  // not directly a dock layout property\n  def.show = settings.show;\n  def.preferredSize = preferredSize;\n  return def;\n}\n\nfunction setUpEmitter(ctx, emitter, settings) {\n  // Object.defineProperty(ctx, 'emitter', )\n  Object.keys(settings.on || {}).forEach((event) => {\n    ctx.eventListeners = ctx.eventListeners || [];\n    const listener = settings.on[event].bind(ctx);\n    ctx.eventListeners.push({ event, listener });\n    emitter.on(event, listener);\n  });\n  ctx.emit = (name, ...event) => emitter.emit(name, ...event);\n}\n\nfunction tearDownEmitter(ctx, emitter) {\n  if (ctx.eventListeners) {\n    ctx.eventListeners.forEach(({ event, listener }) => {\n      emitter.removeListener(event, listener);\n    });\n    ctx.eventListeners.length = 0;\n  }\n  ctx.emit = () => {};\n}\n\n// First render\n// preferredSize -> resize -> beforeRender -> render -> mounted\n\n// Normal update\n// beforeUpdate -> preferredSize -> resize -> beforeRender -> render -> updated\n\n// Update without relayout\n// beforeUpdate -> beforeRender -> render -> updated\n\n// TODO support es6 classes\nfunction componentFactory(definition, context = {}) {\n  const { defaultSettings = {}, _DO_NOT_USE_getInfo = () => ({}) } = definition;\n  const {\n    chart,\n    container,\n    mediator,\n    registries,\n    theme,\n    renderer, // Used by tests\n  } = context;\n  const emitter = EventEmitter.mixin({});\n  let config = context.settings || {};\n  let settings = extend(true, {}, defaultSettings, config);\n  let data = [];\n  let scale;\n  let formatter;\n  let element;\n  let size;\n  let style;\n  let resolver = settingsResolver({\n    chart,\n  });\n  let isVisible = false;\n\n  const brushArgs = {\n    nodes: [],\n    chart,\n    config: settings.brush || {},\n    renderer: null,\n  };\n  const brushTriggers = {\n    tap: [],\n    over: [],\n  };\n  const brushStylers = [];\n  const definitionContext = {};\n  const instanceContext = extend({}, config);\n\n  // Create a callback that calls lifecycle functions in the definition and config (if they exist).\n  function createCallback(method, defaultMethod = () => {}, canBeValue = false) {\n    return function cb(...args) {\n      const inDefinition = typeof definition[method] !== 'undefined';\n      const inConfig = typeof config[method] !== 'undefined';\n\n      let returnValue;\n      if (inDefinition) {\n        if (typeof definition[method] === 'function') {\n          returnValue = definition[method].call(definitionContext, ...args);\n        } else if (canBeValue) {\n          returnValue = definition[method];\n        }\n      }\n\n      if (inConfig) {\n        if (typeof config[method] === 'function') {\n          returnValue = config[method].call(instanceContext, ...args);\n        } else if (canBeValue) {\n          returnValue = config[method];\n        }\n      }\n\n      if (!inDefinition && !inConfig) {\n        returnValue = defaultMethod.call(definitionContext, ...args);\n      }\n\n      return returnValue;\n    };\n  }\n\n  const preferredSize = createCallback('preferredSize', () => 0, true);\n  const resize = createCallback('resize', ({ inner }) => inner);\n  const created = createCallback('created');\n  const beforeMount = createCallback('beforeMount');\n  const mounted = createCallback('mounted');\n  const beforeUnmount = createCallback('beforeUnmount');\n  const beforeUpdate = createCallback('beforeUpdate');\n  const updated = createCallback('updated');\n  const beforeRender = createCallback('beforeRender');\n  const beforeDestroy = createCallback('beforeDestroy');\n  const destroyed = createCallback('destroyed');\n  const render = definition.render; // Do not allow overriding of this function\n\n  const addBrushStylers = () => {\n    if (settings.brush) {\n      (settings.brush.consume || []).forEach((b) => {\n        if (b.context && b.style) {\n          brushStylers.push(brushStyler(brushArgs, b));\n        }\n      });\n    }\n  };\n\n  const addBrushTriggers = () => {\n    if (settings.brush) {\n      (settings.brush.trigger || []).forEach((t) => {\n        if (t.on === 'over') {\n          brushTriggers.over.push(t);\n        } else {\n          brushTriggers.tap.push(t);\n        }\n      });\n    }\n  };\n\n  Object.defineProperty(brushArgs, 'data', {\n    get: () => data,\n  });\n\n  const rendString = settings.renderer || definition.renderer;\n  const rend = rendString ? renderer || registries.renderer(rendString)() : renderer || registries.renderer()();\n  brushArgs.renderer = rend;\n\n  const dockConfigCallbackContext = { resources: chart.logger ? { logger: chart.logger() } : {} };\n  let dockConfig = createDockConfig(\n    createDockDefinition(settings, preferredSize, chart.logger()),\n    dockConfigCallbackContext\n  );\n\n  const appendComponentMeta = (node) => {\n    node.key = settings.key;\n    node.element = rend.element();\n  };\n\n  const fn = () => {};\n\n  fn.dockConfig = () => dockConfig;\n\n  // Set new settings - will trigger mapping of data and creation of scale / formatter.\n  fn.set = (opts = {}) => {\n    if (opts.settings) {\n      config = opts.settings;\n      settings = extend(true, {}, defaultSettings, opts.settings);\n      dockConfig = createDockConfig(\n        createDockDefinition(settings, preferredSize, chart.logger()),\n        dockConfigCallbackContext\n      );\n    }\n\n    if (settings.scale) {\n      scale = chart.scale(settings.scale);\n    }\n\n    if (settings.data) {\n      data = extractData(\n        settings.data,\n        { dataset: chart.dataset, collection: chart.dataCollection },\n        { logger: chart.logger() },\n        chart.dataCollection\n      );\n    } else if (scale) {\n      data = scale.data();\n    } else {\n      data = [];\n    }\n\n    if (typeof settings.formatter === 'string') {\n      formatter = chart.formatter(settings.formatter);\n    } else if (typeof settings.formatter === 'object') {\n      formatter = chart.formatter(settings.formatter);\n    } else if (scale && scale.data().fields) {\n      formatter = scale.data().fields[0].formatter();\n    }\n\n    style = theme.style(settings.style || {});\n  };\n\n  fn.resize = (inner = {}, outer = {}) => {\n    const newSize = resize({\n      inner,\n      outer,\n    });\n    if (newSize) {\n      size = rend.size(newSize);\n    } else {\n      size = rend.size(inner);\n    }\n    instanceContext.rect = extend(\n      true,\n      {\n        computedPhysical: size.computedPhysical,\n        computedOuter: outer.computed || outer,\n        computedInner: inner.computed || inner,\n      },\n      inner\n    );\n    size = extend(\n      true,\n      {\n        computedOuter: outer.computed || outer,\n        computedInner: inner.computed || inner,\n      },\n      size\n    );\n  };\n\n  fn.getRect = () => instanceContext.rect;\n\n  const getRenderArgs = () => {\n    const renderArgs = rend.renderArgs ? rend.renderArgs.slice(0) : [];\n    renderArgs.push({\n      data,\n    });\n    return renderArgs;\n  };\n\n  fn.beforeMount = beforeMount;\n\n  fn.beforeRender = () => {\n    beforeRender({\n      size,\n    });\n  };\n\n  let currentNodes;\n\n  fn.render = () => {\n    const nodes = (brushArgs.nodes = render.call(definitionContext, ...getRenderArgs()));\n    rend.render(nodes);\n    currentNodes = nodes;\n  };\n\n  fn.hide = () => {\n    fn.unmount();\n    rend.size({\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n    });\n    rend.clear();\n  };\n\n  fn.beforeUpdate = () => {\n    beforeUpdate({\n      settings,\n      data,\n    });\n  };\n\n  let currentTween;\n  fn.update = () => {\n    if (currentTween) {\n      currentTween.stop();\n    }\n    const nodes = (brushArgs.nodes = render.call(definitionContext, ...getRenderArgs()));\n\n    // Reset brush stylers and triggers\n    brushStylers.forEach((b) => b.cleanUp());\n    brushStylers.length = 0;\n    brushTriggers.tap = [];\n    brushTriggers.over = [];\n\n    if (settings.brush) {\n      addBrushStylers();\n      addBrushTriggers();\n    }\n\n    brushStylers.forEach((bs) => {\n      if (bs.isActive()) {\n        bs.update();\n      }\n    });\n\n    if (currentNodes && settings.animations && settings.animations.enabled) {\n      currentTween = tween(\n        {\n          old: currentNodes,\n          current: nodes,\n        },\n        { renderer: rend },\n        settings.animations\n      );\n      currentTween.start();\n    } else {\n      rend.render(nodes);\n    }\n    currentNodes = nodes;\n\n    if (rend.setKey && typeof config.key === 'string') {\n      rend.setKey(config.key);\n    }\n  };\n\n  fn.updated = updated;\n\n  fn.destroy = () => {\n    fn.unmount();\n    beforeDestroy(element);\n    rend.destroy();\n    destroyed();\n    element = null;\n  };\n\n  /**\n   * Update active nodes. For now this can be used as a way update and apply brushing on nodes.\n   * Ex: if a component have changed the nodes since its initial render.\n   * @param {Nodes[]} nodes\n   * @deprecated\n   * @ignore\n   */\n  const updateNodes = (nodes) => {\n    brushArgs.nodes = nodes;\n    brushStylers.forEach((bs) => {\n      if (bs.isActive()) {\n        bs.update();\n      }\n    });\n    rend.render(nodes);\n  };\n\n  // Set contexts, note that the definition and instance need different contexts (for example if they have different 'require' props)\n  prepareContext(definitionContext, definition, {\n    settings: () => settings,\n    data: () => data,\n    scale: () => scale,\n    formatter: () => formatter,\n    renderer: () => rend,\n    chart: () => chart,\n    dockConfig: () => dockConfig,\n    mediator: () => mediator,\n    instance: () => instanceContext,\n    rect: () => instanceContext.rect,\n    style: () => style,\n    update: () => updateNodes,\n    registries: () => registries,\n    resolver: () => resolver,\n    symbol: () => createSymbolFactory(registries.symbol),\n  });\n\n  prepareContext(instanceContext, config, {\n    settings: () => settings,\n    data: () => data,\n    scale: () => scale,\n    formatter: () => formatter,\n    renderer: () => rend,\n    chart: () => chart,\n    dockConfig: () => dockConfig,\n    mediator: () => mediator,\n    style: () => style,\n    _DO_NOT_USE_getInfo: _DO_NOT_USE_getInfo.bind(definitionContext),\n    isVisible: () => isVisible,\n  });\n\n  fn.getBrushedShapes = function getBrushedShapes(brushCtx, mode, props) {\n    const shapes = [];\n    if (settings.brush && settings.brush.consume) {\n      const brusher = chart.brush(brushCtx);\n      const sceneNodes = rend.findShapes('*');\n      settings.brush.consume\n        .filter((t) => t.context === brushCtx)\n        .forEach((consume) => {\n          for (let i = 0; i < sceneNodes.length; i++) {\n            const node = sceneNodes[i];\n            if (node.data && brusher.containsMappedData(node.data, props || consume.data, mode)) {\n              appendComponentMeta(node);\n              shapes.push(node);\n              sceneNodes.splice(i, 1);\n              i--;\n            }\n          }\n        });\n    }\n    return shapes;\n  };\n\n  fn.findShapes = (selector) => {\n    const shapes = rend.findShapes(selector);\n    for (let i = 0, num = shapes.length; i < num; i++) {\n      appendComponentMeta(shapes[i]);\n    }\n\n    return shapes;\n  };\n\n  fn.shapesAt = (shape, opts = {}) => {\n    const items = rend.itemsAt(shape);\n    let shapes;\n\n    if (opts && opts.propagation === 'stop' && items.length > 0) {\n      shapes = [items.pop().node];\n    } else {\n      shapes = items.map((i) => i.node);\n    }\n\n    for (let i = 0, num = shapes.length; i < num; i++) {\n      appendComponentMeta(shapes[i]);\n    }\n\n    return shapes;\n  };\n\n  fn.brushFromShapes = (shapes, trigger = {}) => {\n    trigger.contexts = Array.isArray(trigger.contexts) ? trigger.contexts : [];\n    const action = trigger.action || 'toggle';\n\n    brushFromSceneNodes({\n      nodes: shapes,\n      action,\n      trigger,\n      chart,\n      data: brushArgs.data,\n    });\n  };\n\n  fn.mount = () => {\n    element = rend.element && rend.element() ? element : rend.appendTo(container);\n    if (rend.setKey && typeof config.key === 'string') {\n      rend.setKey(config.key);\n    }\n\n    if (settings.brush) {\n      addBrushStylers();\n      addBrushTriggers();\n    }\n\n    setUpEmitter(instanceContext, emitter, config);\n    setUpEmitter(definitionContext, emitter, definition);\n\n    isVisible = true;\n  };\n\n  fn.mounted = () => mounted(element);\n\n  fn.unmount = () => {\n    [instanceContext, definitionContext].forEach((ctx) => {\n      tearDownEmitter(ctx, emitter);\n    });\n    brushTriggers.tap = [];\n    brushTriggers.over = [];\n    brushStylers.forEach((bs) => {\n      bs.cleanUp();\n    });\n    brushStylers.length = 0;\n    beforeUnmount();\n\n    isVisible = false;\n  };\n\n  fn.onBrushTap = (e) => {\n    brushTriggers.tap.forEach((t) => {\n      if (resolveTapEvent({ e, t, config: brushArgs }) && t.globalPropagation === 'stop') {\n        chart.toggleBrushing(true);\n      }\n    });\n  };\n\n  fn.onBrushOver = (e) => {\n    brushTriggers.over.forEach((t) => {\n      if (resolveOverEvent({ e, t, config: brushArgs }) && t.globalPropagation === 'stop') {\n        chart.toggleBrushing(true);\n      }\n    });\n  };\n\n  /**\n   * Expose definition on instance\n   * @private\n   * @experimental\n   */\n  fn.def = definitionContext;\n\n  /**\n   * Expose instanceCtx on \"instance\"\n   * @private\n   * @experimental\n   */\n  fn.ctx = instanceContext;\n\n  fn.renderer = () => rend;\n\n  fn.set({ settings: config });\n  created();\n\n  return fn;\n}\n\nexport default componentFactory;\n","import EventEmitter from '../utils/event-emitter';\n\nexport default function mediator() {\n  const instance = {};\n  EventEmitter.mixin(instance);\n  return instance;\n}\n","import { add, sub, projectOnto, distance } from './vector';\n\nconst EPSILON = 1e-12;\n\nexport function closestPointToLine(start, end, p) {\n  const startToPoint = sub(p, start);\n  const startToEnd = sub(end, start);\n  const pointOnLine = add(projectOnto(startToPoint, startToEnd), start);\n  return pointOnLine;\n}\n\nexport function isPointOnLine(start, end, p) {\n  return distance(start, p) + distance(end, p) - distance(start, end) < EPSILON;\n}\n\nexport function isCollinear(p1, p2, p3, e = EPSILON) {\n  const t = Math.abs(p1.x * (p2.y - p3.y) + p2.x * (p3.y - p1.y) + p3.x * (p1.y - p2.y));\n  return t < e;\n}\n\n/**\n * Check if rectangle a is located inside rectangle b or if they are the same rectangle.\n * @param {rect} a - An rect containing (x,y) coordinates, width and height. The origin is assumed to be top left.\n * @param {rect} b - An rect containing (x,y) coordinates, width and height. The origin is assumed to be top left.\n * @ignore\n */\nexport function rectContainsRect(a, b) {\n  return a.x >= b.x && a.x + a.width <= b.x + b.width && a.y >= b.y && a.y + a.height <= b.y + b.height;\n}\n","/* eslint no-use-before-define: [\"error\", { \"functions\": false }] */\n\nimport { sqrDistance, distanceX, distanceY } from './vector';\nimport { closestPointToLine, isPointOnLine } from './intersection';\nimport { lineToPoints, rectToPoints, pointsToLine } from '../geometry/util';\n\nfunction lineHasNoLength(line) {\n  return line.x1 === line.x2 && line.y1 === line.y2;\n}\n\nfunction rectHasNoSize(rect) {\n  return rect.width <= 0 || rect.height <= 0;\n}\n\nfunction circleHasNoSize(circle) {\n  return circle.r <= 0;\n}\n\nfunction toFewEdges(polygon) {\n  return polygon.edges.length <= 2;\n}\n\n// Only when the polygon1's bounds is not inside the polygon2's bounds\nfunction testPolygonPolygonSubCase(polygon1, polygon2) {\n  let intersects = false;\n  for (let i = 0, len = polygon2.edges.length; i < len; i++) {\n    intersects = testPolygonLine(polygon1, pointsToLine(polygon2.edges[i]));\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// Only when the geopolygon's bounds is not inside the polygon's bounds\nfunction testGeoPolygonPolygonCase1(geopolygon, polygon) {\n  let intersects = false;\n  for (let i = 0, len = polygon.edges.length; i < len; i++) {\n    intersects = testGeoPolygonLine(geopolygon, pointsToLine(polygon.edges[i]));\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// Only when the geopolygon's bounds is inside the polygon's bounds\nfunction testGeoPolygonPolygonCase2(geopolygon, polygon) {\n  let intersects = false;\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    intersects = testPolygonPolygon(polygon, polygons[n]);\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// Only when the geopolygon1's bounds is not inside the geopolygon2's bounds\nfunction testGeoPolygonGeoPolygonSubCase(geopolygon1, geopolygon2) {\n  let intersects = false;\n  const { numPolygons, polygons } = geopolygon2;\n  for (let n = 0; n < numPolygons; n++) {\n    let polygon = polygons[n];\n    intersects = testGeoPolygonPolygon(geopolygon1, polygon);\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a Circle contains a point. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if circle contains point\n */\nexport function testCirclePoint(circle, point) {\n  if (circleHasNoSize(circle)) {\n    return false;\n  }\n\n  const center = { x: circle.cx, y: circle.cy };\n  const sqrDist = sqrDistance(center, point);\n\n  if (sqrDist <= Math.pow(circle.r, 2)) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Test if a Circle collide with a rectangle. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * Rectangle must have a width and height greather then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if circle collide with rectangle\n */\nexport function testCircleRect(circle, rect) {\n  if (rectHasNoSize(rect) || circleHasNoSize(circle)) {\n    return false;\n  }\n  const rX = rect.width / 2;\n  const rY = rect.height / 2;\n  const rcX = rect.x + rX;\n  const rcY = rect.y + rY;\n  const r = circle.r;\n  const cx = circle.cx;\n  const cy = circle.cy;\n  const dX = Math.abs(cx - rcX);\n  const dY = Math.abs(cy - rcY);\n\n  if (dX > rX + r || dY > rY + r) {\n    return false;\n  }\n\n  if (dX <= rX || dY <= rY) {\n    return true;\n  }\n\n  const sqrDist = Math.pow(dX - rX, 2) + Math.pow(dY - rY, 2);\n\n  return sqrDist <= Math.pow(r, 2);\n}\n\n/**\n * Test if a Circle collide with a line segment. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * Line must have a length greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if circle collide with line\n */\nexport function testCircleLine(circle, line) {\n  if (circleHasNoSize(circle) || lineHasNoLength(line)) {\n    return false;\n  }\n\n  const [p1, p2] = lineToPoints(line);\n  if (testCirclePoint(circle, p1) || testCirclePoint(circle, p2)) {\n    return true;\n  }\n\n  const center = { x: circle.cx, y: circle.cy };\n  const pointOnLine = closestPointToLine(p1, p2, center);\n  const dist = sqrDistance(pointOnLine, center);\n\n  return dist <= Math.pow(circle.r, 2) && isPointOnLine(p1, p2, pointOnLine);\n}\n\n/**\n * Test if a Circle collide with another Circle. If so, returns true and false otherwise.\n * Both circles muse have a radius greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @return {boolean} true if circle collide with circle\n */\nexport function testCircleCircle(circle1, circle2) {\n  if (circleHasNoSize(circle1) || circleHasNoSize(circle2)) {\n    return false;\n  }\n\n  const dx = circle1.cx - circle2.cx;\n  const dy = circle1.cy - circle2.cy;\n  const sqrDist = Math.pow(dx, 2) + Math.pow(dy, 2);\n\n  if (sqrDist <= Math.pow(circle1.r + circle2.r, 2)) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Test if a Circle collide with Polygon. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * Polygon must contain at least 2 vertices\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @return {boolean} true if circle collide with polygon\n */\nexport function testCirclePolygon(circle, polygon) {\n  // TODO handle polygon that is a straight line, current impl will interrept it is a true, if radius is extended onto any of the edges\n  if (toFewEdges(polygon) || circleHasNoSize(circle)) {\n    return false;\n  }\n\n  const center = { x: circle.cx, y: circle.cy };\n  if (testPolygonPoint(polygon, center)) {\n    return true;\n  }\n\n  const num = polygon.edges.length;\n\n  for (let i = 0; i < num; i++) {\n    const edge = pointsToLine(polygon.edges[i]);\n    if (testCircleLine(circle, edge)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Test if a Polygon contains a Point. If so, returns true and false otherwise.\n * Polygon must contain at least 2 vertices\n * @private\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if polygon conatins point\n */\nexport function testPolygonPoint(polygon, point) {\n  // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n  if (toFewEdges(polygon) || !testRectPoint(polygon.boundingRect(), point)) {\n    return false;\n  }\n  const { x, y } = point;\n  const vertices = polygon.vertices;\n  let inside;\n  let l;\n  let j;\n  let i;\n  let tx;\n  for (inside = false, i = -1, l = vertices.length, j = l - 1; ++i < l; j = i) {\n    if (vertices[i].x === x && vertices[i].y === y) {\n      // polygon vertice\n      return true;\n    }\n    if (vertices[i].y === vertices[j].y && vertices[i].y === y && (x - vertices[i].x) * (x - vertices[j].x) <= 0) {\n      // on horizontal edge of polygon\n      return true;\n    }\n    if ((vertices[i].y < y && y <= vertices[j].y) || (vertices[j].y < y && y <= vertices[i].y)) {\n      tx = ((vertices[j].x - vertices[i].x) * (y - vertices[i].y)) / (vertices[j].y - vertices[i].y) + vertices[i].x;\n      if (x === tx) {\n        // on polygon edge\n        return true;\n      }\n      if (x < tx) {\n        inside = !inside;\n      }\n    }\n  }\n  return inside;\n}\n\n/**\n * Test if a Polygon collider with a line. If so, returns true and false otherwise.\n * Polygon must contain at least 3 edges.\n * Line must have length greater then 0.\n * @private\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if polygon collider with line\n */\nexport function testPolygonLine(polygon, line) {\n  // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n  if (toFewEdges(polygon)) {\n    return false;\n  }\n\n  for (let i = 0, num = polygon.edges.length; i < num; i++) {\n    const edge = pointsToLine(polygon.edges[i]);\n    if (testLineLine(line, edge)) {\n      return true;\n    }\n  }\n\n  const [p1, p2] = lineToPoints(line);\n\n  return testPolygonPoint(polygon, p1) || testPolygonPoint(polygon, p2);\n}\n\n/**\n * Test if a Polygon collider with a rectangle. If so, returns true and false otherwise.\n * Polygon must contain at least 3 edges.\n * Rectangle must width and height greater then 0.\n * @private\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if polygon collider with rect\n */\nexport function testPolygonRect(polygon, rect) {\n  // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n  if (toFewEdges(polygon)) {\n    return false;\n  }\n\n  for (let i = 0, num = polygon.edges.length; i < num; i++) {\n    const edge = pointsToLine(polygon.edges[i]);\n    if (testRectLine(rect, edge)) {\n      return true;\n    }\n  }\n\n  const [p1, p2, p3, p4] = rectToPoints(rect);\n  return (\n    testPolygonPoint(polygon, p1) ||\n    testPolygonPoint(polygon, p2) ||\n    testPolygonPoint(polygon, p3) ||\n    testPolygonPoint(polygon, p4)\n  );\n}\n\n/**\n * Test if a Rectangle collide with another rectangle. If so, returns true and false otherwise.\n * Both rectangles must have a width and height greather then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if rectangle collide with rectangle\n */\nexport function testRectRect(rect1, rect2) {\n  if (rectHasNoSize(rect1) || rectHasNoSize(rect2)) {\n    return false;\n  }\n\n  return (\n    rect1.x <= rect2.x + rect2.width &&\n    rect2.x <= rect1.x + rect1.width &&\n    rect1.y <= rect2.y + rect2.height &&\n    rect2.y <= rect1.y + rect1.height\n  );\n}\n\n/**\n * Test if a rectangle contains  another rectangle. If so, returns true and false otherwise.\n * Both rectangles must have a width and height greather then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if rectangle collide with rectangle\n */\nexport function testRectContainsRect(rect1, rect2) {\n  if (rectHasNoSize(rect1) || rectHasNoSize(rect2)) {\n    return false;\n  }\n  const points = [\n    { x: rect2.x, y: rect2.y },\n    { x: rect2.x + rect2.width, y: rect2.y },\n    { x: rect2.x + rect2.width, y: rect2.y + rect2.height },\n    { x: rect2.x, y: rect2.y + rect2.height },\n  ];\n  return points.every((p) => testRectPoint(rect1, p));\n}\n\n/**\n * Test if a Rectangle contains a Point. If so, returns true and false otherwise.\n * Rectangle must have a width and height greather then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if rectangle contains point\n */\nexport function testRectPoint(rect, point) {\n  if (rectHasNoSize(rect)) {\n    return false;\n  }\n\n  return point.x >= rect.x && point.x <= rect.x + rect.width && point.y >= rect.y && point.y <= rect.y + rect.height;\n}\n\n/**\n * Test if a Rectangle collider with a line. If so, returns true and false otherwise.\n * Rectangle must have a width and height greather then 0.\n * Line must have length greater then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if rectangle collide with line\n */\nexport function testRectLine(rect, line) {\n  if (lineHasNoLength(line) || rectHasNoSize(rect)) {\n    return false;\n  }\n\n  const [p1, p2] = lineToPoints(line);\n\n  if (testRectPoint(rect, p1) || testRectPoint(rect, p2)) {\n    return true;\n  }\n\n  const rectEdges = rectToPoints(rect);\n  let num = rectEdges.length;\n  for (let i = 0; i < num; i++) {\n    const edge = pointsToLine([rectEdges[i], rectEdges[i !== 3 ? i + 1 : 0]]);\n    if (testLineLine(edge, line)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a Line collider with another line. If so, returns true and false otherwise.\n * Both lines must have length greater then 0.\n * @private\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if line collide with line\n */\nexport function testLineLine(line1, line2) {\n  const [p1, p2] = lineToPoints(line1);\n  const [p3, p4] = lineToPoints(line2);\n  const dx1 = distanceX(p2, p1);\n  const dy1 = distanceY(p2, p1);\n  const dx2 = distanceX(p4, p3);\n  const dy2 = distanceY(p4, p3);\n  const dx3 = distanceX(p1, p3);\n  const dy3 = distanceY(p1, p3);\n  let ub = dy2 * dx1 - dx2 * dy1;\n  const uat = dx2 * dy3 - dy2 * dx3;\n  const ubt = dx1 * dy3 - dy1 * dx3;\n  let t1;\n  let t2;\n\n  if (dx1 === 0 && dy1 === 0) {\n    // Line segment has no length\n    return false;\n  }\n\n  if (dx2 === 0 && dy2 === 0) {\n    // Line segment has no length\n    return false;\n  }\n\n  if (ub === 0) {\n    if (uat === 0 && ubt === 0) {\n      // COINCIDENT;\n      if (dx1 === 0) {\n        if (dy1 === 0) {\n          // p1 = p2\n          return p1.x === p2.x && p1.y === p2.y;\n        }\n        t1 = distanceY(p3, p1) / dy1;\n        t2 = distanceY(p4, p1) / dy1;\n      } else {\n        t1 = (p3.x - p1.x) / dx1;\n        t2 = (p4.x - p1.x) / dx1;\n      }\n      if ((t1 < 0 && t2 < 0) || (t1 > 1 && t2 > 1)) {\n        return false;\n      }\n      return true;\n    }\n    return false; // PARALLEL;\n  }\n  const ua = uat / ub;\n  ub = ubt / ub;\n  if (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Test if a Line contains a Point. If so, returns true and false otherwise.\n * Line must have length greater then 0.\n * @private\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if line contains point\n */\nexport function testLinePoint(line, point) {\n  if (lineHasNoLength(line)) {\n    return false;\n  }\n\n  const [p1, p2] = lineToPoints(line);\n  return isPointOnLine(p1, p2, point);\n}\n\n/**\n * Test if a polygon intersects another polygon.\n * Supports convex, concave and self-intersecting polygons (filled area).\n * @param {object} polygon\n * @param {object} polygon\n * @returns {boolean} True if there is an intersection, false otherwise\n */\nexport function testPolygonPolygon(polygon1, polygon2) {\n  const rect1 = polygon1.boundingRect();\n  const rect2 = polygon2.boundingRect();\n  if (!testRectRect(rect1, rect2)) {\n    return false;\n  }\n  if (testRectContainsRect(rect1, rect2)) {\n    return testPolygonPolygonSubCase(polygon1, polygon2);\n  }\n  return testPolygonPolygonSubCase(polygon2, polygon1);\n}\n\n/**\n * Test if a geopolygon intersects a polygon.\n * @param {object} geopolygon\n * @param {object} polygon\n * @returns {boolean} True if there is an intersection, false otherwise\n */\nexport function testGeoPolygonPolygon(geopolygon, polygon) {\n  const rect1 = geopolygon.boundingRect();\n  const rect2 = polygon.boundingRect();\n  if (!testRectRect(rect1, rect2)) {\n    return false;\n  }\n  if (testRectContainsRect(rect2, rect1)) {\n    return testGeoPolygonPolygonCase2(geopolygon, polygon);\n  }\n  return testGeoPolygonPolygonCase1(geopolygon, polygon);\n}\n\n/**\n * Test if a geopolygon intersects another geopolygon.\n * @param {object} geopolygon\n * @param {object} geopolygon\n * @returns {boolean} True if there is an intersection, false otherwise\n */\nexport function testGeoPolygonGeoPolygon(geopolygon1, geopolygon2) {\n  const rect1 = geopolygon1.boundingRect();\n  const rect2 = geopolygon2.boundingRect();\n  if (!testRectRect(rect1, rect2)) {\n    return false;\n  }\n  if (testRectContainsRect(rect2, rect1)) {\n    return testGeoPolygonGeoPolygonSubCase(geopolygon2, geopolygon1);\n  }\n  return testGeoPolygonGeoPolygonSubCase(geopolygon1, geopolygon2);\n}\n\n/**\n * Test if a Circle collide with GeoPolygon. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} geopolygon\n * @param {Array} geopolygon.polygons - Array of polygons\n * @return {boolean} true if circle collide with polygon\n */\nexport function testCircleGeoPolygon(circle, geopolygon) {\n  if (circleHasNoSize(circle)) {\n    return false;\n  }\n  const center = { x: circle.cx, y: circle.cy };\n  if (testGeoPolygonPoint(geopolygon, center)) {\n    return true;\n  }\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    const polygon = polygons[n];\n    const num = polygon.edges.length;\n    for (let i = 0; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (testCircleLine(circle, edge)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a GeoPolygon contains a Point. If so, returns true and false otherwise.\n * @private\n * @param {object} geopolygon\n * @param {Array} geopolygon.vertices - Array of of arrays of vertices\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if polygon conatins point\n */\nexport function testGeoPolygonPoint(geopolygon, point) {\n  if (!testRectPoint(geopolygon.boundingRect(), point)) {\n    return false;\n  }\n  const { x, y } = point;\n  const numPolygons = geopolygon.numPolygons;\n  let inside = false;\n  let vertices;\n  let n;\n  let l;\n  let j;\n  let i;\n  let tx;\n  for (n = 0; n < numPolygons; n++) {\n    vertices = geopolygon.vertices[n];\n    for (i = -1, l = vertices.length, j = l - 1; ++i < l; j = i) {\n      if (vertices[i].x === x && vertices[i].y === y) {\n        // polygon vertice\n        return true;\n      }\n      if (vertices[i].y === vertices[j].y && vertices[i].y === y && (x - vertices[i].x) * (x - vertices[j].x) <= 0) {\n        // on horizontal edge of polygon\n        return true;\n      }\n      if ((vertices[i].y < y && y <= vertices[j].y) || (vertices[j].y < y && y <= vertices[i].y)) {\n        tx = ((vertices[j].x - vertices[i].x) * (y - vertices[i].y)) / (vertices[j].y - vertices[i].y) + vertices[i].x;\n        if (x === tx) {\n          // on polygon edge\n          return true;\n        }\n        if (x < tx) {\n          inside = !inside;\n        }\n      }\n    }\n  }\n  return inside;\n}\n\n/**\n * Test if a GeoPolygon collider with a line. If so, returns true and false otherwise.\n * Line must have length greater then 0.\n * @private\n * @param {object} geopolygon\n * @param {Array} geopolygon.polygons - Array of polygons\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if polygon collider with line\n */\nexport function testGeoPolygonLine(geopolygon, line) {\n  const [p1, p2] = lineToPoints(line);\n  if (testGeoPolygonPoint(geopolygon, p1) || testGeoPolygonPoint(geopolygon, p2)) {\n    return true;\n  }\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    const polygon = polygons[n];\n    for (let i = 0, num = polygon.edges.length; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (testLineLine(line, edge)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a GeoPolygon collider with a rectangle. If so, returns true and false otherwise.\n * Rectangle must have width and height greater than 0.\n * @private\n * @param {object} geopolygon\n * @param {Array} geopolygon.polygons - Array of polygons\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if polygon collider with rect\n */\nexport function testGeoPolygonRect(geopolygon, rect) {\n  const [p1, p2, p3, p4] = rectToPoints(rect);\n  if (\n    testGeoPolygonPoint(geopolygon, p1) ||\n    testGeoPolygonPoint(geopolygon, p2) ||\n    testGeoPolygonPoint(geopolygon, p3) ||\n    testGeoPolygonPoint(geopolygon, p4)\n  ) {\n    return true;\n  }\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    const polygon = polygons[n];\n    for (let i = 0, num = polygon.edges.length; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (testRectLine(rect, edge)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n","import extend from 'extend';\n\nconst VARIABLE_RX = /^\\$/;\nconst EXTEND = '@extend';\n\nfunction throwCyclical(s) {\n  throw new Error(`Cyclical reference for \"${s}\"`);\n}\n\nfunction res(style, references, path) {\n  if (typeof style === 'string') {\n    let value = references[style];\n    if (path.indexOf(style) !== -1) {\n      throwCyclical(style);\n    }\n    if (VARIABLE_RX.test(value)) {\n      path.push(style);\n      return res(value, references, path);\n    }\n    return value;\n  }\n  let computed = style;\n  const refs = extend(true, {}, references, style);\n  const s = {};\n\n  if (style[EXTEND]) {\n    const extendFrom = style[EXTEND];\n    if (path.indexOf(extendFrom) !== -1) {\n      throwCyclical(extendFrom);\n    }\n    let pext = path.slice();\n    pext.push(extendFrom);\n    computed = extend(true, {}, res(refs[extendFrom], references, pext), style);\n  }\n\n  Object.keys(computed).forEach((key) => {\n    let p = path.slice();\n    if (key === EXTEND || VARIABLE_RX.test(key)) {\n      return;\n    }\n    s[key] = computed[key];\n    let value = s[key];\n    if (VARIABLE_RX.test(value) && value in refs) {\n      if (path.indexOf(value) !== -1) {\n        throwCyclical(value);\n      }\n      p.push(value);\n      value = refs[value];\n      if (typeof value === 'object') {\n        s[key] = res(value, refs, p);\n      } else if (VARIABLE_RX.test(value) && value in refs) {\n        s[key] = res(value, refs, p);\n      } else {\n        s[key] = value;\n      }\n    } else if (typeof value === 'object') {\n      s[key] = res(value, refs, p);\n    }\n  });\n  return s;\n}\n\n/**\n * Resolve style references\n * @private\n * @param {style-object} style\n * @param {style-object} references\n * @returns {object} The resolved style\n * @example\n * resolve({\n *   label: '$label--big'\n * }, {\n *   '$size--m': '12px',\n *   '$label--big': {\n *     fontFamily: 'Arial',\n *     fontSize: '$size--m'\n *   }\n * }); // { label: { fontFamily: 'Arial', fontSize: '12px' } }\n */\nfunction resolve(style, references) {\n  return res(style, references, []);\n}\n\nexport { resolve as default };\n","import extend from 'extend';\nimport styleResolver from '../style/resolver';\n\nfunction themeFn(style = {}, palettes = []) {\n  let pals = {};\n  let internalStyle = style;\n  const setPalettes = (p) => {\n    p.forEach((palette) => {\n      const pal = Array.isArray(palette.colors[0]) ? palette.colors : [palette.colors];\n      pals[palette.key] = {\n        colors: pal,\n        sizes: pal.map((colors) => (colors ? colors.length : 0)),\n      };\n    });\n  };\n\n  const getPalette = (key, num) => {\n    const palette = pals[key];\n    if (!palette) {\n      return [];\n    }\n    const sizes = palette.sizes;\n    // find the first color set containing at least 'num' colors\n    for (let i = 0; i < sizes.length; i++) {\n      if (num <= sizes[i]) {\n        return palette.colors[i];\n      }\n    }\n    return palette.colors[sizes.length - 1];\n  };\n\n  /**\n   * Theme API\n   * @private\n   * @experimental\n   */\n  const theme = {\n    /**\n     * Get an array of colors\n     * @param {string} name - Name of the color palette\n     * @param {number} [num] - The minimum number of colors to get from the palette\n     */\n    palette: (name, num) => getPalette(name, num),\n\n    setPalettes,\n\n    /**\n     * Resolve style references\n     * @param {style-object} s - Object containing style\n     */\n    style: (s) => styleResolver(s, internalStyle),\n\n    /**\n     * Set custom style\n     * @param {style-object} s - Object containing style\n     */\n    setStyle: (s) => {\n      internalStyle = extend({}, style, s);\n    },\n  };\n\n  setPalettes(palettes);\n\n  return theme;\n}\n\nexport { themeFn as default };\n","import extend from 'extend';\n\nimport createDockLayout from '../layout/dock/docker';\nimport { detectTouchSupport, isValidTapEvent } from '../utils/event-type';\nimport { getShapeType } from '../geometry/util';\nimport datasources from '../data/data';\nimport dataCollections from '../data/collections';\nimport { collection as formatterCollection } from './formatter';\nimport { collection as scaleCollection } from './scales';\nimport buildScroll, { getOrCreateScrollApi } from './scroll-api';\nimport brush from '../brush';\nimport componentFactory from '../component/component-factory';\nimport mediatorFactory from '../mediator';\nimport { testRectPoint } from '../math/narrow-phase-collision';\nimport themeFn from '../theme';\n\n/**\n * @typedef {object} component-settings\n * @property {string} type - Component type (ex: axis, point, ...)\n * @property {function} [preferredSize] - Function returning the preferred size\n * @property {function} [created]\n * @property {function} [beforeMount]\n * @property {function} [mounted]\n * @property {function} [beforeUpdate]\n * @property {function} [updated]\n * @property {function} [beforeRender]\n * @property {function} [beforeDestroy]\n * @property {function} [destroyed]\n * @property {brush-setting} [brush] see [brushing](./brushing.md)\n * @property {object} [layout] Layout settings\n * @property {number} [layout.displayOrder = 0]\n * @property {number} [layout.prioOrder = 0]\n * @property {string | {width: string, height: string}} [layout.minimumLayoutMode] Refer to layout sizes defined by layoutModes in `strategy`\n * @property {string} [layout.dock] left, right, top or bottom\n * @property {boolean} [show = true] If the component should be rendered\n * @property {string} [scale] Named scale. Will be provided to the component if it ask for it.\n * @property {string} [formatter] Named formatter. Fallback to create formatter from scale. Will be provided to the component if it ask for it.\n */\n\nfunction addComponentDelta(shape, containerBounds, componentBounds) {\n  const dx = containerBounds.left - componentBounds.left;\n  const dy = containerBounds.top - componentBounds.top;\n  const type = getShapeType(shape);\n  const deltaShape = extend(true, {}, shape);\n\n  switch (type) {\n    case 'circle':\n      deltaShape.cx += dx;\n      deltaShape.cy += dy;\n      break;\n    case 'polygon':\n      for (let i = 0, num = deltaShape.vertices.length; i < num; i++) {\n        const v = deltaShape.vertices[i];\n        v.x += dx;\n        v.y += dy;\n      }\n      break;\n    case 'geopolygon': // vertices is 2D array\n      for (let n = 0; n < deltaShape.vertices.length; n++) {\n        const vertices = deltaShape.vertices[n];\n        for (let i = 0, num = vertices.length; i < num; i++) {\n          const v = vertices[i];\n          v.x += dx;\n          v.y += dy;\n        }\n      }\n      break;\n    case 'line':\n      deltaShape.x1 += dx;\n      deltaShape.y1 += dy;\n      deltaShape.x2 += dx;\n      deltaShape.y2 += dy;\n      break;\n    case 'point':\n    case 'rect':\n      deltaShape.x += dx;\n      deltaShape.y += dy;\n      break;\n    default:\n      break;\n  }\n\n  return deltaShape;\n}\n\nconst moveToPosition = (element, comp, index) => {\n  const el = comp.instance.renderer().element();\n  if (isNaN(index) || !el || !element || !element.children) {\n    return;\n  }\n  const nodes = element.children;\n  const i = Math.max(0, index);\n  const node = nodes[i];\n  if (el === node) {\n    return;\n  }\n  const additionalEl = comp.instance.def.additionalElements && comp.instance.def.additionalElements().filter(Boolean);\n  if (element.insertBefore && typeof node !== 'undefined') {\n    element.insertBefore(el, node);\n    if (additionalEl) {\n      additionalEl.forEach((ae) => {\n        element.insertBefore(ae, el);\n      });\n    }\n  } else {\n    if (additionalEl) {\n      additionalEl.forEach((ae) => {\n        element.appendChild(ae, el);\n      });\n    }\n    element.appendChild(el);\n  }\n};\n\nexport function orderComponents(element, visibleComponents, order) {\n  const elToIdx = [];\n  let numElements = 0;\n  const ordered = order\n    ? visibleComponents\n        .slice()\n        .sort((a, b) => order[visibleComponents.indexOf(a)] - order[visibleComponents.indexOf(b)])\n    : visibleComponents;\n  ordered.forEach((comp) => {\n    elToIdx.push(numElements);\n\n    // assume each component has at least one element\n    numElements++;\n\n    // check additional elements\n    const additionalEl = comp.instance.def.additionalElements && comp.instance.def.additionalElements();\n    if (additionalEl) {\n      numElements += additionalEl.length;\n    }\n  });\n\n  ordered.forEach((comp, i) => moveToPosition(element, comp, elToIdx[i]));\n}\n\nfunction chartFn(definition, context) {\n  /**\n   * @typedef {object} chart-definition\n   */\n  let {\n    /**\n     * @type {HTMLElement}\n     * @memberof chart-definition\n     */\n    element,\n    /**\n     * @type {Array<data-source>}\n     * @memberof chart-definition\n     */\n    data = [],\n    /**\n     * @type {chart-settings}\n     * @memberof chart-definition\n     */\n    settings = {},\n    on = {},\n  } = definition;\n\n  const registries = context.registries;\n  const logger = context.logger;\n  const theme = themeFn(context.style, context.palettes);\n\n  const listeners = [];\n  /**\n   * @alias chart\n   * @interface\n   */\n  const instance = extend({}, definition);\n  const mediator = mediatorFactory();\n  let currentComponents = []; // Augmented components\n  let visibleComponents = [];\n\n  let currentScales = null; // Built scales\n  let currentFormatters = null; // Built formatters\n  let currentScrollApis = null; // Build scroll apis\n  let currentInteractions = [];\n\n  let dataset = () => {};\n  let dataCollection = () => {};\n  const brushes = {};\n  let stopBrushing = false;\n\n  const createComponent = (compSettings, container) => {\n    if (!registries.component.has(compSettings.type)) {\n      logger.warn(`Unknown component: ${compSettings.type}`);\n      return false;\n    }\n    const componentDefinition = registries.component(compSettings.type);\n    const compInstance = componentFactory(componentDefinition, {\n      settings: compSettings,\n      chart: instance,\n      mediator,\n      registries,\n      theme,\n      container,\n    });\n    return {\n      instance: compInstance,\n      settings: extend(true, {}, compSettings),\n      key: compSettings.key,\n      hasKey: typeof compSettings.key !== 'undefined',\n    };\n  };\n\n  // Create a callback that calls lifecycle functions in the definition and config (if they exist).\n  function createCallback(method, defaultMethod = () => {}) {\n    return function cb(...args) {\n      const inDefinition = typeof definition[method] === 'function';\n\n      let returnValue;\n      if (inDefinition) {\n        returnValue = definition[method].call(instance, ...args);\n      } else {\n        returnValue = defaultMethod.call(instance, ...args);\n      }\n      return returnValue;\n    };\n  }\n\n  const findComponent = (componentInstance) => {\n    for (let i = 0; i < currentComponents.length; i++) {\n      if (currentComponents[i].instance === componentInstance) {\n        return currentComponents[i];\n      }\n    }\n    return null;\n  };\n\n  const findComponentIndexByKey = (key) => {\n    for (let i = 0; i < currentComponents.length; i++) {\n      const currComp = currentComponents[i];\n      if (currComp.hasKey && currComp.key === key) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  function getElementRect(el) {\n    if (typeof el.getBoundingClientRect === 'function') {\n      const { width, height } = el.getBoundingClientRect();\n      return {\n        x: 0,\n        y: 0,\n        width,\n        height,\n      };\n    }\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n    };\n  }\n\n  const layout = (components) => {\n    const vcomponents = components.map((c) => {\n      const dockConfig = c.instance.dockConfig();\n      return {\n        instance: c.instance,\n        resize: c.instance.resize,\n        preferredSize: dockConfig.computePreferredSize.bind(dockConfig),\n        settings: c.settings,\n        layoutComponents: () => {},\n      };\n    });\n    let layoutSettings;\n    if (settings.dockLayout) {\n      logger.warn('Deprecation Warning: \"dockLayout\" property should be renamed to \"strategy\"');\n      layoutSettings = settings.dockLayout;\n    } else {\n      layoutSettings = settings.strategy;\n    }\n\n    const dockLayout = createDockLayout(layoutSettings);\n\n    const rect = getElementRect(element);\n\n    const { visible, hidden, order } = dockLayout.layout(rect, vcomponents);\n    return {\n      visible: visible.map((v) => findComponent(v.instance)),\n      hidden: hidden.map((h) => findComponent(h.instance)),\n      order,\n    };\n  };\n\n  const created = createCallback('created');\n  const beforeMount = createCallback('beforeMount');\n  const mounted = createCallback('mounted');\n  const beforeUpdate = createCallback('beforeUpdate');\n  const updated = createCallback('updated');\n  const beforeRender = createCallback('beforeRender');\n  const beforeDestroy = createCallback('beforeDestroy');\n  const destroyed = createCallback('destroyed');\n\n  const set = (_data, _settings, { partialData } = {}) => {\n    const { formatters = {}, scales = {}, scroll = {} } = _settings;\n\n    dataset = datasources(_data, { logger, types: registries.data });\n    if (!partialData) {\n      Object.keys(brushes).forEach((b) => brushes[b].clear());\n    }\n    if (_settings.palettes) {\n      theme.setPalettes(_settings.palettes);\n    }\n    if (_settings.style) {\n      theme.setStyle(_settings.style);\n    }\n    dataCollection = dataCollections(_settings.collections, { dataset }, { logger });\n\n    const deps = {\n      theme,\n      logger,\n    };\n    currentScales = scaleCollection(\n      scales,\n      { dataset, collection: dataCollection },\n      { ...deps, scale: registries.scale }\n    );\n    currentFormatters = formatterCollection(\n      formatters,\n      { dataset, collection: dataCollection },\n      { ...deps, formatter: registries.formatter }\n    );\n    currentScrollApis = buildScroll(scroll, currentScrollApis);\n  };\n\n  const render = () => {\n    const { components = [] } = settings;\n\n    beforeRender();\n\n    set(data, settings);\n\n    currentComponents = components.map((compSettings) => createComponent(compSettings, element)).filter((c) => !!c);\n\n    const { visible, hidden, order } = layout(currentComponents);\n    visibleComponents = visible;\n\n    hidden.forEach((comp) => {\n      comp.instance.hide();\n      comp.visible = false;\n    });\n\n    visible.forEach((comp) => comp.instance.beforeMount());\n    visible.forEach((comp) => comp.instance.mount());\n    visible.forEach((comp) => comp.instance.beforeRender());\n\n    visible.forEach((comp) => comp.instance.render());\n    visible.forEach((comp) => comp.instance.mounted());\n    visible.forEach((comp) => {\n      comp.visible = true;\n    });\n    orderComponents(element, visibleComponents, order);\n  };\n\n  function setInteractions(interactions = []) {\n    const current = {};\n    const newKeys = interactions.filter((it) => !!it.key).map((it) => it.key);\n    currentInteractions.forEach((cit) => {\n      if (cit.key && newKeys.indexOf(cit.key) !== -1) {\n        // keep old instance\n        current[cit.key] = cit;\n      } else {\n        cit.destroy();\n      }\n    });\n    currentInteractions = interactions.map((intSettings) => {\n      const intDefinition =\n        intSettings.key && current[intSettings.key]\n          ? current[intSettings.key]\n          : registries.interaction(intSettings.type)(instance, mediator, element);\n      intDefinition.set(intSettings);\n      return intDefinition;\n    });\n  }\n\n  const componentsFromPoint = (p) => {\n    const br = element.getBoundingClientRect();\n    const x = 'clientX' in p ? p.clientX : p.x;\n    const y = 'clientY' in p ? p.clientY : p.y;\n    const tp = { x: x - br.left, y: y - br.top };\n    const ret = [];\n    visibleComponents.forEach((c) => {\n      const r = c.instance.getRect();\n      // Do test on physical rect and use computed rect if available, otherwise fallback to computing a new rect for legacy support\n      if (\n        testRectPoint(\n          r.computedPhysical\n            ? r.computedPhysical\n            : {\n                x: r.margin.left + r.x * r.scaleRatio.x,\n                y: r.margin.top + r.y * r.scaleRatio.y,\n                width: r.width * r.scaleRatio.x,\n                height: r.height * r.scaleRatio.y,\n              },\n          tp\n        )\n      ) {\n        ret.push(c);\n      }\n    });\n    return ret;\n  };\n\n  const addDefaultEventListeners = () => {\n    if (listeners.length || !element) {\n      return;\n    }\n    Object.keys(on).forEach((key) => {\n      const listener = on[key].bind(instance);\n      element.addEventListener(key, listener);\n      listeners.push({\n        key,\n        listener,\n      });\n    });\n\n    const eventInfo = {};\n    const onTapDown = (e) => {\n      if (e.touches) {\n        eventInfo.x = e.touches[0].clientX;\n        eventInfo.y = e.touches[0].clientY;\n        eventInfo.multiTouch = e.touches.length > 1;\n      } else {\n        eventInfo.x = e.clientX;\n        eventInfo.y = e.clientY;\n        eventInfo.multiTouch = false;\n      }\n      eventInfo.time = Date.now();\n      eventInfo.comps = componentsFromPoint(eventInfo);\n    };\n\n    const onBrushTap = (e) => {\n      const comps = eventInfo.comps || componentsFromPoint(e);\n      if (comps.every((c) => c.instance.def.disableTriggers)) {\n        return;\n      }\n\n      if (e.type === 'touchend') {\n        e.preventDefault();\n      }\n      if (!isValidTapEvent(e, eventInfo)) {\n        return;\n      }\n\n      for (let i = comps.length - 1; i >= 0; i--) {\n        const comp = comps[i];\n        comp.instance.onBrushTap(e);\n        if (stopBrushing) {\n          stopBrushing = false;\n          break;\n        }\n      }\n    };\n\n    const onBrushOver = (e) => {\n      const comps = componentsFromPoint(e);\n      for (let i = comps.length - 1; i >= 0; i--) {\n        const comp = comps[i];\n        comp.instance.onBrushOver(e);\n        if (stopBrushing) {\n          stopBrushing = false;\n          break;\n        }\n      }\n    };\n\n    const brushEventList = [];\n\n    brushEventList.push({ key: 'mousedown', listener: onTapDown });\n    brushEventList.push({ key: 'mouseup', listener: onBrushTap });\n\n    if (detectTouchSupport(element)) {\n      brushEventList.push({ key: 'touchstart', listener: onTapDown });\n      brushEventList.push({ key: 'touchend', listener: onBrushTap });\n    }\n\n    brushEventList.push({ key: 'mousemove', listener: onBrushOver });\n\n    brushEventList.forEach((event) => {\n      element.addEventListener(event.key, event.listener);\n      listeners.push(event);\n    });\n  };\n\n  const removeDefaultEventListeners = () => {\n    listeners.forEach(({ key, listener }) => element.removeEventListener(key, listener));\n    listeners.length = 0;\n  };\n\n  // Browser only\n  const mount = () => {\n    element.innerHTML = '';\n\n    render();\n\n    addDefaultEventListeners();\n    setInteractions(settings.interactions);\n  };\n\n  const unmount = () => {\n    removeDefaultEventListeners();\n    setInteractions();\n  };\n\n  /**\n   * Update the chart with new settings and / or data\n   * @param {chart-definition} [chart] - Chart definition\n   */\n  instance.update = (newProps = {}) => {\n    const { partialData, excludeFromUpdate = [] } = newProps;\n    let visibleOrder;\n    if (newProps.data) {\n      data = newProps.data;\n    }\n    if (newProps.settings) {\n      settings = newProps.settings;\n      setInteractions(newProps.settings.interactions);\n    }\n\n    beforeUpdate();\n\n    set(data, settings, { partialData });\n\n    const { formatters, scales, components = [] } = settings;\n\n    for (let i = currentComponents.length - 1; i >= 0; i--) {\n      const currComp = currentComponents[i];\n      // TODO warn when there is no key\n      if (!components.some((c) => currComp.hasKey && currComp.key === c.key)) {\n        // Component is removed\n        currentComponents.splice(i, 1);\n        currComp.instance.destroy();\n      }\n    }\n\n    // Let the \"components\" array determine order of components\n    currentComponents = components\n      .map((comp) => {\n        const idx = findComponentIndexByKey(comp.key);\n\n        // Component should not be updated\n        if (excludeFromUpdate.indexOf(comp.key) > -1) {\n          return currentComponents[idx];\n        }\n\n        if (idx === -1) {\n          // Component is added\n          return createComponent(comp, element);\n        }\n        // Component is (potentially) updated\n        currentComponents[idx].updateWith = {\n          formatters,\n          scales,\n          data,\n          settings: comp,\n        };\n        return currentComponents[idx];\n      })\n      .filter((c) => !!c);\n\n    currentComponents.forEach((comp) => {\n      if (comp.updateWith) {\n        comp.instance.set(comp.updateWith);\n      }\n    });\n    currentComponents.forEach((comp) => {\n      if (comp.updateWith) {\n        comp.instance.beforeUpdate();\n      }\n    });\n\n    const toUpdate = [];\n    const toRender = [];\n    let toRenderOrUpdate;\n    if (partialData) {\n      currentComponents.forEach((comp) => {\n        if (comp.updateWith && comp.visible) {\n          toUpdate.push(comp);\n        }\n      });\n      toRenderOrUpdate = toUpdate;\n    } else {\n      const { visible, hidden, order } = layout(currentComponents); // Relayout\n      visibleComponents = visible;\n      toRenderOrUpdate = visible;\n      visibleOrder = order;\n\n      visible.forEach((comp) => {\n        if (comp.updateWith && comp.visible) {\n          toUpdate.push(comp);\n        } else {\n          toRender.push(comp);\n        }\n      });\n\n      hidden.forEach((comp) => {\n        comp.instance.hide();\n        comp.visible = false;\n        delete comp.updateWith;\n      });\n    }\n\n    toRender.forEach((comp) => comp.instance.beforeMount());\n    toRender.forEach((comp) => comp.instance.mount());\n\n    toRenderOrUpdate.forEach((comp) => comp.instance.beforeRender());\n\n    toRenderOrUpdate.forEach((comp) => {\n      if (comp.updateWith && comp.visible) {\n        comp.instance.update();\n      } else {\n        comp.instance.render();\n      }\n    });\n\n    // Ensure that displayOrder is keept, only do so on re-layout update.\n    // Which is only the case if partialData is false.\n    if (!partialData) {\n      orderComponents(element, visibleComponents, visibleOrder);\n    }\n\n    toRender.forEach((comp) => comp.instance.mounted());\n    toUpdate.forEach((comp) => comp.instance.updated());\n\n    visibleComponents.forEach((comp) => {\n      delete comp.updateWith;\n      comp.visible = true;\n    });\n\n    updated();\n  };\n\n  /**\n   * Destroy the chart instance.\n   */\n  instance.destroy = () => {\n    beforeDestroy();\n    currentComponents.forEach((comp) => comp.instance.destroy());\n    currentComponents = [];\n    unmount();\n    delete instance.update;\n    delete instance.destroy;\n    destroyed();\n  };\n\n  /**\n   * Get all shapes associated with the provided context\n   * @param {string} context The brush context\n   * @param {string} mode Property comparasion mode.\n   * @param {Array<string>} props Which specific data properties to compare\n   * @param {string} key Which component to get shapes from. Default gives shapes from all components.\n   * @return {Array<object>} Array of objects containing shape and parent element\n   */\n  instance.getAffectedShapes = (ctx, mode = 'and', props, key) => {\n    const shapes = [];\n    currentComponents\n      .filter((comp) => key === undefined || key === null || comp.key === key)\n      .forEach((comp) => {\n        shapes.push(...comp.instance.getBrushedShapes(ctx, mode, props));\n      });\n    return shapes;\n  };\n\n  /**\n   * Get all nodes matching the provided selector\n   * @param {string} selector CSS selector [type, attribute, universal, class]\n   * @returns {Array<SceneNode>} Array of objects containing matching nodes\n   *\n   * @example\n   * chart.findShapes('Circle') // [<CircleNode>, <CircleNode>]\n   * chart.findShapes('Circle[fill=\"red\"][stroke!=\"black\"]') // [CircleNode, CircleNode]\n   * chart.findShapes('Container Rect') // [Rect, Rect]\n   */\n  instance.findShapes = (selector) => {\n    const shapes = [];\n    visibleComponents.forEach((c) => {\n      shapes.push(...c.instance.findShapes(selector));\n    });\n    return shapes;\n  };\n\n  /**\n   * Get components overlapping a point.\n   * @param {point} p - Point with x- and y-cooridnate. The coordinate is relative to the browser viewport.\n   * @returns {Array<component-context>} Array of component contexts\n   */\n  instance.componentsFromPoint = (p) => componentsFromPoint(p).map((comp) => comp.instance.ctx);\n\n  /**\n   * Get all nodes colliding with a geometrical shape (circle, line, rectangle, point, polygon, geopolygon).\n   *\n   * The input shape is identified based on the geometrical attributes in the following order: circle => line => rectangle => point => polygon => geopolygon.\n   * Note that not all nodes on a scene have collision detection enabled.\n   * @param {line|rect|point|circle} shape - A geometrical shape. Coordinates are relative to the top-left corner of the chart instance container.\n   * @param {object} opts - Options\n   * @param {object[]} [opts.components] - Array of components to include in the lookup. If no components are specified, all components will be included.\n   * @param {string} [opts.components[].component.key] - Component key\n   * @param {string} [opts.components[].component.propagation] - if set to `stop`, will start lookup on top visible shape and propagate downwards until a shape is found.\n   * @param {string} [opts.propagation] - if set to `stop`, will start lookup on top visible component and propagate downwards until a component has at least a match.\n   * @returns {Array<SceneNode>} Array of objects containing colliding nodes\n   *\n   * @example\n   * chart.shapesAt(\n   *  {\n   *    x: 0,\n   *    y: 0,\n   *    width: 100,\n   *    height: 100\n   *  },\n   *  {\n   *    components: [\n   *      { key: 'key1', propagation: 'stop' },\n   *      { key: 'key2' }\n   *    ],\n   *    propagation: 'stop'\n   *  }\n   * );\n   */\n  instance.shapesAt = (shape, opts = {}) => {\n    const result = [];\n    const containerBounds = element.getBoundingClientRect();\n    let comps = visibleComponents; // Assume that visibleComponents is ordererd according to displayOrder\n\n    if (Array.isArray(opts.components) && opts.components.length > 0) {\n      const compKeys = opts.components.map((c) => c.key);\n      comps = visibleComponents\n        .filter((c) => compKeys.indexOf(c.key) !== -1)\n        .map((c) => ({\n          instance: c.instance,\n          opts: opts.components[compKeys.indexOf(c.key)],\n        }));\n    }\n\n    for (let i = comps.length - 1; i >= 0; i--) {\n      const c = comps[i];\n      const componentBounds = c.instance.renderer().element().getBoundingClientRect();\n      const deltaShape = addComponentDelta(shape, containerBounds, componentBounds);\n      const shapes = c.instance.shapesAt(deltaShape, c.opts);\n      const stopPropagation = shapes.length > 0 && opts.propagation === 'stop';\n\n      result.push(...shapes);\n\n      if (result.length > 0 && stopPropagation) {\n        return result;\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Brush data by providing a collection of data bound shapes.\n   * @param {SceneNode[]} shapes - An array of data bound shapes.\n   * @param {object} config - Options\n   * @param {Array<object>} opts.components - Array of components to include in the lookup.\n   * @param {string} [opts.components.component.key] - Component key\n   * @param {Array<string>} [opts.components.component.contexts] - Name of the brushing contexts to affect\n   * @param {Array<string>} [opts.components.component.data] - The mapped data properties to add to the brush\n   * @param {string} [opts.components.component.action] - Type of action to respond with\n   *\n   * @example\n   * const shapes = chartInstance.shapesAt(...);\n   * const config = {\n   *  components:[\n   *    {\n   *      key: 'key1',\n   *      contexts: ['myContext'],\n   *      data: [''],\n   *      action: 'add'\n   *    }\n   *  ]\n   * };\n   * chartInstance.brushFromShapes(shapes, config);\n   */\n  instance.brushFromShapes = (shapes, config = { components: [] }) => {\n    for (let i = 0; i < config.components.length; i++) {\n      const iKey = config.components[i].key;\n      visibleComponents\n        .filter((c) => iKey === c.key)\n        .forEach((c) => {\n          let compShapes = shapes.filter((shape) => shape.key === c.key);\n          c.instance.brushFromShapes(compShapes, config.components[i]);\n        });\n    }\n  };\n\n  /**\n   * @param {string} name - Name of scroll api\n   * @returns {scroll}\n   */\n  instance.scroll = function scroll(name = 'default') {\n    return getOrCreateScrollApi(name, currentScrollApis);\n  };\n\n  /**\n   * Get\n   * @param {string} key - Get the dataset identified by `key`\n   * @returns {dataset}\n   */\n  instance.dataset = (key) => dataset(key);\n\n  instance.dataCollection = (key) => dataCollection(key);\n\n  /**\n   * Get all registered scales\n   * @returns {Object<string,scale>}\n   */\n  instance.scales = function scales() {\n    return currentScales.all();\n  };\n\n  /**\n   * Get all registered formatters\n   * @returns {Object<string,formatter>}\n   */\n  instance.formatters = function formatters() {\n    return currentFormatters.all();\n  };\n\n  /**\n   * Get or create brush context for this chart\n   * @param {string} name - Name of the brush context. If no match is found, a new brush context is created and returned.\n   * @returns {brush}\n   */\n  instance.brush = function brushFn(name = 'default') {\n    if (!brushes[name]) {\n      brushes[name] = brush();\n    }\n    return brushes[name];\n  };\n\n  /**\n   * Get or create a scale for this chart\n   * @param {string|object} v - Scale reference or scale options\n   * @returns {scale}\n   * @example\n   * instance.scale('nameOfMyScale'); // Fetch an existing scale by name\n   * instance.scale({ scale: 'nameOfMyScale' }); // Fetch an existing scale by name\n   * instance.scale({ source: '0/1', type: 'linear' }); // Create a new scale\n   */\n  instance.scale = function scale(v) {\n    return currentScales.get(v);\n  };\n\n  /**\n   * Get or create a formatter for this chart\n   * @param {string|object} v - Formatter reference or formatter options\n   * @returns {formatter}\n   * @example\n   * instance.formatter('nameOfMyFormatter'); // Fetch an existing formatter by name\n   * instance.formatter({ formatter: 'nameOfMyFormatter' }); // Fetch an existing formatter by name\n   * instance.formatter({ type: 'q' }); // Fetch an existing formatter by type\n   * instance.formatter({\n   *  formatter: 'd3',\n   *  type: 'number',\n   *  format: '1.0.%'\n   * }); // Create a new formatter\n   */\n  instance.formatter = function formatter(v) {\n    return currentFormatters.get(v);\n  };\n\n  /**\n   * @param {boolean} [val] - Toggle brushing on or off. If value is omitted, a toggle action is applied to the current state.\n   */\n  instance.toggleBrushing = function toggleBrushing(val) {\n    if (typeof val !== 'undefined') {\n      stopBrushing = val;\n    } else {\n      stopBrushing = !stopBrushing;\n    }\n  };\n\n  /**\n   * Get a component context\n   * @param {string} key - Component key\n   * @returns {component-context} Component context\n   */\n  instance.component = (key) => {\n    const idx = findComponentIndexByKey(key);\n    if (idx !== -1) {\n      return currentComponents[idx].instance.ctx;\n    }\n    return undefined;\n  };\n\n  instance.logger = () => logger;\n\n  instance.theme = () => theme;\n\n  /**\n   * Get the all interactions instances\n   * @name chart.interactions\n   * @type {object}\n   * @example\n   * chart.interactions.instances; // Array of all interaction instances\n   * chart.interactions.on(); // Toggle on all interactions instances\n   * chart.interactions.off(); // Toggle off all interactions instances\n   */\n  Object.defineProperty(instance, 'interactions', {\n    get() {\n      return /** @lends chart.interactions */ {\n        /** @type Array<interaction> */\n        instances: currentInteractions,\n        /** Enable all interaction instances */\n        on() {\n          addDefaultEventListeners();\n          currentInteractions.forEach((i) => i.on());\n        },\n        /** Disable all interaction instances */\n        off() {\n          removeDefaultEventListeners();\n          currentInteractions.forEach((i) => i.off());\n        },\n      };\n    },\n  });\n\n  created();\n\n  if (element) {\n    beforeMount();\n    mount(element);\n    mounted(element);\n    instance.element = element;\n  }\n\n  return instance;\n}\n\nexport default chartFn;\n","import registry from '../utils/registry';\n\nconst rendererRegistry = (reg) => {\n  let f = registry(reg);\n  f.prio = (p) => (p ? f.default(p[0]) : [f.default()]);\n  f.types = () => f.getKeys();\n  return f;\n};\n\nexport { rendererRegistry as default };\n","import registry from '../utils/registry';\n\nconst componentRegistry = registry();\nexport { componentRegistry as default };\n","export function findField(query, { cache }) {\n  if (typeof query === 'number') {\n    return cache.fields[query];\n  }\n\n  // Find by key first\n  for (let i = 0; i < cache.fields.length; i++) {\n    if (cache.fields[i].key() === query) {\n      return cache.fields[i];\n    }\n  }\n  // find by title\n  for (let i = 0; i < cache.fields.length; i++) {\n    if (cache.fields[i].title() === query) {\n      return cache.fields[i];\n    }\n  }\n  return null;\n}\n\nconst filters = {\n  numeric: (values) => values.filter((v) => typeof v === 'number' && !isNaN(v)),\n};\n\nconst unfilteredReducers = {\n  sum: (values) => values.reduce((a, b) => a + b, 0),\n};\n\n// function isPrimitive(x) {\n//   const type = typeof x;\n//   return (type !== 'object' && type !== 'function');\n// }\n\n/**\n * [reducers description]\n * @type {Object}\n * @private\n */\nexport const reducers = {\n  first: (values) => values[0],\n  last: (values) => values[values.length - 1],\n  min: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : Math.min.apply(null, filtered);\n  },\n  max: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : Math.max.apply(null, filtered);\n  },\n  sum: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : filtered.reduce((a, b) => a + b, 0);\n  },\n  avg: (values) => {\n    const filtered = filters.numeric(values);\n    const len = filtered.length;\n    return !len ? NaN : unfilteredReducers.sum(filtered) / len;\n  },\n};\n\nfunction normalizeProperties(cfg, dataset, dataProperties, main) {\n  // console.log('======', cfg, main, dataset);\n  const props = {};\n  const mainField = main.field || (typeof cfg.field !== 'undefined' ? dataset.field(cfg.field) : null);\n  Object.keys(dataProperties).forEach((key) => {\n    const pConfig = dataProperties[key];\n    const prop = (props[key] = {});\n    if (['number', 'string', 'boolean'].indexOf(typeof pConfig) !== -1) {\n      prop.type = 'primitive';\n      prop.value = pConfig;\n    } else if (typeof pConfig === 'function') {\n      prop.type = 'function';\n      prop.value = pConfig;\n      prop.label = pConfig;\n      prop.field = mainField;\n    } else if (typeof pConfig === 'object') {\n      if (pConfig.fields) {\n        prop.fields = pConfig.fields.map((ff) => normalizeProperties(cfg, dataset, { main: ff }, main).main);\n      } else if (typeof pConfig.field !== 'undefined') {\n        prop.type = 'field';\n        prop.field = dataset.field(pConfig.field);\n        prop.value = prop.field.value;\n        prop.label = prop.field.label;\n      } else if (mainField) {\n        prop.value = mainField.value;\n        prop.label = mainField.label;\n        prop.field = mainField;\n      }\n\n      if (typeof pConfig.filter === 'function') {\n        prop.filter = pConfig.filter;\n      }\n      if (typeof pConfig.value !== 'undefined') {\n        prop.value = pConfig.value;\n      }\n      if (typeof pConfig.label !== 'undefined') {\n        prop.label = pConfig.label;\n      }\n      if (typeof pConfig.reduce === 'function') {\n        prop.reduce = pConfig.reduce;\n      } else if (pConfig.reduce) {\n        prop.reduce = reducers[pConfig.reduce];\n      } else if (prop.field && prop.field.reduce) {\n        prop.reduce = typeof prop.field.reduce === 'string' ? reducers[prop.field.reduce] : prop.field.reduce;\n      }\n\n      if (typeof pConfig.reduceLabel === 'function') {\n        prop.reduceLabel = pConfig.reduceLabel;\n      } else if (pConfig.reduceLabel) {\n        prop.reduceLabel = reducers[pConfig.reduceLabel];\n      } else if (prop.field && prop.field.reduceLabel) {\n        prop.reduceLabel =\n          typeof prop.field.reduceLabel === 'string' ? reducers[prop.field.reduceLabel] : prop.field.reduceLabel;\n      }\n    }\n  });\n\n  return props;\n}\n\n/*\nexample of configuration input\ncfg = {\n  field: 'State', // the 'top level' values are extracted from field state\n  value: d => d.qText, // the value of the output\n  props: { // additional data properties ammended to each item\n    a: 3, // constant value\n    b: d => d.qElemNumber, // function will receive the original field value\n    c: {\n      field: 'Country', // reference to another field\n      value: d => d.qText // extract the qText value from the referenced field\n    },\n    d: {\n      value: d => d.qRow //  extract qRow from field 'State'\n    }\n  }\n}\n\n// output\n[{\n  value: 'CA', source: { field: 'State' },\n  a: { value: 3 },\n  b: { value: 26, source: 'State' },\n  c: { value: 'USA', source: 'Country' },\n  d: { value: 131, source: 'State' }\n},\n...]\n*/\nexport function getPropsInfo(cfg, dataset) {\n  // console.log('222', cfg);\n  const { main } = normalizeProperties(\n    cfg,\n    dataset,\n    {\n      main: {\n        value: cfg.value,\n        label: cfg.label,\n        reduce: cfg.reduce,\n        filter: cfg.filter,\n      },\n    },\n    {}\n  );\n  const props = normalizeProperties(cfg, dataset, cfg.props || {}, main);\n  return { props, main };\n}\n\nfunction collectItems(items, cfg, formatter, prop) {\n  const values = Array(items.length);\n  const labels = Array(items.length);\n  let it;\n  for (let i = 0; i < items.length; i++) {\n    it = prop ? items[i][prop] : items[i];\n    values[i] = it.value;\n    labels[i] = it.label;\n  }\n\n  const reduce = cfg.reduce;\n  const reduceLabel = cfg.reduceLabel;\n  const v = reduce ? reduce(values) : values;\n  const b = reduceLabel ? reduceLabel(labels, v) : formatter ? formatter(v) : String(v); // eslint-disable-line no-nested-ternary\n\n  // // ret[prop].label = String(propsFormatters[prop](ret[prop].value));\n\n  const ret = {\n    value: v,\n    label: b,\n  };\n  if (prop && items[0][prop].source) {\n    ret.source = items[0][prop].source;\n    return ret;\n  }\n  if (!prop && items[0].source) {\n    ret.source = items[0].source;\n    return ret;\n  }\n\n  return ret;\n}\n\n// collect items that have been grouped and reduce per group and property\nexport function collect(trackedItems, { main, propsArr, props }) {\n  let dataItems = [];\n  const mainFormatter = main.field.formatter(); // || (v => v);\n  const propsFormatters = {};\n  propsArr.forEach((prop) => {\n    propsFormatters[prop] = props[prop].field ? props[prop].field.formatter() : (v) => v;\n  });\n  dataItems.push(\n    ...trackedItems.map((t) => {\n      const ret = collectItems(t.items, main, mainFormatter);\n\n      propsArr.forEach((prop) => {\n        ret[prop] = collectItems(t.items, props[prop], propsFormatters[prop], prop);\n      });\n      return ret;\n    })\n  );\n\n  return dataItems;\n}\n\nexport function track({ cfg, itemData, obj, target, tracker, trackType }) {\n  const trackId = trackType === 'function' ? cfg.trackBy(itemData) : itemData[cfg.trackBy];\n  let trackedItem = tracker[trackId];\n  if (!trackedItem) {\n    trackedItem = tracker[trackId] = {\n      items: [],\n      id: trackId,\n    };\n    target.push(trackedItem);\n  }\n  trackedItem.items.push(obj);\n}\n","import { getPropsInfo, collect, track as storeTracked } from './util';\n\nfunction datumExtract(propCfg, cell, { key }) {\n  const datum = {\n    value:\n      typeof propCfg.value === 'function' // eslint-disable-line no-nested-ternary\n        ? propCfg.value(cell)\n        : typeof propCfg.value !== 'undefined'\n        ? propCfg.value\n        : cell,\n  };\n\n  datum.label =\n    typeof propCfg.label === 'function' // eslint-disable-line no-nested-ternary\n      ? propCfg.label(cell)\n      : typeof propCfg.label !== 'undefined'\n      ? String(propCfg.label)\n      : String(datum.value);\n\n  if (propCfg.field) {\n    datum.source = {\n      key,\n      field: propCfg.field.key(),\n    };\n  }\n\n  return datum;\n}\n\nexport default function extract(config, dataset) {\n  const cfgs = Array.isArray(config) ? config : [config];\n  let dataItems = [];\n  cfgs.forEach((cfg) => {\n    if (typeof cfg.field !== 'undefined') {\n      const f = dataset.field(cfg.field);\n      const sourceKey = dataset.key();\n      if (!f) {\n        throw Error(`Field '${cfg.field}' not found`);\n      }\n      const { props, main } = getPropsInfo(cfg, dataset);\n      const propsArr = Object.keys(props);\n\n      const track = !!cfg.trackBy;\n      const trackType = typeof cfg.trackBy;\n      const tracker = {};\n      const trackedItems = [];\n\n      const items = f.items();\n      const mapped = [];\n      for (let idx = 0; idx < items.length; idx++) {\n        const mainCell = items[idx];\n        const exclude = main.filter && !main.filter(mainCell);\n        if (exclude) {\n          continue;\n        }\n        const ret = datumExtract(main, mainCell, { key: sourceKey });\n\n        // loop through all props that need to be mapped and\n        // assign 'value' and 'source' to each property\n        propsArr.forEach((prop) => {\n          const p = props[prop];\n          let propCell = p.field ? p.field.items()[idx] : mainCell;\n          ret[prop] = datumExtract(p, propCell, { key: sourceKey });\n        });\n\n        // collect items based on the trackBy value\n        // items with the same trackBy value are placed in an array and reduced later\n        if (track) {\n          storeTracked({\n            cfg,\n            itemData: mainCell,\n            obj: ret,\n            target: trackedItems,\n            tracker,\n            trackType,\n          });\n        }\n\n        mapped.push(ret);\n      }\n\n      // reduce if items have been grouped\n      if (track) {\n        dataItems.push(\n          ...collect(trackedItems, {\n            main,\n            propsArr,\n            props,\n          })\n        );\n      } else {\n        dataItems.push(...mapped);\n      }\n    }\n  });\n  return dataItems;\n}\n","import extend from 'extend';\nimport field from './field';\nimport extract from './extractor-matrix';\n\nimport { findField, getPropsInfo, collect, track } from './util';\n\nconst filters = {\n  numeric: (values) => values.filter((v) => typeof v === 'number' && !isNaN(v)),\n};\n\nfunction createFields({ source, data, cache, config }) {\n  let headers;\n  let content = data;\n  const parse = config && config.parse;\n  if (Array.isArray(data[0])) {\n    // assume 2d matrix of data\n    if (parse && parse.headers === false) {\n      headers = data[0].map((v, i) => i);\n    } else {\n      headers = data[0];\n      content = data.slice(1);\n    }\n  } else {\n    headers = Object.keys(data[0]);\n  }\n\n  const rowFn = !!parse && typeof parse.row === 'function' && parse.row;\n  let flds = headers;\n\n  if (parse && typeof parse.fields === 'function') {\n    flds = parse.fields(flds.slice());\n  } else {\n    flds = headers.map((h) => ({\n      key: h,\n      title: h,\n    }));\n  }\n\n  let fieldValues;\n  if (Array.isArray(data[0])) {\n    fieldValues = flds.map(() => []);\n  } else {\n    fieldValues = {};\n    flds.forEach((f) => {\n      fieldValues[f.key] = [];\n    });\n  }\n\n  for (let r = 0; r < content.length; r++) {\n    const row = rowFn ? rowFn(content[r], r, flds) : content[r];\n    if (!row) {\n      continue;\n    }\n    if (Array.isArray(row)) {\n      for (let c = 0; c < flds.length; c++) {\n        fieldValues[c].push(row[c]);\n      }\n    } else {\n      for (let c = 0; c < flds.length; c++) {\n        fieldValues[flds[c].key].push(row[flds[c].key]);\n      }\n    }\n  }\n  const fv = Array.isArray(fieldValues) ? (i) => fieldValues[i] : (i) => fieldValues[flds[i].key];\n  for (let c = 0; c < flds.length; c++) {\n    const values = fv(c);\n    const numericValues = filters.numeric(values);\n    const isMeasure = numericValues.length > 0;\n    const type = isMeasure ? 'measure' : 'dimension';\n    const min = isMeasure ? Math.min(...numericValues) : NaN;\n    const max = isMeasure ? Math.max(...numericValues) : NaN;\n\n    cache.fields.push(\n      field(\n        extend(\n          {\n            source,\n            key: c,\n            title: flds[c].title,\n            values,\n            min,\n            max,\n            type,\n          },\n          flds[c]\n        ),\n        {\n          value: flds[c].value,\n          label: flds[c].label,\n        }\n      )\n    );\n  }\n}\n\nconst dsv = ({ data, config }) => {\n  const rows = data.split('\\n');\n  const row0 = rows[0];\n  const row1 = rows[1];\n  let delimiter = ',';\n  if (config && config.parse && config.parse.delimiter) {\n    delimiter = config.parse.delimiter;\n  } else if (row0) {\n    // guess delimiter\n    const guesses = [/,/, /\\t/, /;/];\n    for (let i = 0; i < guesses.length; i++) {\n      const d = guesses[i];\n      if (row0 && row1) {\n        if (d.test(row0) && d.test(row1) && row0.split(d).length === row1.split(d).length) {\n          delimiter = d;\n          break;\n        }\n      } else if (d.test(row0)) {\n        delimiter = d;\n      }\n    }\n  }\n  return rows.map((row) => row.split(delimiter));\n};\n\nconst parseData = ({ key, data, cache, config }) => {\n  if (!data) {\n    return;\n  }\n  let dd = data;\n\n  if (typeof dd === 'string') {\n    // assume dsv\n    dd = dsv({ data, config });\n  }\n\n  if (!Array.isArray(dd)) {\n    return; // warn?\n  }\n\n  createFields({\n    data: dd,\n    cache,\n    source: key,\n    config,\n  });\n};\n\n/**\n * Create a new dataset with default settings\n * @private\n * @return {dataset}\n */\nfunction ds({ key, data, config } = {}) {\n  const cache = {\n    fields: [],\n  };\n\n  /**\n   * @alias dataset\n   * @interface\n   */\n  const dataset = {\n    /**\n     * Get the key identifying this dataset\n     * @returns {string}\n     */\n    key: () => key,\n\n    /**\n     * Get the raw data\n     * @returns {any}\n     */\n    raw: () => data,\n\n    /**\n     * Find a field within this dataset\n     * @param {string} query - The field to find\n     * @returns {field}\n     */\n    field: (query) =>\n      findField(query, {\n        cache,\n        matrix: data,\n      }),\n\n    /**\n     * Get all fields within this dataset\n     * @returns {Array<field>}\n     */\n    fields: () => cache.fields.slice(),\n\n    /**\n     * Extract data items from this dataset\n     * @param {data-extract-config} config\n     * @returns {Array<datum-extract>}\n     */\n    extract: (cfg) => extract(cfg, dataset, cache),\n\n    /**\n     * @returns {null}\n     */\n    hierarchy: () => null,\n  };\n\n  parseData({\n    key,\n    data,\n    config,\n    cache,\n  });\n\n  return dataset;\n}\n\nds.util = {\n  normalizeConfig: getPropsInfo,\n  collect,\n  track,\n};\n\nexport { ds as default };\n\n/**\n * @typedef {object} data-extract-config\n * @property {string} field - The field to extract data from\n * @property {data-extract-config~valueFn} [value] - The field value accessor\n * @property {data-extract-config~labelFn} [label] - The field label accessor\n * @property {data-extract-config~trackByFn} [trackBy] - Track by value accessor\n * @property {data-extract-config~reduceFn} [reduce] - Reducer function\n * @property {data-extract-config~reduceLabelFn} [reduceLabel] - Label reducer function\n * @property {data-extract-config~filterFn} [filter] - Filter function\n * @property {object} [props] - Additional properties to add to the extracted item\n */\n\n/**\n * @callback data-extract-config~valueFn\n * @param {any} cell The field cell\n * @returns {any}\n */\n\n/**\n * @callback data-extract-config~labelFn\n * @param {any} cell The field cell\n * @returns {string}\n */\n\n/**\n * @callback data-extract-config~filterFn\n * @param {any} cell The field cell\n * @returns {boolean}\n */\n\n/**\n * @callback data-extract-config~trackByFn\n * @param {any} cell The field cell\n * @returns {any}\n */\n\n/**\n * @callback data-extract-config~reduceFn\n * @param {any[]} values The collected values to reduce\n * @returns {any}\n */\n\n/**\n * @callback data-extract-config~reduceLabelFn\n * @param {any[]} labels The collected labels to reduce\n * @param {any} value Reduced value\n * @returns {string}\n */\n\n/**\n * @typedef {object} datum-extract\n * @property {any} value - The extracted value\n * @property {string} label - The extracted value as a string\n * @property {object} source - The data source of the extracted data\n * @property {string} source.key - The data-source key\n * @property {string} source.field - The source field\n */\n","import registry from '../utils/registry';\nimport dataset from './dataset';\n\nconst dataRegistry = registry();\n\ndataRegistry.default('matrix');\n\ndataRegistry('matrix', dataset);\n\ndataRegistry('default', dataset); // deprecated\n\nexport { dataRegistry as default };\n","/**\n * Manages event handlers for native events\n * @private\n */\nfunction native(chart, mediator, element) {\n  let instance = { chart, mediator, element };\n  let nativeEvents = [];\n  let settings;\n  let itKey;\n  let isOn = true;\n\n  /**\n   * Set default settings\n   * @private\n   */\n  function setDefaultSettings(newSettings) {\n    itKey = newSettings.key;\n    settings = newSettings;\n    settings.events = settings.events || [];\n    if (settings.enable === undefined) {\n      settings.enable = true;\n    }\n  }\n\n  /**\n   * Add native events based on settings\n   * @private\n   */\n  function addEvents() {\n    if (typeof settings.enable === 'function') {\n      settings.enable = settings.enable.bind(instance)();\n    }\n    if (!settings.enable) {\n      return; // interaction is disabled\n    }\n    Object.keys(settings.events).forEach((key) => {\n      const listener = settings.events[key].bind(instance);\n      element.addEventListener(key, listener);\n      nativeEvents.push({ key, listener });\n    });\n  }\n\n  /**\n   * Removes all added native events\n   * @private\n   */\n  function removeAddedEvents() {\n    // remove added native events\n    nativeEvents.forEach(({ key, listener }) => {\n      element.removeEventListener(key, listener);\n    });\n    nativeEvents = [];\n  }\n\n  return {\n    /**\n     * Getter for the key.\n     * @private\n     */\n    get key() {\n      return itKey;\n    },\n    /**\n     * Updates this with new settings\n     * @private\n     * @param {object} newSettings\n     * @param {string} [newSettings.type] - The interaction type. Is 'native' for this component\n     * @param {boolean|function} [newSettings.enable=true] - Should the interactions defined here be enabled or not.\n     * This is only run when adding event handlers. In effect at startup, update or during on/off.\n     * It does not run during every event loop.\n     * @param {array} [newSettings.gestures] - The keys in this object is the names of native events\n     * that should be added to the chart element and they should all point to function which\n     * will be the corresponding event handler.\n     */\n    set(newSettings) {\n      setDefaultSettings(newSettings);\n      removeAddedEvents();\n      if (isOn) {\n        addEvents();\n      }\n    },\n    /**\n     * Turns off interactions\n     * @private\n     */\n    off() {\n      isOn = false;\n      removeAddedEvents();\n    },\n    /**\n     * Turns off interactions\n     * @private\n     */\n    on() {\n      isOn = true;\n      if (nativeEvents.length === 0) {\n        addEvents();\n      }\n    },\n    /**\n     * Destroys and unbinds all event handlers\n     * @private\n     */\n    destroy() {\n      removeAddedEvents();\n      instance = null;\n      settings = null;\n    },\n  };\n}\n\nexport { native as default };\n","import registry from '../utils/registry';\nimport native from '../../web/interactions/native';\n\nconst reg = registry();\n\nreg('native', native);\n\nexport default reg;\n","/**\n * Short-hand for max(min())\n *\n * @param {number} min Minimum allowed value\n * @param {number} max Maximum allowed value\n * @param {number} value The actual value to cap\n * @ignore\n */\nexport function cap(min, max, value) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * Resolve a diff, i.e. resolveDiff(0.2, 0.6, 1, 100) = 20\n *\n * @param {object} params parameters\n * @param {number} params.start Normalized start value\n * @param {number} params.end Normalized end value\n * @param {number} params.minPx The minimum number of pixels\n * @param {number} params.maxPx Maximum number of pixels, i.e. the width or height\n * @ignore\n */\nexport function resolveDiff({ start, end, minPx = 0.1, maxPx = 1 }) {\n  const high = Math.max(start, end);\n  const low = Math.min(start, end);\n  const highModified = cap(-0.1, 1.2, high);\n  const lowModified = cap(-0.1, 1.2, low);\n\n  const wantedDiff = highModified * maxPx - lowModified * maxPx;\n  const actualDiff = Math.max(minPx, wantedDiff);\n  const startModifier = (actualDiff - wantedDiff) / 2;\n  const actualLow = lowModified * maxPx - startModifier;\n\n  return {\n    actualDiff,\n    startModifier,\n    actualLow,\n  };\n}\n","import extend from 'extend';\nimport { resolveDiff } from './box-math';\n\n/**\n * Out of bounds shape\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {number} params.value 0 or 1 depending on where to render the oob shape\n * @param {number} params.boxWidth Un-calculated box width in relative/normalized format\n * @param {number} params.boxPadding Un-calculated box padding in relative/normalized format\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY Wether or not to flip X and Y coordinates together with Width and Height\n * @param {function} params.symbol Symbol library function from component\n * @ignore\n */\nexport function oob({ item, value, boxCenter, rendWidth, rendHeight, flipXY, symbol }) {\n  let x = 'x';\n  let y = 'y';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n  let startAngle = value < 0.5 ? 90 : -90;\n\n  if (flipXY) {\n    x = 'y';\n    y = 'x';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n    startAngle = value < 0.5 ? 180 : 0;\n  }\n\n  return symbol(\n    extend({}, item.oob, {\n      [x]: boxCenter * calcwidth,\n      [y]: Math.max(item.oob.size / 2, Math.min(value * calcheight, calcheight - item.oob.size / 2)),\n      startAngle,\n    })\n  );\n}\n\n/**\n * Box shape calculation function\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {number} params.boxWidth Un-calculated box width in relative/normalized format\n * @param {number} params.boxPadding Un-calculated box padding in relative/normalized format\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY wether or not to flip X and Y coordinates together with Width and Height\n * @ignore\n */\nexport function box({ item, boxWidth, boxPadding, rendWidth, rendHeight, flipXY }) {\n  let x = 'x';\n  let y = 'y';\n  let width = 'width';\n  let height = 'height';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n\n  if (flipXY) {\n    x = 'y';\n    y = 'x';\n    width = 'height';\n    height = 'width';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n  }\n\n  const { actualDiff, actualLow } = resolveDiff({\n    start: item.start,\n    end: item.end,\n    minPx: item.box.minHeightPx,\n    maxPx: calcheight,\n  });\n\n  return extend({}, item.box, {\n    type: 'rect',\n    [x]: (boxPadding + item.major) * calcwidth,\n    [y]: actualLow,\n    [height]: actualDiff,\n    [width]: boxWidth * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null,\n    },\n  });\n}\n\n/**\n * A vertical line shape (for start - min, end - max values)\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {number} params.from Normalized from value\n * @param {number} params.to Normalized to value\n * @param {number} params.boxCenter Center coordinate for the box\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY wether or not to flip X and Y coordinates together with Width and Height\n * @ignore\n */\nexport function verticalLine({ item, from, to, boxCenter, rendWidth, rendHeight, flipXY }) {\n  let x1 = 'x1';\n  let y1 = 'y1';\n  let x2 = 'x2';\n  let y2 = 'y2';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n\n  if (flipXY) {\n    x1 = 'y1';\n    y1 = 'x1';\n    x2 = 'y2';\n    y2 = 'x2';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n  }\n\n  return extend({}, item.line, {\n    type: 'line',\n    [y2]: Math.floor(from * calcheight),\n    [x1]: boxCenter * calcwidth,\n    [y1]: Math.floor(to * calcheight),\n    [x2]: boxCenter * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null,\n    },\n  });\n}\n\n/**\n * A horizontal line shape (for median and whiskers)\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {string} params.key Which key to use as style base in the item object\n * @param {number} params.position At which \"height\" (X) to position the horizontal line\n * @param {number} params.width Width of the horizontal line (i.e. box width or a multiple of it)\n * @param {number} params.boxCenter Center coordinate for the box\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY wether or not to flip X and Y coordinates together with Width and Height\n * @ignore\n */\nexport function horizontalLine({ item, key, position, width, boxCenter, rendWidth, rendHeight, flipXY }) {\n  let x1 = 'x1';\n  let y1 = 'y1';\n  let x2 = 'x2';\n  let y2 = 'y2';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n\n  if (flipXY) {\n    x1 = 'y1';\n    y1 = 'x1';\n    x2 = 'y2';\n    y2 = 'x2';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n  }\n\n  const halfWidth = width / 2;\n\n  return extend({ type: 'line' }, item[key], {\n    [y1]: Math.floor(position * calcheight),\n    [x1]: (boxCenter - halfWidth) * calcwidth,\n    [y2]: Math.floor(position * calcheight),\n    [x2]: (boxCenter + halfWidth) * calcwidth,\n    r: halfWidth * calcwidth,\n    cx: boxCenter * calcwidth,\n    cy: position * calcheight,\n    width: width * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null,\n    },\n  });\n}\n\n/**\n * A horizontal line shape (for median and whiskers)\n * @param {number} bandwidth The current bandwidth for this item\n * @param {object} item A resolved style item to render with major and box width variables, minWidthPx and maxWidthPx\n * @param {number} maxMajorWidth The actual maximum major width\n * @ignore\n */\nexport function getBoxWidth(bandwidth, item, maxMajorWidth) {\n  const { width, maxWidthPx, minWidthPx } = item.box;\n  const sign = bandwidth >= 0 ? 1 : -1;\n  let boxWidth = Math.min(sign * bandwidth * width, isNaN(maxWidthPx) ? maxMajorWidth : maxWidthPx / maxMajorWidth);\n  boxWidth = isNaN(minWidthPx) ? boxWidth : Math.max(minWidthPx / maxMajorWidth, boxWidth);\n  return boxWidth * sign;\n}\n","import extend from 'extend';\nimport * as boxShapesHelper from './box-shapes-helper';\n\nimport { isNumber } from '../../utils/is-number';\n\nexport default function buildShapes({ width, height, flipXY, resolved, keys, symbol }) {\n  // if (!settings || !settings.major || !settings.major.scale || !settings.minor || !settings.minor.scale) {\n  //   return [];\n  // }\n\n  const output = [];\n  const majorItems = resolved.major.items;\n\n  if (!majorItems.length) {\n    return output;\n  }\n\n  const rendWidth = width;\n  const rendHeight = height;\n  const maxMajorWidth = flipXY ? height : width;\n  const majorSettings = resolved.major.settings;\n  const minorProps = ['start', 'end', 'min', 'max', 'med'].filter(\n    (prop) => typeof resolved.minor.settings[prop] !== 'undefined'\n  );\n  const numMinorProps = minorProps.length;\n  const nonOobKeys = keys.filter((key) => key !== 'oob');\n\n  let children;\n  let major;\n  let minorItem;\n  let boxWidth;\n  let boxPadding;\n  let boxCenter;\n  let isLowerOutOfBounds;\n  let isHigherOutOfBounds;\n  let isOutOfBounds;\n  const numKeys = keys ? keys.length : 0;\n  const numNonOobKeys = nonOobKeys ? nonOobKeys.length : 0;\n\n  function addBox() {\n    /* THE BOX */\n    if (minorItem.box && isNumber(minorItem.start) && isNumber(minorItem.end)) {\n      children.push(\n        boxShapesHelper.box({\n          item: minorItem,\n          boxWidth,\n          boxPadding,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n  }\n\n  function addLine() {\n    /* LINES MIN - START, END - MAX */\n    if (isNumber(minorItem.min) && isNumber(minorItem.start)) {\n      children.push(\n        boxShapesHelper.verticalLine({\n          item: minorItem,\n          from: minorItem.min,\n          to: minorItem.start,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n\n    if (isNumber(minorItem.max) && isNumber(minorItem.end)) {\n      children.push(\n        boxShapesHelper.verticalLine({\n          item: minorItem,\n          from: minorItem.max,\n          to: minorItem.end,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n  }\n\n  function addMedian() {\n    /* MEDIAN */\n    if (minorItem.median && isNumber(minorItem.med)) {\n      children.push(\n        boxShapesHelper.horizontalLine({\n          item: minorItem,\n          key: 'median',\n          position: minorItem.med,\n          width: boxWidth,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n  }\n\n  function addWhisker() {\n    /* WHISKERS */\n    if (minorItem.whisker) {\n      const whiskerWidth = boxWidth * minorItem.whisker.width;\n\n      if (isNumber(minorItem.min)) {\n        children.push(\n          boxShapesHelper.horizontalLine({\n            item: minorItem,\n            key: 'whisker',\n            position: minorItem.min,\n            width: whiskerWidth,\n            boxCenter,\n            rendWidth,\n            rendHeight,\n            flipXY,\n          })\n        );\n      }\n\n      if (isNumber(minorItem.max)) {\n        children.push(\n          boxShapesHelper.horizontalLine({\n            item: minorItem,\n            key: 'whisker',\n            position: minorItem.max,\n            width: whiskerWidth,\n            boxCenter,\n            rendWidth,\n            rendHeight,\n            flipXY,\n          })\n        );\n      }\n    }\n  }\n\n  function addOutOfBounds() {\n    /* OUT OF BOUNDS */\n    if (isLowerOutOfBounds) {\n      children.push(\n        boxShapesHelper.oob({\n          item: minorItem,\n          value: 0,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n          symbol,\n        })\n      );\n    } else if (isHigherOutOfBounds) {\n      children.push(\n        boxShapesHelper.oob({\n          item: minorItem,\n          value: 1,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n          symbol,\n        })\n      );\n    }\n  }\n\n  const addMarkerList = {\n    box: addBox,\n    line: addLine,\n    median: addMedian,\n    whisker: addWhisker,\n  };\n\n  function checkOutOfBounds() {\n    let value;\n    let max = -Number.MAX_VALUE;\n    let min = Number.MAX_VALUE;\n    for (let n = 0; n < numMinorProps; n++) {\n      value = minorItem[minorProps[n]];\n      if (isNumber(value)) {\n        if (max < value) {\n          max = value;\n        }\n        if (min > value) {\n          min = value;\n        }\n      }\n    }\n    isLowerOutOfBounds = max < 0 && max !== -Number.MAX_VALUE;\n    isHigherOutOfBounds = min > 1 && min !== Number.MAX_VALUE;\n    isOutOfBounds = isLowerOutOfBounds || isHigherOutOfBounds;\n  }\n\n  for (let i = 0, len = majorItems.length; i < len; i++) {\n    children = [];\n    major = null;\n    const majorItem = majorItems[i];\n    const d = majorItem.data;\n\n    let majorVal = null;\n    let majorEndVal = null;\n\n    if (typeof majorSettings.binStart !== 'undefined') {\n      // if start and end is defined\n      majorVal = majorItem.binStart;\n      majorEndVal = majorItem.binEnd;\n      major = majorSettings.binStart.scale;\n    } else {\n      major = majorSettings.major.scale;\n      majorVal = major ? majorItem.major : 0;\n    }\n\n    let bandwidth = 0;\n    if (!major) {\n      bandwidth = 1;\n    } else if (major.bandwidth) {\n      bandwidth = major.bandwidth();\n      majorVal -= bandwidth / 2;\n    } else {\n      bandwidth = majorEndVal - majorVal;\n    }\n\n    minorItem = extend(\n      {},\n      {\n        major: majorVal,\n        majorEnd: majorEndVal,\n      },\n      resolved.minor.items[i]\n    );\n\n    for (let j = 0; j < numKeys; j++) {\n      minorItem[keys[j]] = resolved[keys[j]].items[i];\n    }\n\n    boxWidth = boxShapesHelper.getBoxWidth(bandwidth, minorItem, maxMajorWidth);\n    boxPadding = (bandwidth - boxWidth) / 2;\n    boxCenter = boxPadding + minorItem.major + boxWidth / 2;\n\n    checkOutOfBounds();\n\n    if (!isOutOfBounds) {\n      for (let k = 0; k < numNonOobKeys; k++) {\n        if (minorItem[nonOobKeys[k]] && minorItem[nonOobKeys[k]].show === false) {\n          continue;\n        }\n        addMarkerList[nonOobKeys[k]]();\n      }\n    } else if (minorItem.oob) {\n      addOutOfBounds();\n    }\n\n    const container = {\n      type: 'container',\n      data: d,\n      collider: { type: 'bounds' },\n      children,\n    };\n\n    output.push(container);\n  }\n\n  return output;\n}\n","import extend from 'extend';\n\n/**\n * Resolve a complex object using the built-in resolver from this.resolver in component\n * @ignore\n */\nexport default function complexResolver({ keys, data, defaultSettings, style, settings, width, height, resolver }) {\n  const defaults = extend(true, {}, defaultSettings || {}, style || {});\n  const scaled = {\n    major: settings.orientation === 'horizontal' ? height : width,\n    minor: settings.orientation === 'horizontal' ? width : height,\n  };\n\n  const majorSettings = settings.major;\n\n  let majorResolved;\n\n  if (\n    typeof majorSettings === 'object' &&\n    typeof majorSettings.ref === 'object' &&\n    typeof majorSettings.ref.start !== 'undefined' &&\n    typeof majorSettings.ref.end !== 'undefined'\n  ) {\n    // temporary backwards compatibility\n    majorResolved = resolver.resolve({\n      data,\n      defaults: {\n        start: 0,\n        end: 1,\n      },\n      scaled,\n      settings: extend(\n        true,\n        {},\n        {\n          binStart: { scale: settings.major.scale, ref: settings.major.ref.start },\n          binEnd: { scale: settings.major.scale, ref: settings.major.ref.end },\n        }\n      ),\n    });\n  } else if (\n    typeof majorSettings === 'object' &&\n    typeof majorSettings.binStart !== 'undefined' &&\n    typeof majorSettings.binEnd !== 'undefined'\n  ) {\n    majorResolved = resolver.resolve({\n      data,\n      defaults: {\n        start: 0,\n        end: 1,\n      },\n      scaled,\n      settings: extend(\n        true,\n        {},\n        {\n          binStart: { scale: settings.major.scale, ref: 'binStart' },\n          binEnd: { scale: settings.major.scale, ref: 'binEnd' },\n        },\n        settings.major\n      ),\n    });\n  } else {\n    majorResolved = resolver.resolve({\n      data,\n      scaled,\n      defaults: {\n        major: 0.5,\n      },\n      settings: {\n        major: settings.major,\n      },\n    });\n  }\n\n  const minorSettings = settings.minor || {};\n  const defaultMinorSettings = {};\n  ['start', 'end', 'min', 'max', 'med'].forEach((prop) => {\n    if (minorSettings[prop] || (data.items && data.items.length && data.items[0][prop])) {\n      defaultMinorSettings[prop] = { scale: minorSettings.scale, ref: prop };\n    }\n  });\n\n  const minorResolved = resolver.resolve({\n    data,\n    defaults: {\n      start: 0,\n      end: 1,\n    },\n    scaled,\n    settings: extend(true, {}, defaultMinorSettings, minorSettings),\n  });\n\n  let key;\n  let ext = {\n    major: majorResolved,\n    minor: minorResolved,\n  };\n\n  for (let ki = 0, len = keys.length; ki < len; ki++) {\n    if (!settings[key] || settings[key].show !== false) {\n      key = keys[ki];\n      ext[key] = resolver.resolve({\n        data,\n        defaults: defaults[key],\n        settings: settings[key],\n        scaled,\n      });\n    }\n  }\n\n  return ext;\n}\n","import buildShapes from './box-shapes';\nimport complexResolver from './box-resolver';\n\nconst DEFAULT_DATA_SETTINGS = {\n  oob: {\n    show: true,\n    type: 'n-polygon',\n    fill: '#999',\n    stroke: '#000',\n    strokeWidth: 0,\n    size: 10,\n    sides: 3,\n    startAngle: -90,\n  },\n  box: {\n    show: true,\n    fill: '#fff',\n    stroke: '#000',\n    strokeWidth: 1,\n    strokeLinejoin: 'miter',\n    width: 1,\n    maxWidthPx: undefined,\n    minWidthPx: 1,\n    minHeightPx: 1,\n  },\n  line: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1,\n  },\n  median: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1,\n  },\n  whisker: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1,\n    fill: '',\n    type: 'line',\n    width: 1,\n  },\n};\n\nconst dataKeys = Object.keys(DEFAULT_DATA_SETTINGS);\n\nconst component = {\n  require: ['chart', 'resolver', 'symbol'],\n  defaultSettings: {\n    settings: {},\n    data: {},\n    style: {\n      box: '$shape',\n      line: '$shape-guide',\n      whisker: '$shape-guide',\n      median: '$shape-guide--inverted',\n    },\n  },\n  created() {\n    this.state = {};\n  },\n  render({ data }) {\n    const { width, height } = this.rect;\n\n    const flipXY = this.settings.settings.orientation === 'horizontal';\n\n    const { style, resolver, symbol } = this;\n\n    const keys = dataKeys.filter((key) => !this.settings.settings[key] || this.settings.settings[key].show !== false);\n    const defaultSettings = {};\n\n    keys.forEach((key) => (defaultSettings[key] = DEFAULT_DATA_SETTINGS[key]));\n\n    const resolved = complexResolver({\n      keys,\n      data,\n      defaultSettings,\n      style,\n      settings: this.settings.settings,\n      width,\n      height,\n      resolver,\n    });\n\n    const { settings, items } = resolved;\n\n    const shapes = buildShapes({\n      items,\n      settings,\n      width,\n      height,\n      flipXY,\n      resolved,\n      keys,\n      symbol,\n    });\n\n    return shapes;\n  },\n};\n\nexport default component;\n","import component from './box';\n\nexport default function box(picasso) {\n  picasso.component('box', component);\n  picasso.component('box-marker', component); // temporary backwards compatibility - DEPRECATED\n}\n\n/**\n * @typedef {object} component--box\n * @property {string} type - \"box\"\n * @property {component--box~data} data Box data\n * @property {component--box~settings} settings Box settings\n * @example\n * {\n *   type: \"box\",\n *   data: {\n *    mapTo: {\n *      min: { source: \"/qHyperCube/qMeasureInfo/0\" },\n *      start: { source: \"/qHyperCube/qMeasureInfo/1\" },\n *      med: { source: \"/qHyperCube/qMeasureInfo/2\" },\n *      end: { source: \"/qHyperCube/qMeasureInfo/3\" },\n *      max: { source: \"/qHyperCube/qMeasureInfo/4\" },\n *    },\n *    groupBy: {\n *      source: \"/qHyperCube/qDimensionInfo/0\"\n *    }\n *  },\n *  settings: {\n *    major: {\n *      scale: { source: \"/qHyperCube/qDimensionInfo/0\" }\n *    },\n *    minor: {\n *      scale: { source: [\"/qHyperCube/qMeasureInfo/0\",\n *               \"/qHyperCube/qMeasureInfo/1\",\n *               \"/qHyperCube/qMeasureInfo/2\",\n *               \"/qHyperCube/qMeasureInfo/3\",\n *               \"/qHyperCube/qMeasureInfo/4\"] }\n *    }\n *  }\n * }\n */\n\n/**\n * @typedef {object} component--box~settings\n * @property {object} major\n * @property {string} major.scale The scale to use along the major (dimension) axis\n * @property {string|component--box~settings~majorReference} [major.ref='self'] Reference to the data property along the major axis\n * @property {object} minor\n * @property {string} minor.scale The scale to use along the minor (measure) axis\n * @property {string} [orientation='vertical'] Which orientation to use (vertical or horizontal)\n * @property {object} [box] Visual properties for the box shape in the box marker\n * @property {boolean} [box.show=true] Boolean for showing the box shape\n * @property {string} [box.fill='#fff']\n * @property {string} [box.stroke='#000']\n * @property {number} [box.strokeWidth=1]\n * @property {string} [box.strokeLinejoin='miter']\n * @property {number} [box.width=1]\n * @property {number} [box.maxWidthPx=100] Maximum width of the box in pixels (not applicable when using major start and end)\n * @property {number} [box.minWidthPx=1] Minimum width of the box in pixels (not applicable when using major start and end)\n * @property {number} [box.minHeightPx=1] Minimum height of the box shape\n * @property {object} [line] Visual properties for lines between min-start, end-max.\n * @property {boolean} [line.show=true]\n * @property {string} [line.stroke='#000']\n * @property {number} [line.strokeWidth=1]\n * @property {object} [whisker] All the visual properties for whiskers at min and max.\n * @property {boolean} [whisker.show=true]\n * @property {string} [whisker.stroke='#000']\n * @property {number} [whisker.strokeWidth=1]\n * @property {number} [whisker.width=1]\n * @property {object} [median] Visual properties for the median\n * @property {boolean} [median.show=true]\n * @property {string} [median.stroke='#000']\n * @property {number} [median.strokeWidth=1]\n * @property {object} [oob] EXPERIMENTAL: Out of bounds symbol utilizing the symbol API\n * @property {boolean} [oob.show=true]\n * @property {string} [oob.type='n-polygon'] Type of the symbol to be used\n * @property {string} [oob.fill='#999'] Fill color of the symbol\n * @property {string} [oob.stroke='#000'] Stroke color\n * @property {number} [oob.strokeWidth=0] Stroke width\n * @property {number} [oob.size=10] Size/width of the symbol in pixels\n * @property {number} [oob.sides=3] Number of sides for a n-polygon (3 for triangle)\n */\n\n/**\n * @typedef {object} component--box~settings~majorReference\n * @property {string} start Reference to the data property of the start value along the major axis\n * @property {string} end Reference to the data property of the end value along the major axis\n */\n\n/**\n * @typedef {object} component--box~data\n * @property {number} [min] Min\n * @property {number} [max] Max\n * @property {number} [start] Start of box\n * @property {number} [end] End of box\n * @property {number} [med] Median\n */\n","import extend from 'extend';\nimport { notNumber } from '../../utils/is-number';\n\nconst DEFAULT_ERROR_SETTINGS = {\n  errorShape: {\n    shape: 'saltire',\n    width: 2,\n    size: 0.5,\n    fill: '#333',\n    stroke: '#333',\n    strokeWidth: 0,\n  },\n};\n\nconst PX_RX = /px$/;\n\n/**\n * @typedef {object}\n * @alias component--point.settings\n */\nconst DEFAULT_DATA_SETTINGS = {\n  /** Type of shape\n   * @type {datum-string=} */\n  shape: 'circle',\n  label: '',\n  /** Fill color\n   * @type {datum-string=} */\n  fill: '#333',\n  /** Stroke color\n   * @type {datum-string=} */\n  stroke: '#ccc',\n  /** Stroke width\n   * @type {datum-number=} */\n  strokeWidth: 0,\n  /** Stroke line join\n   * @type {string=} */\n  strokeLinejoin: 'miter',\n  /** Opacity of shape\n   * @type {datum-number=} */\n  opacity: 1,\n  /** Normalized x coordinate\n   * @type {datum-number=} */\n  x: 0.5,\n  /** Normalized y coordinate\n   * @type {datum-number=} */\n  y: 0.5,\n  /** Normalized size of shape\n   * @type {datum-number=} */\n  size: 1,\n  strokeDasharray: '',\n  /** Whether or not to show the point\n   * @type {datum-boolean=} */\n  show: true,\n};\n\n/**\n * @typedef {object}\n * @alias component--point.settings.sizeLimits\n */\nconst SIZE_LIMITS = {\n  /** Maximum size of shape, in pixels\n   * @type {number=} */\n  maxPx: 10000,\n  /** Minimum size of shape, in pixels\n   * @type {number=} */\n  minPx: 1,\n  /** Maximum size relative linear scale extent\n   * @type {number=} */\n  maxRelExtent: 0.1,\n  /** Minimum size relative linear scale extent\n   * @type {number=} */\n  minRelExtent: 0.01,\n  /** Maximum size relative discrete scale banwidth\n   * @type {number=} */\n  maxRelDiscrete: 1,\n  /** Minimum size relative discrete scale banwidth\n   * @type {number=} */\n  minRelDiscrete: 0.1,\n};\n\nfunction getPxSpaceFromScale(s, space) {\n  if (s && typeof s.bandwidth === 'function') {\n    // some kind of ordinal scale\n    return {\n      isBandwidth: true,\n      value: Math.max(1, s.bandwidth() * space),\n    };\n  }\n  return {\n    isBandwidth: false,\n    value: Math.max(1, space),\n  };\n}\n\nfunction getPointSizeLimits(x, y, width, height, limits) {\n  const xSpacePx = getPxSpaceFromScale(x ? x.scale : undefined, width, limits);\n  const ySpacePx = getPxSpaceFromScale(y ? y.scale : undefined, height, limits);\n  let maxSizePx = Math.min(\n    xSpacePx.value * limits[xSpacePx.isBandwidth ? 'maxRelDiscrete' : 'maxRelExtent'],\n    ySpacePx.value * limits[ySpacePx.isBandwidth ? 'maxRelDiscrete' : 'maxRelExtent']\n  );\n  let minSizePx = Math.min(\n    xSpacePx.value * limits[xSpacePx.isBandwidth ? 'minRelDiscrete' : 'minRelExtent'],\n    ySpacePx.value * limits[ySpacePx.isBandwidth ? 'minRelDiscrete' : 'minRelExtent']\n  );\n  const min = Math.max(1, Math.floor(minSizePx));\n  const max = Math.max(1, Math.floor(maxSizePx));\n  return {\n    min,\n    max,\n    maxGlobal: limits.maxPx,\n    minGlobal: limits.minPx,\n  };\n}\n\nfunction getType(s) {\n  let type = DEFAULT_DATA_SETTINGS.shape;\n  let props = {};\n  if (typeof s.shape === 'object' && typeof s.shape.type === 'string') {\n    type = s.shape.type;\n    props = s.shape;\n  } else if (typeof s.shape === 'string') {\n    type = s.shape;\n  }\n  type = type === 'rect' ? 'square' : type;\n\n  return [type, props];\n}\n\nfunction createDisplayPoints(dataPoints, { width, height }, pointSize, shapeFn) {\n  return dataPoints\n    .filter((p) => p.show !== false && !isNaN(p.x + p.y))\n    .map((p) => {\n      let s = p;\n      let size = PX_RX.test(p.size) ? parseInt(p.size, 10) : pointSize.min + s.size * (pointSize.max - pointSize.min);\n      if (notNumber(size)) {\n        s = DEFAULT_ERROR_SETTINGS.errorShape;\n        size = pointSize.min + s.size * (pointSize.max - pointSize.min);\n      }\n\n      const [type, typeProps] = getType(s);\n      const shapeSpec = {\n        ...typeProps,\n        type,\n        label: p.label,\n        x: p.x * width,\n        y: p.y * height,\n        fill: s.fill,\n        size: Math.min(pointSize.maxGlobal, Math.max(pointSize.minGlobal, size)),\n        stroke: s.stroke,\n        strokeWidth: s.strokeWidth,\n        strokeDasharray: s.strokeDasharray,\n        opacity: s.opacity,\n      };\n      if (s === p.errorShape) {\n        shapeSpec.width = s.width;\n      }\n      const shape = shapeFn(shapeSpec);\n\n      shape.data = p.data;\n      return shape;\n    });\n}\n\nconst component = {\n  require: ['chart', 'resolver', 'symbol'],\n  defaultSettings: {\n    settings: {},\n    data: {},\n    animations: {\n      enabled: false,\n      trackBy: (node) => node.data.value,\n    },\n    style: {\n      item: '$shape',\n    },\n  },\n  render({ data }) {\n    const resolved = this.resolver.resolve({\n      data,\n      defaults: extend({}, DEFAULT_DATA_SETTINGS, this.style.item),\n      settings: this.settings.settings,\n      scaled: {\n        x: this.rect.width,\n        y: this.rect.height,\n      },\n    });\n    const { width, height } = this.rect;\n    const limits = extend({}, SIZE_LIMITS, this.settings.settings.sizeLimits);\n    const points = resolved.items;\n    const pointSize = getPointSizeLimits(resolved.settings.x, resolved.settings.y, width, height, limits);\n    return createDisplayPoints(points, this.rect, pointSize, this.settings.shapeFn || this.symbol);\n  },\n};\n\nexport default component;\n","import pointMarkerComponent from './point';\n\n/**\n * @typedef {object} component--point\n */\n\n/**\n * @type {string}\n * @memberof component--point\n */\nconst type = 'point';\n\nexport default function pointMarker(picasso) {\n  picasso.component(type, pointMarkerComponent);\n\n  picasso.component('point-marker', pointMarkerComponent); // temporary backwards compatibility - DEPRECATED\n}\n","import extend from 'extend';\nimport { pie, arc } from 'd3-shape';\n\n/**\n * @typedef {object}\n * @alias component--pie-settings\n */\nconst DEFAULT_DATA_SETTINGS = {\n  /** Start angle of the pie, in radians\n   * @type {number=} */\n  startAngle: 0,\n  /** End angle of the pie, in radians\n   * @type {number=} */\n  endAngle: 2 * Math.PI,\n  /**\n   * @typedef {object}\n   */\n  slice: {\n    label: '',\n    /** Absolute value of the slice's arc length\n     * @type {number=} */\n    arc: 1,\n    /** Visibility of the slice\n     * @type {boolean=} */\n    show: true,\n    /** Fill color of the slice\n     * @type {string=} */\n    fill: '#333',\n    /** Stroke color of the slice\n     * @type {string=} */\n    stroke: '#ccc',\n    /** Stroke width of the slice\n     * @type {number=} */\n    strokeWidth: 1,\n    /** Stroke line join\n     * @type {string=} */\n    strokeLinejoin: 'round',\n    /** Opacity of the slice\n     * @type {number=} */\n    opacity: 1,\n    /** Inner radius of the slice\n     * @type {number=} */\n    innerRadius: 0,\n    /** Outer radius of the slice\n     * @type {number=} */\n    outerRadius: 0.8,\n    /** Corner radius of the slice, in pixels\n     * @type {number=} */\n    cornerRadius: 0,\n    /** Radial offset of the slice\n     * @type {number=} */\n    offset: 0,\n  },\n};\n\n/**\n * @typedef {object} component--pie\n * @property {string} [type='pie']\n * @example\n * {\n *   type: 'pie',\n *   data: {\n *     extract: {\n *       field: 'Region',\n *       props: {\n *         num: { field: 'Population' }\n *       }\n *     }\n *   },\n *   settings: {\n *     startAngle: Math.PI / 2,\n *     endAngle: -Math.PI / 2,\n *     slice: {\n *       arc: { ref: 'num' },\n *       fill: 'green',\n *       stroke: 'red',\n *       strokeWidth: 2,\n *       strokeLinejoin: 'round',\n *       innerRadius: 0.6,\n *       outerRadius 0.8,\n *       opacity: 0.8,\n *       offset: 0.2\n *     }\n *   }\n * }\n */\n\nfunction offsetSlice(centroid, offset, outerRadius, innerRadius) {\n  let [vx, vy] = centroid;\n  const vlen = Math.sqrt(vx * vx + vy * vy);\n  vx /= vlen;\n  vy /= vlen;\n  const diff = outerRadius - innerRadius;\n  return { x: vx * offset * diff, y: vy * offset * diff };\n}\n\nfunction createDisplayPies(arcData, { x, y, width, height }, slices, sum) {\n  const arcGen = arc();\n  const center = { x: x + width / 2, y: y + height / 2 };\n  const innerRadius = Math.min(width, height) / 2;\n  const outerRadius = Math.min(width, height) / 2;\n  const cornerRadius = outerRadius / 100;\n  return arcData.map((a, i) => {\n    const slice = slices[i];\n    slice.type = 'path';\n    const or = outerRadius * slice.outerRadius;\n    const ir = innerRadius * slice.innerRadius;\n    arcGen.innerRadius(ir);\n    arcGen.outerRadius(or);\n    arcGen.cornerRadius(cornerRadius * slice.cornerRadius);\n    slice.d = arcGen(a);\n    const centroid = arcGen.centroid(a);\n    const offset = slice.offset ? offsetSlice(centroid, slice.offset, or, ir) : { x: 0, y: 0 };\n    slice.transform = `translate(${offset.x}, ${offset.y}) translate(${center.x}, ${center.y})`;\n    slice.desc = {\n      share: a.value / sum,\n      slice: {\n        start: a.startAngle,\n        end: a.endAngle,\n        innerRadius: ir,\n        outerRadius: or,\n        offset: { x: center.x + offset.x, y: center.y + offset.y },\n      },\n    };\n\n    return slice;\n  });\n}\n\nexport function arcValue(stngs, item) {\n  if (stngs.slice && 'arc' in stngs.slice) {\n    return item.arc;\n  }\n  return item.data.value;\n}\n\nconst pieComponent = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    settings: {\n      startAngle: 0,\n      endAngle: 2 * Math.PI,\n      padAngle: 0,\n      slice: {},\n    },\n    style: {\n      slice: '$shape',\n    },\n    data: {},\n  },\n  render({ data }) {\n    const arcValues = [];\n    const slices = [];\n    const stngs = this.settings.settings;\n    const { items } = this.resolver.resolve({\n      data,\n      defaults: extend({}, DEFAULT_DATA_SETTINGS.slice, this.style.slice),\n      settings: stngs.slice,\n    });\n\n    let sum = 0;\n    for (let i = 0, len = items.length; i < len; i++) {\n      const val = arcValue(stngs, items[i]);\n      if (val > 0 && items[i].outerRadius >= items[i].innerRadius) {\n        arcValues.push(val);\n        slices.push(items[i]);\n        sum += val;\n      }\n    }\n\n    const pieGen = pie().sortValues(null);\n    pieGen.startAngle(stngs.startAngle);\n    pieGen.endAngle(stngs.endAngle);\n    pieGen.padAngle(stngs.padAngle);\n    const arcData = pieGen(arcValues);\n\n    return createDisplayPies(arcData, extend({}, this.rect, { x: 0, y: 0 }), slices, sum);\n  },\n};\n\nexport default pieComponent;\n","import pieComponent from './pie';\n\nexport default function pie(picasso) {\n  picasso.component('pie', pieComponent);\n}\n","/**\n * Create a crispifier\n * @ignore\n *\n * @param  {Object} [crispMap] Optional crispmap if you need custom crisping.\n * @return {Function}          crispItem function\n *\n * @example\n * import { crispifierFactory } from \"core/crispifier\";\n *\n * let crispify = crispifierFactory(customCrispMap);\n *\n * // For a single item\n * crispify(myItem);\n *\n * // For multiple items\n * crispify.multiple(myArrayOfItems);\n */\nexport function crispifierFactory(crispMap) {\n  // Define the crispMap\n  if (crispMap === undefined) {\n    crispMap = {};\n\n    crispMap.line = {\n      append: ['x1', 'x2', 'y1', 'y2'],\n      round: [],\n      condition: (item) => item.x1 === item.x2 || item.y1 === item.y2,\n      conditionAppend: (item) => item.strokeWidth % 2 !== 0,\n    };\n\n    crispMap.rect = {\n      append: ['x', 'y'],\n      round: ['width', 'height'],\n      condition: () => true,\n      conditionAppend: (item) => item.strokeWidth % 2 !== 0,\n    };\n  }\n\n  // Re-map the crispmap\n  Object.keys(crispMap).forEach((type) => {\n    const self = crispMap[type];\n\n    self.items = [];\n\n    self.append.forEach((toAppend) => {\n      self.items.push({\n        key: toAppend,\n        type: 'append',\n      });\n    });\n\n    self.round.forEach((toAppend) => {\n      self.items.push({\n        key: toAppend,\n        type: 'round',\n      });\n    });\n  });\n\n  /**\n   * Crispify a single item\n   * @ignore\n   * @param  {Object} item  Item with renderer variables such as X, Y, and type.\n   * @return {Undefined}    Returns nothing, modifies the original item instead\n   */\n  function crispItem(item) {\n    if (crispMap[item.type] && crispMap[item.type].condition(item)) {\n      const self = crispMap[item.type];\n      const doAppend = self.conditionAppend === undefined || self.conditionAppend(item);\n\n      self.items.forEach((i) => {\n        const rounded = Math.round(item[i.key]);\n        const diff = item[i.key] - rounded;\n        item[i.key] = rounded;\n\n        if (doAppend && i.type === 'append') {\n          if (diff > 0) {\n            item[i.key] += 0.5;\n          } else {\n            item[i.key] -= 0.5;\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Crispify multiple items\n   * @ignore\n   *\n   * @param  {Array} items  Array of objects to crispify\n   * @return {Undefined}    Returns nothing, modifies the original item instead\n   */\n  crispItem.multiple = (items) => items.forEach((item) => crispItem(item));\n\n  return crispItem;\n}\n\nconst crispifier = crispifierFactory();\n\nexport default crispifier;\n","import crispify from './crispifier';\n\nclass Transposer {\n  /**\n   * @private\n   */\n  constructor(...items) {\n    this.reset();\n\n    this.push(...items);\n  }\n\n  /**\n   * Evaluate a key for a transposed coordinate\n   *\n   * @param  {String} key   Key\n   * @return {String}         Actual key\n   */\n  static evaluateKey(key, flipXY) {\n    if (flipXY) {\n      const firstChar = key.substring(0, 1);\n      const rest = key.substring(1);\n\n      if (firstChar === 'x') {\n        return `y${rest}`;\n      }\n      if (firstChar === 'y') {\n        return `x${rest}`;\n      }\n      if (key === 'cx') {\n        return 'cy';\n      }\n      if (key === 'cy') {\n        return 'cx';\n      }\n      if (key === 'width') {\n        return 'height';\n      }\n      if (key === 'height') {\n        return 'width';\n      }\n    }\n\n    return key;\n  }\n\n  /**\n   * Transpose a coordinate according to this.flipXY and\n   * the available rendering area\n   *\n   * @param  {String} key        The key of the coordinate to transpose\n   * @param  {Number} coordinate The coordinate\n   * @return {Number}            The actual location of the coordinate\n   */\n  transposeCoordinate(key, coordinate, flipXY) {\n    if (typeof coordinate === 'number' && isFinite(coordinate)) {\n      const firstChar = key.substring(0, 1);\n\n      if (firstChar === 'x' || key === 'cx') {\n        return coordinate * this.width;\n      }\n      if (key === 'width') {\n        return coordinate * this.width;\n      }\n      if (key === 'r') {\n        return coordinate * (!flipXY ? this.width : this.height);\n      }\n      if (firstChar === 'y' || key === 'cy') {\n        return coordinate * this.height;\n      }\n      if (key === 'height') {\n        return coordinate * this.height;\n      }\n    }\n\n    return coordinate;\n  }\n\n  /**\n   * Push an item into the storage of the transposer\n   *\n   * @param  {Object} items An item to be drawed\n   * @return {Object}       Can be chained\n   */\n  push(...items) {\n    this.storage.push(...items);\n    return this;\n  }\n\n  processItem(item) {\n    let newItem = {};\n    const flipXY = typeof item.flipXY !== 'undefined' ? item.flipXY : this.flipXY;\n    const crisp = typeof item.crisp !== 'undefined' ? item.crisp : this.crisp;\n\n    if (item.fn && typeof item.fn === 'function') {\n      let width = flipXY ? this.height : this.width;\n      let height = flipXY ? this.width : this.height;\n\n      item = item.fn({ width, height, flipXY });\n\n      const objectKeys = Object.keys(item);\n\n      for (let ki = 0, kl = objectKeys.length; ki < kl; ki++) {\n        let key = objectKeys[ki];\n        const nkey = Transposer.evaluateKey(key, flipXY);\n        newItem[nkey] = item[key];\n      }\n    } else {\n      const objectKeys = Object.keys(item);\n\n      for (let ki = 0, kl = objectKeys.length; ki < kl; ki++) {\n        let key = objectKeys[ki];\n        const nkey = Transposer.evaluateKey(key, flipXY);\n        const nval = this.transposeCoordinate(nkey, item[key], flipXY);\n        newItem[nkey] = nval;\n      }\n    }\n\n    if (crisp) {\n      crispify(newItem);\n    }\n\n    return newItem;\n  }\n\n  /**\n   * Get the output of the transposer\n   *\n   * @return {Array}   Array of objects\n   */\n  output() {\n    let items = [];\n\n    for (let i = 0, l = this.storage.length; i < l; i++) {\n      let newItem = this.processItem(this.storage[i]);\n\n      items.push(newItem);\n    }\n\n    return items;\n  }\n\n  /**\n   * Reset the transposer\n   *\n   * @return {Undefined}  Does not return anything\n   */\n  reset() {\n    this.storage = [];\n    this.flipXY = false;\n    this.crisp = false;\n\n    this.width = 0;\n    this.height = 0;\n  }\n}\n\nexport function transposer(...items) {\n  return new Transposer(...items);\n}\n\nexport default Transposer;\n","import extend from 'extend';\nimport { transposer } from '../../transposer/transposer';\nimport { updateScaleSize } from '../../scales';\n\n/**\n * Generate array of lines (ticks) from scale\n *\n * @param {object} scale - A scale supplied by the chart\n * @param {object} settings - The settings object from the grid line component\n * @param {object} rect - The rect containing width and height to renderer in\n * @returns {array} - Returns an array of ticks\n * @ignore\n */\nfunction lineGen(scale, distance) {\n  if (!scale || !distance) {\n    return [];\n  }\n  return (scale.cachedTicks && scale.cachedTicks()) || scale.ticks({ distance });\n}\n\nconst gridLineComponent = {\n  created() {},\n\n  require: ['chart', 'renderer', 'resolver'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n    },\n    style: {\n      // Theming style\n      ticks: '$guide-line',\n      minorTicks: '$guide-line--minor',\n    },\n  },\n\n  beforeRender() {\n    this.blueprint = transposer();\n\n    this.blueprint.width = this.rect.width;\n    this.blueprint.height = this.rect.height;\n    this.blueprint.x = this.rect.x;\n    this.blueprint.y = this.rect.y;\n    this.blueprint.crisp = true;\n  },\n\n  render() {\n    // Setup scales\n    this.x = this.settings.x ? this.chart.scale(this.settings.x) : null;\n    this.y = this.settings.y ? this.chart.scale(this.settings.y) : null;\n    updateScaleSize(this, 'x', this.rect.width);\n    updateScaleSize(this, 'y', this.rect.height);\n\n    // Return an empty array to abort rendering when no scales are available to renderer\n    if (!this.x && !this.y) {\n      return [];\n    }\n\n    this.settings.ticks = extend({ show: true }, this.style.ticks, this.settings.ticks || {});\n    this.settings.minorTicks = extend({ show: false }, this.style.minorTicks, this.settings.minorTicks || {});\n\n    // Setup lines for X and Y\n    this.lines = {\n      x: [],\n      y: [],\n    };\n\n    // Use the lineGen function to generate appropriate ticks\n    this.lines.x = lineGen(this.x, this.rect.width);\n    this.lines.y = lineGen(this.y, this.rect.height);\n\n    // Set all Y lines to flipXY by default\n    // This makes the transposer flip them individually\n    this.lines.y = this.lines.y.map((i) => extend(i, { flipXY: true }));\n\n    let addTicks = ({ dir, isMinor }) => {\n      let items = this.lines[dir].filter((tick) => !!tick.isMinor === isMinor);\n      let settings = isMinor ? this.settings.minorTicks : this.settings.ticks;\n      let ticks = this.resolver.resolve({\n        settings,\n        data: {\n          items,\n          dir,\n        },\n      }).items;\n\n      ticks.forEach((style) => {\n        let p = style.data;\n\n        // If the style's show is falsy, don't renderer this item (to respect axis settings).\n        if (style.show) {\n          // Use the transposer to handle actual positioning\n          this.blueprint.push({\n            type: 'line',\n            x1: p.position,\n            y1: 0,\n            x2: p.position,\n            y2: 1,\n            stroke: style.stroke || 'black',\n            strokeWidth: typeof style.strokeWidth !== 'undefined' ? style.strokeWidth : 1,\n            strokeDasharray: typeof style.strokeDasharray !== 'undefined' ? style.strokeDasharray : undefined,\n            flipXY: p.flipXY || false, // This flips individual points (Y-lines)\n          });\n        }\n      });\n    };\n\n    addTicks({ dir: 'x', isMinor: false });\n    addTicks({ dir: 'x', isMinor: true });\n    addTicks({ dir: 'y', isMinor: false });\n    addTicks({ dir: 'y', isMinor: true });\n\n    return this.blueprint.output();\n  },\n};\n\nexport default gridLineComponent;\n","import gridLineComponent from './line';\n\n/**\n * @typedef {object} component--grid-line-settings\n * @property {object} x\n * @property {string} x.scale - The scale to use along x\n * @property {object} y\n * @property {string} y.scale - The scale to use along y\n * @property {object} [ticks]\n * @property {boolean} [ticks.show=true]\n * @property {string} [ticks.stroke='black']\n * @property {number} [ticks.strokeWidth='1']\n * @property {string} [ticks.strokeDasharray]\n * @property {object} [minorTicks]\n * @property {boolean} [minorTicks.show=true]\n * @property {string} [minorTicks.stroke='black']\n * @property {number} [minorTicks.strokeWidth='1']\n * @property {string} [minorTicks.strokeDasharray]\n */\n\nexport default function gridLine(picasso) {\n  picasso.component('grid-line', gridLineComponent);\n}\n","/**\n * Return a D property for a SVG path to get a direction marker\n *\n * @param {number} x - X coordinate\n * @param {number} y - Y coordinate\n * @param {number} r - Radius\n * @param {string} [d='bottom'] - Direction\n * @returns {string} - Finished D property\n * @ignore\n */\nexport function directionMarker(x, y, r, d = 'bottom') {\n  r *= 0.8;\n  if (d === 'left' || d === 'right') {\n    let right = d === 'right';\n    return `\n      M ${x} ${y - r}\n      A ${r * 1.25} ${r * 1.25}, 0, 1, ${right ? 0 : 1}, ${x} ${y + r}\n      L ${right ? x + r : x - r} ${y} Z\n    `;\n  }\n  let bottom = d === 'bottom';\n  return `\n    M ${x - r} ${y}\n    A ${r * 1.25} ${r * 1.25}, 0, 1, ${bottom ? 1 : 0}, ${x + r} ${y}\n    L ${x} ${bottom ? y + r : y - r} Z\n  `;\n}\n\nfunction directionTriangle(x, y, r, d = 'bottom') {\n  r *= 0.75;\n  if (d === 'left' || d === 'right') {\n    let right = d === 'right';\n    x += right ? r * 1.5 : -(r * 1.5);\n    return `\n      M ${x} ${y - r}\n      L ${x} ${y + r}\n      L ${right ? x + r : x - r} ${y} Z\n    `;\n  }\n  let bottom = d === 'bottom';\n  y += bottom ? r * 1.5 : -(r * 1.5);\n  return `\n    M ${x - r} ${y}\n    L ${x + r} ${y}\n    L ${x} ${bottom ? y + r : y - r} Z\n  `;\n}\n\n/**\n * Handle out of bound shapes\n * Does not return anything, modifies \"items\" property instead (should be re-considered)\n *\n * @param {object} oob - Out of bounds object from parent\n * @param {object} settings - Settings object from parent\n * @param {object[]} items - Array of all items (for collision detection)\n * @ignore\n */\nexport function oobManager({ blueprint, oob, settings, items }) {\n  const oobKeys = Object.keys(oob);\n  let style = settings.style.oob || {};\n\n  for (let i = 0, len = oobKeys.length; i < len; i++) {\n    const key = oobKeys[i];\n    const value = oob[key];\n\n    if (value.length > 0) {\n      let position = key.charAt(1);\n      let flipXY = key.charAt(0) === 'y';\n\n      let xPadding = style.padding.x + style.width;\n      let yPadding = style.padding.y + style.width;\n      let direction = 'bottom';\n\n      if (flipXY) {\n        direction = position === '1' ? 'bottom' : 'top';\n      } else {\n        direction = position === '1' ? 'right' : 'left';\n      }\n\n      let indicator = blueprint.processItem({\n        fn: ({ width, height }) => {\n          /* eslint no-loop-func: 0 */\n          let x = position * width + (position === '1' ? -xPadding : xPadding);\n          let y = flipXY ? yPadding : height - yPadding;\n\n          if (style.type === 'arc') {\n            return {\n              type: 'path',\n              d: directionMarker(flipXY ? y : x, flipXY ? x : y, style.width, direction),\n              x,\n              y,\n              stroke: style.stroke,\n              fill: style.fill,\n              strokeWidth: style.strokeWidth || 0,\n            };\n          }\n\n          return {\n            type: 'circle',\n            cx: x,\n            cy: y,\n            r: style.width,\n            stroke: style.stroke,\n            fill: style.fill,\n            strokeWidth: style.strokeWidth || 0,\n            opacity: style.opacity,\n            data: value,\n          };\n        },\n        flipXY,\n      });\n\n      let x = indicator.cx || indicator.x;\n      let y = indicator.cy || indicator.y;\n\n      let text = {\n        type: 'text',\n        text: value.length || '',\n        x: x - style.width * 0.4,\n        y: y + style.width * 0.4,\n        fontFamily: style.text.fontFamily,\n        fontSize: `${style.width * 1.3}px`,\n        stroke: style.text.stroke,\n        fill: style.text.fill,\n        strokeWidth: style.text.strokeWidth || 0,\n        opacity: style.text.opacity,\n      };\n\n      let triangle = {\n        type: 'path',\n        d: directionTriangle(x, y, style.width, direction),\n        x,\n        y,\n        stroke: style.triangle.stroke,\n        fill: style.triangle.fill,\n        strokeWidth: style.triangle.strokeWidth || 0,\n        opacity: style.triangle.opacity,\n      };\n\n      items.push(indicator, text, triangle);\n    }\n  }\n}\n","import extend from 'extend';\nimport { testRectRect, testRectLine } from '../../math/narrow-phase-collision';\n\nexport function refLabelDefaultSettings() {\n  return {\n    fill: '#000',\n    fontFamily: 'Arial',\n    fontSize: '12px',\n    opacity: 1,\n    maxWidth: 1,\n    maxWidthPx: 9999,\n    padding: 5,\n    background: {\n      fill: '#fff',\n      stroke: 'transparent',\n      strokeWidth: 0,\n      opacity: 0.5,\n    },\n  };\n}\n\n/**\n * Converts a numerical OR string value to a normalized value\n *\n * @param {string|number} align -Description how to align (Numerical from 0-1 or 'top', 'left', 'center', 'middle', 'bottom' or 'right')\n * @returns {number} - Normalized value 0...1\n * @ignore\n */\nexport function alignmentToNumber(align) {\n  if (typeof align === 'undefined') {\n    return 0;\n  }\n  if (typeof align === 'number' && isFinite(align)) {\n    return align;\n  }\n  if (typeof align === 'string') {\n    switch (align) {\n      case 'center':\n      case 'middle':\n        return 0.5;\n      case 'bottom':\n      case 'right':\n        return 1;\n      case 'top':\n      case 'left':\n      default:\n        return 0;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * Create line and label (if applicable)\n * Does not return anything, modifies \"items\" property instead (should be re-considered)\n *\n * @param {object} p - Current point\n * @param {object} style - Applicable line styling\n * @param {object} settings - Settings object derived from parent\n * @param {object[]} items - Array of all items (for collision detection)\n * @ignore\n */\nexport function createLineWithLabel({ chart, blueprint, renderer, p, settings, items }) {\n  let doesNotCollide = true;\n  let line = false;\n  let rect = false;\n  let label = false;\n  let value = false;\n  let style = extend(true, {}, settings.style.line, p.line || {});\n\n  // Use the transposer to handle actual positioning\n  line = blueprint.processItem({\n    type: 'line',\n    x1: p.position,\n    y1: 0,\n    x2: p.position,\n    y2: 1,\n    stroke: style.stroke || 'black',\n    strokeWidth: style.strokeWidth || 1,\n    strokeDasharray: style.strokeDasharray,\n    flipXY: p.flipXY || false, // This flips individual points (Y-lines)\n  });\n\n  if (p.label) {\n    const item = extend(true, refLabelDefaultSettings(), settings.style.label || {}, { fill: style.stroke }, p.label);\n    let formatter;\n    let measuredValue = {\n      width: 0,\n      height: 0,\n    };\n    let valueString = '';\n\n    if (typeof p.formatter === 'string') {\n      formatter = chart.formatter(p.formatter);\n    } else if (typeof p.formatter === 'object') {\n      formatter = chart.formatter(p.formatter);\n    } else if (typeof p.scale !== 'undefined' && p.scale.data) {\n      // TODO - Add support for array as source into formatter\n      const scaleData = p.scale.data() && p.scale.data().fields;\n      formatter = scaleData && scaleData[0] ? scaleData[0].formatter() : null;\n    }\n\n    if (p.label.showValue !== false) {\n      if (formatter) {\n        valueString = ` (${formatter(p.value)})`;\n      } else if (p.scale) {\n        valueString = ` (${p.value})`;\n      }\n    }\n\n    if (valueString) {\n      measuredValue = renderer.measureText({\n        text: valueString,\n        fontFamily: item.fontFamily,\n        fontSize: item.fontSize,\n      });\n    }\n\n    // Measure the label text\n    let measuredLabel = renderer.measureText({\n      text: item.text || '',\n      fontFamily: item.fontFamily,\n      fontSize: item.fontSize,\n    });\n\n    let measured = {\n      width: measuredLabel.width + measuredValue.width,\n      height: Math.max(measuredLabel.height, measuredValue.height),\n    };\n\n    let labelPadding = item.padding;\n\n    // let anchor = item.anchor === 'end' ? 'end' : 'start';\n\n    let align = alignmentToNumber(p.flipXY ? item.vAlign : item.align);\n    let vAlign = alignmentToNumber(p.flipXY ? item.align : item.vAlign);\n\n    let calcWidth = Math.min(1 + measured.width + labelPadding * 2, item.maxWidth * blueprint.width, item.maxWidthPx);\n    let calcHeight = measured.height + labelPadding * 2;\n\n    let rectWidth = p.flipXY ? calcHeight : calcWidth;\n    let rectHeight = p.flipXY ? calcWidth : calcHeight;\n\n    rect = blueprint.processItem({\n      fn: ({ width, height }) => {\n        let x = p.position * width - (p.flipXY ? calcHeight : calcWidth) * (1 - align);\n        x = p.flipXY ? x : Math.max(x, 0);\n        const y = Math.max(Math.abs(vAlign * height - rectHeight * vAlign), 0);\n        return {\n          type: 'rect',\n          x,\n          y,\n          width: p.flipXY ? rectWidth : Math.min(rectWidth, blueprint.width - x),\n          height: rectHeight,\n          stroke: item.background.stroke,\n          strokeWidth: item.background.strokeWidth,\n          fill: item.background.fill,\n          opacity: item.background.opacity,\n        };\n      },\n      flipXY: p.flipXY || false, // This flips individual points (Y-lines)\n    });\n\n    if (\n      rect.x < -1 ||\n      rect.x + rect.width > blueprint.width + 1 ||\n      rect.y < -1 ||\n      rect.y + rect.height > blueprint.height + 1\n    ) {\n      // do not create labels if out of bounds\n      rect = undefined;\n    } else {\n      // Labels are just basic objects attached to a corner of a rect,\n      // and this rect needs to already be processed\n      // so there is no blueprint.processItem required here\n      label = {\n        type: 'text',\n        text: item.text || '',\n        fill: item.fill,\n        opacity: item.opacity,\n        fontFamily: item.fontFamily,\n        fontSize: item.fontSize,\n        x: rect.x + labelPadding,\n        y: rect.y + rect.height / 2 + measured.height / 3,\n        maxWidth: rect.width - labelPadding * 2 - measuredValue.width,\n        anchor: 'start',\n      };\n\n      if (valueString) {\n        value = {\n          type: 'text',\n          text: valueString || '',\n          fill: item.fill,\n          opacity: item.opacity,\n          fontFamily: item.fontFamily,\n          fontSize: item.fontSize,\n          x: label.x + 3 + (rect.width - (measuredValue.width + labelPadding * 2)),\n          y: label.y,\n        };\n      }\n\n      // Detect collisions with other labels/rects or lines\n      for (let i = 0, len = items.length; i < len; i++) {\n        let curItem = items[i];\n\n        if (curItem.type === 'rect') {\n          // We only detect rects here, since rects are always behind labels,\n          // and we wouldn't want to measure text one more time\n          if (testRectRect(rect, curItem)) {\n            doesNotCollide = false;\n          }\n        } else if (curItem.type === 'line') {\n          // This will only collide when flipXY are the same for both objects,\n          // So it only collides on objects on the same \"axis\"\n          if (p.flipXY === curItem.flipXY && testRectLine(rect, curItem)) {\n            doesNotCollide = false;\n          }\n        }\n      }\n    }\n  }\n\n  // Always push the line,\n  // but this is done after collision detection,\n  // because otherwise it would collide with it's own line\n  items.push(line);\n\n  // Only push rect & label if we haven't collided and both are defined\n  if (doesNotCollide && rect && label) {\n    items.push(rect, label);\n    if (value) {\n      items.push(value);\n    }\n  }\n}\n","import extend from 'extend';\nimport { transposer } from '../../transposer/transposer';\nimport { oobManager } from './oob';\nimport { createLineWithLabel } from './lines-and-labels';\n\nfunction createOobData(line) {\n  const data = {\n    value: line.value,\n  };\n\n  if (line.label) {\n    data.label = line.label.text;\n  }\n\n  return data;\n}\n\nfunction filterUndefinedValue(line) {\n  return typeof line.value !== 'undefined';\n}\n\n/**\n * @typedef {object} component--ref-line\n * @experimental\n * @property {refline-generic-style} [style=refline-generic-style] - x coordinate\n * @property {object} lines - X & Y Lines\n * @property {reflines-x[]} [lines.x=refline-line[]] - lines along X\n * @property {reflines-y[]} [lines.y=refline-line[]] - lines along Y\n */\n\n/**\n * @typedef {object} component--ref-line.style\n * @property {refline-oob-style} [oob=component--ref-line.style.oob] - Style for out of bounds object (oob)\n * @property {refline-line} [line=refline-line] - Generic style for lines\n * @property {refline-line-label} [label=refline-line-label] - Generic style for labels\n */\n\n/**\n * @typedef {object} component--ref-line.style.oob\n * @property {boolean} [show=true] - Show out of bounds items\n * @property {string} [type=undefined] - EXPERIMENTAL:  Set this to 'arc' for an experimental out of bounds shape (only works with SVG)\n * @property {number} [width=10] - Width of the out of bounds object\n * @property {string} [fill='#1A1A1A'] - Fill color of the OOB object\n * @property {string} [stroke='transparent'] - Stroke of the OOB object\n * @property {number} [strokeWidth=0] - Stroke width of the OOB object\n * @property {number} [opacity=1] - Opacity of the OOB object\n * @property {refline-generic-text} [text=refline-generic-text] - Text configuration for out of bounds\n * @property {refline-generic-object} [triangle=refline-generic-object] - The triangle in OOB\n * @property {object} [padding] - Padding on X\n * @property {number} [padding.x=28] - Padding on X\n * @property {number} [padding.y=5] - Padding on X\n */\n\n/**\n * @typedef {object} component--ref-line.generic-text\n * @property {string} [text=''] - Text (if applicable)\n * @property {string} [fontSize='12px'] - Font size (if applicable)\n * @property {string} [fontFamily='Arial'] - Font family\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {string} [strokeDasharray] - Stroke dash array\n * @property {number} [opacity=1] - Opacity\n */\n\n/**\n * @typedef {object} component--ref-line.line\n * @property {number|function} value - The value of the reference line. If a scale is specified, it is applied.\n * @property {Scale} [scale=undefined] - Scale to use (if undefined will use normalized value 0-1)\n * @property {refline-generic-object} [line=refline-generic-object] - The style of the line\n * @property {refline-line-label} [label=refline-line-label] - The label style of the line\n */\n\n/**\n * @typedef {object} component--ref-line.line-label\n * @property {number} padding=5 - Padding inside the label\n * @property {string} [text=''] - Text\n * @property {string} [fontSize='12px'] - Font size\n * @property {string} [fontFamily='Arial'] - Font family\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=1] - Opacity\n * @property {number|string} [align=0] - Alignment property left to right (0 = left, 1 = right). Also supports string ('left', 'center', 'middle', 'right')\n * @property {number|string} [vAlign=0] - Alignment property top to bottom (0 = top, 1 = bottom). Also supports string ('top', 'center', 'middle', 'bottom')\n * @property {number} [maxWidth=1] - The maximum relative width to the width of the rendering area (see maxWidthPx below aswell)\n * @property {number} [maxWidthPx=9999] - The maximum width in pixels.\n * @property {refline-line-label-background} [background=refline-line-label-background] - The background style (rect behind text)\n * @property {boolean} [showValue=true] - Show value label\n */\n\n/**\n * @example\n * // Labels will be rendered with the maximum size of the smallest value of maxWidth and maxWidthPx size, so you may specify maxWidth 0.8 but maxWidthPx 100 and will never be over 100px and never over 80% of the renderable area.\n */\n\n/**\n * @typedef {object} component--ref-line.line-label-background\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=0.5] - Opacity\n */\n\n/**\n * @typedef {object} component--ref-line.generic-object\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=1] - Opacity\n */\n\nconst refLineComponent = {\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n    },\n    style: {\n      oob: {\n        show: true,\n        width: 10,\n        fill: '#1A1A1A',\n        stroke: 'transparent',\n        strokeWidth: 0,\n        opacity: 1,\n        text: {\n          fontFamily: 'Arial',\n          stroke: 'transparent',\n          fill: '#fff',\n          strokeWidth: 0,\n          opacity: 1,\n        },\n        triangle: {\n          fill: '#4D4D4D',\n          stroke: 'transparent',\n          strokeWidth: 0,\n          opacity: 1,\n        },\n        padding: {\n          x: 28,\n          y: 5,\n        },\n      },\n      line: {\n        stroke: '#000',\n      },\n      label: {\n        strokeWidth: 0,\n      },\n    },\n  },\n\n  preferredSize() {\n    return 30;\n  },\n\n  beforeRender() {\n    this.blueprint = transposer();\n\n    this.blueprint.width = this.rect.width;\n    this.blueprint.height = this.rect.height;\n    this.blueprint.x = this.rect.x;\n    this.blueprint.y = this.rect.y;\n    this.blueprint.crisp = true;\n  },\n\n  render() {\n    let settings = this.settings;\n\n    // Setup lines for X and Y\n    this.lines = {\n      x: [],\n      y: [],\n    };\n\n    this.lines.x = (settings.lines && settings.lines.x) || [];\n    this.lines.y = (settings.lines && settings.lines.y) || [];\n\n    if (this.lines.x.length === 0 && this.lines.y.length === 0) {\n      return [];\n    }\n\n    const oob = {\n      x0: [],\n      x1: [],\n      y0: [],\n      y1: [],\n    };\n\n    // Convert a value to an actual position using the scale\n    this.lines.x = this.lines.x.filter(filterUndefinedValue).map((line) => {\n      if (typeof line.value === 'function') {\n        line.value = line.value();\n      }\n\n      if (line.scale) {\n        let scale = this.chart.scale(line.scale);\n        return extend(line, { scale, position: scale(line.value) });\n      }\n\n      return extend(line, { position: line.value });\n    });\n    // Set all Y lines to flipXY by default\n    // This makes the transposer flip them individually\n    this.lines.y = this.lines.y.filter(filterUndefinedValue).map((line) => {\n      if (typeof line.value === 'function') {\n        line.value = line.value();\n      }\n\n      if (line.scale) {\n        let scale = this.chart.scale(line.scale);\n        return extend(line, { scale, position: scale(line.value), flipXY: true });\n      }\n\n      return extend(line, { position: line.value, flipXY: true });\n    });\n\n    // Move out of bounds lines (OOB) to separate rendering\n    this.lines.x = this.lines.x.filter((line) => {\n      if (line.position < 0 || line.position > 1) {\n        oob[`x${line.position > 1 ? 1 : 0}`].push(createOobData(line));\n        return false;\n      }\n      return true;\n    });\n\n    this.lines.y = this.lines.y.filter((line) => {\n      if (line.position < 0 || line.position > 1) {\n        oob[`y${line.position > 1 ? 1 : 0}`].push(createOobData(line));\n        return false;\n      }\n      return true;\n    });\n\n    let items = [];\n\n    // Loop through all X and Y lines\n    [...this.lines.x, ...this.lines.y].forEach((p) => {\n      let show = p.show === true || typeof p.show === 'undefined';\n\n      if (show) {\n        // Create line with labels\n        createLineWithLabel({\n          chart: this.chart,\n          blueprint: this.blueprint,\n          renderer: this.renderer,\n          p,\n          settings,\n          items,\n        });\n      }\n    });\n\n    // Handle out of bounds\n    if (settings.style.oob.show) {\n      oobManager({\n        blueprint: this.blueprint,\n        oob,\n        settings,\n        items,\n      });\n    }\n\n    return items;\n  },\n};\n\nexport default refLineComponent;\n","import refLineComponent from './refline';\n\nexport default function refLine(picasso) {\n  picasso.component('ref-line', refLineComponent);\n}\n","import extend from 'extend';\n\nfunction appendStyle(struct, buildOpts) {\n  extend(struct, buildOpts.style);\n  const halfWidth = struct.strokeWidth / 2;\n\n  if (buildOpts.align === 'top') {\n    struct.y1 -= halfWidth;\n    struct.y2 -= halfWidth;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y1 += halfWidth;\n    struct.y2 += halfWidth;\n  } else if (buildOpts.align === 'left') {\n    struct.x1 -= halfWidth;\n    struct.x2 -= halfWidth;\n  } else if (buildOpts.align === 'right') {\n    struct.x1 += halfWidth;\n    struct.x2 += halfWidth;\n  }\n}\n\nexport default function buildLine(buildOpts) {\n  const struct = {\n    type: 'line',\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    collider: {\n      type: null,\n    },\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x1 = buildOpts.innerRect.x - buildOpts.outerRect.x;\n    struct.x2 = buildOpts.innerRect.width + buildOpts.innerRect.x;\n    struct.y1 = struct.y2 =\n      buildOpts.align === 'top' ? buildOpts.innerRect.height - buildOpts.padding : buildOpts.padding;\n  } else {\n    struct.x1 = struct.x2 =\n      buildOpts.align === 'left' ? buildOpts.innerRect.width - buildOpts.padding : buildOpts.padding;\n    struct.y1 = buildOpts.innerRect.y - buildOpts.outerRect.y;\n    struct.y2 = buildOpts.innerRect.height + buildOpts.innerRect.y;\n  }\n\n  appendStyle(struct, buildOpts);\n\n  return struct;\n}\n","import { rotate as rotateVector } from '../../math/vector';\n\nfunction checkText(text) {\n  return typeof text === 'string' || typeof text === 'number' ? text : '-';\n}\n\nfunction appendStyle(struct, buildOpts) {\n  ['fill', 'fontSize', 'fontFamily'].forEach((style) => {\n    struct[style] = buildOpts.style[style];\n  });\n}\n\nfunction clampEnds(struct, buildOpts) {\n  if (buildOpts.tilted || buildOpts.stepSize) {\n    return;\n  }\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    const leftBoundary = 0;\n    const rightBoundary = buildOpts.outerRect.width;\n    const textWidth = Math.min(buildOpts.maxWidth / 2, buildOpts.textRect.width / 2);\n    const leftTextBoundary = struct.x - textWidth;\n    const rightTextBoundary = struct.x + textWidth;\n    if (leftTextBoundary < leftBoundary) {\n      struct.anchor = 'start';\n      struct.x = buildOpts.innerRect.x - buildOpts.outerRect.x;\n    } else if (rightTextBoundary > rightBoundary) {\n      struct.anchor = 'end';\n      struct.x = buildOpts.innerRect.width + buildOpts.innerRect.x;\n    }\n  } else {\n    const topBoundary = 0;\n    const bottomBoundary = buildOpts.outerRect.height;\n    const textHeight = buildOpts.maxHeight / 2;\n    const topTextBoundary = struct.y - textHeight;\n    const bottomTextBoundary = struct.y + textHeight;\n    if (topTextBoundary < topBoundary) {\n      struct.y = buildOpts.innerRect.y - buildOpts.outerRect.y;\n      struct.baseline = 'text-before-edge';\n    } else if (bottomTextBoundary > bottomBoundary) {\n      struct.y = buildOpts.innerRect.height + (buildOpts.innerRect.y - buildOpts.outerRect.y);\n      struct.baseline = 'text-after-edge';\n    }\n  }\n}\n\nfunction appendPadding(struct, buildOpts) {\n  if (buildOpts.align === 'top') {\n    struct.y -= buildOpts.padding;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y += buildOpts.padding + buildOpts.maxHeight;\n  } else if (buildOpts.align === 'left') {\n    struct.x -= buildOpts.padding;\n  } else if (buildOpts.align === 'right') {\n    struct.x += buildOpts.padding;\n  }\n}\n\nfunction appendTilting(struct, buildOpts) {\n  if (buildOpts.tilted) {\n    const r = -buildOpts.angle;\n    const radians = r * (Math.PI / 180);\n\n    if (buildOpts.align === 'bottom') {\n      struct.x -= (buildOpts.maxHeight * Math.sin(radians)) / 2;\n      struct.y -= buildOpts.maxHeight;\n      struct.y += (buildOpts.maxHeight * Math.cos(radians)) / 2;\n    } else {\n      struct.x -= (buildOpts.maxHeight * Math.sin(radians)) / 3;\n    }\n\n    struct.transform = `rotate(${r}, ${struct.x}, ${struct.y})`;\n    struct.anchor = (buildOpts.align === 'bottom') === buildOpts.angle < 0 ? 'start' : 'end';\n\n    // adjustForEnds\n    const textWidth = Math.cos(radians) * buildOpts.maxWidth;\n    if ((buildOpts.align === 'bottom') === buildOpts.angle < 0) {\n      // right\n      const rightBoundary = buildOpts.outerRect.width - buildOpts.paddingEnd;\n      const rightTextBoundary = struct.x + textWidth;\n      if (rightTextBoundary > rightBoundary) {\n        struct.maxWidth = (rightBoundary - struct.x - 10) / Math.cos(radians);\n      }\n    } else {\n      // left\n      const leftBoundary = buildOpts.paddingEnd;\n      const leftTextBoundary = struct.x - textWidth;\n      if (leftTextBoundary < leftBoundary) {\n        struct.maxWidth = (struct.x - leftBoundary - 10) / Math.cos(radians);\n      }\n    }\n  }\n}\n\nfunction bandwidthCollider(tick, struct, buildOpts) {\n  if (buildOpts.align === 'bottom' || buildOpts.align === 'top') {\n    const tickCenter = tick.position * buildOpts.innerRect.width;\n    const leftBoundary = tickCenter + (buildOpts.innerRect.x - buildOpts.outerRect.x - buildOpts.stepSize / 2);\n    struct.collider = {\n      type: 'rect',\n      x: leftBoundary,\n      y: 0,\n      width: leftBoundary < 0 ? buildOpts.stepSize + leftBoundary : buildOpts.stepSize, // Adjust collider so that it doesnt extend onto neighbor collider\n      height: buildOpts.innerRect.height,\n    };\n  } else {\n    const tickCenter = tick.position * buildOpts.innerRect.height;\n    const topBoundary = tickCenter + (buildOpts.innerRect.y - buildOpts.outerRect.y - buildOpts.stepSize / 2);\n    struct.collider = {\n      type: 'rect',\n      x: 0,\n      y: topBoundary,\n      width: buildOpts.innerRect.width,\n      height: topBoundary < 0 ? buildOpts.stepSize + topBoundary : buildOpts.stepSize, // Adjust collider so that it doesnt extend onto neighbor collider\n    };\n  }\n\n  // Clip edges of the collider, should not extend beyoned the outerRect\n  const collider = struct.collider;\n  collider.x = Math.max(collider.x, 0);\n  collider.y = Math.max(collider.y, 0);\n  const widthClip = collider.x + collider.width - (buildOpts.outerRect.x + buildOpts.outerRect.width);\n  collider.width = widthClip > 0 ? collider.width - widthClip : collider.width;\n  const heightClip = collider.y + collider.height - (buildOpts.outerRect.y + buildOpts.outerRect.height);\n  collider.height = heightClip > 0 ? collider.height - heightClip : collider.height;\n}\n\nfunction boundsCollider(tick, struct) {\n  struct.collider = {\n    type: 'polygon',\n    vertices: [\n      { x: struct.boundingRect.x, y: struct.boundingRect.y },\n      { x: struct.boundingRect.x + struct.boundingRect.width, y: struct.boundingRect.y },\n      { x: struct.boundingRect.x + struct.boundingRect.width, y: struct.boundingRect.y + struct.boundingRect.height },\n      { x: struct.boundingRect.x, y: struct.boundingRect.y + struct.boundingRect.height },\n    ],\n  };\n}\n\nfunction tiltedCollider(tick, struct, buildOpts) {\n  const radians = buildOpts.angle * (Math.PI / 180);\n  const halfWidth = Math.max(buildOpts.stepSize / 2, struct.boundingRect.height / 2); // Handle if bandwidth is zero\n  const startAnchor = struct.anchor === 'start';\n  const em = struct.anchor === 'end' && radians < 0;\n  const sp = struct.anchor === 'start' && radians >= 0;\n  const y = struct.boundingRect.y + (sp || em ? struct.boundingRect.height : 0);\n  // Generate starting points at bandwidth boundaries\n  const points = [\n    { x: struct.x - halfWidth, y },\n    { x: struct.x + halfWidth, y },\n  ].map((p) => rotateVector(p, radians, { x: struct.x, y: struct.y })); // Rotate around center point to counteract labels rotation\n\n  // Append points to wrap polygon around label\n  const margin = 10; // extend slightly to handle single char labels better\n  const leftPoint = {\n    x: startAnchor ? struct.boundingRect.x + struct.boundingRect.width + margin : struct.boundingRect.x - margin,\n    y: struct.boundingRect.y + struct.boundingRect.height,\n  };\n\n  const rightPoint = {\n    x: startAnchor ? struct.boundingRect.x + struct.boundingRect.width + margin : struct.boundingRect.x - margin,\n    y: struct.boundingRect.y,\n  };\n\n  const orderedPoints = radians >= 0 ? [leftPoint, rightPoint] : [rightPoint, leftPoint];\n  points.push(...orderedPoints);\n\n  struct.collider = {\n    type: 'polygon',\n    vertices: points,\n  };\n}\n\nfunction appendCollider(tick, struct, buildOpts) {\n  if (buildOpts.layered || !buildOpts.stepSize) {\n    boundsCollider(tick, struct);\n  } else if (buildOpts.tilted) {\n    tiltedCollider(tick, struct, buildOpts);\n  } else {\n    bandwidthCollider(tick, struct, buildOpts);\n  }\n}\n\nfunction appendBounds(struct, buildOpts) {\n  struct.boundingRect = buildOpts.textBounds(struct);\n}\n\nfunction wiggle(buildOpts, isVertical) {\n  const a = isNaN(buildOpts.style.align) ? 0.5 : Math.min(Math.max(buildOpts.style.align, 0), 1);\n  let w = 0;\n  if (buildOpts.tilted) {\n    w = buildOpts.stepSize * a;\n  } else {\n    const size = isVertical ? buildOpts.textRect.height : buildOpts.textRect.width;\n    w = Math.max(0, buildOpts.stepSize - size) * a;\n  }\n\n  return w;\n}\n\nexport default function buildNode(tick, buildOpts) {\n  const struct = {\n    type: 'text',\n    text: checkText(tick.label),\n    x: 0,\n    y: 0,\n    maxWidth: buildOpts.maxWidth,\n    maxHeight: buildOpts.maxHeight,\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x =\n      tick.start * buildOpts.innerRect.width +\n      (buildOpts.innerRect.x - buildOpts.outerRect.x) +\n      wiggle(buildOpts, false);\n    struct.y = buildOpts.align === 'top' ? buildOpts.innerRect.height : 0;\n    struct.anchor = buildOpts.stepSize ? 'start' : 'middle';\n\n    struct.x += isNaN(buildOpts.style.offset) ? 0 : +buildOpts.style.offset;\n  } else {\n    struct.y =\n      tick.start * buildOpts.innerRect.height +\n      (buildOpts.innerRect.y - buildOpts.outerRect.y) +\n      wiggle(buildOpts, true);\n    struct.x = buildOpts.align === 'left' ? buildOpts.innerRect.width : 0;\n    struct.anchor = buildOpts.align === 'left' ? 'end' : 'start';\n    struct.baseline = buildOpts.stepSize ? 'text-before-edge' : 'central';\n\n    struct.y += isNaN(buildOpts.style.offset) ? 0 : +buildOpts.style.offset;\n  }\n\n  appendStyle(struct, buildOpts);\n  clampEnds(struct, buildOpts);\n  appendPadding(struct, buildOpts);\n  appendTilting(struct, buildOpts);\n  appendBounds(struct, buildOpts);\n  appendCollider(tick, struct, buildOpts);\n\n  return struct;\n}\n","import extend from 'extend';\n\nfunction appendStyle(struct, buildOpts) {\n  extend(struct, buildOpts.style);\n}\n\nfunction appendPadding(struct, buildOpts) {\n  if (buildOpts.align === 'top') {\n    struct.y1 -= buildOpts.padding;\n    struct.y2 -= buildOpts.padding;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y1 += buildOpts.padding;\n    struct.y2 += buildOpts.padding;\n  } else if (buildOpts.align === 'left') {\n    struct.x1 -= buildOpts.padding;\n    struct.x2 -= buildOpts.padding;\n  } else if (buildOpts.align === 'right') {\n    struct.x1 += buildOpts.padding;\n    struct.x2 += buildOpts.padding;\n  }\n}\n\nfunction adjustForEnds(struct, buildOpts) {\n  const halfWidth = struct.strokeWidth / 2;\n\n  if (struct.x1 === buildOpts.innerRect.width) {\n    // outer end tick\n    struct.x1 -= halfWidth;\n    struct.x2 -= halfWidth;\n  } else if (struct.x1 === 0) {\n    // outer start tick\n    struct.x1 += halfWidth;\n    struct.x2 += halfWidth;\n  } else if (struct.y1 === buildOpts.innerRect.height) {\n    struct.y1 -= halfWidth;\n    struct.y2 -= halfWidth;\n  } else if (struct.y1 === 0) {\n    struct.y1 += halfWidth;\n    struct.y2 += halfWidth;\n  }\n}\n\nexport default function buildNode(tick, buildOpts) {\n  const struct = {\n    type: 'line',\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    collider: {\n      type: null,\n    },\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x1 = struct.x2 = tick.position * buildOpts.innerRect.width + (buildOpts.innerRect.x - buildOpts.outerRect.x);\n    struct.y1 = buildOpts.align === 'top' ? buildOpts.innerRect.height : 0;\n    struct.y2 = buildOpts.align === 'top' ? struct.y1 - buildOpts.tickSize : struct.y1 + buildOpts.tickSize;\n  } else {\n    struct.y1 = struct.y2 =\n      tick.position * buildOpts.innerRect.height + (buildOpts.innerRect.y - buildOpts.outerRect.y);\n    struct.x1 = buildOpts.align === 'left' ? buildOpts.innerRect.width : 0;\n    struct.x2 = buildOpts.align === 'left' ? struct.x1 - buildOpts.tickSize : struct.x1 + buildOpts.tickSize;\n  }\n\n  appendStyle(struct, buildOpts);\n  appendPadding(struct, buildOpts);\n  adjustForEnds(struct, buildOpts);\n  return struct;\n}\n","function isMajorTick(tick) {\n  return !tick.isMinor && tick.position >= 0 && tick.position <= 1;\n}\n\nfunction isVerticalLabelOverlapping({ majorTicks, measureText, rect }) {\n  const size = rect.height;\n  const textHeight = measureText('M').height;\n  if (majorTicks.length < 2) {\n    return false;\n  }\n\n  const d = size * Math.abs(majorTicks[0].position - majorTicks[1].position);\n  if (d < textHeight) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isHorizontalLabelOverlapping({ majorTicks, measureText, rect, state }) {\n  /*\n   * Currently isn't any good way of doing a accurate measurement on size available (bandWidth * width) for labels.\n   * It's a lifecycle limitation as components docked either left or right can affect the width available after the calculation is done.\n   * <number of components docked left/right> * <width of components> => Less accurate ===> Can result in only ellips char rendered as labels.\n   */\n  const m = state.labels.activeMode === 'layered' ? 2 : 1;\n  const size = rect.width;\n  const tickSize = majorTicks\n    .map((tick) => tick.label)\n    .map((l) => `${l.slice(0, 1)}${l.length > 1 ? '…' : ''}`) // Measure the size of 1 chars + the ellips char.\n    .map(measureText)\n    .map((r) => r.width);\n  for (let i = 0; i < majorTicks.length; ++i) {\n    const tick = majorTicks[i];\n    const d1 = m * size * Math.abs(tick.start - tick.end);\n    const d2 = tickSize[i];\n    if (d1 < d2) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction shouldAutoTilt({ majorTicks, measure, rect, state, settings }) {\n  const glyphCount = settings.labels.maxGlyphCount;\n  const m = state.labels.activeMode === 'layered' ? 2 : 1;\n  const magicSizeRatioMultipler = settings.labels.tiltThreshold ? settings.labels.tiltThreshold : 0.7; // So that if less the 70% of labels are visible, toggle on tilt or use variable tiltThreshold\n  const ellipsCharSize = measure('…').width; // include ellipsed char in calc as it's generally large then the char it replaces\n  const size = rect.width;\n  let maxLabelWidth = 0;\n  let d1 = 0;\n\n  if (!isNaN(glyphCount)) {\n    const minBandwidth = majorTicks.reduce((prev, curr) => Math.min(Math.abs(curr.start - curr.end), prev), Infinity);\n    d1 = m * size * minBandwidth;\n    maxLabelWidth = measure('M').width * magicSizeRatioMultipler * glyphCount;\n    if (maxLabelWidth + ellipsCharSize > d1) {\n      return true;\n    }\n  } else {\n    for (let i = 0; i < majorTicks.length; i++) {\n      const tick = majorTicks[i];\n      const label = tick.label;\n      const width = measure(label).width * (label.length > 1 ? magicSizeRatioMultipler : 1);\n      d1 = m * size * Math.abs(tick.start - tick.end);\n      if (width + ellipsCharSize > d1) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction isTiltedLabelOverlapping({ majorTicks, measureText, rect, bleedSize, angle }) {\n  if (majorTicks.length < 2) {\n    return false;\n  }\n  if (angle === 0) {\n    return true; // TODO 0 angle should be considered non-tilted\n  }\n  const absAngle = Math.abs(angle);\n  const size = rect.width - bleedSize;\n  const stepSize = size * Math.abs(majorTicks[0].position - majorTicks[1].position);\n  const textHeight = measureText('M').height;\n  const reciprocal = 1 / stepSize; // 1 === Math.sin(90 * (Math.PI / 180))\n  const distanceBetweenLabels = Math.sin(absAngle * (Math.PI / 180)) / reciprocal;\n\n  return textHeight > distanceBetweenLabels;\n}\n\nfunction isToLarge({ rect, state, majorTicks, measure, horizontal }) {\n  if (horizontal) {\n    return isHorizontalLabelOverlapping({\n      majorTicks,\n      measureText: measure,\n      rect,\n      state,\n    });\n  }\n\n  return isVerticalLabelOverlapping({\n    majorTicks,\n    measureText: measure,\n    rect,\n    state,\n  });\n}\n\nexport function getClampedValue({ value, maxValue, minValue, range, modifier }) {\n  if (!isNaN(range) && !isNaN(modifier)) {\n    value = range * modifier;\n  }\n\n  if (value > maxValue) {\n    value = maxValue;\n  }\n\n  if (value < minValue) {\n    value = minValue;\n  }\n\n  return value;\n}\n\nexport default function getSize({ isDiscrete, rect, formatter, measureText, scale, settings, state }) {\n  let size = 0;\n  const edgeBleed = {\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  };\n  const { maxLengthPx: maxValue, minLengthPx: minValue } = settings.labels;\n\n  if (settings.labels.show) {\n    const align = settings.align;\n    const horizontal = align === 'top' || align === 'bottom';\n    const distance = horizontal ? rect.width : rect.height;\n    const majorTicks = scale\n      .ticks({\n        settings,\n        distance,\n        formatter,\n      })\n      .filter(isMajorTick);\n\n    const measure = (text) => {\n      const m = measureText({\n        text,\n        fontSize: settings.labels.fontSize,\n        fontFamily: settings.labels.fontFamily,\n      });\n      m.width = getClampedValue({ value: m.width, maxValue, minValue });\n      return m;\n    };\n\n    if (isDiscrete && horizontal && settings.labels.mode === 'auto') {\n      if (\n        shouldAutoTilt({\n          majorTicks,\n          measure,\n          rect,\n          state,\n          settings,\n        })\n      ) {\n        state.labels.activeMode = 'tilted';\n      } else {\n        state.labels.activeMode = 'horizontal';\n      }\n    }\n\n    if (\n      !settings.labels.filterOverlapping &&\n      state.labels.activeMode !== 'tilted' &&\n      isToLarge({\n        rect,\n        state,\n        majorTicks,\n        measure,\n        horizontal,\n      })\n    ) {\n      const toLargeSize = Math.max(rect.width, rect.height); // used to hide the axis\n      return { size: toLargeSize, isToLarge: true };\n    }\n\n    let sizeFromTextRect;\n    if (state.labels.activeMode === 'tilted') {\n      const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180); // angle in radians\n      sizeFromTextRect = (r) =>\n        getClampedValue({ value: r.width, maxValue, minValue }) * Math.sin(radians) + r.height * Math.cos(radians);\n    } else if (horizontal) {\n      sizeFromTextRect = (r) => r.height;\n    } else {\n      sizeFromTextRect = (r) => getClampedValue({ value: r.width, maxValue, minValue });\n    }\n\n    let labels;\n    if (horizontal && state.labels.activeMode !== 'tilted') {\n      labels = ['M'];\n    } else if (!isNaN(settings.labels.maxGlyphCount)) {\n      let label = '';\n      for (let i = 0; i < settings.labels.maxGlyphCount; i++) {\n        label += 'M';\n      }\n      labels = [label];\n    } else {\n      labels = majorTicks.map((tick) => tick.label);\n    }\n    const tickMeasures = labels.map(measure);\n    const labelSizes = tickMeasures.map(sizeFromTextRect);\n    const textSize = Math.max(...labelSizes, 0);\n    size += textSize;\n    size += settings.labels.margin;\n\n    if (state.labels.activeMode === 'layered') {\n      size *= 2;\n    }\n\n    if (state.labels.activeMode === 'tilted') {\n      const extendLeft = (settings.align === 'bottom') === settings.labels.tiltAngle >= 0;\n      const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180); // angle in radians\n      const h = measureText('M').height;\n      const maxWidth = (textSize - h * Math.cos(radians)) / Math.sin(radians);\n      const labelWidth = (r) => Math.min(maxWidth, r.width) * Math.cos(radians) + r.height;\n      const adjustByPosition = (s, i) => {\n        const pos = majorTicks[i] ? majorTicks[i].position : 0;\n        if (extendLeft) {\n          return s - pos * rect.width;\n        }\n        return s - (1 - pos) * rect.width;\n      };\n      const bleedSize =\n        Math.min(settings.labels.maxEdgeBleed, Math.max(...tickMeasures.map(labelWidth).map(adjustByPosition), 0)) +\n        settings.paddingEnd;\n      const bleedDir = extendLeft ? 'left' : 'right';\n      edgeBleed[bleedDir] = bleedSize;\n\n      if (\n        !settings.labels.filterOverlapping &&\n        isTiltedLabelOverlapping({\n          majorTicks,\n          measureText,\n          rect,\n          bleedSize,\n          angle: settings.labels.tiltAngle,\n        })\n      ) {\n        return { size: Math.max(rect.width, rect.height), isToLarge: true };\n      }\n    }\n  }\n\n  return { size, edgeBleed };\n}\n","const PADDING = 2;\n\nconst tickDistance = (rect, start, end) => rect.width * Math.abs(start.position - end.position);\n\nconst getLeftEdgeWidth = ({ innerRect, outerRect, tick, nextWidth }) => {\n  const leftEdgeBleed = innerRect.x - outerRect.x;\n  const left = innerRect.width * tick.position + leftEdgeBleed;\n  const minDubble = Math.min(nextWidth, left) * 2;\n  const minWidth = tick.position === 0 ? innerRect.width / 2 - PADDING : 0;\n\n  return Math.max(nextWidth, minDubble, minWidth);\n};\n\nconst getRightEdgeWidth = ({ innerRect, outerRect, tick, prevWidth }) => {\n  const leftEdgeBleed = innerRect.x - outerRect.x;\n  const rightEdgeBleed = outerRect.width - innerRect.width - leftEdgeBleed;\n  const right = innerRect.width - innerRect.width * tick.position + rightEdgeBleed;\n  const minDubble = Math.min(prevWidth, right) * 2;\n  const minWidth = tick.position === 1 ? innerRect.width / 2 - PADDING : 0;\n\n  return Math.max(prevWidth, minDubble, minWidth);\n};\n\nexport default function getHorizontalWidth({ layered, major, innerRect, outerRect, tick, index }) {\n  const step = layered ? 2 : 1;\n  const prev = major[index - step];\n  const next = major[index + step];\n  const prevWidth = prev ? tickDistance(innerRect, tick, prev) / 2 - PADDING : Infinity;\n  const nextWidth = next ? tickDistance(innerRect, tick, next) / 2 - PADDING : Infinity;\n\n  if (major.length < 2) {\n    return innerRect.width;\n  }\n\n  if (!prev) {\n    return getLeftEdgeWidth({\n      innerRect,\n      outerRect,\n      tick,\n      nextWidth,\n    });\n  }\n\n  if (!next) {\n    return getRightEdgeWidth({\n      innerRect,\n      outerRect,\n      tick,\n      prevWidth,\n    });\n  }\n\n  return Math.min(prevWidth, nextWidth) * 2;\n}\n","import buildLine from './axis-line-node';\nimport buildLabel from './axis-label-node';\nimport buildTick from './axis-tick-node';\nimport { testRectRect } from '../../math/narrow-phase-collision';\nimport { getClampedValue } from './axis-label-size';\nimport getHorizontalContinuousWidth from './get-continuous-label-rect';\nimport { expandRect } from '../../geometry/util';\n\nfunction tickSpacing(settings) {\n  let spacing = 0;\n  spacing += settings.paddingStart;\n  spacing += settings.line.show ? settings.line.strokeWidth : 0;\n  spacing += settings.ticks.show ? settings.ticks.margin : 0;\n  return spacing;\n}\n\nfunction tickMinorSpacing(settings) {\n  return settings.line.strokeWidth + settings.minorTicks.margin;\n}\n\nfunction labelsSpacing(settings) {\n  let spacing = 0;\n  spacing += settings.ticks.show ? settings.ticks.tickSize : 0;\n  spacing += tickSpacing(settings) + settings.labels.margin;\n  return spacing;\n}\n\nfunction calcActualTextRect({ style, measureText, tick }) {\n  return measureText({\n    text: tick.label,\n    fontSize: style.fontSize,\n    fontFamily: style.fontFamily,\n  });\n}\n\nfunction majorTicks(ticks) {\n  return ticks.filter((t) => !t.isMinor);\n}\n\nfunction minorTicks(ticks) {\n  return ticks.filter((t) => t.isMinor);\n}\n\nfunction tickBuilder(ticks, buildOpts) {\n  return ticks.map((tick) => buildTick(tick, buildOpts));\n}\n\nfunction tickBandwidth(scale, tick) {\n  return tick ? Math.abs(tick.end - tick.start) : scale.bandwidth();\n}\n\nfunction labelBuilder(ticks, buildOpts, resolveTickOpts) {\n  return ticks.map((tick, idx) => {\n    resolveTickOpts(tick, idx);\n    const label = buildLabel(tick, buildOpts);\n    label.data = tick.data;\n    return label;\n  });\n}\n\nfunction layeredLabelBuilder(ticks, buildOpts, settings, resolveTickOpts) {\n  const padding = buildOpts.padding;\n  const spacing = labelsSpacing(settings);\n  return ticks.map((tick, idx) => {\n    resolveTickOpts(tick, idx);\n    const padding2 = spacing + buildOpts.maxHeight + settings.labels.margin;\n    buildOpts.layer = idx % 2;\n    buildOpts.padding = idx % 2 === 0 ? padding : padding2;\n    const label = buildLabel(tick, buildOpts);\n    label.data = tick.data;\n    return label;\n  });\n}\n\nexport function filterOverlappingLabels(labels, ticks, buildOpts) {\n  let isOverlapping = (i, k) => {\n    const rect1 = expandRect(1, labels[i].boundingRect);\n    const rect2 = expandRect(1, labels[k].boundingRect);\n\n    return testRectRect(rect1, rect2);\n  };\n\n  if (buildOpts && buildOpts.tilted) {\n    const absAngle = Math.abs(buildOpts.angle);\n\n    isOverlapping = (i, k) => {\n      const stepSize = Math.abs(labels[i].x - labels[k].x);\n      const reciprocal = 1 / stepSize;\n      const distanceBetweenLabels = Math.sin(absAngle * (Math.PI / 180)) / reciprocal;\n\n      return labels[i].boundingRect.height > distanceBetweenLabels;\n    };\n  }\n\n  for (let i = 0; i <= labels.length - 1; i++) {\n    for (let k = i + 1; k <= Math.min(i + 5, i + (labels.length - 1)); k++) {\n      // TODO Find a better way to handle exteme/layered labels then to iterare over ~5 next labels\n      if (labels[i] && labels[k] && isOverlapping(i, k)) {\n        if (k === labels.length - 1) {\n          // On collition with last label, remove current label instead\n          labels.splice(i, 1);\n          if (ticks) {\n            ticks.splice(i, 1);\n          }\n        } else {\n          labels.splice(k, 1);\n          if (ticks) {\n            ticks.splice(k, 1);\n          }\n        }\n        k--;\n        i--;\n      }\n    }\n  }\n}\n\nfunction discreteCalcMaxTextRect({ textMetrics, settings, innerRect, scale, tilted, layered, tick }) {\n  const h = textMetrics.height;\n\n  const bandwidth = tickBandwidth(scale, tick);\n\n  const textRect = { width: 0, height: h };\n  if (settings.align === 'left' || settings.align === 'right') {\n    textRect.width = innerRect.width - labelsSpacing(settings) - settings.paddingEnd;\n  } else if (layered) {\n    textRect.width = bandwidth * innerRect.width * 2;\n  } else if (tilted) {\n    const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180);\n    textRect.width =\n      (innerRect.height - labelsSpacing(settings) - settings.paddingEnd - h * Math.cos(radians)) / Math.sin(radians);\n  } else {\n    textRect.width = bandwidth * innerRect.width;\n  }\n\n  textRect.width = getClampedValue({\n    value: textRect.width,\n    maxValue: settings.labels.maxLengthPx,\n    minValue: settings.labels.minLengthPx,\n  });\n\n  return textRect;\n}\n\nfunction continuousCalcMaxTextRect({\n  textMetrics,\n  settings,\n  innerRect,\n  outerRect,\n  tilted,\n  layered,\n  tick,\n  index,\n  major,\n}) {\n  const h = textMetrics.height;\n\n  const textRect = { width: 0, height: h };\n  if (settings.align === 'left' || settings.align === 'right') {\n    textRect.width = innerRect.width - labelsSpacing(settings) - settings.paddingEnd;\n  } else if (tilted) {\n    const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180);\n    textRect.width =\n      (innerRect.height - labelsSpacing(settings) - settings.paddingEnd - h * Math.cos(radians)) / Math.sin(radians);\n  } else {\n    textRect.width = getHorizontalContinuousWidth({\n      layered,\n      major,\n      innerRect,\n      outerRect,\n      tick,\n      index,\n    });\n  }\n\n  textRect.width = getClampedValue({\n    value: textRect.width,\n    maxValue: settings.labels.maxLengthPx,\n    minValue: settings.labels.minLengthPx,\n  });\n\n  return textRect;\n}\n\nfunction getStepSizeFn({ innerRect, scale, settings, tick }) {\n  const size = settings.align === 'top' || settings.align === 'bottom' ? innerRect.width : innerRect.height;\n  const bandwidth = tickBandwidth(scale, tick);\n  return size * bandwidth;\n}\n\nexport default function nodeBuilder(isDiscrete) {\n  let resolveLabelRect;\n\n  function continuous() {\n    resolveLabelRect = continuousCalcMaxTextRect;\n    return continuous;\n  }\n\n  function discrete() {\n    resolveLabelRect = discreteCalcMaxTextRect;\n    return discrete;\n  }\n\n  function build({ settings, scale, innerRect, outerRect, measureText, ticks, state, textBounds }) {\n    const nodes = [];\n    const major = majorTicks(ticks);\n    const minor = minorTicks(ticks);\n    const buildOpts = {\n      innerRect,\n      align: settings.align,\n      outerRect,\n    };\n    const tilted = state.labels.activeMode === 'tilted';\n    const layered = state.labels.activeMode === 'layered';\n    let majorTickNodes;\n\n    if (settings.line.show) {\n      buildOpts.style = settings.line;\n      buildOpts.padding = settings.paddingStart;\n\n      nodes.push(buildLine(buildOpts));\n    }\n    if (settings.ticks.show) {\n      buildOpts.style = settings.ticks;\n      buildOpts.tickSize = settings.ticks.tickSize;\n      buildOpts.padding = tickSpacing(settings);\n\n      majorTickNodes = tickBuilder(major, buildOpts);\n    }\n    if (settings.labels.show) {\n      const padding = labelsSpacing(settings);\n      buildOpts.style = settings.labels;\n      buildOpts.padding = padding;\n      buildOpts.tilted = tilted;\n      buildOpts.layered = layered;\n      buildOpts.angle = settings.labels.tiltAngle;\n      buildOpts.paddingEnd = settings.paddingEnd;\n      buildOpts.textBounds = textBounds;\n      const resolveTickOpts = (tick, index) => {\n        buildOpts.textRect = calcActualTextRect({ tick, measureText, style: buildOpts.style });\n        const maxSize = resolveLabelRect({\n          textMetrics: buildOpts.textRect,\n          settings,\n          innerRect,\n          outerRect,\n          scale,\n          tilted,\n          layered,\n          tick,\n          major,\n          index,\n        });\n        buildOpts.maxWidth = maxSize.width;\n        buildOpts.maxHeight = maxSize.height;\n        buildOpts.stepSize = getStepSizeFn({\n          innerRect,\n          scale,\n          ticks,\n          settings,\n          tick,\n        });\n      };\n\n      let labelNodes = [];\n      if (layered && (settings.align === 'top' || settings.align === 'bottom')) {\n        labelNodes = layeredLabelBuilder(major, buildOpts, settings, resolveTickOpts);\n      } else {\n        labelNodes = labelBuilder(major, buildOpts, resolveTickOpts);\n      }\n\n      // Remove labels (and paired tick) that are overlapping\n      if (settings.labels.filterOverlapping) {\n        filterOverlappingLabels(labelNodes, majorTickNodes, buildOpts);\n      }\n\n      nodes.push(...labelNodes);\n    }\n\n    if (settings.minorTicks && settings.minorTicks.show && minor.length > 0) {\n      buildOpts.style = settings.minorTicks;\n      buildOpts.tickSize = settings.minorTicks.tickSize;\n      buildOpts.padding = tickMinorSpacing(settings);\n\n      nodes.push(...tickBuilder(minor, buildOpts));\n    }\n\n    if (majorTickNodes) {\n      nodes.push(...majorTickNodes);\n    }\n\n    return nodes;\n  }\n\n  continuous.build = build;\n  discrete.build = build;\n\n  return isDiscrete ? discrete() : continuous();\n}\n","// const DEFAULT_LAYOUT_SETTINGS = { // TODO create dis and con specific settings\n//   anchor: 'auto', // TODO re-name from align..\n//   // orientation: 'auto', // TODO impl. v/h/auto\n//   // direction: 'auto', // TODO impl. left/right/top/bottom/auto\n//   padding: { // TODO use dock layout margin instead..\n//     start: 0,\n//     end: 10\n//   },\n//   maxGlyphCount: NaN,\n//   maxEdgeBleed: Infinity\n//   // labelMode: 'auto' // TODO move here? auto, horizontal, layered\n// };\n\n/**\n * Discrete axis settings\n * @typedef {object}\n * @alias component--axis-discrete\n */\nconst DEFAULT_DISCRETE_SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  labels: {\n    /** Toggle labels on/off\n     * @type {boolean=} */\n    show: true,\n    /** Tilting angle in degrees. Capped between -90 and 90. Only applicable when labels are in `tilted` mode.\n     * @type {number=} */\n    tiltAngle: 40,\n    /** Threshold for toggle of tilted labels. Capped between 0 and 1. For example, if it is set to 0.7, then tilted labels will be toggled if less than 70% of the labels are visible.\n     * @type {number=}\n     * @experimental */\n    tiltThreshold: 0.7,\n    /** Control the amount of space (in pixels) that labes can occupy outside their docking area. Only applicable when labels are in `tilted` mode.\n     * @type {number=} */\n    maxEdgeBleed: Infinity,\n    /** Space in pixels between the tick and label.\n     * @type {number=} */\n    margin: 4,\n    /** Max length of labels in pixels\n     * @type {number=} */\n    maxLengthPx: 150,\n    /** Min length of labels in pixels. Labels will always at least require this much space\n     * @type {number=} */\n    minLengthPx: 0,\n    /** Control how labels arrange themself. Availabe modes are `auto`, `horizontal`, `layered` and `tilted`. When set to `auto` the axis determines the best possible layout in the current context.\n     * @type {string=} */\n    mode: 'auto',\n    /** When only a sub-set of data is available, ex. when paging. This property can be used to let the axis estimate how much space the labels will consume, allowing it to give a consistent space estimate over the entire dataset when paging.\n     * @type {number=} */\n    maxGlyphCount: NaN,\n    /** Align act as a slider for the text bounding rect over the item bandwidth, given that the item have a bandwidth. Except when labels are tilted, then the align is a pure align that shifts the position of the label anchoring point.\n     * @type {number=} */\n    align: 0.5,\n    /** Offset in pixels along the axis direction.\n     * @type {number=} */\n    offset: 0,\n    /**\n     * Toggle whether labels should be filtered if they are overlapping. Filtering may be applied in a non-sequential order.\n     * If labels are overlapping and this setting is toggled off, the axis will automatically hide.\n     * @type {boolean=}\n     */\n    filterOverlapping: false,\n  },\n  /**\n   * @typedef {object}\n   */\n  ticks: {\n    /** Toggle ticks on/off\n     * @type {boolean=} */\n    show: false,\n    /** Space in pixels between the ticks and the line.\n     * @type {number=} */\n    margin: 0,\n    /** Size of the ticks in pixels.\n     * @type {number=} */\n    tickSize: 4,\n  },\n  /**\n   * @typedef {object}\n   */\n  line: {\n    /** Toggle line on/off\n     * @type {boolean=} */\n    show: false,\n  },\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingStart: 0,\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingEnd: 10,\n  /** Set the anchoring point of the axis. Avaialable options are `auto/left/right/bottom/top`. In `auto` the axis determines the best option. The options are restricted based on the axis orientation, a vertical axis may only anchor on `left` or `right`\n   * @type {string=} */\n  align: 'auto',\n};\n\n/**\n * Continuous axis settings\n * @typedef {object}\n * @alias component--axis-continuous\n */\nconst DEFAULT_CONTINUOUS_SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  labels: {\n    /** Toggle labels on/off\n     * @type {boolean=} */\n    show: true,\n    /** Space in pixels between the tick and label.\n     * @type {number=} */\n    margin: 4,\n    /** Max length of labels in pixels\n     * @type {number=} */\n    maxLengthPx: 150,\n    /** Min length of labels in pixels. Labels will always at least require this much space\n     * @type {number=} */\n    minLengthPx: 0,\n    /** Align act as a slider for the text bounding rect over the item bandwidth, given that the item have a bandwidth.\n     * @type {number=} */\n    align: 0.5,\n    /** Offset in pixels along the axis direction.\n     * @type {number=} */\n    offset: 0,\n    /**\n     * Toggle whether labels should be filtered if they are overlapping. Filtering may be applied in a non-sequential order.\n     * If labels are overlapping and this setting is toggled off, the axis will automatically hide.\n     * @type {boolean=}\n     */\n    filterOverlapping: true,\n  },\n  /**\n   * @typedef {object}\n   */\n  ticks: {\n    /** Toggle ticks on/off\n     * @type {boolean=} */\n    show: true,\n    /** Space in pixels between the ticks and the line.\n     * @type {number=} */\n    margin: 0,\n    /** Size of the ticks in pixels.\n     * @type {number=} */\n    tickSize: 8,\n  },\n  /**\n   * @typedef {object}\n   */\n  minorTicks: {\n    /** Toggle minor-ticks on/off\n     * @type {boolean=} */\n    show: false,\n    /** Size of the ticks in pixels.\n     * @type {number=} */\n    tickSize: 3,\n    /** Space in pixels between the ticks and the line.\n     * @type {number=} */\n    margin: 0,\n  },\n  /**\n   * @typedef {object}\n   */\n  line: {\n    /** Toggle line on/off\n     * @type {boolean=} */\n    show: true,\n  },\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingStart: 0,\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingEnd: 10,\n  /** Set the anchoring point of the axis. Avaialable options are `auto/left/right/bottom/top`. In `auto` the axis determines the best option. The options are restricted based on the axis orientation, a vertical axis may only anchor on `left` or `right`\n   * @type {string=} */\n  align: 'auto',\n};\n\nexport { DEFAULT_DISCRETE_SETTINGS, DEFAULT_CONTINUOUS_SETTINGS };\n","import getLabelSize from './axis-label-size';\n\nexport default function calcRequiredSize({ isDiscrete, rect, formatter, measureText, scale, settings, state }) {\n  let size = 0;\n\n  const { size: labelSize, edgeBleed, isToLarge } = getLabelSize({\n    isDiscrete,\n    rect,\n    formatter,\n    measureText,\n    scale,\n    settings,\n    state,\n  });\n\n  size += labelSize;\n\n  if (isToLarge) {\n    return { size };\n  }\n\n  if (settings.ticks.show) {\n    size += settings.ticks.margin;\n    size += settings.ticks.tickSize;\n  }\n  if (settings.minorTicks && settings.minorTicks.show) {\n    const minorTicksSize = settings.minorTicks.margin + settings.minorTicks.tickSize;\n    if (minorTicksSize > size) {\n      size = minorTicksSize;\n    }\n  }\n  if (settings.line.show) {\n    size += settings.line.strokeWidth;\n  }\n  size += settings.paddingStart;\n  size += settings.paddingEnd;\n\n  return { size, edgeBleed };\n}\n","import extend from 'extend';\n\nimport nodeBuilder from './axis-node-builder';\nimport { DEFAULT_CONTINUOUS_SETTINGS, DEFAULT_DISCRETE_SETTINGS } from './axis-default-settings';\nimport calcRequiredSize from './axis-size-calculator';\nimport crispify from '../../transposer/crispifier';\nimport { scaleWithSize } from '../../scales';\n\nfunction alignTransform({ align, inner }) {\n  if (align === 'left') {\n    return { x: inner.width + inner.x };\n  }\n  if (align === 'right' || align === 'bottom') {\n    return inner;\n  }\n  return { y: inner.y + inner.height };\n}\n\nfunction resolveAlign(align, dock) {\n  const horizontal = ['top', 'bottom'];\n  const vertical = ['left', 'right'];\n  if (horizontal.indexOf(align) !== -1 && vertical.indexOf(dock) === -1) {\n    return align;\n  }\n  if (vertical.indexOf(align) !== -1 && horizontal.indexOf(dock) === -1) {\n    return align;\n  }\n  return dock; // Invalid align, return current dock as default\n}\n\n/**\n * @ignore\n * @param {object} context - The component context\n */\nfunction resolveLocalSettings({ state, style, settings }) {\n  const defaultStgns = extend(\n    true,\n    {},\n    state.isDiscrete ? DEFAULT_DISCRETE_SETTINGS : DEFAULT_CONTINUOUS_SETTINGS,\n    style\n  );\n  const localStgns = extend(true, {}, defaultStgns, settings.settings);\n\n  const dock = settings.layout.dock || state.defaultDock;\n  localStgns.dock = dock;\n  localStgns.align = resolveAlign(settings.settings.align, dock);\n  localStgns.labels.tiltAngle = Math.max(-90, Math.min(localStgns.labels.tiltAngle, 90));\n\n  const { paddingStart, paddingEnd } = localStgns;\n  localStgns.paddingStart = typeof paddingStart === 'function' ? paddingStart.call(null) : paddingStart;\n  localStgns.paddingEnd = typeof paddingEnd === 'function' ? paddingEnd.call(null) : paddingEnd;\n\n  return localStgns;\n}\n\nfunction updateActiveMode(state, settings, isDiscrete) {\n  const mode = settings.labels.mode;\n\n  if (!isDiscrete || !state.isHorizontal) {\n    return 'horizontal';\n  }\n\n  if (mode === 'auto') {\n    return state.labels.activeMode;\n  }\n  if (['layered', 'tilted'].indexOf(settings.labels.mode) !== -1 && ['top', 'bottom'].indexOf(settings.dock) !== -1) {\n    return mode;\n  }\n  return 'horizontal';\n}\n\nconst axisComponent = {\n  require: ['chart', 'renderer', 'dockConfig'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n      prioOrder: 0,\n    },\n    settings: {},\n    style: {\n      labels: '$label',\n      ticks: '$guide-line',\n      minorTicks: '$guide-line--minor',\n      line: '$guide-line',\n    },\n  },\n  created() {\n    // State is a representation of properties that are private to this component defintion and may be modified by only in this context.\n    this.state = {\n      isDiscrete: !!this.scale.bandwidth,\n      isHorizontal: false,\n      labels: {\n        activeMode: 'horizontal',\n      },\n      ticks: [],\n      innerRect: {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0,\n      },\n      outerRect: {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0,\n      },\n      defaultDock: undefined,\n      concreteNodeBuilder: undefined,\n      settings: undefined,\n    };\n\n    if (this.state.isDiscrete) {\n      this.state.defaultDock = 'bottom';\n    } else {\n      this.state.defaultDock = 'left';\n    }\n\n    this.setState(this.settings);\n  },\n  setState() {\n    this.state.isDiscrete = !!this.scale.bandwidth;\n    this.state.settings = resolveLocalSettings(this);\n\n    this.state.concreteNodeBuilder = nodeBuilder(this.state.isDiscrete);\n\n    this.dockConfig.dock(this.state.settings.dock); // Override the dock setting (TODO should be removed)\n\n    this.state.isHorizontal = this.state.settings.align === 'top' || this.state.settings.align === 'bottom';\n    this.state.labels.activeMode = updateActiveMode(this.state, this.state.settings, this.state.isDiscrete);\n  },\n  preferredSize(opts) {\n    const { formatter, state, scale } = this;\n\n    const distance = this.state.isHorizontal ? opts.inner.width : opts.inner.height;\n\n    this.state.pxScale = scaleWithSize(scale, distance);\n\n    const reqSize = calcRequiredSize({\n      isDiscrete: this.state.isDiscrete,\n      rect: opts.inner,\n      formatter,\n      measureText: this.renderer.measureText,\n      scale: this.state.pxScale,\n      settings: this.state.settings,\n      state,\n    });\n\n    return reqSize;\n  },\n  beforeUpdate(opts = {}) {\n    const { settings } = opts;\n    this.setState(settings);\n  },\n  resize(opts) {\n    const { inner, outer } = opts;\n\n    const extendedInner = extend(\n      {},\n      inner,\n      alignTransform({\n        align: this.state.settings.align,\n        inner,\n      })\n    );\n\n    const finalOuter = outer || extendedInner;\n    extend(this.state.innerRect, extendedInner);\n    extend(this.state.outerRect, finalOuter);\n\n    return outer;\n  },\n  beforeRender() {\n    const { scale, formatter } = this;\n\n    const distance = this.state.isHorizontal ? this.state.innerRect.width : this.state.innerRect.height;\n\n    this.state.pxScale = scaleWithSize(scale, distance);\n    this.state.ticks = this.state.pxScale\n      .ticks({\n        distance,\n        formatter,\n      })\n      .filter((t) => t.position >= 0 && t.position <= 1);\n  },\n  render() {\n    const { state } = this;\n\n    const nodes = [];\n    nodes.push(\n      ...this.state.concreteNodeBuilder.build({\n        settings: this.state.settings,\n        scale: this.state.pxScale,\n        innerRect: this.state.innerRect,\n        outerRect: this.state.outerRect,\n        measureText: this.renderer.measureText,\n        textBounds: this.renderer.textBounds,\n        ticks: this.state.ticks,\n        state,\n      })\n    );\n\n    crispify.multiple(nodes);\n\n    return nodes;\n  },\n};\n\nexport default axisComponent;\n","import axisComponent from './axis';\n\n/**\n * @typedef {object} component--axis\n */\n\n/**\n * @type {string}\n * @memberof component--axis\n */\n\nconst type = 'axis';\n\nexport default function axis(picasso) {\n  picasso.component(type, axisComponent);\n}\n","import extend from 'extend';\n\nfunction parseTitle(text, join, scale) {\n  let title = '';\n  if (typeof text === 'function') {\n    title = text();\n  } else if (typeof text === 'string') {\n    title = text;\n  } else if (scale) {\n    let data = scale.data();\n    const titles = (data.fields || []).map((field) => field.title());\n    title = titles.join(join);\n  }\n\n  return title;\n}\n\nfunction getTextAnchor(dock, anchor) {\n  let val = 'middle';\n  if (dock === 'left') {\n    if (anchor === 'top') {\n      val = 'end';\n    } else if (anchor === 'bottom') {\n      val = 'start';\n    }\n  } else if (dock === 'right') {\n    if (anchor === 'top') {\n      val = 'start';\n    } else if (anchor === 'bottom') {\n      val = 'end';\n    }\n  } else if (anchor === 'left') {\n    val = 'start';\n  } else if (anchor === 'right') {\n    val = 'end';\n  }\n  return val;\n}\n\nfunction generateTitle({ title, definitionSettings, dock, rect, measureText, style }) {\n  const struct = {\n    type: 'text',\n    text: title,\n    x: 0,\n    y: 0,\n    dx: 0,\n    dy: 0,\n    anchor: getTextAnchor(dock, definitionSettings.anchor),\n    baseline: 'alphabetical',\n  };\n\n  extend(struct, style.text);\n  const textRect = measureText(struct);\n\n  if (dock === 'top' || dock === 'bottom') {\n    let x = rect.width / 2;\n    if (definitionSettings.anchor === 'left') {\n      x = definitionSettings.paddingLeft || 0;\n    } else if (definitionSettings.anchor === 'right') {\n      x = rect.width - (definitionSettings.paddingRight || 0);\n    }\n\n    struct.x = x;\n    struct.y =\n      dock === 'top'\n        ? rect.height - definitionSettings.paddingStart\n        : definitionSettings.paddingStart + textRect.height;\n    struct.dy = dock === 'top' ? -(textRect.height / 6) : -(textRect.height / 3);\n    struct.maxWidth = rect.width * 0.8;\n  } else {\n    let y = rect.height / 2;\n    if (definitionSettings.anchor === 'top') {\n      y = definitionSettings.paddingStart;\n    } else if (definitionSettings.anchor === 'bottom') {\n      y = rect.height - definitionSettings.paddingStart;\n    }\n\n    struct.y = y;\n    struct.x = dock === 'left' ? rect.width - definitionSettings.paddingStart : definitionSettings.paddingStart;\n    struct.dx = dock === 'left' ? -(textRect.height / 3) : textRect.height / 3;\n    const rotation = dock === 'left' ? 270 : 90;\n    struct.transform = `rotate(${rotation}, ${struct.x + struct.dx}, ${struct.y + struct.dy})`;\n    struct.maxWidth = rect.height * 0.8;\n  }\n\n  if (!isNaN(definitionSettings.maxLengthPx)) {\n    struct.maxWidth = Math.min(struct.maxWidth, definitionSettings.maxLengthPx);\n  }\n\n  return struct;\n}\n\n/**\n * @typedef {object} component--text\n * @property {string} [type='text']\n * @property {string|function} text\n * @property {component--text-settings} settings - Text settings\n * @example\n * {\n *  type: 'text',\n *  text: 'my title',\n *  dock: 'left',\n *  settings: {\n *    anchor: 'left',\n *    style: {\n *      fill: 'red'\n *    }\n *  }\n * }\n */\n\n/**\n * @typedef {object} component--text-settings\n * @property {number} [paddingStart=5]\n * @property {number} [paddingEnd=5]\n * @property {number} [paddingLeft=0]\n * @property {number} [paddingRight=0]\n * @property {string} [anchor='center'] - Where to v- or h-align the text. Supports `left`, `right`, `top`, `bottom` and `center`\n * @property {string} [join=', '] - String to add when joining titles from multiple sources\n * @property {number} [maxLengthPx] - Limit the text length to this value in pixels\n */\nconst textComponent = {\n  require: ['renderer', 'chart'],\n  defaultSettings: {\n    layout: {\n      dock: 'bottom',\n      displayOrder: 0,\n      prioOrder: 0,\n    },\n    settings: {\n      paddingStart: 5,\n      paddingEnd: 5,\n      paddingLeft: 0,\n      paddingRight: 0,\n      anchor: 'center',\n      join: ', ',\n      maxLengthPx: NaN,\n    },\n    style: {\n      text: '$title',\n    },\n  },\n\n  created() {\n    this.definitionSettings = this.settings.settings;\n\n    const text = this.settings.text;\n    const join = this.definitionSettings.join;\n    this.title = parseTitle(text, join, this.scale);\n  },\n\n  preferredSize() {\n    const height = this.renderer.measureText({\n      text: this.title,\n      fontSize: this.style.text.fontSize,\n      fontFamily: this.style.text.fontFamily,\n    }).height;\n    return height + this.definitionSettings.paddingStart + this.definitionSettings.paddingEnd;\n  },\n\n  render() {\n    const { title, definitionSettings, rect } = this;\n    const nodes = [];\n    nodes.push(\n      generateTitle({\n        title,\n        dock: this.settings.layout.dock,\n        definitionSettings,\n        rect,\n        measureText: this.renderer.measureText,\n        style: this.style,\n      })\n    );\n    return nodes;\n  },\n\n  beforeUpdate(opts) {\n    if (opts.settings) {\n      extend(this.settings, opts.settings);\n      this.definitionSettings = opts.settings.settings;\n    }\n    const text = this.settings.text;\n    const join = this.definitionSettings.join;\n    this.title = parseTitle(text, join, this.scale);\n  },\n};\n\nexport default textComponent;\n","import textComponent from './text';\n\nexport default function text(picasso) {\n  picasso.component('text', textComponent);\n}\n","/**\n * @typedef {object} component--scrollbar\n * @private\n */\n\n/**\n * @typedef {object} component--scrollbar.settings\n * @property {boolean} [backgroundColor = '#eee']\n * @property {boolean} [thumbColor = '#ccc']\n * @property {boolean} [width = 16]\n */\n\nfunction start(_scrollbar, pos) {\n  const dock = _scrollbar.settings.layout.dock;\n  const invert = _scrollbar.settings.settings.invert;\n  const horizontal = dock === 'top' || dock === 'bottom';\n  const lengthAttr = horizontal ? 'width' : 'height';\n  const length = _scrollbar.rect[lengthAttr];\n  const scroll = _scrollbar.chart.scroll(_scrollbar.settings.scroll);\n  let currentMove;\n\n  {\n    // local scope to allow reuse of variable names later\n    let offset = pos[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    const scrollState = scroll.getState();\n\n    currentMove = {\n      startOffset: offset,\n      startScroll: scrollState.start,\n      swipe: false,\n    };\n\n    // Detect swipe start outsize the thumb & change startScroll to jump the scroll there.\n    const scrollPoint = (offset / length) * (scrollState.max - scrollState.min) + scrollState.min;\n    if (scrollPoint < scrollState.start) {\n      currentMove.startScroll = scrollPoint;\n    } else if (scrollPoint > scrollState.start + scrollState.viewSize) {\n      currentMove.startScroll = scrollPoint - scrollState.viewSize;\n    }\n  }\n\n  const update = (p) => {\n    let offset = p[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    if (!currentMove.swipe) {\n      if (Math.abs(currentMove.startOffset - offset) <= 1) {\n        return;\n      }\n      currentMove.swipe = true;\n    }\n\n    const scrollState = scroll.getState();\n    const scrollMove = ((offset - currentMove.startOffset) / length) * (scrollState.max - scrollState.min);\n    const scrollStart = currentMove.startScroll + scrollMove;\n    scroll.moveTo(scrollStart);\n  };\n  const end = (p) => {\n    let offset = p[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    const scrollState = scroll.getState();\n    if (currentMove.swipe) {\n      const scrollMove = ((offset - currentMove.startOffset) / length) * (scrollState.max - scrollState.min);\n      const scrollStart = currentMove.startScroll + scrollMove;\n      scroll.moveTo(scrollStart);\n    } else {\n      const scrollCenter = (offset / length) * (scrollState.max - scrollState.min) + scrollState.min;\n      const scrollStart = scrollCenter - scrollState.viewSize / 2;\n      scroll.moveTo(scrollStart);\n    }\n  };\n\n  return {\n    update,\n    end,\n  };\n}\n\nfunction getLocalPos(event, renderer) {\n  const containerRect = renderer.element().getBoundingClientRect();\n  return {\n    x: event.center.x - containerRect.left,\n    y: event.center.y - containerRect.top,\n  };\n}\n\nconst scrollbarComponent = {\n  require: ['chart', 'renderer'],\n  on: {\n    panStart(event) {\n      const pos = getLocalPos(event, this.renderer);\n      const startPos = {\n        x: pos.x - event.deltaX,\n        y: pos.y - event.deltaY,\n      };\n      this.currentMove = start(this, startPos);\n      this.currentMove.update(pos);\n    },\n    panMove(event) {\n      if (!this.currentMove) {\n        return;\n      }\n      const pos = getLocalPos(event, this.renderer);\n      this.currentMove.update(pos);\n    },\n    panEnd(event) {\n      if (!this.currentMove) {\n        return;\n      }\n      const pos = getLocalPos(event, this.renderer);\n      this.currentMove.end(pos);\n      this.currentMove = null;\n    },\n    panCancel() {\n      this.currentMove = null;\n    },\n    tap(event) {\n      const pos = getLocalPos(event, this.renderer);\n      const move = start(this, pos);\n      move.end(pos);\n    },\n  },\n  defaultSettings: {\n    settings: {\n      backgroundColor: '#eee',\n      thumbColor: '#ccc',\n      width: 16, // 32 for touch\n    },\n  },\n\n  preferredSize: function preferredSize(rect) {\n    const scrollState = this.chart.scroll(this.settings.scroll).getState();\n    // hide the scrollbar if it is not possible to scroll\n    if (scrollState.viewSize >= scrollState.max - scrollState.min) {\n      const toLargeSize = Math.max(rect.width, rect.height);\n      return toLargeSize;\n    }\n    return this.settings.settings.width;\n  },\n\n  render: function render(h) {\n    const dock = this.settings.layout.dock;\n    const invert = this.settings.settings.invert;\n    const horizontal = dock === 'top' || dock === 'bottom';\n    const lengthAttr = horizontal ? 'width' : 'height';\n\n    const _rect = this.rect;\n    const length = _rect[lengthAttr];\n\n    const scrollState = this.chart.scroll(this.settings.scroll).getState();\n    let thumbStart = (length * (scrollState.start - scrollState.min)) / (scrollState.max - scrollState.min);\n    const thumbRange = (length * scrollState.viewSize) / (scrollState.max - scrollState.min);\n\n    if (invert) {\n      thumbStart = length - thumbStart - thumbRange;\n    }\n\n    return h(\n      'div',\n      {\n        style: {\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          background: this.settings.settings.backgroundColor,\n          pointerEvents: 'auto',\n        },\n      },\n      [].concat(\n        h('div', {\n          class: 'scroller',\n          style: {\n            position: 'absolute',\n            [horizontal ? 'left' : 'top']: `${thumbStart}px`,\n            [horizontal ? 'top' : 'left']: '25%',\n            [horizontal ? 'height' : 'width']: '50%', // ${width}px\n            [lengthAttr]: `${Math.max(1, thumbRange)}px`,\n            background: this.settings.settings.thumbColor,\n          },\n        })\n      )\n    );\n  },\n\n  renderer: 'dom',\n};\n\nexport default function scrollbar(picasso) {\n  picasso.component('scrollbar', scrollbarComponent);\n}\n","const TARGET_SIZE = 5;\nconst VERTICAL = 0;\nconst HORIZONTAL = 1;\n\nexport { TARGET_SIZE, VERTICAL, HORIZONTAL };\n","import extend from 'extend';\n\nimport { TARGET_SIZE, VERTICAL } from './brush-range-const';\n\nfunction buildLine({ h, isVertical, value, pos, align, borderHit, state, idx }) {\n  const isAlignStart = align !== 'end';\n  const alignStart = { left: '0', top: '0' };\n  const alignEnd = { right: '0', bottom: '0' };\n  const alignStyle = isAlignStart ? alignStart : alignEnd;\n  let start = 0;\n  let width = '100%';\n  let height = '100%';\n\n  if (state.targetRect && state.settings.bubbles.align === 'start') {\n    width = `${state.targetRect.x + state.targetRect.width}px`;\n    height = `${state.targetRect.y + state.targetRect.height}px`;\n  } else if (state.targetRect && state.settings.bubbles.align === 'end') {\n    start = isVertical ? state.targetRect.x : state.targetRect.y;\n    width = `${state.rect.width - start}px`;\n    height = `${state.rect.height - start}px`;\n  }\n\n  if (!isAlignStart) {\n    pos -= borderHit;\n  }\n\n  // edge\n  return h(\n    'div',\n    {\n      onmouseover(e) {\n        e.srcElement.children[0].style.backgroundColor = '#000';\n        e.srcElement.children[0].style[isVertical ? 'height' : 'width'] = '2px';\n      },\n      onmouseout(e) {\n        e.srcElement.children[0].style.backgroundColor = state.style.line.stroke;\n        e.srcElement.children[0].style[isVertical ? 'height' : 'width'] = '1px';\n      },\n      'data-value': value,\n      'data-key': [state.key, 'edge', idx].join('-'),\n      style: {\n        cursor: isVertical ? 'ns-resize' : 'ew-resize',\n        position: 'absolute',\n        left: isVertical ? `${start}px` : `${pos}px`,\n        top: isVertical ? `${pos}px` : `${start}px`,\n        height: isVertical ? `${borderHit}px` : height,\n        width: isVertical ? width : `${borderHit}px`,\n        pointerEvents: 'auto',\n      },\n    },\n    [\n      // line\n      h('div', {\n        style: extend(\n          {\n            backgroundColor: state.style.line.stroke,\n            position: 'absolute',\n            height: isVertical ? `${1}px` : '100%',\n            width: isVertical ? '100%' : `${1}px`,\n            pointerEvents: 'none',\n          },\n          alignStyle\n        ),\n      }),\n    ]\n  );\n}\n\nfunction buildBubble({ h, isVertical, label, otherValue, rangeIdx, idx, pos, align, state, value }) {\n  const isAlignStart = align !== 'end';\n  const isOutside = state.settings.bubbles.placement === 'outside';\n  let outside = 'none';\n  let bubbleDock;\n  if (isVertical) {\n    bubbleDock = isAlignStart ? 'left' : 'right';\n    if (isOutside) {\n      outside = isAlignStart ? 'translate(-100%,  0px)' : 'translate(100%,  0px)';\n    }\n  } else {\n    bubbleDock = isAlignStart ? 'top' : 'bottom';\n    if (isOutside) {\n      outside = isAlignStart ? 'translate(0px, -100%)' : 'translate(0px,  100%)';\n    }\n  }\n\n  let inEdit = state.edit && state.edit.rangeIdx === rangeIdx && state.edit.bubbleIdx === idx;\n\n  const bubbleStyle = {\n    position: 'relative',\n    borderRadius: `${state.style.bubble.borderRadius}px`,\n    border: `${state.style.bubble.strokeWidth}px solid ${state.style.bubble.stroke}`,\n    backgroundColor: state.style.bubble.fill,\n    color: state.style.bubble.color,\n    fontFamily: state.style.bubble.fontFamily,\n    fontSize: state.style.bubble.fontSize,\n    padding: '4px 8px',\n    textAlign: 'center',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    maxWidth: '150px',\n    minWidth: '50px',\n    minHeight: '1em',\n    pointerEvents: 'auto',\n    transform: isVertical ? 'translate(0,-50%)' : 'translate(-50%,0)',\n    cursor: isVertical ? 'ns-resize' : 'ew-resize',\n  };\n\n  let currentBorderColor = state.style.bubble.stroke;\n\n  const bubble = inEdit\n    ? h('input', {\n        type: 'text',\n        value,\n        style: {\n          ...bubbleStyle,\n          textAlign: 'start',\n          textOverflow: '',\n          fontSize: '13px', // TODO - make it styleable\n        },\n        onkeyup(e) {\n          if (e.key === 'Enter') {\n            e.preventDefault();\n            e.stopPropagation();\n            const newValue = parseFloat(e.target.value);\n            if (isNaN(newValue)) {\n              currentBorderColor = 'rgba(230, 78, 78, 0.6)';\n              e.target.style.border = `${state.style.bubble.strokeWidth}px solid ${currentBorderColor}`;\n            } else {\n              state.onEditConfirmed(rangeIdx, newValue, otherValue);\n            }\n          } else if (e.key === 'Escape') {\n            e.preventDefault();\n            e.stopPropagation();\n            state.onEditCanceled();\n          }\n        },\n      })\n    : h(\n        'div',\n        {\n          'data-key': [state.key, 'bubble', rangeIdx].join('-'),\n          'data-other-value': otherValue,\n          'data-idx': rangeIdx,\n          'data-bidx': idx,\n          style: bubbleStyle,\n        },\n        [label]\n      );\n\n  // bubble wrapper\n  return h(\n    'div',\n    {\n      style: {\n        position: 'absolute',\n        [bubbleDock]: '0',\n        [isVertical ? 'top' : 'left']: `${pos}px`,\n        transform: outside,\n      },\n    },\n    [\n      // bubble\n      bubble,\n    ]\n  );\n}\n\nfunction buildArea({ h, isVertical, top, height, color, on, opacity }) {\n  return h(\n    'div',\n    extend(\n      {\n        style: {\n          backgroundColor: color,\n          opacity,\n          position: 'absolute',\n          left: isVertical ? 0 : `${top}px`,\n          top: isVertical ? `${top}px` : 0,\n          height: isVertical ? `${height}px` : '100%',\n          width: isVertical ? '100%' : `${height}px`,\n          pointerEvents: 'auto',\n        },\n      },\n      on\n    ),\n    []\n  );\n}\n\nexport default function buildRange({ borderHit, els, isVertical, state, vStart, vEnd, idx }) {\n  let targetOffset = 0;\n  if (state.targetRect) {\n    targetOffset = isVertical ? state.targetRect.y : state.targetRect.x;\n  }\n  const hasScale = !!state.scale;\n  const start = hasScale ? state.scale.norm(vStart) * state.size : vStart;\n  const end = hasScale ? state.scale.norm(vEnd) * state.size : vEnd;\n  const height = Math.abs(start - end);\n  const top = Math.min(start, end) + targetOffset;\n  const bottom = top + height;\n\n  if (state.targetRect) {\n    const target = state.targetFillRect || state.targetRect;\n    const targetSize = isVertical ? target.height : target.width;\n    const targetStart = hasScale ? state.scale.norm(vStart) * targetSize : vStart;\n    const targetEnd = hasScale ? state.scale.norm(vEnd) * targetSize : vEnd;\n    const targetHeight = Math.abs(targetStart - targetEnd);\n    const targetTop = Math.min(targetStart, targetEnd);\n    const targetArea = {\n      h: state.h,\n      isVertical,\n      top: targetTop,\n      height: targetHeight,\n      color: state.style.target.fill,\n      opacity: state.style.target.opacity,\n    };\n    if (state.style.target.opacity < 0.8) {\n      targetArea.on = {\n        onmouseover(e) {\n          e.srcElement.style.opacity = state.style.target.opacity + 0.1;\n        },\n        onmouseout(e) {\n          e.srcElement.style.opacity = state.style.target.opacity;\n        },\n      };\n    }\n    els.push(\n      state.h(\n        'div',\n        {\n          style: {\n            position: 'absolute',\n            left: `${target.x}px`,\n            top: `${target.y}px`,\n            height: `${target.height}px`,\n            width: `${target.width}px`,\n          },\n        },\n        [buildArea(targetArea)]\n      )\n    );\n  }\n\n  // active range area\n  // els.push(buildArea({\n  //   h: state.h,\n  //   isVertical,\n  //   top,\n  //   height,\n  //   color: state.settings.fill\n  // }));\n\n  const valStart = start < end ? vStart : vEnd;\n  const valEnd = start < end ? vEnd : vStart;\n  const [min, max] = hasScale ? state.scale.domain() : [Math.min(vStart, vEnd), Math.max(vStart, vEnd)];\n\n  const isStartVisible = valStart + 1e-5 >= min && valStart - 1e-5 <= max; // accept minor floating point difference\n  const isEndVisible = valEnd - 1e-5 <= max && valEnd + 1e-5 >= min;\n\n  if (isStartVisible) {\n    els.push(\n      buildLine({\n        h: state.h,\n        isVertical,\n        borderHit,\n        value: valStart,\n        pos: top,\n        align: 'start',\n        state,\n        idx,\n      })\n    );\n  }\n\n  if (isEndVisible) {\n    els.push(\n      buildLine({\n        h: state.h,\n        isVertical,\n        borderHit,\n        value: valEnd,\n        pos: bottom,\n        align: 'end',\n        state,\n        idx,\n      })\n    );\n  }\n\n  const bubbles = state.settings.bubbles;\n  if (bubbles && bubbles.show) {\n    const fontSize = bubbles.fontSize;\n    const fontFamily = bubbles.fontFamily;\n    const fill = bubbles.fill;\n    const style = {\n      fontSize,\n      fontFamily,\n      color: fill,\n    };\n\n    const range = [vStart, vEnd];\n\n    if (isStartVisible) {\n      els.push(\n        buildBubble({\n          h: state.h,\n          isVertical,\n          align: bubbles.align,\n          style,\n          rangeIdx: idx,\n          idx: 0,\n          otherValue: valEnd,\n          value: valStart,\n          label: `${state.format(valStart, range)}`,\n          pos: top,\n          state,\n        })\n      );\n    }\n\n    if (isEndVisible) {\n      els.push(\n        buildBubble({\n          h: state.h,\n          isVertical,\n          align: bubbles.align,\n          style,\n          rangeIdx: idx,\n          idx: 1,\n          otherValue: valStart,\n          value: valEnd,\n          label: `${state.format(valEnd, range)}`,\n          pos: bottom,\n          state,\n        })\n      );\n    }\n  }\n}\n\nexport function getMoveDelta(state) {\n  const posDelta = state.active.limitHigh - state.active.end;\n  const negDelta = state.active.limitLow - state.active.start;\n  let delta = state.current - state.start;\n  if (delta < 0) {\n    delta = Math.max(delta, negDelta);\n  } else {\n    delta = Math.min(delta, posDelta);\n  }\n\n  return delta;\n}\n\nexport function nodes(state) {\n  let els = [];\n\n  const isVertical = state.direction === VERTICAL;\n\n  if (Array.isArray(state.ranges)) {\n    // add all other ranges\n    state.ranges.forEach((r, i) => {\n      if (!state.active || i !== state.active.idx) {\n        buildRange({\n          borderHit: TARGET_SIZE,\n          els,\n          isVertical,\n          state,\n          vStart: Math.min(r.min, r.max),\n          vEnd: Math.max(r.min, r.max),\n          idx: i,\n        });\n      }\n    });\n  }\n\n  if (state.active) {\n    // add active range\n    let vStart = state.start;\n    let vEnd = state.current;\n    if (state.active.idx !== -1) {\n      if (state.active.mode === 'foo') {\n        vStart = Math.min(state.active.start, state.active.end);\n        vEnd = Math.max(state.active.start, state.active.end);\n      } else if (state.active.mode === 'modify') {\n        vStart = Math.min(state.start, state.current);\n        vEnd = Math.max(state.start, state.current);\n      } else {\n        const delta = getMoveDelta(state);\n        vStart = state.active.start + delta;\n        vEnd = state.active.end + delta;\n      }\n    }\n\n    buildRange({\n      borderHit: TARGET_SIZE,\n      els,\n      isVertical,\n      state,\n      vStart,\n      vEnd,\n      idx: state.active.idx,\n    });\n  }\n\n  return els;\n}\n","import extend from 'extend';\nimport { testRectPoint } from '../../../core/math/narrow-phase-collision';\n\nfunction rangelimits(state) {\n  return {\n    min: state.scale.min(),\n    max: state.scale.max(),\n  };\n}\n\nfunction areaLimits(state) {\n  return {\n    min: 0,\n    max: state.direction ? state.rect.width : state.rect.height,\n  };\n}\n\nfunction findActive(state, value, limits) {\n  let rs = state.ranges;\n  let i;\n  let activeIdx = -1;\n  for (i = 0; i < rs.length; i++) {\n    if (rs[i].min <= value && value <= rs[i].max) {\n      activeIdx = i;\n      limits.min = i ? rs[i - 1].max : limits.min;\n      limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n      break;\n    } else if (value < rs[i].min) {\n      limits.max = rs[i].min;\n      limits.min = i ? rs[i - 1].max : limits.min;\n      break;\n    }\n  }\n  if (activeIdx === -1 && rs.length && i >= rs.length) {\n    limits.min = rs[rs.length - 1].max;\n  }\n\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'foo',\n    };\n  }\n  state.active = activeRange;\n}\n\nexport function startArea({ state, e, renderer, ranges, targetSize }) {\n  if (state.started) {\n    return;\n  }\n  const x = e.center.x - e.deltaX;\n  const y = e.center.y - e.deltaY;\n  let target = document.elementFromPoint(x, y);\n  if (!renderer.element().contains(target)) {\n    target = null;\n  }\n\n  const tempState = {\n    started: true,\n  };\n\n  state.offset = renderer.element().getBoundingClientRect();\n  state.ranges = ranges(state);\n  const relX = x - state.offset.left; // coordinate relative renderer\n  const relY = y - state.offset.top;\n  const startPoint = e.center[state.cssCoord.coord] - e[state.cssCoord.pos] - state.offset[state.cssCoord.offset];\n  const relStart = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n  let v = relStart;\n  let vStart = startPoint;\n\n  tempState.start = startPoint;\n  tempState.current = relStart;\n\n  let rs = state.ranges;\n  const limits = areaLimits(state);\n  let i;\n  let activeIdx = -1;\n  if (target && target.hasAttribute('data-idx')) {\n    activeIdx = parseInt(target.getAttribute('data-idx'), 10);\n    limits.min = activeIdx > 0 ? rs[activeIdx - 1].max : limits.min;\n    limits.max = activeIdx + 1 < rs.length ? rs[activeIdx + 1].min : limits.max;\n  } else {\n    for (i = 0; i < rs.length; i++) {\n      if (rs[i].min <= vStart && vStart <= rs[i].max) {\n        activeIdx = i;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n        break;\n      } else if (vStart < rs[i].min) {\n        limits.max = rs[i].min;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        break;\n      }\n    }\n    if (activeIdx === -1 && rs.length && i >= rs.length) {\n      limits.min = rs[rs.length - 1].max;\n    }\n  }\n\n  if (activeIdx === -1 && !state.multi) {\n    tempState.ranges = [];\n    limits.min = 0;\n    limits.max = state.direction ? state.rect.width : state.rect.height;\n  }\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'move',\n    };\n\n    if (target && target.hasAttribute('data-other-value')) {\n      tempState.start = parseFloat(target.getAttribute('data-other-value'));\n      activeRange.mode = 'modify';\n    } else {\n      let pxStart = activeRange.start;\n      let pxEnd = activeRange.end;\n      if (Math.abs(startPoint - pxStart) <= targetSize) {\n        tempState.start = activeRange.end;\n        activeRange.mode = 'modify';\n      } else if (Math.abs(startPoint - pxEnd) <= targetSize) {\n        tempState.start = activeRange.start;\n        activeRange.mode = 'modify';\n      }\n    }\n  } else {\n    activeRange = {\n      idx: -1,\n      start: vStart,\n      end: v,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'current',\n    };\n  }\n\n  tempState.active = activeRange;\n\n  if (activeRange.mode !== 'modify' && state.targetRect && !testRectPoint(state.targetRect, { x: relX, y: relY })) {\n    // do nothing\n  } else {\n    Object.keys(tempState).forEach((key) => (state[key] = tempState[key]));\n  }\n}\n\nexport function start({ state, e, renderer, ranges, targetSize }) {\n  if (state.started) {\n    return;\n  }\n  state.edit = null;\n  const x = e.center.x - e.deltaX;\n  const y = e.center.y - e.deltaY;\n  let target = document.elementFromPoint(x, y);\n  if (!renderer.element().contains(target)) {\n    target = null;\n  }\n\n  const tempState = {\n    started: true,\n  };\n\n  state.offset = extend({}, renderer.element().getBoundingClientRect());\n  const relX = x - state.offset.left; // coordinate relative renderer\n  const relY = y - state.offset.top;\n  state.offset.left += state.targetRect ? state.targetRect.x : 0; // make offset relative to targetRect\n  state.offset.top += state.targetRect ? state.targetRect.y : 0;\n  state.ranges = ranges(state, state.fauxBrushInstance || state.brushInstance);\n  const startPoint = e.center[state.cssCoord.coord] - e[state.cssCoord.pos] - state.offset[state.cssCoord.offset];\n  const relStart = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n  tempState.current = state.scale.normInvert(relStart / state.size);\n  tempState.start = state.scale.normInvert(startPoint / state.size);\n\n  let rs = state.ranges;\n  const limits = rangelimits(state);\n  let i;\n  let activeIdx = -1;\n  if (target && target.hasAttribute('data-idx')) {\n    activeIdx = parseInt(target.getAttribute('data-idx'), 10);\n    limits.min = activeIdx > 0 ? rs[activeIdx - 1].max : limits.min;\n    limits.max = activeIdx + 1 < rs.length ? rs[activeIdx + 1].min : limits.max;\n  } else {\n    for (i = 0; i < rs.length; i++) {\n      if (rs[i].min <= tempState.start && tempState.start <= rs[i].max) {\n        activeIdx = i;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n        break;\n      } else if (tempState.start < rs[i].min) {\n        limits.max = rs[i].min;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        break;\n      }\n    }\n    if (activeIdx === -1 && rs.length && i >= rs.length) {\n      limits.min = rs[rs.length - 1].max;\n    }\n  }\n\n  if (activeIdx === -1 && !state.multi) {\n    tempState.ranges = [];\n    limits.min = state.scale.min();\n    limits.max = state.scale.max();\n  }\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'move',\n    };\n\n    if (target && target.hasAttribute('data-other-value')) {\n      tempState.start = parseFloat(target.getAttribute('data-other-value'));\n      activeRange.mode = 'modify';\n    } else {\n      let pxStart = state.scale.norm(activeRange.start) * state.size;\n      let pxEnd = state.scale.norm(activeRange.end) * state.size;\n      if (Math.abs(startPoint - pxStart) <= targetSize) {\n        tempState.start = activeRange.end;\n        activeRange.mode = 'modify';\n      } else if (Math.abs(startPoint - pxEnd) <= targetSize) {\n        tempState.start = activeRange.start;\n        activeRange.mode = 'modify';\n      }\n    }\n  } else {\n    activeRange = {\n      idx: -1,\n      start: tempState.start,\n      end: tempState.current,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'current',\n    };\n  }\n\n  tempState.active = activeRange;\n\n  if (activeRange.mode !== 'modify' && state.targetRect && !testRectPoint(state.targetRect, { x: relX, y: relY })) {\n    // do nothing\n  } else {\n    Object.keys(tempState).forEach((key) => (state[key] = tempState[key]));\n  }\n}\nexport function end(state, ranges) {\n  state.started = false;\n  state.ranges = ranges(state, state.fauxBrushInstance || state.brushInstance);\n  const limits = rangelimits(state);\n  findActive(state, state.current, limits);\n}\n\nexport function endArea(state, ranges) {\n  state.started = false;\n  state.ranges = ranges(state);\n  const limits = areaLimits(state);\n  findActive(state, state.current, limits);\n}\n\nexport function move(state, e) {\n  const relY = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n  const rel = relY / state.size;\n  const v = state.scale.normInvert(rel);\n  state.current = Math.max(Math.min(v, state.active.limitHigh), state.active.limitLow);\n}\n\nexport function moveArea(state, e) {\n  const rel = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n\n  state.current = Math.max(Math.min(rel, state.active.limitHigh), state.active.limitLow);\n}\n","import { nodes, getMoveDelta } from './brush-range-node-builder';\nimport { start, end, move } from './brush-range-interaction';\nimport linear from '../../../core/scales/linear';\nimport { scaleWithSize } from '../../../core/scales';\nimport brushFactory from '../../../core/brush';\nimport { TARGET_SIZE, VERTICAL, HORIZONTAL } from './brush-range-const';\nimport { pointsToRect, rectToPoints } from '../../../core/geometry/util';\n\nfunction render(state) {\n  state.renderer.render(nodes(state));\n}\n\nfunction ranges(state, brush) {\n  if (!brush || !brush.isActive()) {\n    return [];\n  }\n\n  const sourceData = state.scale.data();\n  const sourceFields = sourceData ? sourceData.fields || [] : [];\n  const sources = sourceFields.map((field) => field.id());\n  const rangeBrush = brush.brushes().filter((f) => f.type === 'range' && sources.indexOf(f.id) !== -1)[0];\n\n  if (!rangeBrush) {\n    return [];\n  }\n\n  return rangeBrush.brush.ranges();\n}\n\nfunction setRanges(state) {\n  let rs = state.ranges.map((r) => ({ min: r.min, max: r.max }));\n  if (state.active.idx !== -1) {\n    if (state.active.mode === 'modify') {\n      rs[state.active.idx].min = Math.min(state.start, state.current);\n      rs[state.active.idx].max = Math.max(state.start, state.current);\n    } else {\n      const delta = getMoveDelta(state);\n      rs[state.active.idx].min += delta;\n      rs[state.active.idx].max += delta;\n    }\n  } else {\n    rs.push({\n      min: Math.min(state.start, state.current),\n      max: Math.max(state.start, state.current),\n    });\n  }\n\n  const scaleData = state.scale.data();\n  if (scaleData && scaleData.fields) {\n    scaleData.fields.forEach((field) => {\n      if (state.fauxBrushInstance) {\n        let ordRS = ranges(state, state.fauxBrushInstance);\n        let oldValues = state.findValues(ordRS);\n        let values = state.findValues(rs);\n\n        let addedValues = values.filter((v) => oldValues.indexOf(v) === -1);\n        let removedValues = oldValues.filter((v) => values.indexOf(v) === -1);\n\n        let addItems = addedValues.map((v) => ({ key: field.id(), value: v }));\n        let removeItems = removedValues.map((v) => ({ key: field.id(), value: v }));\n\n        state.brushInstance.addAndRemoveValues(addItems, removeItems);\n\n        state.fauxBrushInstance.setRange(field.id(), rs);\n      } else {\n        state.brushInstance.setRange(field.id(), rs);\n      }\n    });\n  }\n}\n\nfunction setEditedRanges(state, idx, startValue, endValue) {\n  let rs = state.ranges.map((r) => ({ min: r.min, max: r.max }));\n  const limitMin = state.scale.min();\n  const limitMax = state.scale.max();\n  rs[idx] = {\n    min: Math.max(limitMin, Math.min(startValue, endValue)),\n    max: Math.min(limitMax, Math.max(startValue, endValue)),\n  };\n  state.ranges[idx] = { ...rs[idx] };\n\n  const scaleData = state.scale.data();\n  if (scaleData && scaleData.fields) {\n    scaleData.fields.forEach((field) => {\n      if (!state.fauxBrushInstance) {\n        state.brushInstance.setRange(field.id(), rs);\n      }\n    });\n  }\n}\n\nfunction findClosest(value, scale) {\n  let name;\n  let minDist = Infinity;\n  const domain = scale.domain();\n  const halfBandwidth = scale.bandwidth() / 2;\n  for (let i = 0; i < domain.length; ++i) {\n    const d = Math.abs(value - halfBandwidth - scale(domain[i]));\n    if (d < minDist) {\n      minDist = d;\n      name = domain[i];\n    }\n  }\n  return name;\n}\n\nfunction findClosestLabel(value, scale) {\n  const ticks = scale.ticks();\n  const idx = scale.domain().indexOf(findClosest(value, scale));\n  return idx !== -1 ? ticks[idx].label : '-';\n}\n\nfunction rangesOverlap(r1, r2) {\n  return Math.min(...r1) <= Math.max(...r2) && Math.max(...r1) >= Math.min(...r2);\n}\n\nfunction findValues(rangesValues, scale) {\n  const domain = scale.domain();\n  const scaleRange = scale.range();\n  const values = [];\n  rangesValues.forEach((range) => {\n    if (!rangesOverlap(scaleRange, [range.min, range.max])) {\n      return;\n    }\n    const startIdx = domain.indexOf(findClosest(range.min, scale));\n    const endIdx = domain.indexOf(findClosest(range.max, scale));\n    values.push.apply(\n      values,\n      domain.slice(Math.min(startIdx, endIdx), Math.max(startIdx, endIdx) + 1)\n    ); /* eslint prefer-spread:0 */\n  });\n\n  return values;\n}\n\nfunction resolveNodeBounds(targetNodes) {\n  const points = targetNodes.reduce((ary, node) => {\n    ary.push(...rectToPoints(node.bounds));\n    return ary;\n  }, []);\n  return pointsToRect(points);\n}\n\nfunction resolveTarget(ctx) {\n  const resolved = {\n    targetRect: null,\n    targetFillRect: null,\n    scale: null,\n    size: null,\n  };\n  const stngs = ctx.settings.settings;\n  const targets =\n    stngs.target &&\n    (stngs.target.components || (stngs.target.component ? [stngs.target.component] : []))\n      .map((c) => ctx.chart.component(c))\n      .filter((c) => !!c && !!c.rect);\n  const targetNodes = stngs.target && stngs.target.selector ? ctx.chart.findShapes(stngs.target.selector) : [];\n  const targetFillNodes =\n    stngs.target && stngs.target.fillSelector ? ctx.chart.findShapes(stngs.target.fillSelector) : [];\n  if (targetNodes.length > 0) {\n    const bounds = resolveNodeBounds(targetNodes);\n    resolved.size = bounds[ctx.state.direction === VERTICAL ? 'height' : 'width'];\n    resolved.scale = scaleWithSize(ctx.chart.scale(stngs.scale), resolved.size);\n    resolved.targetRect = bounds;\n    if (targetFillNodes.length > 0) {\n      const fillBounds = resolveNodeBounds(targetFillNodes);\n      resolved.targetFillRect = fillBounds;\n    }\n  } else if (targets && targets.length > 0) {\n    const targetRect = targets.slice(1).reduce(\n      (prev, curr) => ({\n        x0: Math.min(prev.x0, curr.rect.computedInner.x),\n        y0: Math.min(prev.y0, curr.rect.computedInner.y),\n        x1: Math.max(prev.x1, curr.rect.computedInner.x + curr.rect.computedInner.width),\n        y1: Math.max(prev.y1, curr.rect.computedInner.y + curr.rect.computedInner.height),\n      }),\n      {\n        x0: targets[0].rect.computedInner.x,\n        y0: targets[0].rect.computedInner.y,\n        x1: targets[0].rect.computedInner.x + targets[0].rect.computedInner.width,\n        y1: targets[0].rect.computedInner.y + targets[0].rect.computedInner.height,\n      }\n    );\n\n    resolved.targetRect = {\n      x: targetRect.x0 - ctx.state.rect.x,\n      y: targetRect.y0 - ctx.state.rect.y,\n      width: targetRect.x1 - targetRect.x0,\n      height: targetRect.y1 - targetRect.y0,\n    };\n  }\n\n  return resolved;\n}\n\n/**\n * @typedef {object} component--brush-range-settings\n * @property {string|object} brush - Brush context to apply changes to\n * @property {string} scale - Scale to extract data from\n * @property {string} [direction=vertical] - Rendering direction [horizontal|vertical]\n * @property {object} [bubbles]\n * @property {boolean} [bubbles.show=true] - True to show label bubble, false otherwise\n * @property {string} [bubbles.align=start] - Where to anchor bubble [start|end]\n * @property {function} [bubbles.label] - Callback function for the labels\n * @property {object} [target]\n * @property {string} [target.component] - Render matching overlay on target component. @deprecated Use `components` instead\n * @property {string[]} [target.components] - Render matching overlay on target components\n * @property {string} [target.selector] - Instead of targeting a component, target one or more shapes\n * @property {string} [target.fillSelector] - Target a subset of the selector as fill area. Only applicable if `selector` property is set\n */\n\n/**\n * @typedef {object} component--brush-range-style\n * @property {object} [bubble]\n * @property {string} [bubble.fontSize]\n * @property {string} [bubble.fontFamily]\n * @property {string} [bubble.fill]\n * @property {string} [bubble.color]\n * @property {string} [bubble.stroke]\n * @property {number} [bubble.strokeWidth]\n * @property {number} [bubble.borderRadius]\n * @property {object} [line]\n * @property {string} [line.stroke]\n * @property {number} [line.strokeWidth]\n * @property {object} [target]\n * @property {string} [target.fill]\n * @property {number} [target.strokeWidth]\n * @property {number} [target.opacity]\n */\n\nconst brushRangeComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {\n      bubbles: {\n        show: true,\n        align: 'start',\n      },\n    },\n    style: {\n      bubble: '$label-overlay',\n      line: '$shape-guide--inverted',\n      target: '$selection-area-target',\n    },\n  },\n  renderer: 'dom',\n  on: {\n    rangeStart(e) {\n      this.start(e);\n    },\n    rangeMove(e) {\n      this.move(e);\n    },\n    rangeEnd(e) {\n      this.end(e);\n    },\n    rangeClear(e) {\n      this.clear(e);\n    },\n    bubbleStart(e) {\n      this.bubbleStart(e);\n    },\n  },\n  created() {\n    this.state = {\n      key: this.settings.key || 'brush-range',\n    };\n  },\n  beforeRender(opts) {\n    this.state.rect = opts.size.computedInner;\n  },\n  renderRanges() {\n    if (!this.state.started) {\n      this.state.ranges = ranges(this.state, this.state.brushInstance);\n      this.state.active = null;\n      render(this.state);\n    }\n  },\n  render(h) {\n    const stngs = this.settings.settings;\n    this.state.direction = stngs.direction === 'vertical' ? VERTICAL : HORIZONTAL;\n    const offset = this.renderer.element().getBoundingClientRect();\n    const size = this.state.rect[this.state.direction === VERTICAL ? 'height' : 'width'];\n    let scale = scaleWithSize(this.chart.scale(stngs.scale), size);\n\n    const target = resolveTarget(this);\n    scale = target.scale ? target.scale : scale;\n    this.state.targetRect = target.targetRect;\n    this.state.targetFillRect = target.targetFillRect;\n    this.state.size = target.size === null ? size : target.size;\n\n    this.state.settings = stngs;\n    this.state.style = this.style;\n    this.state.offset = offset;\n    this.state.brush = typeof stngs.brush === 'object' ? stngs.brush.context : stngs.brush;\n    this.state.brushInstance = this.chart.brush(this.state.brush);\n    this.state.renderer = this.renderer;\n    this.state.multi = !!stngs.multiple;\n    this.state.h = h;\n    this.state.onEditConfirmed = (rangeIdx, value, otherValue) => {\n      this.state.edit = null;\n      setEditedRanges(this.state, rangeIdx, value, otherValue);\n      this.emit('bubbleEnd');\n      render(this.state);\n    };\n    this.state.onEditCanceled = () => {\n      this.state.edit = null;\n      render(this.state);\n    };\n    this.state.cssCoord = {\n      offset: this.state.direction === VERTICAL ? 'top' : 'left',\n      coord: this.state.direction === VERTICAL ? 'y' : 'x',\n      pos: this.state.direction === VERTICAL ? 'deltaY' : 'deltaX',\n    };\n    this.state.format =\n      typeof stngs.bubbles.label === 'function'\n        ? (v, r) =>\n            stngs.bubbles.label.call(undefined, {\n              datum: v,\n              data: r,\n              scale,\n              resources: {\n                scale: this.chart.scale,\n                formatter: this.chart.formatter,\n              },\n            })\n        : false;\n\n    if (!{}.hasOwnProperty.call(scale, 'norm')) {\n      // Non-linear scale if norm method is unavailable\n      this.state.editable = false;\n      this.state.scale = linear();\n      this.state.scale.data = scale.data;\n      if (!this.state.format) {\n        this.state.format = (v, r) => {\n          if (!rangesOverlap(scale.range(), r)) {\n            return '-';\n          }\n          return findClosestLabel(v, scale);\n        };\n      }\n      this.state.fauxBrushInstance = brushFactory();\n      this.state.findValues = (valueRanges) => findValues(valueRanges, scale);\n    } else {\n      this.state.editable = true;\n      this.state.observeBrush = typeof stngs.brush === 'object' ? stngs.brush.observe : false;\n      this.state.fauxBrushInstance = null;\n      this.state.findValues = null;\n      this.state.scale = scale;\n      const scaleData = this.state.scale.data();\n      if (!this.state.format && scaleData && scaleData.fields && scaleData.fields[0]) {\n        this.state.format = scaleData.fields[0].formatter();\n      }\n    }\n\n    this.state.ranges = ranges(this.state, this.state.brushInstance);\n\n    return this.state.observeBrush || this.state.sourcedFromThisComponent ? [nodes(this.state)] : [];\n  },\n  mounted() {\n    if (this.state.observeBrush && this.state.brushInstance) {\n      this.state.brushInstance.on('update', this.renderRanges);\n    }\n  },\n  beforeDestroy() {\n    if (this.state.observeBrush && this.state.brushInstance) {\n      this.state.brushInstance.removeListener('update', this.renderRanges);\n    }\n  },\n  start(e) {\n    start({\n      e,\n      state: this.state,\n      renderer: this.renderer,\n      ranges,\n      targetSize: TARGET_SIZE,\n    });\n  },\n  end() {\n    if (!this.state.started) {\n      return;\n    }\n    end(this.state, ranges);\n    render(this.state);\n    this.state.sourcedFromThisComponent = true;\n    this.state.active = null;\n  },\n  move(e) {\n    if (!this.state.started) {\n      return;\n    }\n    move(this.state, e);\n    setRanges(this.state);\n    render(this.state);\n  },\n  clear() {\n    if (this.state.fauxBrushInstance) {\n      this.state.fauxBrushInstance.clear();\n    }\n    this.state.renderer.render([]);\n    this.state.started = false;\n    this.state.active = null;\n    this.state.sourcedFromThisComponent = false;\n  },\n  bubbleStart(e) {\n    if (!this.state.editable) {\n      return;\n    }\n    const ee = e.srcEvent || e;\n\n    const target = ee.target;\n    const ed = {\n      rangeIdx: parseInt(target.getAttribute('data-idx'), 10),\n      bubbleIdx: parseInt(target.getAttribute('data-bidx'), 10),\n    };\n    if (isNaN(ed.rangeIdx) || JSON.stringify(ed) === JSON.stringify(this.state.edit)) {\n      return;\n    }\n    this.state.edit = ed;\n\n    ee.stopPropagation();\n    ee.stopImmediatePropagation();\n    ee.preventDefault();\n\n    const wrapper = target.parentNode;\n\n    render(this.state);\n    const inputEl = wrapper.querySelector('input');\n    inputEl.focus();\n    inputEl.select();\n  },\n};\n\nexport default brushRangeComponent;\n","import { getMoveDelta, nodes } from './brush-range-node-builder';\nimport { startArea, moveArea, endArea } from './brush-range-interaction';\nimport rangeCollection from '../../../core/brush/range-collection';\nimport { TARGET_SIZE, VERTICAL, HORIZONTAL } from './brush-range-const';\n\nfunction render(state) {\n  state.renderer.render(nodes(state));\n}\n\nfunction ranges(state) {\n  return state.rc.ranges();\n}\n\nfunction shapesFromRange(state, brushRange) {\n  const shapeAt = {\n    x: state.direction ? brushRange.min + state.rect.x : state.rect.x,\n    y: state.direction ? state.rect.y : brushRange.min + state.rect.y,\n    width: state.direction ? brushRange.max - brushRange.min : state.rect.width + state.rect.x,\n    height: state.direction ? state.rect.height + state.rect.y : brushRange.max - brushRange.min,\n  };\n  return state.chart.shapesAt(shapeAt, state.settings.brush);\n}\n\nfunction brushFromShape(state, newShapes) {\n  state.chart.brushFromShapes(newShapes, state.settings.brush);\n}\n\nfunction setRanges(state) {\n  const rs = state.ranges.map((r) => ({ min: r.min, max: r.max }));\n\n  if (state.active.idx !== -1) {\n    if (state.active.mode === 'modify') {\n      rs[state.active.idx].min = Math.min(state.start, state.current);\n      rs[state.active.idx].max = Math.max(state.start, state.current);\n    } else {\n      const delta = getMoveDelta(state);\n      rs[state.active.idx].min = state.active.start + delta;\n      rs[state.active.idx].max = state.active.end + delta;\n    }\n  } else {\n    rs.push({\n      min: Math.min(state.start, state.current),\n      max: Math.max(state.start, state.current),\n    });\n  }\n\n  state.rc.set(rs);\n\n  const shapes = [];\n  rs.forEach((range) => {\n    shapes.push(...shapesFromRange(state, range));\n  });\n\n  brushFromShape(state, shapes);\n}\n\nfunction getBubbleLabel(state, value, range) {\n  const min = Math.min(...range);\n  const max = Math.max(...range);\n  const shapeAt = {\n    x: state.direction ? min + state.rect.x : state.rect.x,\n    y: state.direction ? state.rect.y : min + state.rect.y,\n    width: state.direction ? max - min : state.rect.width + state.rect.x,\n    height: state.direction ? state.rect.height + state.rect.y : max - min,\n  };\n\n  const shapes = state.chart.shapesAt(shapeAt, state.settings.brush);\n\n  if (shapes.length === 0) {\n    return '-';\n  }\n\n  const labelShape = shapes.reduce((s0, s1) => {\n    // Min value\n    const bounds0 = s0.bounds;\n    const bounds1 = s1.bounds;\n\n    if (value === min) {\n      if (bounds0[state.cssCoord.coord] <= bounds1[state.cssCoord.coord]) {\n        return s0;\n      }\n      return s1;\n    }\n\n    // Max value\n    if (\n      bounds0[state.cssCoord.coord] + bounds0[state.cssCoord.area] >=\n      bounds1[state.cssCoord.coord] + bounds1[state.cssCoord.area]\n    ) {\n      return s0;\n    }\n    return s1;\n  });\n\n  const compConfig = state.settings.brush.components.reduce((c0, c1) => (c0.key === labelShape.key ? c0 : c1));\n\n  if (typeof state.settings.bubbles.label === 'function') {\n    return state.settings.bubbles.label(labelShape.data);\n  }\n  if (Array.isArray(compConfig.data) && compConfig.data.length) {\n    return labelShape.data[compConfig.data[0]].label;\n  }\n\n  return labelShape.data && labelShape.data.label ? labelShape.data.label : '-';\n}\n\n/**\n * @typedef {object} component--brush-area-dir-settings\n * @property {object} brush\n * @property {array} brush.components\n * @property {object} brush.components[].key - Component key\n * @property {object} brush.components[].contexts[] - Brush context to apply changes to\n * @property {object} [brush.components[].data] - Data reference\n * @property {object} [brush.components[].action] - Type of brush action\n * @property {string} [direction=vertical] - Rendering direction [horizontal|vertical]\n * @property {object} [bubbles]\n * @property {boolean} [bubbles.show=true] - True to show label bubble, false otherwise\n * @property {string} [bubbles.align=start] - Where to anchor bubble [start|end]\n * @property {function} [bubbles.label] - Callback function for the labels\n * @property {object} [target]\n * @property {string} [target.component] - Render matching overlay on target component. @deprecated Use `components` instead\n * @property {string[]} [target.components] - Render matching overlay on target components\n */\n\n/**\n * @typedef {object} component--brush-area-dir-style\n * @property {object} [bubble]\n * @property {string} [bubble.fontSize]\n * @property {string} [bubble.fontFamily]\n * @property {string} [bubble.fill]\n * @property {string} [bubble.color]\n * @property {string} [bubble.stroke]\n * @property {number} [bubble.strokeWidth]\n * @property {number} [bubble.borderRadius]\n * @property {object} [line]\n * @property {string} [line.stroke]\n * @property {number} [line.strokeWidth]\n * @property {object} [target]\n * @property {string} [target.fill]\n * @property {number} [target.strokeWidth]\n * @property {number} [target.opacity]\n */\n\nconst brushAreaDirectionalComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {\n      bubbles: {\n        show: true,\n        align: 'start',\n      },\n    },\n    style: {\n      bubble: '$label-overlay',\n      line: '$shape-guide--inverted',\n      target: '$selection-area-target',\n    },\n  },\n  renderer: 'dom',\n  on: {\n    areaStart(e) {\n      this.start(e);\n    },\n    areaMove(e) {\n      this.move(e);\n    },\n    areaEnd(e) {\n      this.end(e);\n    },\n    areaClear(e) {\n      this.clear(e);\n    },\n  },\n  created() {\n    this.state = {\n      key: this.settings.key || 'brush-area-dir',\n    };\n  },\n  render(h) {\n    this.state.rect = this.rect;\n\n    const stngs = this.settings.settings;\n    const direction = stngs.direction === 'vertical' ? VERTICAL : HORIZONTAL;\n    const size = this.state.rect[direction === VERTICAL ? 'height' : 'width'];\n    const offset = this.renderer.element().getBoundingClientRect();\n\n    const targets = (stngs.target ? stngs.target.components || [stngs.target.component] : [])\n      .map((c) => this.chart.component(c))\n      .filter((c) => !!c && !!c.rect);\n\n    const targetRect = targets[0]\n      ? targets.slice(1).reduce(\n          (prev, curr) => ({\n            x0: Math.min(prev.x0, curr.rect.x),\n            y0: Math.min(prev.y0, curr.rect.y),\n            x1: Math.max(prev.x1, curr.rect.x + curr.rect.width),\n            y1: Math.max(prev.y1, curr.rect.y + curr.rect.height),\n          }),\n          {\n            x0: targets[0].rect.x,\n            y0: targets[0].rect.y,\n            x1: targets[0].rect.x + targets[0].rect.width,\n            y1: targets[0].rect.y + targets[0].rect.height,\n          }\n        )\n      : null;\n\n    this.state.targetRect = targetRect\n      ? {\n          x: targetRect.x0 - this.rect.x,\n          y: targetRect.y0 - this.rect.y,\n          width: targetRect.x1 - targetRect.x0,\n          height: targetRect.y1 - targetRect.y0,\n        }\n      : null;\n\n    this.state.style = this.style;\n    this.state.chart = this.chart;\n    this.state.direction = direction;\n    this.state.settings = stngs;\n    this.state.offset = offset;\n    this.state.rc = rangeCollection();\n    this.state.renderer = this.renderer;\n    this.state.multi = !!stngs.multiple;\n    this.state.h = h;\n    this.state.size = size;\n    this.state.cssCoord = {\n      offset: this.state.direction === VERTICAL ? 'top' : 'left',\n      coord: this.state.direction === VERTICAL ? 'y' : 'x',\n      pos: this.state.direction === VERTICAL ? 'deltaY' : 'deltaX',\n      area: this.state.direction === VERTICAL ? 'height' : 'width',\n    };\n\n    this.state.format = function getFormat(v, r) {\n      return getBubbleLabel(this, v, r);\n    };\n\n    return [];\n  },\n  start(e) {\n    startArea({\n      e,\n      state: this.state,\n      renderer: this.renderer,\n      ranges,\n      targetSize: TARGET_SIZE,\n    });\n  },\n  end() {\n    if (!this.state.started) {\n      return;\n    }\n    endArea(this.state, ranges);\n    render(this.state);\n  },\n  move(e) {\n    if (!this.state.started) {\n      return;\n    }\n    moveArea(this.state, e);\n    setRanges(this.state);\n    render(this.state);\n  },\n  clear() {\n    if (this.state.rc) {\n      this.state.rc.clear();\n    }\n    this.state.renderer.render([]);\n  },\n};\n\nexport default brushAreaDirectionalComponent;\n","import rangeBrushComponent from './brush-range';\nimport brushAreaDirectionalComponent from './brush-area-dir';\n\nexport default function rangeBrush(picasso) {\n  picasso.component('brush-range', rangeBrushComponent);\n  picasso.component('brush-area-dir', brushAreaDirectionalComponent);\n}\n","import { scaleWithSize } from '../../scales';\n\nconst FILL = '#ccc';\nconst OPACITY = 1;\n\nfunction ranges(state) {\n  const brush = state.brush;\n  if (!brush || !brush.isActive()) {\n    return [];\n  }\n\n  const sourceData = state.scale.data();\n  const sourceFields = sourceData ? sourceData.fields || [] : [];\n  const sources = sourceFields.map((field) => field.id());\n  const rangeBrush = brush.brushes().filter((f) => f.type === 'range' && sources.indexOf(f.id) !== -1)[0];\n\n  if (!rangeBrush) {\n    return [];\n  }\n\n  return rangeBrush.brush.ranges();\n}\n\nfunction shapes(state) {\n  const isVertical = state.direction === 'vertical';\n  const size = state.rect[isVertical ? 'height' : 'width'];\n  const otherSize = state.rect[isVertical ? 'width' : 'height'];\n  return ranges(state).map((range) => {\n    const start = state.scale(range.min) * size;\n    const end = state.scale(range.max) * size;\n    const low = Math.min(start, end);\n    const s = Math.abs(start - end);\n    return {\n      type: 'rect',\n      fill: state.fill,\n      opacity: state.opacity,\n      x: isVertical ? 0 : low,\n      width: isVertical ? otherSize : s,\n      y: isVertical ? low : 0,\n      height: isVertical ? s : otherSize,\n    };\n  });\n}\n\nfunction onStart(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction onUpdate(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction onEnd(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction setup(state, brush, scale, renderer) {\n  state.brush = brush;\n\n  if (!brush) {\n    return;\n  }\n\n  function start() {\n    onStart(state);\n  }\n\n  function update() {\n    onUpdate(state);\n  }\n\n  function end() {\n    onEnd(state);\n  }\n\n  brush.on('start', start);\n  brush.on('update', update);\n  brush.on('end', end);\n\n  state.start = start;\n  state.update = update;\n  state.end = end;\n  state.brush = brush;\n  state.scale = scale;\n  state.renderer = renderer;\n}\n\nfunction teardown(state) {\n  if (state.brush) {\n    state.brush.removeListener('start', state.start);\n    state.brush.removeListener('update', state.update);\n    state.brush.removeListener('end', state.end);\n  }\n\n  state.start = undefined;\n  state.update = undefined;\n  state.end = undefined;\n  state.brush = undefined;\n  state.scale = undefined;\n  state.renderer = undefined;\n}\n\n/**\n * @typedef {object} component--range\n */\n\n/**\n * @typedef {object} component--range.settings\n * @property {string} brush - Name of brush instance\n * @property {string} scale - Name of a scale\n * @property {string} [direction='horizontal'] - Direction of the brush\n * @property {string} [fill='#ccc'] - Fill color\n * @property {number} [opacity=1] - Layer opacity\n */\n\nconst rangeComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {},\n  },\n  preferredSize: () => 50,\n  created() {\n    this.state = {};\n  },\n  render() {\n    const stngs = this.settings.settings;\n    const brush = this.chart.brush(stngs.brush);\n    const direction = stngs.direction || 'horizontal';\n    const distance = direction === 'horizontal' ? this.rect.width : this.rect.height;\n    const scale = scaleWithSize(this.chart.scale(stngs.scale), distance);\n\n    teardown(this.state);\n    setup(this.state, brush, scale, this.renderer);\n\n    this.state.rect = this.rect;\n    this.state.fill = stngs.fill || FILL;\n    this.state.opacity = typeof stngs.opacity !== 'undefined' ? stngs.opacity : OPACITY;\n    this.state.direction = direction;\n\n    return shapes(this.state);\n  },\n  beforeDestroy() {\n    teardown(this.state);\n  },\n};\n\nexport default rangeComponent;\n","import rangeBrushComponent from './range';\n\nexport default function rangeBrush(picasso) {\n  picasso.component('range', rangeBrushComponent);\n}\n","import { sqrDistance } from '../../math/vector';\n\nfunction getPoint(rendererBounds, event) {\n  const eventOffsetX = event.center.x;\n  const eventOffsetY = event.center.y;\n  return {\n    x: eventOffsetX - rendererBounds.left,\n    y: eventOffsetY - rendererBounds.top,\n  };\n  // return {\n  //   x: Math.min(Math.max(eventOffsetX - rendererBounds.left, 0), rendererBounds.width),\n  //   y: Math.min(Math.max(eventOffsetY - rendererBounds.top, 0), rendererBounds.height)\n  // };\n}\n\nfunction withinThreshold(p, state, settings) {\n  const startPoint = state.points[0];\n  const sqrDist = sqrDistance(p, startPoint);\n  return sqrDist < Math.pow(settings.settings.snapIndicator.threshold, 2);\n}\n\nfunction appendToPath(state, p) {\n  if (state.path.d == null) {\n    state.path.d = `M${p.x} ${p.y} `;\n  } else {\n    state.path.d += `L${p.x} ${p.y} `;\n  }\n  state.points.push(p);\n}\n\nfunction render(state, renderer) {\n  const nodes = [state.startPoint, state.path, state.snapIndicator].filter((node) => node.visible);\n\n  renderer.render(nodes);\n}\n\nfunction setSnapIndictor({ state, start = null, end = null }) {\n  if (start !== null) {\n    state.snapIndicator.x1 = start.x;\n    state.snapIndicator.y1 = start.y;\n  }\n  if (end !== null) {\n    state.snapIndicator.x2 = end.x;\n    state.snapIndicator.y2 = end.y;\n  }\n}\n\nfunction showSnapIndicator(state, show) {\n  state.snapIndicator.visible = show;\n}\n\nfunction setStartPoint(state, p) {\n  state.startPoint.cx = p.x;\n  state.startPoint.cy = p.y;\n}\n\nfunction getComponentDelta(chart, rendererBounds) {\n  const chartBounds = chart.element.getBoundingClientRect();\n  return {\n    x: rendererBounds.left - chartBounds.left,\n    y: rendererBounds.top - chartBounds.top,\n  };\n}\n\nfunction doLineBrush(state, chart) {\n  if (state.active) {\n    const p1 = state.points[state.points.length - 2];\n    const p2 = state.points[state.points.length - 1];\n    state.lineBrushShape.x1 = p1.x + state.componentDelta.x;\n    state.lineBrushShape.y1 = p1.y + state.componentDelta.y;\n    state.lineBrushShape.x2 = p2.x + state.componentDelta.x;\n    state.lineBrushShape.y2 = p2.y + state.componentDelta.y;\n\n    const shapes = chart.shapesAt(state.lineBrushShape, { components: state.brushConfig });\n    chart.brushFromShapes(shapes, { components: state.brushConfig });\n  }\n}\n\nfunction doPolygonBrush(state, chart) {\n  if (state.active) {\n    const dx = state.componentDelta.x;\n    const dy = state.componentDelta.y;\n    const vertices = state.points.map((p) => ({\n      x: p.x + dx,\n      y: p.y + dy,\n    }));\n\n    const shapes = chart.shapesAt({ vertices }, { components: state.brushConfig });\n    chart.brushFromShapes(shapes, { components: state.brushConfig });\n  }\n}\n\nfunction initPath(stgns) {\n  return {\n    visible: true,\n    type: 'path',\n    d: null,\n    fill: stgns.fill,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    opacity: stgns.opacity,\n    strokeDasharray: stgns.strokeDasharray,\n    collider: {\n      type: null,\n    },\n  };\n}\n\nfunction initSnapIndicator(stgns) {\n  return {\n    visible: false,\n    type: 'line',\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    strokeDasharray: stgns.strokeDasharray,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    opacity: stgns.opacity,\n    collider: {\n      type: null,\n    },\n  };\n}\n\nfunction initStartPoint(stgns) {\n  return {\n    visible: true,\n    type: 'circle',\n    cx: 0,\n    cy: 0,\n    r: stgns.r,\n    fill: stgns.fill,\n    opacity: stgns.opacity,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    collider: {\n      type: null,\n    },\n  };\n}\n\nfunction getBrushConfig(settings) {\n  return settings.settings.brush.components.map((b) => ({\n    key: b.key,\n    contexts: b.contexts || ['lassoBrush'],\n    data: b.data || [''],\n    action: b.action || 'add',\n  }));\n}\n\nfunction endBrush(state, chart) {\n  state.brushConfig.forEach((config) => {\n    config.contexts.forEach((context) => {\n      chart.brush(context).end();\n    });\n  });\n}\n\nfunction resetState() {\n  return {\n    points: [],\n    active: false,\n    path: null,\n    snapIndicator: null,\n    startPoint: null,\n    rendererBounds: null,\n    componentDelta: null,\n    brushConfig: null,\n    lineBrushShape: {\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 0,\n    }, // Keep a single shape instance to avoid instantiating a new object on each lookup\n  };\n}\n\n/**\n * @typedef {object} component--brush-lasso\n */\n\n/**\n * @typedef {object} component--brush-lasso-settings\n * @property {object} [lasso] - Lasso style settings\n * @property {string} [lasso.fill='transparent']\n * @property {string} [lasso.stroke='black']\n * @property {number} [lasso.strokeWidth=2]\n * @property {number} [lasso.opacity=0.7]\n * @property {number} [lasso.strokeDasharray]\n * @property {object} [snapIndicator] - Snap indicator settings\n * @property {number} [snapIndicator.threshold=75] - The distance in pixel to show the snap indicator, if less then threshold the indicator is dispalyed\n * @property {string} [snapIndicator.strokeDasharray='5, 5']\n * @property {string} [snapIndicator.stroke='black']\n * @property {number} [snapIndicator.strokeWidth=2]\n * @property {number} [snapIndicator.opacity=0.5]\n * @property {object} [startPoint] - Start point style settings\n * @property {number} [startPoint.r=10] - Circle radius\n * @property {string} [startPoint.stroke='green']\n * @property {number} [startPoint.strokeWidth=1]\n * @property {number} [startPoint.opacity=1]\n * @property {object} [brush]\n * @property {object[]} brush.components - Array of components to brush on.\n * @property {string} [brush.components[].component.key] - Component key\n * @property {string[]} [brush.components[].component.contexts=['brushLasso']] - Name of the brushing contexts to affect\n * @property {string[]} [brush.components[].component.data=['']] - The mapped data properties to add to the brush\n * @property {string} [brush.components[].component.action='add'] - Type of action to respond with\n */\n\nconst brushLassoComponent = {\n  require: ['chart', 'renderer', 'settings'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n    },\n    settings: {\n      brush: {\n        components: [],\n      },\n      snapIndicator: {\n        threshold: 75,\n        strokeDasharray: '5, 5',\n        stroke: 'black',\n        strokeWidth: 2,\n        opacity: 0.5,\n      },\n      lasso: {\n        fill: 'transparent',\n        stroke: 'black',\n        strokeWidth: 2,\n        opacity: 0.7,\n        strokeDasharray: '20, 10',\n      },\n      startPoint: {\n        r: 10,\n        fill: 'green',\n        stroke: 'black',\n        strokeWidth: 1,\n        opacity: 1,\n      },\n    },\n  },\n  on: {\n    lassoStart(e) {\n      this.start(e);\n    },\n    lassoEnd(e) {\n      this.end(e);\n    },\n    lassoMove(e) {\n      this.move(e);\n    },\n    lassoCancel() {\n      this.cancel();\n    },\n  },\n  created() {\n    this.state = resetState();\n  },\n  start(e) {\n    this.state.active = true;\n    this.state.path = initPath(this.settings.settings.lasso);\n    this.state.snapIndicator = initSnapIndicator(this.settings.settings.snapIndicator);\n    this.state.startPoint = initStartPoint(this.settings.settings.startPoint);\n    this.state.rendererBounds = this.renderer.element().getBoundingClientRect();\n    this.state.componentDelta = getComponentDelta(this.chart, this.state.rendererBounds);\n    this.state.brushConfig = getBrushConfig(this.settings);\n\n    const p = getPoint(this.state.rendererBounds, e);\n\n    appendToPath(this.state, p);\n    setSnapIndictor({ state: this.state, start: p });\n    setStartPoint(this.state, p);\n  },\n  move(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    const p = getPoint(this.state.rendererBounds, e);\n\n    if (withinThreshold(p, this.state, this.settings)) {\n      showSnapIndicator(this.state, true);\n    } else {\n      showSnapIndicator(this.state, false);\n    }\n\n    appendToPath(this.state, p);\n    setSnapIndictor({ state: this.state, end: p });\n    render(this.state, this.renderer);\n\n    doLineBrush(this.state, this.chart);\n  },\n  end(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    showSnapIndicator(this.state, false);\n    const p = getPoint(this.state.rendererBounds, e);\n    const shouldSnap = withinThreshold(p, this.state, this.settings);\n\n    if (shouldSnap) {\n      doPolygonBrush(this.state, this.chart);\n    }\n\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  cancel() {\n    if (!this.state.active) {\n      return;\n    }\n    endBrush(this.state, this.chart);\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  render() {\n    // Do nothing\n  },\n};\n\nexport default brushLassoComponent;\n","import lassoBrushComponent from './brush-lasso';\n\nexport default function lassoBrush(picasso) {\n  picasso.component('brush-lasso', lassoBrushComponent);\n}\n","import { testRectRect } from '../../../math/narrow-phase-collision';\n\n/**\n * Using the basic example found here: https://en.wikipedia.org/wiki/Binary_search_algorithm\n *\n * Finds the first node that may intersect the label.\n * @private\n */\nexport function binaryLeftSearch(labelBounds, ary, coord, side, extractBounds) {\n  let left = 0;\n  let right = ary.length - 1;\n  let bounds;\n\n  while (left < right) {\n    let m = Math.floor((left + right) / 2);\n    bounds = extractBounds(ary[m]);\n    if (bounds[coord] + bounds[side] < labelBounds[coord]) {\n      // label is on right side\n      left = m + 1;\n    } else {\n      // label is on the left side\n      right = m;\n    }\n  }\n\n  return left;\n}\n\n/**\n * The purpose of this module is to act as a filtering function to remove any labels\n * that meets one of the following criterias:\n * -- The label is not fully inside the container, such that it would be fully or partially clipped if rendered\n * -- The label overlaps another label\n * -- The label overlaps another bar which is not the bar the label is originating from\n *\n * Assumes that the nodes are sorted from left/top to right/down, as that allows\n * some optimizations to be performed.\n * @private\n * @returns {function} Filter function, returns false if label be removed and true otherwise\n */\nexport default function filterOverlappingLabels(\n  { orientation, targetNodes, labels, container },\n  findLeft = binaryLeftSearch\n) {\n  const renderLabels = [];\n  const coord = orientation === 'v' ? 'x' : 'y';\n  const side = orientation === 'v' ? 'width' : 'height';\n  const getTextBounds = (item) => item.textBounds;\n  const getNodeBounds = (item) => item.node.localBounds;\n\n  return (doNotUse, labelIndex) => {\n    const { textBounds: labelBounds, node: labelNode } = labels[labelIndex];\n\n    // ### Test if label is not fully inside container based on the orientation ###\n    if (\n      labelBounds[coord] < container[coord] ||\n      labelBounds[coord] + labelBounds[side] > container[coord] + container[side]\n    ) {\n      return false;\n    }\n\n    // ### Test label to label collision ###\n    const leftStartLabel = findLeft(labelBounds, renderLabels, coord, side, getTextBounds);\n    for (let i = leftStartLabel; i < renderLabels.length; i++) {\n      if (testRectRect(labelBounds, renderLabels[i].textBounds)) {\n        return false;\n      }\n    }\n\n    // ### Test label to node collision ###\n    const leftStartNode = findLeft(labelBounds, targetNodes, coord, side, getNodeBounds);\n    const labelRightBoundary = labelBounds[coord] + labelBounds[side];\n    for (let i = leftStartNode; i < targetNodes.length; i++) {\n      const node = targetNodes[i].node;\n      // Do not test beyond this node, as they are assumed to not collide with the label\n      if (labelRightBoundary < node.localBounds[coord]) {\n        break;\n      }\n\n      if (testRectRect(labelBounds, node.localBounds) && labelNode !== node) {\n        return false;\n      }\n    }\n\n    // No collision occured, allow the label to be rendered\n    renderLabels.push(labels[labelIndex]);\n    return true;\n  };\n}\n","import extend from 'extend';\nimport { testRectRect } from '../../../math/narrow-phase-collision';\nimport filterOverlapping from './bars-overlapping-filter';\n\nconst PADDING = 4;\n// const DOUBLE_PADDING = PADDING * 2;\n\nfunction cbContext(node, chart) {\n  return {\n    node,\n    data: node.data,\n    scale: chart.scale,\n    formatter: chart.formatter,\n    dataset: chart.dataset,\n  };\n}\n\nfunction isValidText(text) {\n  const type = typeof text;\n  return (type === 'string' || type === 'number') && text !== '';\n}\n\nfunction toBackground(label) {\n  return {\n    type: 'rect',\n    rx: 2,\n    ry: 2,\n    fill: label.backgroundColor,\n    ...label.backgroundBounds,\n  };\n}\n\nfunction isTextWidthInRectWidth(rect, label, rotate) {\n  return rotate ? rect.width >= label.height : rect.width >= label.width;\n}\n\nfunction isTextHeightInRectHeight(rect, label, rotate) {\n  return rotate ? rect.height >= label.width : rect.height >= label.height;\n}\n\nfunction isGoodPlacement(orientation, rect, label, fitsHorizontally, overflow) {\n  let fitWidth;\n  let fitHeight;\n  if (orientation === 'v') {\n    fitWidth = fitsHorizontally || overflow || isTextWidthInRectWidth(rect, label, true);\n    fitHeight = isTextHeightInRectHeight(rect, label, !fitsHorizontally);\n  } else {\n    fitWidth = isTextWidthInRectWidth(rect, label);\n    fitHeight = overflow || isTextHeightInRectHeight(rect, label, false);\n  }\n  return fitWidth && fitHeight;\n}\n\nexport function isTextInRect(rect, label, opts) {\n  return isTextWidthInRectWidth(rect, label, opts.rotate) && isTextHeightInRectHeight(rect, label, opts.rotate);\n}\n\nexport function placeSegmentInSegment(majorSegmentPosition, majorSegmentSize, minorSegmentSize, align) {\n  const majorSegmentCenter = majorSegmentPosition + majorSegmentSize * 0.5;\n  const offset = (align - 0.5) * (majorSegmentSize - minorSegmentSize);\n  const minorSegmentCenter = majorSegmentCenter + offset;\n  const minorSegmentPosition = minorSegmentCenter - minorSegmentSize * 0.5;\n  return minorSegmentPosition;\n}\n\nexport function placeTextInRect(rect, text, opts) {\n  const label = {\n    type: 'text',\n    text,\n    maxWidth: opts.rotate ? rect.height : rect.width,\n    x: 0,\n    y: rect.y,\n    dx: 0,\n    dy: 0,\n    fill: opts.fill,\n    anchor: opts.rotate ? 'end' : 'start',\n    baseline: 'central',\n    fontSize: `${opts.fontSize}px`,\n    fontFamily: opts.fontFamily,\n  };\n\n  const textMetrics = opts.textMetrics;\n  if (!opts.overflow && !isTextInRect(rect, textMetrics, opts)) {\n    return false;\n  }\n  const baseLineOffset = textMetrics.height * 0.5;\n  if (opts.rotate) {\n    label.x = placeSegmentInSegment(rect.x, rect.width, textMetrics.height, opts.align) + baseLineOffset;\n    label.y = placeSegmentInSegment(rect.y, rect.height, textMetrics.width, opts.justify);\n    label.transform = `rotate(-90, ${label.x + label.dx}, ${label.y + label.dy})`;\n  } else {\n    label.x = placeSegmentInSegment(rect.x, rect.width, textMetrics.width, opts.align);\n    label.y = placeSegmentInSegment(rect.y, rect.height, textMetrics.height, opts.justify) + baseLineOffset;\n  }\n\n  return label;\n}\n\nfunction limitBounds(bounds, view) {\n  const minY = Math.max(0, Math.min(bounds.y, view.height));\n  const maxY = Math.max(0, Math.min(bounds.y + bounds.height, view.height));\n  const minX = Math.max(0, Math.min(bounds.x, view.width));\n  const maxX = Math.max(0, Math.min(bounds.x + bounds.width, view.width));\n  bounds.x = minX;\n  bounds.width = maxX - minX;\n  bounds.y = minY;\n  bounds.height = maxY - minY;\n}\n\nfunction pad(bounds, padding = {}) {\n  const { top = PADDING, bottom = PADDING, left = PADDING, right = PADDING } = padding;\n  bounds.x += left;\n  bounds.width -= left + right;\n  bounds.y += top;\n  bounds.height -= top + bottom;\n}\n\nexport function getBarRect({ bar, view, direction, position, padding = PADDING }) {\n  const bounds = {};\n  extend(bounds, bar);\n\n  if (!position || position === 'inside') {\n    // do nothing\n  } else if (direction === 'up' || direction === 'down') {\n    const start = Math.max(0, Math.min(bar.y, view.height));\n    const end = Math.max(0, Math.min(bar.y + bar.height, view.height));\n\n    if ((position === 'outside' && direction === 'up') || (position === 'opposite' && direction === 'down')) {\n      bounds.y = 0;\n      bounds.height = start;\n    } else if ((position === 'outside' && direction === 'down') || (position === 'opposite' && direction === 'up')) {\n      bounds.y = end;\n      bounds.height = view.height - end;\n    }\n  } else {\n    const start = Math.max(0, Math.min(bar.x, view.width));\n    const end = Math.max(0, Math.min(bar.x + bar.width, view.width));\n\n    if ((position === 'outside' && direction === 'left') || (position === 'opposite' && direction === 'right')) {\n      bounds.x = 0;\n      bounds.width = start;\n    } else if ((position === 'outside' && direction === 'right') || (position === 'opposite' && direction === 'left')) {\n      bounds.x = end;\n      bounds.width = view.width - end;\n    }\n  }\n\n  limitBounds(bounds, view);\n  pad(bounds, padding);\n\n  return bounds;\n}\n\nexport function findBestPlacement(\n  {\n    direction,\n    fitsHorizontally,\n    // lblStngs,\n    measured,\n    node,\n    orientation,\n    // placements,\n    placementSettings,\n    rect,\n  },\n  barRect = getBarRect\n) {\n  let largest;\n  let bounds;\n  let placement;\n  let testBounds;\n  let p;\n  const boundaries = [];\n  const dimension = orientation === 'h' ? 'width' : 'height';\n  for (p = 0; p < placementSettings.length; p++) {\n    placement = placementSettings[p];\n    testBounds = barRect({\n      bar: node.localBounds,\n      view: rect,\n      direction,\n      position: placement.position,\n      padding: placement.padding,\n    });\n    boundaries.push(testBounds);\n    largest = !p || testBounds[dimension] > largest[dimension] ? testBounds : largest;\n\n    if (isGoodPlacement(orientation, testBounds, measured, fitsHorizontally, placement.overflow)) {\n      bounds = testBounds;\n      break;\n    }\n  }\n\n  // fallback strategy - place the text in the largest rectangle\n  if (!bounds) {\n    bounds = largest;\n    p = boundaries.indexOf(bounds);\n  }\n  placement = placementSettings[p];\n\n  return { bounds, placement };\n}\n\nfunction approxTextBounds(label, textMetrics, rotated, rect, padding = {}) {\n  const { top = PADDING, bottom = PADDING, left = PADDING, right = PADDING } = padding;\n  const x0 = label.x + label.dx;\n  const y0 = label.y + label.dy;\n  const height = rotated ? Math.min(textMetrics.width, rect.height) : Math.min(textMetrics.height, rect.width);\n  const width = rotated ? Math.min(textMetrics.height, rect.height) : Math.min(textMetrics.width, rect.width);\n  const offset = textMetrics.height * 0.5;\n  const PADDING_OFFSET = 1e-9; // Needed to support a case when multiple bars are on the same location\n  const x = rotated ? x0 - offset : x0;\n  const y = rotated ? y0 : y0 - offset;\n  const bounds = {\n    x: x - left - PADDING_OFFSET,\n    y: y - top - PADDING_OFFSET,\n    width: width + (left + right) - PADDING_OFFSET,\n    height: height + (top + bottom) - PADDING_OFFSET,\n  };\n  return bounds;\n}\n\nexport function placeInBars(\n  { chart, targetNodes, rect, fitsHorizontally, collectiveOrientation },\n  findPlacement = findBestPlacement,\n  placer = placeTextInRect,\n  postFilter = filterOverlapping\n) {\n  const labels = [];\n  const postFilterContext = {\n    container: rect,\n    targetNodes,\n    labels: [],\n    orientation: collectiveOrientation,\n  };\n  let label;\n  let target;\n  let node;\n  let text;\n  let justify;\n  let bounds;\n  let fill;\n  let measured;\n  let direction;\n  let lblStngs;\n  let placement;\n  let placements;\n  let arg;\n  let orientation;\n\n  for (let i = 0, len = targetNodes.length; i < len; i++) {\n    bounds = null;\n    target = targetNodes[i];\n    node = target.node;\n    arg = cbContext(node, chart);\n    direction = target.direction;\n    orientation = direction === 'left' || direction === 'right' ? 'h' : 'v';\n\n    for (let j = 0; j < target.texts.length; j++) {\n      text = target.texts[j];\n      if (!isValidText(text)) {\n        continue;\n      }\n      lblStngs = target.labelSettings[j];\n      measured = target.measurements[j];\n      placements = lblStngs.placements;\n\n      const bestPlacement = findPlacement({\n        direction,\n        fitsHorizontally,\n        lblStngs,\n        measured,\n        node,\n        orientation,\n        placements,\n        placementSettings: target.placementSettings[j],\n        rect,\n      });\n\n      bounds = bestPlacement.bounds;\n      placement = bestPlacement.placement;\n\n      if (bounds && placement) {\n        justify = placement.justify;\n        const linkData = typeof lblStngs.linkData === 'function' ? lblStngs.linkData(arg, i) : undefined;\n        const overflow = typeof placement.overflow === 'function' ? placement.overflow(arg, i) : placement.overflow;\n\n        if (direction === 'up') {\n          justify = 1 - justify;\n        }\n        if (placement.position === 'opposite') {\n          justify = 1 - justify;\n        }\n        if (direction === 'left') {\n          justify = 1 - justify;\n        }\n\n        const isRotated = !(collectiveOrientation === 'h' || fitsHorizontally);\n        label = placer(bounds, text, {\n          justify: orientation === 'h' ? placement.align : justify,\n          align: orientation === 'h' ? justify : placement.align,\n          fontSize: lblStngs.fontSize,\n          fontFamily: lblStngs.fontFamily,\n          textMetrics: measured,\n          rotate: isRotated,\n          overflow: !!overflow,\n        });\n\n        if (label) {\n          const textBounds = approxTextBounds(label, measured, isRotated, bounds, placement.padding);\n          fill = typeof placement.fill === 'function' ? placement.fill({ ...arg, textBounds }, i) : placement.fill;\n          label.fill = fill;\n          if (typeof linkData !== 'undefined') {\n            label.data = linkData;\n          }\n          if (typeof placement.background === 'object') {\n            label.backgroundColor =\n              typeof placement.background.fill === 'function'\n                ? placement.background.fill({ ...arg, textBounds }, i)\n                : placement.background.fill;\n            if (typeof label.backgroundColor !== 'undefined') {\n              label.backgroundBounds = approxTextBounds(\n                label,\n                measured,\n                isRotated,\n                bounds,\n                placement.background.padding\n              );\n            }\n          }\n          labels.push(label);\n          postFilterContext.labels.push({\n            node,\n            textBounds,\n          });\n        }\n      }\n    }\n  }\n\n  const filteredLabels = labels.filter(postFilter(postFilterContext));\n  const backgrounds = filteredLabels.filter((lb) => typeof lb.backgroundBounds !== 'undefined').map(toBackground);\n\n  return [...backgrounds, ...filteredLabels];\n}\n\nexport function precalculate({ nodes, rect, chart, labelSettings, placementSettings, settings, renderer }) {\n  const labelStruct = {};\n  const targetNodes = [];\n  let target;\n  let fitsHorizontally = true;\n  let hasHorizontalDirection = false;\n  let node;\n  let text;\n  let bounds;\n  let measured;\n  let lblStng;\n  let direction;\n\n  for (let i = 0; i < nodes.length; i++) {\n    node = nodes[i];\n    bounds = node.localBounds;\n    if (!testRectRect(bounds, rect)) {\n      continue;\n    }\n    let arg = cbContext(node, chart);\n\n    target = {\n      node,\n      texts: [],\n      measurements: [],\n      labelSettings: [],\n      placementSettings: [],\n      // direction: 'up'\n    };\n\n    for (let j = 0; j < labelSettings.length; j++) {\n      lblStng = labelSettings[j];\n      text = typeof lblStng.label === 'function' ? lblStng.label(arg, i) : undefined;\n      if (!isValidText(text)) {\n        continue; // eslint-ignore-line\n      }\n      direction = typeof settings.direction === 'function' ? settings.direction(arg, i) : settings.direction || 'up';\n      hasHorizontalDirection = hasHorizontalDirection || direction === 'left' || direction === 'right';\n\n      labelStruct.fontFamily = lblStng.fontFamily;\n      labelStruct.fontSize = `${lblStng.fontSize}px`;\n      labelStruct.text = text;\n\n      measured = renderer.measureText(labelStruct);\n      target.measurements.push(measured);\n      target.texts.push(text);\n      target.labelSettings.push(lblStng);\n      target.placementSettings.push(placementSettings[j]);\n      target.direction = direction;\n      fitsHorizontally = fitsHorizontally && measured.width <= bounds.width - PADDING * 2;\n    }\n\n    targetNodes.push(target);\n  }\n\n  return {\n    targetNodes,\n    fitsHorizontally,\n    hasHorizontalDirection,\n  };\n}\n\n/**\n * @typedef {object} component--labels~label-strategy\n *\n */\n\n/**\n * @typedef {object} component--labels~label-strategy.settings\n * @property {string|function} [direction='up'] - The direction in which the bars are growing: 'up', 'down', 'right' or 'left'.\n * @property {string} [fontFamily='Arial']\n * @property {number} [fontSize=12]\n * @property {Array<object>} labels\n * @property {string|function} labels[].label - The text value\n * @property {function} labels[].linkData - Link data to the label\n * @property {Array<object>} labels[].placements\n * @property {string} labels[].placements[].position - 'inside' | 'outside' | 'opposite'\n * @property {number} [labels[].placements[].justify=0] - Placement of the label along the direction of the bar\n * @property {number} [labels[].placements[].align=0.5] - Placement of the label along the perpendicular direction of the bar\n * @property {string} [labels[].placements[].fill='#333'] - Color of the label\n * @property {boolean} [labels[].placements[].overflow=false] - True if the label is allowed to overflow the bar\n * @property {object} labels[].placements[].padding - Padding between the label and the bar\n * @property {number} [labels[].placements[].padding.top=4] - Padding-top between the label and the bar\n * @property {number} [labels[].placements[].padding.bottom=4] - Padding-bottom between the label and the bar\n * @property {number} [labels[].placements[].padding.left=4] - Padding-left between the label and the bar\n * @property {number} [labels[].placements[].padding.right=4] - Padding-right between the label and the bar\n * @property {object} labels[].placements[].background - Background of the label\n * @property {string|function} labels[].placements[].background.fill - Background color of the label\n * @property {object} labels[].placements[].background.padding - Padding between the label and the background\n * @property {number} [labels[].placements[].background.padding.top=4] - Padding-top between the label and the background\n * @property {number} [labels[].placements[].background.padding.bottom=4] - Padding-bottom between the label and the background\n * @property {number} [labels[].placements[].background.padding.left=4] - Padding-left between the label and the background\n * @property {number} [labels[].placements[].background.padding.right=4] - Padding-right between the label and the background\n */\n\nexport function bars({ settings, chart, nodes, rect, renderer, style }, placer = placeInBars) {\n  const defaults = extend(\n    {\n      fontSize: 12,\n      fontFamily: 'Arial',\n      align: 0.5,\n      justify: 0,\n      fill: '#333',\n    },\n    style.label\n  );\n\n  defaults.fontSize = parseInt(defaults.fontSize, 10);\n\n  const labelSettings = settings.labels.map((labelSetting) => extend({}, defaults, settings, labelSetting));\n\n  const placementSettings = settings.labels.map((labelSetting) =>\n    labelSetting.placements.map((placement) => extend({}, defaults, settings, labelSetting, placement))\n  );\n\n  const { fitsHorizontally, hasHorizontalDirection, targetNodes } = precalculate({\n    nodes,\n    chart,\n    renderer,\n    settings,\n    rect,\n    labelSettings,\n    placementSettings,\n  });\n\n  const coord = hasHorizontalDirection ? 'y' : 'x';\n  const side = hasHorizontalDirection ? 'height' : 'width';\n  targetNodes.sort(\n    (a, b) =>\n      a.node.localBounds[coord] + a.node.localBounds[side] - (b.node.localBounds[coord] + b.node.localBounds[side])\n  );\n\n  return placer({\n    chart,\n    targetNodes,\n    stngs: settings,\n    rect,\n    fitsHorizontally,\n    collectiveOrientation: hasHorizontalDirection ? 'h' : 'v',\n  });\n}\n","import extend from 'extend';\nimport { testCircleRect, testRectLine, testRectRect } from '../../../math/narrow-phase-collision';\nimport { rectContainsRect } from '../../../math/intersection';\n\nconst LABEL_OVERLAP_THRESHOLD_X = 4;\n\nfunction normalize(angle) {\n  const PI2 = Math.PI * 2;\n  return ((angle % PI2) + PI2) % PI2; // normalize\n}\n\nfunction pad(bounds, padding) {\n  bounds.x += padding;\n  bounds.width -= padding * 2;\n  bounds.y += padding;\n  bounds.height -= padding * 2;\n}\n\nfunction getTopLeftBounds(bounds) {\n  const x = bounds.x;\n  const y = bounds.y - bounds.height / 2;\n\n  return {\n    x,\n    y,\n    width: bounds.width,\n    height: bounds.height,\n  };\n}\n\n// assume 0 <= angle < (PI / 2)\nfunction getLineCircleIntersection(radius, offset, angle) {\n  let { x, y } = offset;\n\n  if (x * x + y * y > radius * radius) {\n    return null;\n  }\n\n  let dx = Math.sin(angle);\n  let dy = Math.cos(angle);\n  let D = x * dy - y * dx;\n\n  let d = radius * radius - D * D;\n  if (d < 0) {\n    return null;\n  }\n  let sqrtD = Math.sqrt(d);\n  return {\n    x: D * dy + dx * sqrtD,\n    y: -(D * dx) + dy * sqrtD,\n  };\n}\n\n// assume 0 <= angle < (PI * 2)\nfunction getRectFromCircleIntersection({ radius, size, angle }) {\n  let { width, height } = size;\n  let lineOffset = { x: width / 2, y: height / 2 };\n  let section = Math.floor(angle / (Math.PI / 2));\n  let intersection;\n  let offset;\n  switch (section) {\n    case 0:\n      intersection = getLineCircleIntersection(radius, lineOffset, angle);\n      if (!intersection) {\n        return null;\n      }\n      intersection.y *= -1;\n      offset = { x: -width, y: 0 };\n      break;\n    case 1:\n      intersection = getLineCircleIntersection(radius, lineOffset, Math.PI - angle);\n      if (!intersection) {\n        return null;\n      }\n      offset = { x: -width, y: -height };\n      break;\n    case 2:\n      intersection = getLineCircleIntersection(radius, lineOffset, angle - Math.PI);\n      if (!intersection) {\n        return null;\n      }\n      intersection.x *= -1;\n      offset = { x: 0, y: -height };\n      break;\n    case 3:\n      intersection = getLineCircleIntersection(radius, lineOffset, 2 * Math.PI - angle);\n      if (!intersection) {\n        return null;\n      }\n      intersection.x *= -1;\n      intersection.y *= -1;\n      offset = { x: 0, y: 0 };\n      break;\n    default:\n      throw new Error('invalid angle');\n  }\n  let bounds = {\n    x: intersection.x + offset.x,\n    y: intersection.y + offset.y,\n    width,\n    height,\n  };\n  return bounds;\n}\n\nfunction getHorizontalInsideSliceRect({ slice, padding, measured, store }) {\n  const { start, end, outerRadius } = slice;\n  const middle = normalize((start + end) / 2);\n\n  const size = {\n    width: measured.width + padding * 2,\n    height: measured.height + padding * 2,\n  };\n\n  let bounds = getRectFromCircleIntersection({\n    radius: outerRadius,\n    size,\n    angle: middle,\n  });\n\n  if (!bounds) {\n    return null;\n  }\n\n  bounds.baseline = 'top';\n\n  pad(bounds, padding);\n\n  if (store.insideLabelBounds.some((rect) => testRectRect(rect, bounds))) {\n    return null;\n  }\n\n  store.insideLabelBounds.push({\n    x: bounds.x - LABEL_OVERLAP_THRESHOLD_X,\n    y: bounds.y,\n    width: bounds.width + LABEL_OVERLAP_THRESHOLD_X * 2,\n    height: bounds.height,\n  }); // Copy as bounds is mutated else where\n\n  return bounds;\n}\n\nfunction getHorizontalIntoSliceRect({ slice, padding, measured }) {\n  let { start, end, innerRadius, outerRadius } = slice;\n  const middle = normalize((start + end) / 2);\n\n  let size = {\n    width: measured.width + padding * 2,\n    height: measured.height + padding * 2,\n  };\n\n  let bounds = getRectFromCircleIntersection({\n    radius: outerRadius,\n    size,\n    angle: middle,\n  });\n\n  if (!bounds) {\n    return null;\n  }\n\n  bounds.baseline = 'top';\n\n  let startLine = {\n    x1: 0,\n    y1: 0,\n    x2: Math.sin(start) * outerRadius,\n    y2: -Math.cos(start) * outerRadius,\n  };\n  if (testRectLine(bounds, startLine)) {\n    return null;\n  }\n  let endLine = {\n    x1: 0,\n    y1: 0,\n    x2: Math.sin(end) * outerRadius,\n    y2: -Math.cos(end) * outerRadius,\n  };\n  if (testRectLine(bounds, endLine)) {\n    return null;\n  }\n  let circle = { cx: 0, cy: 0, r: innerRadius };\n  if (testCircleRect(circle, bounds)) {\n    return null;\n  }\n\n  pad(bounds, padding);\n\n  return bounds;\n}\n\n// TODO: this case can support a justify setting\nfunction getRotatedInsideSliceRect({ slice, measured, padding }) {\n  let { start, end, innerRadius, outerRadius } = slice;\n\n  let maxWidth = outerRadius - innerRadius - padding * 2;\n  let size = end - start;\n  if (size < Math.PI) {\n    let x = (measured.height / 2 + padding) / Math.tan(size / 2);\n    if (x > innerRadius) {\n      maxWidth = outerRadius - x - padding * 2;\n    }\n  }\n  if (maxWidth < 0 || maxWidth < measured.minReqWidth) {\n    return null;\n  }\n\n  const middle = normalize((start + end) / 2);\n  let r = outerRadius - padding;\n  let bounds = {\n    x: Math.sin(middle) * r,\n    y: -Math.cos(middle) * r,\n    width: maxWidth,\n    height: measured.height,\n  };\n  if (middle < Math.PI) {\n    bounds.angle = middle - Math.PI / 2;\n    bounds.anchor = 'end';\n  } else {\n    bounds.angle = middle + Math.PI / 2;\n    bounds.anchor = 'start';\n  }\n  return bounds;\n}\n\nfunction getRotatedOusideSliceRect({ slice, measured, padding, view }) {\n  let { start, end, outerRadius, offset } = slice;\n  let r = outerRadius + padding;\n  let size = end - start;\n  if (size < Math.PI) {\n    let minR = (measured.height / 2 + padding) / Math.tan(size / 2);\n    if (minR > r) {\n      return null;\n    }\n  }\n  const middle = normalize((start + end) / 2);\n  let x = Math.sin(middle) * r;\n  let y = -Math.cos(middle) * r;\n\n  let maxWidth = measured.width;\n  let v = middle % Math.PI;\n  if (v > Math.PI / 2) {\n    v = Math.PI - v;\n  }\n  if (Math.cos(v) > 0.001) {\n    let edge = y < 0 ? view.y : view.y + view.height;\n    let d = Math.abs(edge - offset.y);\n    let w = d / Math.cos(v) - Math.tan(v) * (measured.height / 2) - padding * 2 - outerRadius;\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  }\n  if (Math.sin(v) > 0.001) {\n    let edge = x < 0 ? view.x : view.x + view.width;\n    let d = Math.abs(edge - offset.x);\n    let w = d / Math.sin(v) - measured.height / 2 / Math.tan(v) - padding * 2 - outerRadius;\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  }\n\n  if (maxWidth <= 0 || maxWidth < measured.minReqWidth) {\n    return null;\n  }\n\n  let bounds = {\n    x,\n    y,\n    width: maxWidth,\n    height: measured.height,\n  };\n  if (middle < Math.PI) {\n    bounds.angle = middle - Math.PI / 2;\n    bounds.anchor = 'start';\n  } else {\n    bounds.angle = middle + Math.PI / 2;\n    bounds.anchor = 'end';\n  }\n  return bounds;\n}\n\nfunction outOfSpace(context, section, view) {\n  switch (section) {\n    case 0:\n      return context.q1maxY < 0;\n    case 1:\n      return context.q2minY > view.height;\n    case 2:\n      return context.q3minY > view.height;\n    case 3:\n      return context.q4maxY < 0;\n    default:\n      return true;\n  }\n}\nfunction adjustBounds(bounds, context, slice) {\n  const LINE_PADDING = 2;\n  const LIMIT = 1;\n\n  const { start, end, offset, outerRadius } = slice;\n  const middle = normalize((start + end) / 2);\n  let section = Math.floor(middle / (Math.PI / 2));\n\n  switch (section) {\n    case 0:\n      if (context.q1maxY !== undefined) {\n        let y = Math.min(bounds.y, context.q1maxY - bounds.height);\n        let dy = bounds.y - y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x - LINE_PADDING,\n            y1: bounds.y + LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    case 1:\n      if (context.q2minY !== undefined) {\n        let y = Math.max(bounds.y, context.q2minY);\n        let dy = y - bounds.y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x - LINE_PADDING,\n            y1: bounds.y - LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    case 2:\n      if (context.q3minY !== undefined) {\n        let y = Math.max(bounds.y, context.q3minY);\n        let dy = y - bounds.y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x + LINE_PADDING,\n            y1: bounds.y - LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    case 3:\n      if (context.q4maxY !== undefined) {\n        let y = Math.min(bounds.y, context.q4maxY - bounds.height);\n        let dy = bounds.y - y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x + LINE_PADDING,\n            y1: bounds.y + LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    default:\n      break;\n  }\n}\nfunction updateContext({ context, node, bounds }) {\n  const PADDING = 2;\n  let { start, end } = node.desc.slice;\n  const middle = normalize((start + end) / 2);\n\n  let section = Math.floor(middle / (Math.PI / 2));\n  switch (section) {\n    case 0:\n      context.q1maxY = bounds.y - PADDING;\n      if (context.q2minY === undefined) {\n        context.q2minY = bounds.y + bounds.height + PADDING;\n      }\n      break;\n    case 1:\n      context.q2minY = bounds.y + bounds.height + PADDING;\n      break;\n    case 2:\n      context.q3minY = bounds.y + bounds.height + PADDING;\n      break;\n    case 3:\n      context.q4maxY = bounds.y - PADDING;\n      if (context.q3minY === undefined) {\n        context.q3minY = bounds.y + bounds.height + PADDING;\n      }\n      break;\n    default:\n      break;\n  }\n}\n\nfunction getHorizontalOusideSliceRect({ slice, measured, padding, view, context }) {\n  let { start, end, outerRadius, offset } = slice;\n  const middle = normalize((start + end) / 2);\n\n  let section = Math.floor(middle / (Math.PI / 2));\n  if (outOfSpace(context, section, view)) {\n    return null;\n  }\n\n  let r = outerRadius + padding + measured.height / 2;\n  let x = Math.sin(middle) * r;\n  let y = -Math.cos(middle) * r;\n\n  let maxWidth = measured.width;\n  if (middle < Math.PI) {\n    let w = Math.abs(view.x + view.width - (x + offset.x));\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  } else {\n    let w = Math.abs(view.x - (x + offset.x));\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  }\n\n  if (maxWidth < measured.minReqWidth) {\n    return null;\n  }\n\n  let bounds = {\n    x,\n    y,\n    width: maxWidth,\n    height: measured.height,\n  };\n\n  if (middle < Math.PI) {\n    bounds.anchor = 'start';\n  } else {\n    bounds.anchor = 'end';\n  }\n\n  return bounds;\n}\n\nfunction cbContext(node, chart) {\n  return {\n    node,\n    data: node.data,\n    scale: chart.scale,\n    formatter: chart.formatter,\n    dataset: chart.dataset,\n  };\n}\n\nfunction placeTextOnPoint(rect, text, opts) {\n  const label = {\n    type: 'text',\n    text,\n    maxWidth: rect.width,\n    x: rect.x,\n    y: rect.y + (rect.baseline === 'top' ? rect.height / 2 : 0),\n    fill: opts.fill,\n    anchor: rect.anchor || 'start',\n    baseline: 'middle',\n    fontSize: `${opts.fontSize}px`,\n    fontFamily: opts.fontFamily,\n  };\n\n  if (!isNaN(rect.angle)) {\n    let angle = rect.angle * (360 / (Math.PI * 2));\n    label.transform = `rotate(${angle}, ${label.x}, ${label.y})`;\n  }\n\n  return label;\n}\n\nexport function getSliceRect({ slice, direction, position, padding, measured, view, context, store }) {\n  let { start, end, innerRadius, offset } = slice;\n\n  let bounds;\n  let s;\n  switch (position) {\n    case 'into':\n      if (direction === 'rotate') {\n        bounds = getRotatedInsideSliceRect({ slice, measured, padding });\n      } else {\n        bounds = getHorizontalIntoSliceRect({ slice, measured, padding });\n      }\n      break;\n    case 'inside':\n      s = {\n        start,\n        end,\n        innerRadius: 0,\n        outerRadius: innerRadius,\n      };\n      if (direction === 'rotate') {\n        bounds = getRotatedInsideSliceRect({ slice: s, measured, padding });\n      } else {\n        bounds = getHorizontalInsideSliceRect({\n          slice: s,\n          measured,\n          padding,\n          store,\n        });\n      }\n      break;\n    case 'outside':\n      if (direction === 'rotate') {\n        bounds = getRotatedOusideSliceRect({\n          slice,\n          measured,\n          padding,\n          view,\n        });\n      } else {\n        bounds = getHorizontalOusideSliceRect({\n          slice,\n          measured,\n          padding,\n          view,\n          context,\n        });\n      }\n      break;\n    default:\n      throw new Error('not implemented');\n  }\n  if (bounds) {\n    bounds.x += offset.x;\n    bounds.y += offset.y;\n    if (position === 'outside' && direction !== 'rotate') {\n      adjustBounds(bounds, context, slice);\n    }\n  }\n  return bounds;\n}\n\nfunction findBestPlacement(\n  { context, direction, measured, node, placementSettings, rect, store },\n  sliceRect = getSliceRect\n) {\n  for (let p = 0; p < placementSettings.length; p++) {\n    let placement = placementSettings[p];\n    let bounds = sliceRect({\n      context,\n      slice: node.desc.slice,\n      view: rect,\n      direction,\n      position: placement.position,\n      measured,\n      padding: placement.padding,\n      store,\n    });\n\n    if (!bounds) {\n      continue;\n    }\n\n    return { bounds, placement };\n  }\n  return { bounds: null, placement: null };\n}\n\n/*\n * Sorts the nodes so that\n *   in each quarter sort nodes from the center (in y) outwards\n *   first quarter before the second\n *   forth quarter before the third\n */\nfunction sortNodes(nodes) {\n  const q1 = [];\n  const q2 = [];\n  const q3 = [];\n  const q4 = [];\n  for (let i = 0; i < nodes.length; ++i) {\n    const { start, end } = nodes[i].desc.slice;\n    const middle = normalize((start + end) / 2);\n    let section = Math.floor(middle / (Math.PI / 2));\n    switch (section) {\n      case 0:\n        q1.push(nodes[i]);\n        break;\n      case 1:\n        q2.push(nodes[i]);\n        break;\n      case 2:\n        q3.push(nodes[i]);\n        break;\n      case 3:\n        q4.push(nodes[i]);\n        break;\n      default:\n        break;\n    }\n  }\n\n  const sortFn = (a, b) => {\n    const middleA = normalize((a.desc.slice.start + a.desc.slice.end) / 2);\n    const middleB = normalize((b.desc.slice.start + b.desc.slice.end) / 2);\n    return middleA - middleB;\n  };\n  const reverseSortFn = (a, b) => sortFn(b, a);\n\n  q1.sort(reverseSortFn);\n  q2.sort(sortFn);\n  q3.sort(reverseSortFn);\n  q4.sort(sortFn);\n  return q1.concat(q2, q4, q3);\n}\n\nfunction measureText(text, stgns, renderer) {\n  const fontFamily = stgns.fontFamily;\n  const fontSize = `${stgns.fontSize}px`;\n  const metrics = renderer.measureText({ text, fontFamily, fontSize });\n\n  metrics.minReqWidth = Math.min(\n    metrics.width,\n    renderer.measureText({\n      text: `${text[0]}…`,\n      fontFamily,\n      fontSize,\n    }).width\n  );\n\n  return metrics;\n}\n\n/**\n * @typedef {object} component--labels~slices-label-strategy\n *\n */\n\n/**\n * @typedef {object} component--labels~slices-label-strategy.settings\n * @property {string|function} [direction='horizontal'] - The direction of the text: 'horizontal' or 'rotate'.\n * @property {string} [fontFamily='Arial']\n * @property {number} [fontSize=12]\n * @property {Array<object>} labels\n * @property {string|function} labels[].label - The text value\n * @property {function} labels[].linkData - Link data to the label\n * @property {Array<object>} labels[].placements\n * @property {string} [labels[].placements[].position='into'] - 'inside' | 'into' | 'outside' (outside is not implmented yet)\n * @property {string} [labels[].placements[].fill='#333'] - Color of the label\n */\n\nexport function slices(\n  { settings, chart, nodes, rect, renderer, style },\n  findPlacement = findBestPlacement,\n  placer = placeTextOnPoint\n) {\n  const defaults = extend(\n    {\n      fontSize: 12,\n      fontFamily: 'Arial',\n      fill: '#333',\n      padding: 4,\n      position: 'into',\n    },\n    style.label\n  );\n\n  defaults.fontSize = parseInt(defaults.fontSize, 10);\n\n  const labelSettings = settings.labels.map((labelSetting) => extend({}, defaults, settings, labelSetting));\n\n  const placementSettings = settings.labels.map((labelSetting) =>\n    labelSetting.placements.map((placement) => extend({}, defaults, settings, labelSetting, placement))\n  );\n\n  const labels = [];\n  const store = {\n    insideLabelBounds: [],\n  };\n\n  nodes = sortNodes(nodes);\n  const context = {};\n\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    const node = nodes[i];\n    const arg = cbContext(node, chart);\n\n    for (let j = 0; j < labelSettings.length; j++) {\n      const lblStngs = labelSettings[j];\n      const text = typeof lblStngs.label === 'function' ? lblStngs.label(arg, i) : '';\n      if (!text) {\n        continue;\n      }\n      const direction =\n        typeof lblStngs.direction === 'function' ? lblStngs.direction(arg, i) : lblStngs.direction || 'horizontal';\n      const linkData = typeof lblStngs.linkData === 'function' ? lblStngs.linkData(arg, i) : undefined;\n      const measured = measureText(text, lblStngs, renderer);\n      const bestPlacement = findPlacement({\n        context,\n        direction,\n        lblStngs,\n        measured,\n        node,\n        placementSettings: placementSettings[j],\n        rect,\n        store,\n      });\n\n      const bounds = bestPlacement.bounds;\n      const placement = bestPlacement.placement;\n\n      if (bounds && placement) {\n        if (placement.position === 'outside' && direction !== 'rotate') {\n          updateContext({ context, node, bounds });\n\n          const topLeftBounds = getTopLeftBounds(bounds);\n\n          if (!rectContainsRect(topLeftBounds, rect)) {\n            continue;\n          }\n        }\n\n        const fill = typeof placement.fill === 'function' ? placement.fill(arg, i) : placement.fill;\n\n        const label = placer(bounds, text, {\n          fill,\n          fontSize: lblStngs.fontSize,\n          fontFamily: lblStngs.fontFamily,\n          textMetrics: measured,\n        });\n\n        if (label) {\n          if (typeof linkData !== 'undefined') {\n            label.data = linkData;\n          }\n          labels.push(label);\n          if (bounds.line) {\n            bounds.line.stroke = fill;\n            labels.push(bounds.line);\n          }\n        }\n      }\n    }\n  }\n\n  return labels;\n}\n","const LINEBREAK_REGEX = /\\n+|\\r+|\\r\\n/;\nconst WHITESPACE_REGEX = /\\s/;\nconst HYPHEN_REGEX = /[a-zA-Z\\u00C0-\\u00F6\\u00F8-\\u00FF\\u00AD]/;\nexport const NO_BREAK = 0;\nexport const MANDATORY = 1;\nexport const BREAK_ALLOWED = 2;\n\nexport function includesLineBreak(c) {\n  if (typeof c === 'string') {\n    return c.search(LINEBREAK_REGEX) !== -1;\n  }\n  return String(c).search(LINEBREAK_REGEX) !== -1;\n}\n\nfunction includesWhiteSpace(c) {\n  return c.search(WHITESPACE_REGEX) !== -1;\n}\n\nfunction hyphenationAllowed(c) {\n  /* Latin character set. Excluding numbers, sign and symbol characters, but including soft hyphen */\n  return c.search(HYPHEN_REGEX) !== -1;\n}\n\nfunction resolveBreakOpportunity(chunk, i, chunks, mandatory, noBreakAllowed) {\n  if (mandatory.some((fn) => fn(chunk, i, chunks))) {\n    return MANDATORY;\n  }\n  if (noBreakAllowed.some((fn) => fn(chunk, i, chunks))) {\n    return NO_BREAK;\n  }\n\n  return BREAK_ALLOWED;\n}\n\nfunction cleanEmptyChunks(chunks) {\n  if (chunks[0] === '') {\n    chunks.shift();\n  }\n  if (chunks[chunks.length - 1] === '') {\n    chunks.pop();\n  }\n}\n\nfunction clamp(val, min, max) {\n  return Math.max(min, Math.min(max, val));\n}\n\nexport default function stringTokenizer({\n  string,\n  separator = '',\n  reverse = false,\n  measureText = (text) => ({ width: text.length, height: 1 }),\n  mandatoryBreakIdentifiers = [includesLineBreak],\n  noBreakAllowedIdentifiers = [],\n  suppressIdentifier = [includesWhiteSpace, includesLineBreak, (chunk) => chunk === ''],\n  hyphenationIdentifiers = [hyphenationAllowed],\n} = {}) {\n  const chunks = String(string).split(separator);\n  cleanEmptyChunks(chunks);\n  const length = chunks.length;\n  const isNotDone = reverse ? (p) => p >= 0 : (p) => p < length;\n  let position = reverse ? length : -1; // Set init position 1 step before or after to make first next call go to first position\n\n  function peek(peekAt) {\n    const i = clamp(peekAt, 0, length - 1);\n    const chunk = chunks[i];\n    const textMeasure = measureText(chunk);\n    const opportunity = resolveBreakOpportunity(chunk, i, chunks, mandatoryBreakIdentifiers, noBreakAllowedIdentifiers);\n\n    return {\n      index: i,\n      value: chunk,\n      breakOpportunity: opportunity,\n      suppress: suppressIdentifier.some((fn) => fn(chunk, i, chunks)),\n      hyphenation: hyphenationIdentifiers.some((fn) => fn(chunk, i, chunks)),\n      width: textMeasure.width,\n      height: textMeasure.height,\n      done: false,\n    };\n  }\n\n  function next(jumpToPosition) {\n    if (isNaN(jumpToPosition)) {\n      if (reverse) {\n        position--;\n      } else {\n        position++;\n      }\n    } else {\n      position = clamp(jumpToPosition, 0, length - 1);\n    }\n\n    if (isNotDone(position)) {\n      return peek(position);\n    }\n    return { done: true };\n  }\n\n  return {\n    next,\n    peek,\n    length,\n  };\n}\n","const HYPHENS_CHAR = '\\u2010';\nconst ELLIPSIS_CHAR = '…';\n\nexport { HYPHENS_CHAR, ELLIPSIS_CHAR };\n","const BASE = 24;\nconst PAD = 4;\nconst BUMP = 1e-12;\nconst DEFAULT_FONT_HEIGHT = 16;\nconst DEFAULT_LINE_HEIGHT = 1.2;\nconst TEXT_REGEX = /^\\s*\\d+(\\.\\d+)?px\\s*$/i;\n\nfunction isValidFontSize(val) {\n  const type = typeof val;\n  if (type === 'string') {\n    return TEXT_REGEX.test(val);\n  }\n\n  return false;\n}\n\nexport function fontSizeToHeight(fontSize) {\n  if (isValidFontSize(fontSize)) {\n    const size = parseFloat(fontSize);\n    const m = PAD * Math.ceil((size + BUMP) / BASE);\n\n    return size + m;\n  }\n\n  return DEFAULT_FONT_HEIGHT;\n}\n\nexport function fontSizeToLineHeight(node) {\n  const fontSize = node['font-size'] || node.fontSize;\n  if (isValidFontSize(fontSize)) {\n    return parseFloat(fontSize) * Math.max(isNaN(node.lineHeight) ? DEFAULT_LINE_HEIGHT : node.lineHeight, 0);\n  }\n\n  return DEFAULT_FONT_HEIGHT * DEFAULT_LINE_HEIGHT;\n}\n","import stringTokenizer, { MANDATORY, BREAK_ALLOWED } from './string-tokenizer';\nimport { HYPHENS_CHAR } from './text-const';\nimport { fontSizeToLineHeight } from './font-size-to-height';\n\nfunction resolveMaxAllowedLines(node) {\n  const maxHeight = node.maxHeight;\n  const maxLines = Math.max(node.maxLines, 1) || Infinity;\n\n  if (isNaN(maxHeight)) {\n    return maxLines;\n  }\n\n  const computedLineHeight = fontSizeToLineHeight(node);\n\n  return Math.max(1, Math.min(Math.floor(maxHeight / computedLineHeight), maxLines));\n}\n\nfunction initState(node, measureText) {\n  return {\n    lines: [],\n    line: '',\n    width: 0,\n    maxLines: resolveMaxAllowedLines(node),\n    maxWidth: node.maxWidth,\n    hyphens: {\n      enabled: node.hyphens === 'auto',\n      char: HYPHENS_CHAR,\n      metrics: measureText(HYPHENS_CHAR),\n    },\n  };\n}\n\nfunction newLine(state) {\n  state.lines.push(state.line);\n  state.line = '';\n  state.width = 0;\n}\n\nfunction appendToLine(state, token) {\n  state.line += token.value;\n  state.width += token.width;\n}\n\nfunction insertHyphenAndJump(state, token, iterator) {\n  if (token.width > state.maxWidth) {\n    return token;\n  }\n\n  const startIndex = token.index;\n\n  for (let i = 1; i < 5; i++) {\n    const pairToken = iterator.peek(token.index - 1);\n\n    if (!token.hyphenation || !pairToken.hyphenation || token.index === 0) {\n      return token;\n    }\n    if (state.width + state.hyphens.metrics.width <= state.maxWidth) {\n      state.line += state.hyphens.char;\n      return token;\n    }\n    if (state.line.length === 1) {\n      return token;\n    }\n\n    token = iterator.next(startIndex - i);\n    state.line = state.line.slice(0, -1);\n    state.width -= token.width;\n  }\n\n  return token;\n}\n\nfunction breakSequence(state, token, measureText) {\n  const charTokenIterator = stringTokenizer({\n    string: token.value,\n    measureText,\n  });\n\n  while (state.lines.length < state.maxLines) {\n    let charToken = charTokenIterator.next();\n    if (charToken.done) {\n      break;\n    } else if (\n      state.width + charToken.width > state.maxWidth &&\n      charToken.breakOpportunity === BREAK_ALLOWED &&\n      state.line.length > 0\n    ) {\n      charToken = state.hyphens.enabled ? insertHyphenAndJump(state, charToken, charTokenIterator) : charToken;\n      newLine(state);\n      appendToLine(state, charToken);\n    } else {\n      appendToLine(state, charToken);\n    }\n  }\n}\n\nexport function breakAll(node, measureText) {\n  const text = node.text;\n  const iterator = stringTokenizer({\n    string: text,\n    separator: '',\n    measureText,\n    noBreakAllowedIdentifiers: [(chunk, i) => i === 0],\n  });\n  const state = initState(node, measureText);\n  let reduced = true;\n\n  while (state.lines.length < state.maxLines) {\n    let token = iterator.next();\n\n    if (token.done) {\n      newLine(state);\n      reduced = false;\n      break;\n    } else if (token.breakOpportunity === MANDATORY) {\n      newLine(state);\n    } else if (state.width + token.width > state.maxWidth && token.breakOpportunity === BREAK_ALLOWED) {\n      if (token.suppress) {\n        // Token is suppressable and can be ignored\n        state.width += token.width;\n      } else {\n        token = state.hyphens.enabled ? insertHyphenAndJump(state, token, iterator) : token;\n        newLine(state);\n        appendToLine(state, token);\n      }\n    } else {\n      appendToLine(state, token);\n    }\n  }\n\n  return {\n    lines: state.lines,\n    reduced,\n  };\n}\n\nexport function breakWord(node, measureText) {\n  const text = node.text;\n  const iterator = stringTokenizer({\n    string: text,\n    separator: /(\\s|-|\\u2010)/,\n    measureText,\n  });\n  const state = initState(node, measureText);\n  let reduced = true;\n\n  while (state.lines.length < state.maxLines) {\n    let token = iterator.next();\n\n    if (token.done) {\n      newLine(state);\n      reduced = false;\n      break;\n    } else if (token.breakOpportunity === MANDATORY) {\n      newLine(state);\n    } else if (state.width + token.width > state.maxWidth && token.breakOpportunity === BREAK_ALLOWED) {\n      if (token.suppress) {\n        // Token is suppressable and can be ignored\n        newLine(state);\n      } else if (token.width > state.maxWidth) {\n        // Single sequence is wider then maxWidth, break sequence into multiple lines\n        breakSequence(state, token, measureText);\n      } else {\n        newLine(state);\n        appendToLine(state, token);\n      }\n    } else {\n      appendToLine(state, token);\n    }\n  }\n\n  return {\n    lines: state.lines,\n    reduced,\n  };\n}\n","import extend from 'extend';\nimport { breakAll, breakWord } from './word-break';\nimport { ELLIPSIS_CHAR } from './text-const';\nimport { includesLineBreak } from './string-tokenizer';\nimport { fontSizeToLineHeight } from './font-size-to-height';\n\nfunction generateLineNodes(result, item, halfLead, height) {\n  const container = { type: 'container', children: [] };\n\n  if (typeof item.id !== 'undefined') {\n    // TODO also inherit data attribute and more?\n    container.id = item.id;\n  }\n\n  let currentY = 0;\n\n  result.lines.forEach((line, i) => {\n    const node = extend({}, item);\n    node.text = line;\n    node._lineBreak = true; // Flag node as processed to avoid duplicate linebreak run\n    currentY += halfLead; // leading height above\n\n    if (result.reduced && i === result.lines.length - 1) {\n      node.text += ELLIPSIS_CHAR;\n    } else {\n      delete node.maxWidth;\n    }\n\n    node.dy = isNaN(node.dy) ? currentY : node.dy + currentY;\n    currentY += height;\n    currentY += halfLead; // Leading height below\n    container.children.push(node);\n  });\n\n  return container;\n}\n\nfunction shouldLineBreak(item) {\n  // If type text and not already broken into lines\n  return item.type === 'text' && !item._lineBreak;\n}\n\nfunction wrappedMeasureText(node, measureText) {\n  return (text) =>\n    measureText({\n      text,\n      fontSize: node.fontSize,\n      fontFamily: node.fontFamily,\n    });\n}\n\nexport function resolveLineBreakAlgorithm(node) {\n  const WORDBREAK = {\n    'break-all': breakAll,\n    'break-word': breakWord,\n  };\n\n  return WORDBREAK[node.wordBreak];\n}\n\n/**\n * Apply wordBreak rules to text nodes.\n * @ignore\n * @param {function} measureText\n * @returns {function} Event function to convert a text node into multiple nodes\n */\nexport function onLineBreak(measureText) {\n  return (state) => {\n    const item = state.node;\n    if (shouldLineBreak(item)) {\n      const wordBreakFn = resolveLineBreakAlgorithm(item);\n      if (!wordBreakFn) {\n        return;\n      }\n\n      const tm = measureText(item);\n      if (tm.width > item.maxWidth || includesLineBreak(item.text)) {\n        const diff = fontSizeToLineHeight(item) - tm.height;\n        const halfLead = diff / 2;\n        const result = wordBreakFn(item, wrappedMeasureText(item, measureText));\n\n        state.node = generateLineNodes(result, item, halfLead, tm.height); // Convert node to container\n      }\n    }\n  };\n}\n","import { ELLIPSIS_CHAR } from './text-const';\n\nexport default function ellipsText({ text, 'font-size': fontSize, 'font-family': fontFamily, maxWidth }, measureText) {\n  // eslint-disable-line import/prefer-default-export\n  text = typeof text === 'string' ? text : `${text}`;\n  if (maxWidth === undefined) {\n    return text;\n  }\n  let textWidth = measureText({ text, fontSize, fontFamily }).width;\n  if (textWidth <= maxWidth) {\n    return text;\n  }\n\n  let min = 0;\n  let max = text.length - 1;\n  while (min <= max) {\n    let reduceIndex = Math.floor((min + max) / 2);\n    let reduceText = text.substr(0, reduceIndex) + ELLIPSIS_CHAR;\n    textWidth = measureText({ text: reduceText, fontSize, fontFamily }).width;\n    if (textWidth <= maxWidth) {\n      min = reduceIndex + 1;\n    } else {\n      // textWidth > maxWidth\n      max = reduceIndex - 1;\n    }\n  }\n  return text.substr(0, max) + ELLIPSIS_CHAR;\n}\n","/**\n * Currently some browsers, IE11 and Edge confirmed, doesn't support the dominant-baseline svg-attribute and\n * the browser that does, have different implementations. Thus giving an unpredictable result when rendering'\n * text and predicting it's position (ex. in collision detection).\n *\n * To supplement and the aid in aligning/positioning text with various items, this function can be used\n * to follow a common heuristic across supported renderers.\n * @ignore\n * @param {object} textNode\n * @param {string|number} [textNode['font-size']=0] - String in px format or number\n * @param {string} [textNode['dominant-baseline']] - If baseline is omitted dominant-baseline is used\n * @param {string} [textNode.baseline]\n * @returns {number} Delta-y required to adjust for baseline\n */\nexport default function baselineHeuristic(textNode) {\n  const baseline = textNode.baseline || textNode['dominant-baseline'];\n  let dy = 0;\n\n  const fontSize = parseInt(textNode.fontSize || textNode['font-size'], 10) || 0;\n\n  switch (baseline) {\n    case 'hanging':\n      dy = fontSize * 0.75;\n      break;\n    case 'text-before-edge':\n      dy = fontSize * 0.85;\n      break;\n    case 'middle':\n      dy = fontSize * 0.25;\n      break;\n    case 'central':\n      dy = fontSize * 0.35;\n      break;\n    case 'mathemetical':\n      dy = fontSize / 2;\n      break;\n    case 'text-after-edge':\n    case 'ideographic':\n      dy = -fontSize * 0.2;\n      break;\n    default:\n      dy = 0;\n      break;\n  }\n\n  return dy;\n}\n","import extend from 'extend';\nimport { resolveLineBreakAlgorithm } from './line-break-resolver';\nimport baselineHeuristic from './baseline-heuristic';\nimport { ELLIPSIS_CHAR } from './text-const';\nimport { fontSizeToHeight, fontSizeToLineHeight } from './font-size-to-height';\nimport { includesLineBreak } from './string-tokenizer';\n\nconst heightCache = {};\nconst widthCache = {};\nconst contextCache = {\n  fontSize: undefined,\n  fontFamily: undefined,\n};\nlet context;\n\nfunction setContext() {\n  context = context || document.createElement('canvas').getContext('2d');\n}\n\nfunction setFont(fontSize, fontFamily) {\n  if (contextCache.fontSize === fontSize && contextCache.fontFamily === fontFamily) {\n    return;\n  }\n\n  context.font = fontSize + ' ' + fontFamily; // eslint-disable-line\n  contextCache.fontSize = fontSize;\n  contextCache.fontFamily = fontFamily;\n}\n\nfunction measureTextWidth(text, fontSize, fontFamily) {\n  const key = text + fontSize + fontFamily;\n  if (typeof widthCache[key] !== 'number') {\n    setContext();\n    setFont(fontSize, fontFamily);\n    widthCache[key] = context.measureText(text).width;\n  }\n\n  return widthCache[key];\n}\n\nfunction measureTextHeight(fontSize) {\n  if (typeof heightCache[fontSize] !== 'number') {\n    heightCache[fontSize] = fontSizeToHeight(fontSize);\n  }\n\n  return heightCache[fontSize];\n}\n\n/**\n * @private\n * @param {object} opts\n * @param {string} opts.text - Text to measure\n * @param {string} opts.fontSize - Font size with a unit definition, ex. 'px' or 'em'\n * @param {string} opts.fontFamily - Font family\n * @return {object} Width and height of text in pixels\n * @example\n * measureText({\n *  text: 'my text',\n *  fontSize: '12px',\n *  fontFamily: 'Arial'\n * }); // returns { width: 20, height: 12 }\n */\nexport function measureText({ text, fontSize, fontFamily }) {\n  const w = measureTextWidth(text, fontSize, fontFamily);\n  const h = measureTextHeight(fontSize);\n  return { width: w, height: h };\n}\n\n/**\n * Calculates the bounding rectangle of a text node.\n * The bounding rectangle is a approximate of the \"em square\" seen here (http://www.w3resource.com/html5-canvas/html5-canvas-text.php)\n * @ignore\n * @param {object} attrs - Text node definition\n * @param {number} [attrs.x] - X-coordinate\n * @param {number} [attrs.y] - Y-coordinate\n * @param {number} [attrs.dx] - Delta x-coordinate\n * @param {number} [attrs.dy] - Delta y-coordinate\n * @param {string} [attrs.anchor] - Text anchor\n * @param {number} [attrs.maxWidth] - Maximum allowed text width\n * @return {object} The bounding rectangle\n */\nfunction calcTextBounds(attrs, measureFn = measureText) {\n  const fontSize = attrs['font-size'] || attrs.fontSize;\n  const fontFamily = attrs['font-family'] || attrs.fontFamily;\n  const textMeasure = measureFn({ text: attrs.text, fontFamily, fontSize });\n  const calWidth = Math.min(attrs.maxWidth || textMeasure.width, textMeasure.width); // Use actual value if max is not set\n  const x = attrs.x || 0;\n  const y = attrs.y || 0;\n  const dx = attrs.dx || 0;\n  const dy = (attrs.dy || 0) + baselineHeuristic(attrs);\n\n  const boundingRect = {\n    x: 0,\n    y: y + dy - textMeasure.height * 0.75, // Magic number for alphabetical baseline\n    width: calWidth,\n    height: textMeasure.height,\n  };\n\n  const anchor = attrs['text-anchor'] || attrs.anchor;\n\n  if (anchor === 'middle') {\n    boundingRect.x = x + dx - calWidth / 2;\n  } else if (anchor === 'end') {\n    boundingRect.x = x + dx - calWidth;\n  } else {\n    boundingRect.x = x + dx;\n  }\n\n  return boundingRect;\n}\n\n/**\n * Calculates the bounding rectangle of a text node. Including any line breaks.\n * @ignore\n * @param {object} node\n * @param {string} node.text - Text to measure\n * @param {number} [node.x=0] - X-coordinate\n * @param {number} [node.y=0] - Y-coordinate\n * @param {number} [node.dx=0] - Delta x-coordinate\n * @param {number} [node.dy=0] - Delta y-coordinate\n * @param {string} [node.anchor='start'] - Text anchor\n * @param {string} [node.fontSize] - Font size\n * @param {string} [node.fontFamily] - Font family\n * @param {string} [node['font-size']] - Font size\n * @param {string} [node['font-family']] - Font family\n * @param {string} [node.wordBreak] - Word-break option\n * @param {number} [node.maxWidth] - Maximum allowed text width\n * @param {number} [node.maxHeight] - Maximum allowed text height. If both maxLines and maxHeight are set, the property that results in the fewest number of lines is used\n * @param {number} [node.maxLines] - Maximum number of lines allowed.\n * @param {number} [node.lineHeight=1.2] - Line height\n * @param {function} [measureFn] - Optional text measure function\n * @return {object} The bounding rectangle\n */\nexport function textBounds(node, measureFn = measureText) {\n  const lineBreakFn = resolveLineBreakAlgorithm(node);\n  const fontSize = node['font-size'] || node.fontSize;\n  const fontFamily = node['font-family'] || node.fontFamily;\n  const tm = measureFn({ text: node.text, fontFamily, fontSize });\n\n  if (lineBreakFn && (tm.width > node.maxWidth || includesLineBreak(node.text))) {\n    const resolvedLineBreaks = lineBreakFn(node, (text) => measureFn({ text, fontFamily, fontSize }));\n    const nodeCopy = extend({}, node);\n    let maxWidth = 0;\n    let widestLine = '';\n    for (let i = 0, len = resolvedLineBreaks.lines.length; i < len; i++) {\n      let line = resolvedLineBreaks.lines[i];\n      line += i === len - 1 && resolvedLineBreaks.reduced ? ELLIPSIS_CHAR : '';\n      const width = measureFn({ text: line, fontSize, fontFamily }).width;\n      if (width >= maxWidth) {\n        maxWidth = width;\n        widestLine = line;\n      }\n    }\n    nodeCopy.text = widestLine;\n    const bounds = calcTextBounds(nodeCopy, measureFn);\n    bounds.height = fontSizeToLineHeight(node) * resolvedLineBreaks.lines.length;\n\n    return bounds;\n  }\n\n  return calcTextBounds(node, measureFn);\n}\n","import extend from 'extend';\n\nimport { ellipsText } from '../../../../web/text-manipulation';\nimport { ELLIPSIS_CHAR } from '../../../../web/text-manipulation/text-const';\n\nconst LINE_HEIGHT = 1.2;\nconst CIRCLE_FACTOR = 0.9;\n\nfunction cbContext(node, chart) {\n  return {\n    node,\n    data: node.data,\n    scale: chart.scale,\n    formatter: chart.formatter,\n    dataset: chart.dataset,\n  };\n}\n\nexport function placeTextInRect(rect, text, opts) {\n  const label = {\n    type: 'text',\n    text,\n    maxWidth: rect.width,\n    x: 0,\n    y: rect.y,\n    dx: 0,\n    dy: 0,\n    fill: opts.fill,\n    anchor: 'start',\n    baseline: 'alphabetical',\n    fontSize: `${opts.fontSize}px`,\n    fontFamily: opts.fontFamily,\n  };\n\n  const textMetrics = opts.textMetrics;\n\n  if (rect.width < opts.fontSize) {\n    return false;\n  }\n\n  const wiggleWidth = Math.max(0, rect.width - textMetrics.width);\n  label.x = rect.x + opts.align * wiggleWidth;\n  label.y = rect.y + textMetrics.height / LINE_HEIGHT;\n\n  return label;\n}\n\nfunction getRectFromCircle({ cx, cy, r }) {\n  return {\n    type: 'circle',\n    bounds: { cx, cy, r },\n  };\n}\nfunction getSliceBounds(slice) {\n  const EPSILON = 1e-12;\n  let { start, end, innerRadius, outerRadius, offset } = slice;\n  if (Math.abs(start + 2 * Math.PI - end) > EPSILON) {\n    return { type: null, bounds: null };\n  }\n  let r = innerRadius !== 0 ? innerRadius : outerRadius;\n  return getRectFromCircle({ cx: offset.x, cy: offset.y, r });\n}\n\nfunction getBounds(node) {\n  if (node.desc && node.desc.slice) {\n    return getSliceBounds(node.desc.slice);\n  }\n  if (node.type === 'circle') {\n    return getRectFromCircle(node.attrs);\n  }\n  if (node.type === 'rect') {\n    return { type: 'rect', bounds: node.bounds };\n  }\n  // defualt to node.bounds ?\n  return { type: null, bounds: null };\n}\n\n/**\n * @typedef {object} component--labels~rows-label-strategy\n *\n */\n\n/**\n * @typedef {object} component--labels~rows-label-strategy.settings\n * @property {string} [fontFamily='Arial']\n * @property {number} [fontSize=12]\n * @property {number} [justify=0.5]\n * @property {number} [padding=4]\n * @property {Array<object>} labels\n * @property {string|function} labels[].label - The text value\n * @property {function} labels[].linkData - Link data to the label\n * @property {number} [labels[].align=0.5]\n * @property {string|function} [labels[].fill='#333']\n */\n\nexport function rows({ settings, chart, nodes, renderer, style }, placer = placeTextInRect) {\n  const defaults = extend(\n    {\n      fontSize: 12,\n      fontFamily: 'Arial',\n      fill: '#333',\n      padding: 4,\n      align: 0.5,\n      justify: 0.5,\n    },\n    style.label\n  );\n\n  defaults.fontSize = parseInt(defaults.fontSize, 10);\n\n  const rowSettings = extend({}, defaults, settings);\n\n  const labelSettings = settings.labels.map((labelSetting) => extend({}, rowSettings, labelSetting));\n\n  const labelStruct = {};\n  const labels = [];\n\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    let node = nodes[i];\n    let arg = cbContext(node, chart);\n\n    let { type, bounds } = getBounds(node);\n    if (!bounds) {\n      continue;\n    }\n\n    let totalHeight = 0;\n    let measurements = [];\n    let texts = [];\n\n    let maxHeight = type === 'circle' ? 2 * bounds.r * CIRCLE_FACTOR : bounds.height;\n    totalHeight += rowSettings.padding;\n    let j;\n    for (j = 0; j < labelSettings.length; j++) {\n      let lblStngs = labelSettings[j];\n      let text = typeof lblStngs.label === 'function' ? lblStngs.label(arg, i) : '';\n\n      labelStruct.fontFamily = lblStngs.fontFamily;\n      labelStruct.fontSize = `${lblStngs.fontSize}px`;\n      labelStruct.text = text;\n      let measured = renderer.measureText(labelStruct);\n      totalHeight += measured.height + lblStngs.padding;\n      if (totalHeight > maxHeight) {\n        break;\n      }\n      texts.push(text);\n      measurements.push(measured);\n    }\n\n    const labelCount = j;\n    const wiggleHeight = Math.max(0, maxHeight - totalHeight);\n    let currentY;\n    if (type === 'circle') {\n      currentY = bounds.cy - bounds.r * CIRCLE_FACTOR;\n    } else {\n      currentY = bounds.y;\n    }\n    currentY += rowSettings.justify * wiggleHeight + rowSettings.padding;\n\n    for (j = 0; j < labelCount; j++) {\n      let lblStngs = labelSettings[j];\n      let rect;\n      if (type === 'circle') {\n        let maxYDistToCenter = Math.max(\n          Math.abs(currentY - bounds.cy),\n          Math.abs(currentY + measurements[j].height - bounds.cy)\n        );\n        let halfWidth = Math.sqrt(bounds.r * bounds.r - maxYDistToCenter * maxYDistToCenter);\n        rect = {\n          x: bounds.cx - halfWidth + rowSettings.padding,\n          y: currentY,\n          width: 2 * halfWidth - 2 * rowSettings.padding,\n          height: measurements[j].height,\n        };\n      } else {\n        rect = {\n          x: bounds.x + rowSettings.padding,\n          y: currentY,\n          width: bounds.width - 2 * rowSettings.padding,\n          height: measurements[j].height,\n        };\n      }\n\n      currentY += measurements[j].height + rowSettings.padding;\n      let fill = typeof lblStngs.fill === 'function' ? lblStngs.fill(arg, i) : lblStngs.fill;\n      const linkData = typeof lblStngs.linkData === 'function' ? lblStngs.linkData(arg, i) : undefined;\n      let label = placer(rect, texts[j], {\n        fill,\n        align: lblStngs.align,\n        fontSize: lblStngs.fontSize,\n        fontFamily: lblStngs.fontFamily,\n        textMetrics: measurements[j],\n      });\n      if (label) {\n        if (label.text && label.text !== ELLIPSIS_CHAR) {\n          const ellipsed = ellipsText(label, renderer.measureText);\n          if (ELLIPSIS_CHAR === ellipsed) {\n            // don't include label if it's only an ellipsis\n            continue;\n          }\n          label.ellipsed = ellipsed;\n        }\n        if (typeof linkData !== 'undefined') {\n          label.data = linkData;\n        }\n        labels.push(label);\n      }\n    }\n  }\n\n  return labels;\n}\n","import { bars } from './bars';\nimport { slices } from './slices';\nimport { rows } from './rows';\n\nexport default {\n  bar: bars,\n  slice: slices,\n  rows,\n};\n","import strategies from './strategies';\n\n/**\n * @typedef {object} component--labels\n * @property {string} [type='labels']\n */\n\n/**\n * @typedef {object} component--labels.settings\n * @property {Array<object>} sources\n * @property {string} sources[].component\n * @property {string} sources[].selector\n * @property {component--labels~label-strategy} sources[].strategy\n */\n\nexport function strategy({ chart, source, rect, renderer, style }, fn) {\n  const component = chart.component(source.component);\n  if (!component) {\n    return [];\n  }\n  const nodes = chart.findShapes(source.selector).filter((n) => n.key === source.component);\n\n  return fn({\n    chart,\n    settings: source.strategy.settings,\n    nodes,\n    rect: {\n      x: 0,\n      y: 0,\n      width: rect.width,\n      height: rect.height,\n    },\n    renderer,\n    style,\n  });\n}\n\nconst labelsComponent = {\n  require: ['chart', 'renderer', 'settings'],\n  defaultSettings: {\n    settings: {},\n    style: {\n      label: '$label',\n    },\n  },\n  render() {\n    const stngs = this.settings.settings;\n    const labels = [];\n\n    (stngs.sources || []).forEach((source) => {\n      if (source.strategy && strategies[source.strategy.type] && source.component) {\n        labels.push(\n          ...strategy(\n            {\n              chart: this.chart,\n              rect: this.rect,\n              renderer: this.renderer,\n              source,\n              style: this.style,\n            },\n            strategies[source.strategy.type]\n          )\n        );\n      }\n    });\n\n    return labels;\n  },\n};\n\nexport default labelsComponent;\n","import labelsComponent from './labels';\n\nexport default function labels(picasso) {\n  picasso.component('labels', labelsComponent);\n}\n","import extend from 'extend';\n\n/**\n * @typedef {object}\n * @alias component--legend-cat.settings\n */\nconst DEFAULT_SETTINGS = {\n  /**\n   * @typedef {object=}\n   */\n  layout: {\n    /**\n     * Maximum number of columns (vertical) or rows (horizontal)\n     * @type {number=}\n     */\n    size: 1,\n    /**\n     * Layout direction. Either `'ltr'` or `'rtl'`\n     * @type {string=}\n     */\n    direction: 'ltr',\n    /** Initial scroll offset\n     * @type {number=} */\n    scrollOffset: 0,\n  },\n  /**\n   * Settings applied per item\n   * @typedef {object=}\n   */\n  item: {\n    /** Whether to show the current item\n     * @type {boolean=} */\n    show: true,\n    justify: 0.5,\n    align: 0.5,\n    /**\n     * @typedef {object=} */\n    label: {\n      fontSize: '12px',\n      fontFamily: 'Arial',\n      fill: '#595959',\n      /** Word break rule, how to apply line break if label text overflows its maxWidth property. Either `'break-word'` or `'break-all'`\n       * @type {string=} */\n      wordBreak: 'none',\n      /** Max number of lines allowed if label is broken into multiple lines (only applicable with wordBreak)\n       * @type {number=} */\n      maxLines: 2,\n      /** Maximum width of label, in px\n       * @type {number=} */\n      maxWidth: 136,\n      lineHeight: 1.2,\n    },\n    /**\n     * @typedef {object=} */\n    shape: {\n      /**\n       * @type {string=} */\n      type: 'square',\n      /**\n       * @type {number=} */\n      size: 12,\n    },\n  },\n  /**\n   * @typedef {object=} */\n  title: {\n    /** Whether to show the title\n     * @type {boolean=} */\n    show: true,\n    /** Title text. Defaults to the title of the provided data field\n     * @type {string=} */\n    text: undefined,\n    /** Horizontal alignment of the text. Allowed values are `'start'`, `'middle'` and `'end'`\n     * @type {string}\n     */\n    anchor: 'start',\n    fontSize: '16px',\n    fontFamily: 'Arial',\n    fill: '#595959',\n    /** Word break rule, how to apply line break if label text overflows its maxWidth property. Either `'break-word'` or `'break-all'`\n     * @type {string=} */\n    wordBreak: 'none',\n    /** Max number of lines allowed if label is broken into multiple lines, is only appled when `wordBreak` is not set to `'none'`\n     * @type {number=} */\n    maxLines: 2,\n    /** Maximum width of title, in px\n     * @type {number=} */\n    maxWidth: 156,\n    lineHeight: 1.25,\n  },\n  /**\n   * @typedef {object=} */\n  navigation: {\n    /**\n     * @typedef {object=} */\n    button: {\n      /**\n       * @type {object<string, boolean>=} */\n      class: undefined,\n      /**\n       * @type {function} */\n      content: undefined,\n      /**\n       * @type {number=} */\n      tabIndex: undefined,\n    },\n    /** Whether the button should be disabled or not\n     * @type {boolean=} */\n    disabled: false,\n  },\n};\n\n/**\n * Resolve settings based on input, defaults, and data\n *\n * @ignore\n * @param {legendComponent} comp - The component instance\n */\nexport default function resolveSettings(comp) {\n  const domain = comp.scale.domain();\n  let data = { items: [] };\n  const dock = comp.settings.layout.dock;\n  if (comp.scale.type === 'threshold-color') {\n    const fields = comp.scale.data().fields;\n    const sourceField = fields[0];\n    let formatter = (v) => String(v);\n\n    if (comp.settings.formatter) {\n      formatter = comp.chart.formatter(comp.settings.formatter);\n    } else if (sourceField) {\n      formatter = sourceField.formatter();\n    }\n\n    for (let i = 0; i < domain.length - 1; i++) {\n      const it = {\n        value: domain[i],\n        label: `${formatter(domain[i])} - < ${formatter(domain[i + 1])}`,\n      };\n      if (sourceField) {\n        it.source = {\n          field: sourceField.id(),\n        };\n      }\n      data.items.push(it);\n    }\n    const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n\n    if (orientation === 'vertical') {\n      data.items.reverse();\n    }\n  } else {\n    const labels = comp.scale.labels ? comp.scale.labels() : null;\n    data.items = domain.map((d, idx) => {\n      const datum = comp.scale.datum ? extend({}, comp.scale.datum(d)) : { value: d };\n      datum.value = d;\n\n      if (comp.scale.label) {\n        datum.label = comp.scale.label(d);\n      } else if (labels) {\n        datum.label = labels[idx];\n      }\n\n      return datum;\n    });\n  }\n\n  const title = comp.resolver.resolve({\n    data: {\n      fields: comp.scale.data().fields,\n    },\n    defaults: extend(true, {}, DEFAULT_SETTINGS.title, comp.style.title),\n    settings: comp.settings.settings.title,\n  });\n\n  const layout = comp.resolver.resolve({\n    data: {\n      fields: comp.scale.data().fields,\n    },\n    defaults: DEFAULT_SETTINGS.layout,\n    settings: comp.settings.settings.layout,\n  });\n\n  const labels = comp.resolver.resolve({\n    data,\n    defaults: extend(true, {}, DEFAULT_SETTINGS.item.label, comp.style.item.label),\n    settings: (comp.settings.settings.item || {}).label,\n  });\n\n  const shapeSettings = extend(true, {}, (comp.settings.settings.item || {}).shape);\n\n  if (typeof shapeSettings.fill === 'undefined' && comp.settings.scale) {\n    shapeSettings.fill = {\n      scale: comp.settings.scale,\n    };\n  }\n\n  const symbols = comp.resolver.resolve({\n    data,\n    defaults: extend(true, {}, DEFAULT_SETTINGS.item.shape, comp.style.item.shape),\n    settings: shapeSettings,\n  });\n\n  const items = comp.resolver.resolve({\n    data,\n    defaults: extend(\n      true,\n      {},\n      {\n        show: DEFAULT_SETTINGS.item.show,\n      }\n    ),\n    settings: {\n      show: (comp.settings.settings.item || {}).show,\n    },\n  });\n\n  function range(item, i) {\n    let v = item.data.value;\n    let next = domain[i + 1];\n    item.data.value = [v, next];\n  }\n\n  if (comp.scale.type === 'threshold-color') {\n    const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n\n    if (orientation === 'vertical') {\n      items.items.reverse().forEach(range);\n      items.items.reverse();\n    } else {\n      items.items.forEach(range);\n    }\n  }\n\n  return {\n    title,\n    labels,\n    symbols,\n    items,\n    layout,\n  };\n}\n","import extend from 'extend';\n\n/* eslint no-mixed-operators:0 */\n\nfunction placeTextInRect(rect, label, opts) {\n  const textMetrics = opts.textMetrics;\n\n  if (rect.height < textMetrics.height) {\n    return false;\n  }\n\n  const wiggleWidth = Math.max(0, rect.width - textMetrics.width);\n  label.baseline = 'text-before-edge';\n  const wiggleHeight = Math.max(0, rect.height - textMetrics.height);\n  label.x = rect.x + opts.align * wiggleWidth;\n  label.y = rect.y + opts.justify * wiggleHeight + parseInt(label.fontSize, 10) * 0.175; // 0.175 - basline offset\n\n  return label;\n}\n\nfunction wiggleSymbol(container, size, opts) {\n  const wiggleWidth = Math.max(0, container.width - size);\n  const wiggleHeight = Math.max(0, container.height - size);\n\n  return {\n    x: container.x + size / 2 + opts.align * wiggleWidth,\n    y: container.y + size / 2 + opts.justify * wiggleHeight,\n  };\n}\n\nexport function createRenderItem({ x = 0, y, item, globalMetrics, createSymbol, direction = 'ltr' }) {\n  let label = item.label.displayObject;\n  let labelBounds = item.label.bounds;\n  let symbolItem = item.symbol.meta;\n  const rtl = direction === 'rtl';\n\n  let labelRect = {\n    x: rtl ? x + globalMetrics.maxLabelBounds.width : x + globalMetrics.maxSymbolSize + globalMetrics.spacing,\n    y,\n    width: globalMetrics.maxLabelBounds.width,\n    height: Math.max(globalMetrics.maxSymbolSize, globalMetrics.maxLabelBounds.height),\n  };\n\n  let wiggled = wiggleSymbol(\n    {\n      x: rtl ? x + globalMetrics.maxLabelBounds.width + globalMetrics.spacing : x,\n      y,\n      width: globalMetrics.maxSymbolSize,\n      height: labelRect.height,\n    },\n    symbolItem.size,\n    {\n      align: typeof symbolItem.align === 'undefined' ? 0.5 : symbolItem.align,\n      justify: typeof symbolItem.justify === 'undefined' ? 0.5 : symbolItem.justify,\n    }\n  );\n\n  const symbol = createSymbol(extend({}, symbolItem, wiggled));\n\n  delete symbol.collider;\n\n  label.anchor = rtl ? 'end' : 'start';\n\n  placeTextInRect(labelRect, label, {\n    textMetrics: labelBounds,\n    fontSize: parseInt(label.fontSize, 10),\n    align: 0.0,\n    justify: 0.5,\n  });\n\n  let container = {\n    type: 'container',\n    data: item.label.displayObject.data,\n    children: [symbol, label],\n    collider: {\n      type: 'rect',\n      x,\n      y,\n      width: globalMetrics.maxItemBounds.width,\n      height: globalMetrics.maxItemBounds.height,\n    },\n  };\n\n  return {\n    item: container,\n    metrics: labelRect,\n  };\n}\n\nexport function getItemsToRender({ viewRect }, rect, { itemized, create = createRenderItem, parallels, createSymbol }) {\n  const direction = itemized.layout.direction;\n  const globalMetrics = itemized.globalMetrics;\n  const legendItems = itemized.items;\n  const isHorizontal = itemized.layout.orientation === 'horizontal';\n  let s = 0;\n\n  const renderItems = [];\n  const fixedHeight = globalMetrics.maxItemBounds.height;\n  const fixedWidth = globalMetrics.maxItemBounds.width;\n  const rowHeight = itemized.layout.margin.vertical + fixedHeight;\n  const columnWidth = itemized.layout.margin.horizontal + fixedWidth;\n  let x = rect.x;\n  let y = rect.y;\n\n  let shift = viewRect.x - rect.x;\n\n  for (let i = 0; i < legendItems.length; i++) {\n    let renderItem = create({\n      y,\n      x: direction === 'rtl' ? viewRect.x + shift + viewRect.width - fixedWidth - (x - rect.x) : x,\n      item: legendItems[i],\n      globalMetrics,\n      direction,\n      createSymbol,\n    });\n\n    if ((isHorizontal && x >= viewRect.x - fixedWidth) || (!isHorizontal && y >= viewRect.y - fixedHeight)) {\n      renderItems.push(renderItem.item);\n    }\n\n    s++;\n    if (s >= parallels) {\n      s = 0;\n      if (isHorizontal) {\n        x += columnWidth; // next column\n        y = rect.y; // reset y to first row\n      } else {\n        y += rowHeight; // next row\n        x = rect.x; // reset x to first column\n      }\n    } else if (isHorizontal) {\n      y += rowHeight; // next row\n    } else {\n      x += columnWidth; // next column\n    }\n\n    if (!isHorizontal && y > viewRect.y + viewRect.height) {\n      break;\n    } else if (isHorizontal && x > viewRect.x + viewRect.width) {\n      break;\n    }\n  }\n  return renderItems;\n}\n\nexport function itemize({ resolved, dock }, renderer) {\n  let label;\n  let items = [];\n  let item;\n  let sourceItems = resolved.items.items;\n  let sourceSymbols = resolved.symbols.items;\n  let sourceLabels = resolved.labels.items;\n\n  let maxSymbolSize = 0;\n  let maxLabelWidth = 0;\n  let maxLabelHeight = 0;\n\n  for (let i = 0; i < sourceItems.length; i++) {\n    if (sourceItems[i].show === false) {\n      continue;\n    }\n\n    const text = typeof sourceLabels[i].text !== 'undefined' ? sourceLabels[i].text : sourceLabels[i].data.label || '';\n    label = extend({}, sourceLabels[i], {\n      // create the displayObject here in order to measure it\n      type: 'text',\n      fontSize: `${parseInt(sourceLabels[i].fontSize, 10)}px`,\n      text,\n      title: text,\n    });\n\n    item = {\n      symbol: {\n        // can't create a displayObject here due to need to wiggle the center position of the symbol later on,\n        // just store the object needed later on\n        meta: sourceSymbols[i],\n      },\n      label: {\n        displayObject: label,\n        bounds: renderer.textBounds(label),\n      },\n    };\n\n    items.push(item);\n\n    maxSymbolSize = Math.max(sourceSymbols[i].size, maxSymbolSize);\n    maxLabelWidth = Math.max(item.label.bounds.width, maxLabelWidth);\n    maxLabelHeight = Math.max(item.label.bounds.height, maxLabelHeight);\n  }\n\n  return {\n    items,\n    globalMetrics: {\n      spacing: 8,\n      maxSymbolSize,\n      maxItemBounds: {\n        height: Math.max(maxSymbolSize, maxLabelHeight),\n        width: maxSymbolSize + 8 + maxLabelWidth,\n      },\n      maxLabelBounds: {\n        width: maxLabelWidth,\n        height: maxLabelHeight,\n      },\n    },\n    layout: {\n      margin: {\n        vertical: typeof resolved.layout.item.vertical !== 'undefined' ? resolved.layout.item.vertical : 4,\n        horizontal: typeof resolved.layout.item.horizontal !== 'undefined' ? resolved.layout.item.horizontal : 4,\n      },\n      mode: resolved.layout.item.mode,\n      size: resolved.layout.item.size,\n      orientation: dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical',\n      direction: resolved.layout.item.direction,\n      scrollOffset: resolved.layout.item.scrollOffset,\n    },\n  };\n}\n\nexport function extent(itemized, parallels) {\n  const count = itemized.items.length;\n  const size = Math.ceil(count / parallels);\n  const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n  const margin = property === 'width' ? 'horizontal' : 'vertical';\n  return itemized.globalMetrics.maxItemBounds[property] * size + (size - 1) * itemized.layout.margin[margin];\n}\n\nexport function spread(itemized, parallels) {\n  const size = parallels;\n  const property = itemized.layout.orientation === 'horizontal' ? 'height' : 'width';\n  const margin = property === 'width' ? 'horizontal' : 'vertical';\n  return (\n    itemized.globalMetrics.maxItemBounds[property] * size + // expected vertical size of items\n    (size - 1) * itemized.layout.margin[margin]\n  ); // expected spacing between items\n}\n\nexport function parallelize(availableExtent, availableSpread, itemized) {\n  const count = itemized.items.length;\n  const extentProperty = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n  const margin = extentProperty === 'width' ? 'horizontal' : 'vertical';\n  const extentInPx =\n    itemized.globalMetrics.maxItemBounds[extentProperty] * count + (count - 1) * itemized.layout.margin[margin];\n  let numNeeded = Math.ceil(extentInPx / availableExtent);\n\n  if (availableSpread != null) {\n    const spreadProperty = itemized.layout.orientation === 'horizontal' ? 'height' : 'width';\n    const spreadMargin = spreadProperty === 'width' ? 'horizontal' : 'vertical';\n    const spreadMarginSize = itemized.layout.margin[spreadMargin] || 4;\n    const numAllowed = Math.floor(\n      (availableSpread + spreadMarginSize) / (spreadMarginSize + itemized.globalMetrics.maxItemBounds[spreadProperty])\n    );\n    numNeeded = Math.min(numNeeded, numAllowed);\n  }\n\n  const numInput = isNaN(itemized.layout.size) ? 1 : itemized.layout.size;\n  return Math.max(1, Math.min(numNeeded, numInput));\n}\n\nexport default function (legend, { onScroll = () => {} }) {\n  let itemized;\n  let parallels;\n  let viewRect;\n  let containerRect;\n  let offset = null;\n  let overflow = 0;\n\n  const api = {\n    itemize: (obj) => {\n      itemized = itemize(obj, legend.renderer);\n      offset = !isNaN(itemized.layout.scrollOffset) ? itemized.layout.scrollOffset : offset; // Set the initial offset\n    },\n    getItemsToRender: (obj) => {\n      viewRect = obj.viewRect;\n      overflow = api.getContentOverflow(viewRect);\n      const ext = api.extent();\n      offset = Math.max(0, Math.min(offset, overflow));\n\n      containerRect = extend({}, viewRect);\n\n      const offsetProperty = api.orientation() === 'horizontal' ? 'x' : 'y';\n      containerRect[offsetProperty] -= offset;\n      containerRect[offsetProperty === 'x' ? 'width' : 'height'] = ext;\n\n      return getItemsToRender(obj, containerRect, { itemized, parallels, createSymbol: legend.symbol });\n    },\n    parallelize: (availableExtent, availableSpread) => {\n      parallels = parallelize(availableExtent, availableSpread, itemized);\n      return parallels;\n    },\n    hasContentOverflow: () => {\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      return extent(itemized, parallels) > viewRect[property];\n    },\n    getContentOverflow: (rect = viewRect) => {\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      return Math.max(0, extent(itemized, parallels) - rect[property]);\n    },\n    getNextSize: () => {\n      // TODO - calculate the actual size to next item to ensure alignment\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      const margin = property === 'width' ? 'horizontal' : 'vertical';\n      return itemized.globalMetrics.maxItemBounds[property] + itemized.layout.margin[margin];\n    },\n    getPrevSize: () => {\n      // TODO - calculate the actual size to next item to ensure alignment\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      const margin = property === 'width' ? 'horizontal' : 'vertical';\n      return itemized.globalMetrics.maxItemBounds[property] + itemized.layout.margin[margin];\n    },\n    hasNext: () => {\n      if (api.orientation() === 'horizontal') {\n        return viewRect.x + viewRect.width < containerRect.x + containerRect.width;\n      }\n      return viewRect.y + viewRect.height < containerRect.y + containerRect.height;\n    },\n    hasPrev: () => {\n      if (api.orientation() === 'horizontal') {\n        return containerRect.x < viewRect.x;\n      }\n      return containerRect.y < viewRect.y;\n    },\n    next: () => {\n      api.scroll(-api.getNextSize());\n    },\n    prev: () => {\n      api.scroll(api.getPrevSize());\n    },\n    scroll: (delta) => {\n      const current = Math.max(0, Math.min(overflow, offset - delta));\n      if (current === offset) {\n        return;\n      }\n      offset = current;\n      onScroll();\n    },\n    offset: () => offset,\n    orientation: () => itemized.layout.orientation,\n    direction: () => itemized.layout.direction,\n    extent: () => extent(itemized, parallels), // total amount of space along orientation\n    spread: () => spread(itemized, parallels), // total amount of space perpendicular to orientation\n  };\n\n  return api;\n}\n","/**\n * Concatenate object keys into a space separated string. Use for transforming a 'class name map' into a class string\n * @private\n * @param  {Object} classMap Object with class names as keys and true or false values depending on if they should be in the returned class string or not\n * @return {String} Space separated string with class names\n */\nexport default function classString(classMap) {\n  return Object.keys(classMap)\n    .filter((className) => classMap[className])\n    .join(' ');\n}\n","import extend from 'extend';\nimport classString from '../../utils/class-string';\n\nconst DIR = {\n  up: '\\u25B2',\n  right: '\\u25B6',\n  down: '\\u25BC',\n  left: '\\u25C0',\n};\n\nfunction itemize({\n  // resolved,\n  dock,\n  navigation,\n}) {\n  return {\n    layout: {\n      orientation: dock === 'top' || dock === 'bottom' ? 'vertical' : 'horizontal',\n    },\n    navigation,\n  };\n}\n\nfunction btn(h, { size, isActive, direction, nav, attrs }) {\n  let c = {};\n  let content = '';\n  const attrsMerged = attrs;\n  if (nav && nav.button) {\n    if (typeof nav.button.class === 'function') {\n      c = nav.button.class({ direction });\n    } else if (nav.button.class) {\n      c = nav.button.class;\n    }\n    if (typeof nav.button.content === 'function') {\n      content = nav.button.content(h, { direction });\n    }\n    if (nav.button.tabIndex !== undefined) {\n      attrsMerged.tabindex = nav.button.tabIndex;\n    }\n  }\n  const style = {\n    width: `${size}px`,\n    minWidth: `${size}px`,\n    height: `${size}px`,\n  };\n\n  if (!Object.keys(c).length) {\n    // if no classes are set, add some basic styling\n    style.border = '0';\n    style.background = 'none';\n  }\n\n  if (!isActive || (nav && nav.disabled)) {\n    attrsMerged.disabled = 'disabled';\n  }\n\n  return h(\n    'button',\n    extend(\n      {\n        class: classString(c),\n        style,\n      },\n      attrsMerged\n    ),\n    [\n      content ||\n        h(\n          'span',\n          {\n            style: {\n              pointerEvents: 'none',\n            },\n          },\n          [DIR[direction]]\n        ),\n    ]\n  );\n}\n\nfunction render(renderer, { rect, itemRenderer }, itemized, legend) {\n  if (!renderer || !renderer.renderArgs) {\n    return;\n  }\n  renderer.size(rect);\n  const h = renderer.renderArgs[0];\n\n  const isVertical = itemized.layout.orientation === 'vertical'; // orientation of the navigation (not the legend)\n  const isRtl = itemRenderer.direction() === 'rtl';\n\n  const hasNext = itemRenderer.hasNext();\n  const hasPrev = itemRenderer.hasPrev();\n\n  if (!hasPrev && !hasNext) {\n    renderer.render([]);\n    return;\n  }\n\n  const buttonSize = 32;\n\n  const order = isVertical ? ['right', 'left'] : ['down', 'up'];\n\n  if (isRtl && isVertical) {\n    order.reverse();\n  }\n\n  const nodes = [\n    h(\n      'div',\n      {\n        style: {\n          position: 'relative',\n          display: 'flex',\n          'flex-direction': isVertical ? 'column' : 'row',\n          'justify-content': 'center',\n          height: '100%',\n          pointerEvents: 'auto',\n        },\n        dir: isRtl && !isVertical ? 'rtl' : 'ltr',\n      },\n      [\n        btn(h, {\n          size: buttonSize,\n          isActive: hasNext,\n          direction: order[0],\n          attrs: {\n            'data-action': 'next',\n            'data-component-key': legend.settings.key,\n          },\n          nav: itemized.navigation,\n        }),\n        btn(h, {\n          size: buttonSize,\n          isActive: hasPrev,\n          direction: order[1],\n          attrs: {\n            'data-action': 'prev',\n            'data-component-key': legend.settings.key,\n          },\n          nav: itemized.navigation,\n        }),\n      ]\n    ),\n  ];\n  renderer.render(nodes);\n}\n\nexport default function (legend) {\n  let itemized;\n\n  const nav = {\n    itemize: (obj) => {\n      itemized = itemize(obj);\n    },\n    render: (obj) => render(nav.renderer, obj, itemized, legend),\n    extent: () => 32,\n    spread: () => 64,\n  };\n\n  return nav;\n}\n","import extend from 'extend';\n\nfunction itemize({ resolved }, legend) {\n  if (resolved.title.item.show === false) {\n    return null;\n  }\n  const t = extend({}, resolved.title.item, {\n    type: 'text',\n  });\n\n  if (resolved.layout.item.direction === 'rtl') {\n    if (!t.anchor || t.anchor === 'start') {\n      t.anchor = 'end';\n    } else if (t.anchor === 'end') {\n      t.anchor = 'start';\n    }\n  }\n\n  if (typeof resolved.title.settings.text === 'undefined') {\n    const fields = legend.scale.data().fields;\n    t.text = fields && fields[0] ? fields[0].title() : '';\n  }\n\n  return {\n    displayObject: t,\n    bounds: legend.renderer.textBounds(t),\n  };\n}\n\nfunction render({ rect }, renderer, itemized) {\n  if (!renderer) {\n    return;\n  }\n  const nodes = [];\n  renderer.size(rect);\n  if (itemized) {\n    const align = {\n      start: 0,\n      end: rect.width,\n      middle: rect.width / 2,\n    };\n    nodes.push(\n      extend({}, itemized.displayObject, {\n        x: align[itemized.displayObject.anchor] || 0,\n        y: 0,\n        baseline: 'text-before-edge',\n        title: itemized.displayObject.text,\n      })\n    );\n  }\n  renderer.render(nodes);\n}\n\nexport default function (legend) {\n  let itemized;\n\n  const api = {\n    itemize: (obj) => {\n      itemized = itemize(obj, legend);\n    },\n    render: (obj) => {\n      render(obj, api.renderer, itemized);\n    },\n    spread: () => (itemized ? itemized.bounds.height : 0),\n    extent: () => (itemized ? itemized.bounds.width : 0),\n  };\n\n  return api;\n}\n","import extend from 'extend';\n/* eslint no-mixed-operators:0 */\n\nexport default function layout(\n  rect,\n  display,\n  orientation,\n  { itemRenderer, navigationRenderer, titleRenderer, isPreliminary = false }\n) {\n  let title;\n  let content;\n  let navigation;\n  let preferredSize = 0;\n\n  const paddedRect = {\n    x: display.spacing,\n    y: display.spacing,\n    width: rect.width - 2 * display.spacing,\n    height: rect.height - 2 * display.spacing,\n  };\n\n  title = {\n    x: paddedRect.x,\n    y: paddedRect.y,\n    width: paddedRect.width,\n    height: titleRenderer.spread(),\n  };\n\n  if (orientation === 'horizontal') {\n    // const titleAtTop = false;\n    // if (titleAtTop) { // this might be a nicer layout sometimes\n    //   // |------------------|\n    //   // |title             |\n    //   // |------------|-----|\n    //   // |content     | nav |\n    //   // |------------|-----|\n\n    //   // available space for items without navigation UI\n    //   const availableExtentForItems = paddedRect.width;\n    //   const availableSpreadForItems = paddedRect.height - (title.y + title.height) + 8;\n    //   const isRtl = itemRenderer.direction() === 'rtl';\n    //   itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    //   const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    //   content = {\n    //     x: paddedRect.x,\n    //     y: title.y + title.height,\n    //     width: paddedRect.width - navigationSize,\n    //     height: availableSpreadForItems\n    //   };\n    //   navigation = {\n    //     x: content.x + content.width,\n    //     y: title.y + title.height,\n    //     width: navigationSize,\n    //     height: paddedRect.height - (title.y + title.height) + 8\n    //   };\n\n    //   if (isRtl) { // switch navigation and content\n    //     navigation.x = content.x;\n    //     content.x = navigation.x + navigation.width;\n    //     // totalContent.x = navigation.x;\n    //   }\n    //   preferredSize = title.height + Math.max(navigationRenderer.spread(), itemRenderer.spread());\n    // } else {\n    // |-----|------------|-----|\n    // |title|content     | nav |\n    // |-----|------------|-----|\n\n    title = {\n      x: paddedRect.x,\n      y: paddedRect.y,\n      width: titleRenderer.extent(),\n      height: titleRenderer.spread(),\n    };\n\n    // available space for items without navigation UI\n    const availableExtentForItems = paddedRect.width - title.width - (title.width ? display.spacing : 0);\n    const availableSpreadForItems = paddedRect.height;\n    itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    const spread = itemRenderer.spread();\n    const navigationSpread = navigationSize ? navigationRenderer.spread() : 0;\n    content = {\n      x: title.x + title.width + (title.width ? display.spacing : 0),\n      y: paddedRect.y + Math.max(0, (navigationSpread - spread) / 2),\n      width:\n        paddedRect.width -\n        navigationSize -\n        title.width -\n        (navigationSize ? display.spacing : 0) -\n        (title.width ? display.spacing : 0),\n      height: availableSpreadForItems,\n    };\n    navigation = {\n      x: content.x + content.width + (navigationSize ? display.spacing : 0),\n      y: paddedRect.y,\n      width: navigationSize,\n      height: paddedRect.height,\n    };\n\n    title.y = content.y;\n\n    const isRtl = itemRenderer.direction() === 'rtl';\n    if (isRtl) {\n      // switch title, content and navigation\n      navigation.x = paddedRect.x;\n      content.x = navigation.x + navigation.width + (navigation.width ? display.spacing : 0);\n      title.x = content.x + content.width + (title.width ? display.spacing : 0);\n    }\n    preferredSize = Math.max(title.height, navigationSpread, itemRenderer.spread());\n    // }\n  } else {\n    // |------------|\n    // |title       |\n    // |------------|\n    // |content     |\n    // |------------|\n    // |navigation  |\n    // |------------|\n\n    const availableExtentForItems = paddedRect.height - title.height - (title.height ? display.spacing : 0);\n    const availableSpreadForItems = paddedRect.width;\n    itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    navigation = {\n      x: paddedRect.x,\n      y: paddedRect.y + paddedRect.height - navigationSize,\n      width: paddedRect.width,\n      height: navigationSize,\n    };\n\n    content = {\n      x: paddedRect.x,\n      y: title.y + title.height + (title.height ? display.spacing : 0),\n      width: paddedRect.width,\n      height:\n        paddedRect.height -\n        title.height -\n        (title.height ? display.spacing : 0) -\n        navigation.height -\n        (navigation.height ? display.spacing : 0),\n    };\n\n    preferredSize = Math.max(\n      titleRenderer.extent(),\n      navigationSize ? navigationRenderer.spread() : 0,\n      itemRenderer.spread()\n    );\n  }\n\n  content = extend({}, rect, {\n    x: rect.x + content.x,\n    y: rect.y + content.y,\n    width: content.width,\n    height: content.height,\n  });\n\n  navigation.x += rect.x;\n  navigation.y += rect.y;\n\n  title.x += rect.x;\n  title.y += rect.y;\n\n  return {\n    title: extend({}, rect, title),\n    content: extend({}, rect, content),\n    navigation: extend({}, rect, navigation),\n    orientation,\n    preferredSize,\n  };\n}\n","import extend from 'extend';\nimport resolveSettings from './legend-resolver';\nimport itemRendererFactory from './item-renderer';\nimport navigationRendererFactory from './navigation-renderer';\nimport titleRendererFactory from './title-renderer';\nimport layout from './legend-layout';\n\nfunction update(comp) {\n  comp.state.resolved = resolveSettings(comp);\n  comp.titleRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.layout.dock || 'center',\n  });\n  comp.itemRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.layout.dock || 'center',\n  });\n  comp.navigationRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.layout.dock || 'center',\n    navigation: comp.settings.settings.navigation,\n  });\n\n  comp.state.display = {\n    spacing: 8,\n  };\n}\n\nfunction preferredSize(comp, size) {\n  let s = 0;\n  const dock = comp.settings.layout.dock || 'center';\n  const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n  const d = comp.state.display;\n  const tempLayout = layout(size.inner, d, orientation, {\n    itemRenderer: comp.itemRenderer,\n    navigationRenderer: comp.navigationRenderer,\n    titleRenderer: comp.titleRenderer,\n    isPreliminary: true,\n  });\n  s += d.spacing; // start padding in both vertical and horizontal mode\n  s += tempLayout.preferredSize;\n  s += d.spacing; // end padding in both vertical and horizontal mode\n  return s;\n}\n\nfunction render(legend) {\n  const { rect, settings, state, itemRenderer, navigationRenderer, titleRenderer } = legend;\n  const dock = settings.layout.dock;\n  const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n  const l = layout(rect, state.display, orientation, {\n    itemRenderer,\n    navigationRenderer,\n    titleRenderer,\n  });\n\n  legend.renderer.size(l.content);\n\n  // l.content.x = 0;\n  // l.content.y = 0;\n\n  // l.navigation.x += rect.x;\n  // l.navigation.y += rect.y;\n\n  // l.title.x += rect.x;\n  // l.title.y += rect.y;\n\n  let contentItems = itemRenderer.getItemsToRender({\n    viewRect: extend({}, l.content, { x: 0, y: 0 }),\n  });\n\n  navigationRenderer.render({\n    rect: l.navigation,\n    itemRenderer,\n  });\n\n  titleRenderer.render({\n    rect: l.title,\n  });\n\n  legend.state.views = {\n    layout: l,\n  };\n\n  return contentItems;\n}\n\nconst component = {\n  require: ['chart', 'settings', 'renderer', 'update', 'resolver', 'registries', 'symbol'],\n  defaultSettings: {\n    settings: {},\n    style: {\n      item: {\n        label: '$label',\n        shape: '$shape',\n      },\n      title: '$title',\n    },\n  },\n  mounted(renderElement) {\n    if (renderElement && renderElement.parentNode) {\n      this.navigationRenderer.renderer.appendTo(renderElement.parentNode);\n      this.titleRenderer.renderer.appendTo(renderElement.parentNode);\n\n      renderElement.parentNode.insertBefore(this.navigationRenderer.renderer.element(), renderElement);\n      renderElement.parentNode.insertBefore(this.titleRenderer.renderer.element(), renderElement);\n    }\n    this.navigationRenderer.render({\n      rect: this.state.views.layout.navigation,\n      itemRenderer: this.itemRenderer,\n    });\n\n    this.titleRenderer.render({\n      rect: this.state.views.layout.title,\n    });\n  },\n  beforeUnmount() {\n    this.navigationRenderer.renderer.clear();\n    this.titleRenderer.renderer.clear();\n  },\n  on: {\n    panstart() {\n      if (this.state.interaction.started) {\n        return;\n      }\n      const contentOverflow = this.itemRenderer.getContentOverflow();\n      if (!contentOverflow) {\n        return;\n      }\n      this.state.interaction.started = true;\n      this.state.interaction.delta = 0;\n    },\n    panmove(e) {\n      if (!this.state.interaction.started) {\n        return;\n      }\n      const delta =\n        this.itemRenderer.orientation() === 'horizontal'\n          ? (this.itemRenderer.direction() === 'rtl' ? -1 : 1) * e.deltaX\n          : e.deltaY;\n      this.itemRenderer.scroll(delta - this.state.interaction.delta);\n      this.state.interaction.delta = delta;\n    },\n    panend() {\n      this.state.interaction.started = false;\n    },\n    scroll(delta) {\n      this.itemRenderer.scroll(-delta);\n    },\n    next() {\n      this.itemRenderer.next();\n    },\n    prev() {\n      this.itemRenderer.prev();\n    },\n  },\n  created() {\n    this.state = {\n      interaction: {},\n    };\n    this.onScroll = () => {\n      const items = render(this);\n      this.update(items);\n    };\n    this.itemRenderer = itemRendererFactory(this, {\n      onScroll: this.onScroll,\n    });\n    this.navigationRenderer = navigationRendererFactory(this);\n    this.titleRenderer = titleRendererFactory(this);\n    this.navigationRenderer.renderer = this.registries.renderer('dom')();\n    this.titleRenderer.renderer = this.registries.renderer(this.settings.renderer)();\n    update(this);\n  },\n  preferredSize(obj) {\n    return preferredSize(this, obj);\n  },\n  beforeUpdate() {\n    update(this);\n  },\n  render() {\n    return render(this);\n  },\n  beforeDestroy() {\n    this.navigationRenderer.renderer.destroy();\n    this.titleRenderer.renderer.destroy();\n  },\n  additionalElements() {\n    return [this.titleRenderer.renderer.element(), this.navigationRenderer.renderer.element()];\n  },\n  _DO_NOT_USE_getInfo() {\n    return {\n      offset: this.itemRenderer.offset(),\n    };\n  },\n};\n\nexport default component;\n","import component from './legend-cat';\n\n/**\n * @typedef {object} component--legend-cat\n * @property {string} scale\n */\n\n/**\n * @type {string}\n * @memberof component--legend-cat\n */\nconst type = 'legend-cat';\n\nexport default function categoricalLegend(picasso) {\n  picasso.component(type, component);\n}\n","function applyAlignJustify(ctx, node) {\n  let wiggle = 0;\n  const cmd = {\n    type: ctx.state.isVertical ? 'justify' : 'align',\n    coord: ctx.state.isVertical ? 'y' : 'x',\n    pos: ctx.state.isVertical ? 'height' : 'width',\n    fn: ctx.state.isVertical ? 'requiredHeight' : 'requiredWidth',\n  };\n\n  wiggle = ctx.state.rect[cmd.pos] - ctx.state.legend.length() - ctx.state.title[cmd.fn]();\n  wiggle *= Math.min(1, Math.max(ctx.stgns[cmd.type], 0));\n  node[cmd.coord] += wiggle;\n}\n\nexport function generateStopNodes(ctx) {\n  const fillScale = ctx.state.legend.fillScale;\n  const majorScale = ctx.state.legend.majorScale;\n  const stops = fillScale.domain().map((d) => ({\n    type: 'stop',\n    color: fillScale(d),\n    offset: Math.min(1, Math.max(0, majorScale.norm(d))),\n  }));\n\n  return stops.sort((a, b) => a.offset - b.offset);\n}\n\nexport function createTitleNode(ctx) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  const isTickLeft = state.ticks.anchor === 'left';\n  const isTickTop = state.ticks.anchor === 'top';\n  let x = state.rect.x;\n  let y = state.rect.y;\n  let textAnchor = 'start';\n\n  if (state.title.anchor === 'left') {\n    x += state.title.requiredWidth() - settings.title.padding;\n    y += state.title.textMetrics.height;\n    y += isTickTop ? state.rect.height - state.title.textBounds.height : 0;\n    textAnchor = 'end';\n  } else if (state.title.anchor === 'right') {\n    x += state.legend.length();\n    x += settings.title.padding;\n    y += state.title.textMetrics.height;\n    y += isTickTop ? state.rect.height - state.title.textBounds.height : 0;\n  } else if (state.title.anchor === 'top') {\n    x += isTickLeft ? state.rect.width : 0;\n    y += state.title.textMetrics.height;\n    textAnchor = isTickLeft ? 'end' : 'start';\n  }\n\n  const node = {\n    tag: 'legend-title',\n    type: 'text',\n    x,\n    y: Math.min(y, state.rect.y + state.rect.height),\n    text: settings.title.text,\n    fill: settings.title.fill,\n    fontSize: settings.title.fontSize,\n    fontFamily: settings.title.fontFamily,\n    maxWidth: settings.title.maxLengthPx,\n    maxLines: settings.title.maxLines,\n    wordBreak: settings.title.wordBreak,\n    hyphens: settings.title.hyphens,\n    lineHeight: settings.title.lineHeight,\n    anchor: textAnchor,\n    title: settings.title.text,\n  };\n\n  applyAlignJustify(ctx, node);\n  return node;\n}\n\nexport function createLegendRectNode(ctx, stops) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  const container = state.rect;\n  let x = container.x;\n  let y = container.y;\n  let width = state.isVertical ? settings.size : state.legend.length();\n  let height = state.isVertical ? state.legend.length() : settings.size;\n\n  if (state.ticks.anchor === 'left') {\n    x += state.rect.width - settings.size;\n  } else if (state.ticks.anchor === 'top') {\n    y += state.rect.height - settings.size;\n  }\n\n  if (state.title.anchor === 'top') {\n    y += state.title.requiredHeight();\n  } else if (state.title.anchor === 'left') {\n    x += state.title.requiredWidth();\n  }\n\n  const node = {\n    type: 'rect',\n    x,\n    y,\n    width,\n    height,\n    fill: {\n      type: 'gradient',\n      stops,\n      degree: state.isVertical ? 90 : 180,\n    },\n  };\n\n  applyAlignJustify(ctx, node);\n  return node;\n}\n\nexport function createTickNodes(ctx, legendNode) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  let anchor = 'start';\n  const rangeSelectorRect = {\n    type: 'rect',\n    x: legendNode.x,\n    y: legendNode.y,\n    width: state.isVertical ? 0 : legendNode.width,\n    height: state.isVertical ? legendNode.height : 0,\n    fill: 'transparent',\n  };\n\n  const nodes = state.ticks.values.map((tick) => {\n    let x = 0;\n    let y = 0;\n    let dx = 0;\n    let dy = 0;\n    let baseline = 'alphabetical';\n\n    if (state.isVertical) {\n      y = legendNode.y + legendNode.height * tick.pos;\n      baseline = tick.pos === 0 ? 'text-before-edge' : 'text-after-edge';\n    } else {\n      x = legendNode.x + legendNode.width * tick.pos;\n    }\n\n    if (state.ticks.anchor === 'right') {\n      x = legendNode.x + settings.size + settings.tick.padding;\n\n      rangeSelectorRect.x = legendNode.x + legendNode.width;\n    } else if (state.ticks.anchor === 'left') {\n      x = legendNode.x - settings.tick.padding;\n      anchor = 'end';\n    } else if (state.ticks.anchor === 'top') {\n      y = legendNode.y - settings.tick.padding;\n      dy -= tick.textMetrics.height * 0.25;\n      anchor = tick.pos === 0 ? 'start' : 'end';\n    } else if (state.ticks.anchor === 'bottom') {\n      y = legendNode.y + legendNode.height + settings.tick.padding;\n      dy = tick.textMetrics.height * 0.8;\n      anchor = tick.pos === 0 ? 'start' : 'end';\n\n      rangeSelectorRect.y = legendNode.y + legendNode.height;\n    }\n\n    const node = {\n      type: 'text',\n      x,\n      y,\n      dx,\n      dy,\n      text: tick.label,\n      fontSize: settings.tick.fontSize,\n      fontFamily: settings.tick.fontFamily,\n      fill: settings.tick.fill,\n      maxWidth: state.isVertical\n        ? settings.tick.maxLengthPx\n        : Math.min(settings.tick.maxLengthPx, state.legend.length() / 2),\n      anchor,\n      textBoundsFn: ctx.renderer.textBounds,\n      title: tick.label,\n      baseline,\n    };\n\n    return node;\n  });\n\n  return {\n    type: 'container',\n    id: 'legend-seq-ticks',\n    children: [...nodes, rangeSelectorRect],\n  };\n}\n","import { createTitleNode, generateStopNodes, createLegendRectNode, createTickNodes } from './node-builder';\n\nfunction resolveAnchor(dock, anchor, map) {\n  const mapped = map[dock];\n  if (typeof mapped === 'object') {\n    if (mapped.valid.indexOf(anchor) !== -1) {\n      return anchor;\n    }\n    return mapped.default;\n  }\n\n  return map.default;\n}\n\nfunction resolveTickAnchor(settings) {\n  const dock = settings.layout.dock;\n  const anchor = settings.settings.tick.anchor;\n\n  const dockAnchorMap = {\n    left: { valid: ['left', 'right'], default: 'left' },\n    right: { valid: ['left', 'right'], default: 'right' },\n    top: { valid: ['top', 'bottom'], default: 'top' },\n    bottom: { valid: ['top', 'bottom'], default: 'bottom' },\n    default: 'right',\n  };\n\n  return resolveAnchor(dock, anchor, dockAnchorMap);\n}\n\nfunction resolveTitleAnchor(settings) {\n  const dockAnchorMap = {\n    left: { valid: ['top'], default: 'top' },\n    right: { valid: ['top'], default: 'top' },\n    top: { valid: ['left', 'right'], default: 'left' },\n    bottom: { valid: ['left', 'right'], default: 'left' },\n    default: 'top',\n  };\n\n  const dock = settings.layout.dock;\n  const anchor = settings.settings.title.anchor;\n\n  return resolveAnchor(dock, anchor, dockAnchorMap);\n}\n\nfunction initRect(ctx, size) {\n  const rect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n  const padding = ctx.stgns.padding;\n  rect.x = padding.left;\n  rect.y = padding.top;\n  rect.width = size.width - padding.left - padding.right;\n  rect.height = size.height - padding.top - padding.bottom;\n\n  return rect;\n}\n\nfunction getTicks(ctx, majorScale) {\n  const values = majorScale.domain();\n  let labels = values;\n  let labelFn = ctx.stgns.tick.label;\n  if (!labelFn && ctx.formatter) {\n    labelFn = ctx.formatter;\n  } else if (!labelFn && majorScale.data().fields) {\n    labelFn = majorScale.data().fields[0].formatter();\n  }\n  if (typeof labelFn === 'function') {\n    labels = values.map(labelFn).map(String);\n  }\n\n  const ticks = values.map((value, i) => {\n    const label = labels[i];\n    return {\n      value,\n      label,\n      pos: majorScale.norm(parseFloat(value, 10)),\n      textMetrics: ctx.renderer.measureText({\n        text: label,\n        fontSize: ctx.stgns.tick.fontSize,\n        fontFamily: ctx.stgns.tick.fontFamily,\n      }),\n    };\n  });\n\n  return ticks;\n}\n\nfunction initState(ctx) {\n  const isVertical = ctx.settings.layout.dock !== 'top' && ctx.settings.layout.dock !== 'bottom';\n  const titleStgns = ctx.stgns.title;\n\n  const fillScale = ctx.chart.scale(ctx.stgns.fill);\n  const majorScale = ctx.chart.scale(ctx.stgns.major);\n  const tickValues = getTicks(ctx, majorScale);\n  const tickAnchor = resolveTickAnchor(ctx.settings);\n\n  if (typeof titleStgns.text === 'undefined') {\n    const fields = majorScale.data().fields;\n    titleStgns.text = fields && fields[0] ? fields[0].title() : '';\n  }\n\n  const titleTextMetrics = ctx.renderer.measureText({\n    text: titleStgns.text,\n    fontSize: titleStgns.fontSize,\n    fontFamily: titleStgns.fontFamily,\n  });\n\n  const titleTextBounds = ctx.renderer.textBounds({\n    text: titleStgns.text,\n    fontSize: titleStgns.fontSize,\n    fontFamily: titleStgns.fontFamily,\n    maxLines: titleStgns.maxLines,\n    maxWidth: titleStgns.maxLengthPx,\n    wordBreak: titleStgns.wordBreak,\n    hyphens: titleStgns.hyphens,\n    lineHeight: titleStgns.lineHeight,\n  });\n\n  const state = {\n    isVertical,\n    nodes: [],\n    title: {\n      anchor: resolveTitleAnchor(ctx.settings),\n      textMetrics: titleTextMetrics,\n      textBounds: titleTextBounds,\n      requiredWidth: () => {\n        if (!titleStgns.show) {\n          return 0;\n        }\n        let w = titleTextBounds.width;\n        let mw = titleStgns.maxLengthPx;\n        if (!isVertical) {\n          w += titleStgns.padding;\n          mw += titleStgns.padding;\n        }\n        return Math.min(w, mw, state.rect.width);\n      },\n      requiredHeight: () => {\n        if (!titleStgns.show) {\n          return 0;\n        }\n        let h = titleTextBounds.height;\n        if (isVertical) {\n          h += titleStgns.padding;\n        }\n        return Math.min(h, state.rect.height);\n      },\n    },\n    ticks: {\n      values: tickValues,\n      anchor: tickAnchor,\n      length: Math.min(Math.max(...tickValues.map((t) => t.textMetrics.width)), ctx.stgns.tick.maxLengthPx),\n      requiredHeight: () =>\n        tickAnchor === 'top'\n          ? Math.max(...state.ticks.values.map((t) => t.textMetrics.height)) + ctx.stgns.tick.padding\n          : 0,\n      height: Math.max(...tickValues.map((t) => t.textMetrics.height)),\n    },\n    legend: {\n      fillScale,\n      majorScale,\n      length: () => {\n        const pos = isVertical ? 'height' : 'width';\n        const fnPos = isVertical ? 'requiredHeight' : 'requiredWidth';\n        const len = Math.min(state.rect[pos], state.rect[pos] * ctx.stgns.length) - state.title[fnPos]();\n        return Math.max(0, Math.min(len, ctx.stgns.maxLengthPx));\n      },\n    },\n  };\n\n  return state;\n}\n\n/**\n * @typedef {object} component--legend-seq\n * @property {string} fill - Reference to definition of sequential color scale\n * @property {string} major - Reference to definition of linear scale\n * @property {number} [size=15] - Size in pixels of the legend, if vertical is the width and height otherwise\n * @property {number} [length=1] - A value in the range 0-1 indicating the length of the legend node\n * @property {number} [maxLengthPx=250] - Max length in pixels\n * @property {number} [align=0.5] - A value in the range 0-1 indicating horizontal alignment of the legend's content. 0 aligns to the left, 1 to the right.\n * @property {number} [justify=0] - A value in the range 0-1 indicating vertical alignment of the legend's content. 0 aligns to the top, 1 to the bottom.\n * @property {object} [padding]\n * @property {number} [padding.left=5]\n * @property {number} [padding.right=5]\n * @property {number} [padding.top=5]\n * @property {number} [padding.bottom=5]\n * @property {object} [tick]\n * @property {function} [tick.label] - Function applied to all tick values, returned values are used as labels\n * @property {string} [tick.fill='#595959']\n * @property {string} [tick.fontSize='12px']\n * @property {string} [tick.fontFamily='Arial']\n * @property {number} [tick.maxLengthPx=150] - Max length in pixels\n * @property {string} [tick.anchor='right'] - Where to anchor the tick in relation to the legend node, supported values are [top, bottom, left and right]\n * @property {number} [tick.padding=5] - padding in pixels to the legend node\n * @property {object} [title] - Title settings\n * @property {boolean} [title.show=true] - Toggle title on/off\n * @property {string} [title.text=''] - Title text. Defaults to the title of the provided data field\n * @property {string} [title.fill='#595959']\n * @property {string} [title.fontSize='12px']\n * @property {string} [title.fontFamily='Arial']\n * @property {number} [title.maxLengthPx=100] - Max length in pixels\n * @property {number} [title.padding=5] - padding in pixels to the legend node\n * @property {string} [title.anchor='top'] - Where to anchor the title in relation to the legend node, supported values are [top, left and right]\n * @property {string} [title.wordBreak='none'] - How overflowing title is handled, if it should insert line breaks at word boundries (break-word) or character boundries (break-all)\n * @property {string} [title.hyphens='auto'] - How words should be hyphenated when text wraps across multiple lines (only applicable with wordBreak)\n * @property {number} [title.maxLines=2] - Number of allowed lines if title contains line breaks (only applicable with wordBreak)\n * @property {number} [title.lineHeight=1.2] - A multiplier defining the distance between lines (only applicable with wordBreak)\n */\n\nconst legendDef = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n      dock: 'right',\n    },\n    settings: {\n      size: 15,\n      length: 0.5,\n      maxLengthPx: 250,\n      align: 0.5,\n      justify: 0,\n      padding: {\n        left: 5,\n        right: 5,\n        top: 5,\n        bottom: 5,\n      },\n      tick: {\n        label: null,\n        fill: '#595959',\n        fontSize: '12px',\n        fontFamily: 'Arial',\n        maxLengthPx: 100,\n        anchor: null, // Use default based on dock\n        padding: 5,\n      },\n      title: {\n        show: true,\n        text: undefined,\n        fill: '#595959',\n        fontSize: '12px',\n        fontFamily: 'Arial',\n        maxLengthPx: 100,\n        padding: 5,\n        maxLines: 2,\n        wordBreak: 'none',\n        lineHeight: 1.2,\n        hyphens: 'auto',\n        anchor: null, // Use default based on dock\n      },\n    },\n  },\n  preferredSize(opts) {\n    const state = this.state;\n    state.rect = initRect(this, opts.inner);\n\n    // Init with size of legend\n    let prefSize = this.stgns.size;\n\n    // Append paddings\n    const paddings = state.isVertical\n      ? this.stgns.padding.left + this.stgns.padding.right\n      : this.stgns.padding.top + this.stgns.padding.bottom;\n    prefSize += paddings;\n\n    // Append tick size\n    const maxSize = Math.max(opts.inner.width, opts.inner.height);\n    if (state.ticks.anchor === 'left' || state.ticks.anchor === 'right') {\n      const tHeight = state.ticks.values.reduce((sum, t) => sum + t.textMetrics.height, 0);\n      if (tHeight > this.state.legend.length()) {\n        return maxSize;\n      }\n      prefSize += state.ticks.length;\n    } else {\n      const tWidth = state.ticks.length;\n      if (tWidth > this.state.legend.length()) {\n        return maxSize;\n      }\n      prefSize += Math.max(...state.ticks.values.map((t) => t.textMetrics.height));\n    }\n    prefSize += this.stgns.tick.padding;\n\n    // Append or use title size\n    if (this.stgns.title.show) {\n      if (state.title.anchor === 'left' || state.title.anchor === 'right') {\n        prefSize = Math.max(state.title.textBounds.height + paddings, prefSize);\n      } else {\n        prefSize = Math.max(prefSize, state.title.requiredWidth() + paddings);\n      }\n    }\n\n    this.state.preferredSize = prefSize;\n    return prefSize;\n  },\n  created() {\n    this.stgns = this.settings.settings;\n\n    this.state = initState(this);\n  },\n  beforeUpdate(opts) {\n    this.stgns = opts.settings.settings;\n\n    this.state = initState(this);\n  },\n  beforeRender(opts) {\n    this.state.nodes = [];\n    this.state.rect = initRect(this, opts.size);\n\n    if (this.stgns.title.show) {\n      const titleNode = createTitleNode(this);\n      this.state.nodes.push(titleNode);\n    }\n\n    const stopNodes = generateStopNodes(this);\n    const rectNode = createLegendRectNode(this, stopNodes);\n    const tickNodes = createTickNodes(this, rectNode);\n\n    const targetNode = {\n      // The target node enables range selection component to limit its range to a specific area\n      id: 'legend-seq-target',\n      type: 'container',\n      children: [rectNode, tickNodes],\n    };\n\n    this.state.nodes.push(targetNode);\n  },\n  render() {\n    return this.state.nodes;\n  },\n};\n\nexport default legendDef;\n","import legendSeq from './legend-seq';\n\nexport default function sequentialLegend(picasso) {\n  picasso.component('legend-seq', legendSeq);\n}\n","import extend from 'extend';\nimport {\n  area,\n  curveLinear,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n  curveBasis,\n  curveCardinal,\n  curveCatmullRom,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n} from 'd3-shape';\n\nconst CURVES = {\n  step: curveStep,\n  stepAfter: curveStepAfter,\n  stepBefore: curveStepBefore,\n  linear: curveLinear,\n  basis: curveBasis,\n  cardinal: curveCardinal.tension(0),\n  catmullRom: curveCatmullRom,\n  monotonex: curveMonotoneX,\n  monotoney: curveMonotoneY,\n  natural: curveNatural,\n};\n\n/**\n * @callback component--line~layerSort\n * @param {object} a\n * @param {string} a.id\n * @param {Array<datum-extract>} a.data\n * @param {object} b\n * @param {string} b.id\n * @param {Array<datum-extract>} b.data\n */\n\n/**\n * @typedef {object}\n * @alias component--line-settings\n */\nconst SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  coordinates: {\n    /**\n     * @type {number} */\n    minor: 0.5,\n    /**\n     * @type {number} */\n    major: 0.5,\n    /**\n     * @type {number=} */\n    layerId: 0,\n  },\n  /**\n   * @type {boolean=} */\n  connect: false,\n  /**\n   * @type {string=} */\n  orientation: 'horizontal',\n  /**\n   * @typedef {object} */\n  layers: {\n    /**\n     * @type {string=} */\n    curve: 'linear',\n    /**\n     * @type {boolean=} */\n    show: true,\n    /**\n     * @type {component--line~layerSort=} */\n    sort: undefined,\n    /**\n     * @typedef {object} */\n    line: {\n      /**\n       * @type {string=} */\n      stroke: '#ccc',\n      /**\n       * @type {number=} */\n      strokeWidth: 1,\n      /**\n       * @type {string=} */\n      strokeLinejoin: 'miter',\n      /**\n       * @type {string=} */\n      strokeDasharray: undefined,\n      /**\n       * @type {number=} */\n      opacity: 1,\n      /**\n       * @type {boolean=} */\n      show: true,\n      /**\n       * @type {boolean=} */\n      showMinor0: true,\n    },\n    /**\n     * @typedef {object} */\n    area: {\n      /**\n       * @type {string=} */\n      fill: '#ccc',\n      /**\n       * @type {number=} */\n      opacity: 0.8,\n      /**\n       * @type {boolean=} */\n      show: true,\n    },\n  },\n};\n\n/**\n * @type {datum-boolean=}\n * @memberof component--line-settings.coordinates\n * @name defined\n * @default true\n */\n\nfunction createDisplayLayer(points, { generator, item, data }, fill = '') {\n  const path = generator(points);\n  const d = {\n    type: 'path',\n    d: path,\n    opacity: item.opacity,\n    stroke: item.stroke,\n    strokeWidth: item.strokeWidth,\n    strokeLinejoin: item.strokeLinejoin,\n    fill: fill || item.fill,\n    data,\n  };\n\n  if (item.strokeDasharray) {\n    d.strokeDasharray = item.strokeDasharray;\n  }\n\n  return d;\n}\n\nfunction createDisplayLayers(layers, { width, height, missingMinor0, stngs }) {\n  const nodes = [];\n  const layerStngs = stngs.layers || {};\n  layers.forEach((layer) => {\n    const { lineObj, layerObj, areaObj, points } = layer;\n\n    const areaGenerator = area();\n    const defined = stngs.coordinates ? stngs.coordinates.defined : null;\n    let lineGenerator;\n    let secondaryLineGenerator;\n    let minor = { size: height, p: 'y' };\n    let major = { size: width, p: 'x' };\n    if (stngs.orientation === 'vertical') {\n      const temp = extend(true, {}, major);\n      major = extend(true, {}, minor);\n      minor = extend(true, {}, temp);\n    }\n\n    areaGenerator[major.p]((d) => d.major * major.size) // eslint-disable-line no-unexpected-multiline\n      [`${minor.p}1`]((d) => d.minor * minor.size) // eslint-disable-line no-unexpected-multiline\n      [`${minor.p}0`]((d) => d.minor0 * minor.size) // eslint-disable-line no-unexpected-multiline\n      .curve(CURVES[layerObj.curve === 'monotone' ? `monotone${major.p}` : layerObj.curve]);\n    if (defined) {\n      areaGenerator.defined((d) => !d.dummy && typeof d.minor === 'number' && !isNaN(d.minor) && d.defined);\n    } else {\n      areaGenerator.defined((d) => !d.dummy && typeof d.minor === 'number' && !isNaN(d.minor));\n    }\n\n    const filteredPoints = stngs.connect ? points.filter(areaGenerator.defined()) : points;\n    lineGenerator = areaGenerator[`line${minor.p.toUpperCase()}1`]();\n    secondaryLineGenerator = areaGenerator[`line${minor.p.toUpperCase()}0`]();\n\n    // area layer\n    if (layerStngs.area && areaObj.show !== false) {\n      nodes.push(\n        createDisplayLayer(filteredPoints, {\n          data: layer.consumableData,\n          item: areaObj,\n          generator: areaGenerator,\n        })\n      );\n    }\n\n    // main line layer\n    if (lineObj && lineObj.show !== false) {\n      nodes.push(\n        createDisplayLayer(\n          filteredPoints,\n          {\n            data: layer.consumableData,\n            item: lineObj,\n            generator: lineGenerator,\n          },\n          'none'\n        )\n      );\n\n      // secondary line layer, used only when rendering area\n      if (!missingMinor0 && layerStngs.area && areaObj.show !== false && lineObj.showMinor0 !== false) {\n        nodes.push(\n          createDisplayLayer(\n            filteredPoints,\n            {\n              data: layer.consumableData,\n              item: lineObj,\n              generator: secondaryLineGenerator,\n            },\n            'none'\n          )\n        );\n      }\n    }\n  });\n\n  return nodes;\n}\n\nfunction resolve({ data, stngs, rect, resolver, style, domain }) {\n  const { width, height } = rect;\n  const coordinates = resolver.resolve({\n    data,\n    defaults: SETTINGS.coordinates,\n    settings: stngs.coordinates || {},\n    scaled: {\n      major: stngs.orientation === 'vertical' ? height : width,\n      minor: stngs.orientation === 'vertical' ? width : height,\n    },\n  });\n\n  // there are two cases when a line should be interrupted:\n  // 1. When the minor value is undefined (this case is easily handled by the lineGenerator.defined).\n  // 2. When a line is moving over a domain that may not coincide with the domain on the major scale.\n  // For the second case, dummy points need to be injected in order to create values which will cause gaps as they fulfill the first case.\n  // These dummy points need to be injected only when: the domain is discrete, connect !== false and multiple layers are defined\n  const injectDummy =\n    !stngs.connect &&\n    domain.length > 2 &&\n    (typeof stngs.coordinates.layerId === 'function' || typeof stngs.coordinates.layerId === 'object');\n\n  // collect points into layers\n  const layerIds = {};\n  let numLines = 0;\n  for (let i = 0; i < coordinates.items.length; i++) {\n    let p = coordinates.items[i];\n    let lid = p.layerId;\n    if (injectDummy) {\n      // inject dummy if the previous point on the major domain is not the same as the prev point on the line's domain.\n      // this works only if a datum's value property is the same primitive as in the domain.\n      const lastItem = layerIds[lid] ? layerIds[lid].items[layerIds[lid].items.length - 1] : null;\n      const lastOrderIdx = lastItem\n        ? domain.indexOf(lastItem.data.major ? lastItem.data.major.value : lastItem.data.value)\n        : null;\n      if (lastItem && domain.indexOf(p.data.major ? p.data.major.value : p.data.value) - 1 !== lastOrderIdx) {\n        layerIds[lid].items.push({ dummy: true });\n      }\n    }\n    layerIds[lid] = layerIds[lid] || {\n      order: numLines++,\n      id: lid,\n      items: [],\n      dataItems: [],\n      consumableData: {},\n    };\n    layerIds[lid].dataItems.push(p.data);\n    layerIds[lid].items.push(p);\n  }\n\n  const metaLayers = Object.keys(layerIds).map((lid) => {\n    layerIds[lid].consumableData = {\n      points: layerIds[lid].dataItems,\n      ...layerIds[lid].dataItems[0],\n    };\n    return layerIds[lid];\n  });\n\n  const layersData = {\n    items: metaLayers.map((layer) => layer.consumableData),\n  };\n  const layerStngs = stngs.layers || {};\n\n  const layersResolved = resolver.resolve({\n    data: layersData,\n    defaults: {\n      curve: SETTINGS.layers.curve,\n      show: SETTINGS.layers.show,\n    },\n    settings: {\n      curve: layerStngs.curve,\n      show: layerStngs.show,\n    },\n  });\n\n  const linesResolved = resolver.resolve({\n    data: layersData,\n    defaults: extend({}, SETTINGS.layers.line, style.line),\n    settings: layerStngs.line,\n  });\n\n  const areasResolved = resolver.resolve({\n    data: layersData,\n    defaults: extend({}, SETTINGS.layers.area, style.area),\n    settings: layerStngs.area,\n  });\n\n  return {\n    coordinates,\n    metaLayers,\n    layers: layersResolved,\n    lines: linesResolved,\n    areas: areasResolved,\n  };\n}\n\nfunction calculateVisibleLayers(opts) {\n  const { metaLayers, coordinates, layers, lines, areas } = resolve(opts);\n\n  const visibleLayers = [];\n  metaLayers.forEach((layer, ix) => {\n    const layerObj = layers.items[ix];\n    if (layerObj.show === false) {\n      return;\n    }\n\n    // layerObj.points = [];\n    layerObj.datum = layerObj.data;\n    layerObj.data = [];\n    layerObj.id = layer.id;\n\n    const values = [];\n    const points = [];\n    let point;\n    let pData;\n    for (let i = 0; i < layer.items.length; i++) {\n      point = layer.items[i];\n      pData = point.data;\n      if (!point.dummy) {\n        if (isNaN(point.major)) {\n          continue;\n        }\n        if (opts.missingMinor0) {\n          point.minor0 = coordinates.settings.minor.scale\n            ? coordinates.settings.minor.scale(pData.minor0 ? pData.minor0.value : 0)\n            : 0;\n        }\n        if (!isNaN(point.minor)) {\n          values.push(point.minor);\n        }\n        layerObj.data.push(point.data);\n      }\n      points.push(point);\n    }\n\n    const median = values.sort((a, b) => a - b)[Math.floor((values.length - 1) / 2)];\n\n    visibleLayers.push({\n      layerObj,\n      lineObj: lines.items[ix],\n      areaObj: areas.items[ix],\n      median,\n      points,\n      consumableData: layer.consumableData,\n    });\n  });\n\n  return visibleLayers;\n}\n\nconst lineMarkerComponent = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    style: {\n      area: '$shape',\n      line: '$shape-outline',\n    },\n  },\n  created() {},\n  render({ data }) {\n    // console.log(\"DATA\", data);\n    const { width, height } = this.rect;\n    this.stngs = this.settings.settings || {};\n    const missingMinor0 = !this.stngs.coordinates || typeof this.stngs.coordinates.minor0 === 'undefined';\n\n    const visibleLayers = calculateVisibleLayers({\n      data,\n      stngs: this.stngs,\n      rect: this.rect,\n      resolver: this.resolver,\n      style: this.style,\n      missingMinor0,\n      domain:\n        this.stngs.coordinates && this.stngs.coordinates.major && this.stngs.coordinates.major.scale\n          ? this.chart.scale(this.stngs.coordinates.major.scale).domain()\n          : [],\n    });\n\n    if (this.stngs.layers && this.stngs.layers.sort) {\n      const sortable = visibleLayers\n        .map((v) => ({\n          id: v.layerObj.id,\n          data: v.layerObj.data,\n        }))\n        .sort(this.stngs.layers.sort)\n        .map((s) => s.id);\n      visibleLayers.sort((a, b) => sortable.indexOf(a.layerObj.id) - sortable.indexOf(b.layerObj.id));\n    } else {\n      visibleLayers.sort((a, b) => a.median - b.median);\n    }\n\n    // generate visuals\n    return createDisplayLayers(visibleLayers, {\n      width,\n      height,\n      missingMinor0,\n      stngs: this.stngs,\n    });\n  },\n};\n\nexport default lineMarkerComponent;\n","import component from './line';\n\n/**\n * @typedef {object} component--line\n */\n\n/**\n * @type {string}\n * @memberof component--line\n */\nconst type = 'line';\n\nexport default function line(picasso) {\n  picasso.component(type, component);\n}\n","import extend from 'extend';\nimport { testRectPoint } from '../../../core/math/narrow-phase-collision';\n\n/**\n * @typedef {object} component--brush-area-brush\n * @property {string} key - Component key\n * @property {string[]} [contexts] - Name of the brushing contexts to affect\n * @property {string[]} [data] - The mapped data properties to add to the brush\n * @property {string} [action='set'] - Type of action to respond with\n */\n\n/**\n * @typedef {object}\n * @alias component--brush-area-settings\n */\nconst DEFAULT_SETTINGS = {\n  /**\n   * @type {object}\n   */\n  brush: {\n    /**\n     * @type {Array<component--brush-area-brush>}\n     */\n    components: [],\n  },\n};\n\n/**\n * Transform the incoming event into point in the local coordinate system. That is the coordinate system of the component.\n * @private\n * @param {object} ctx - Context\n * @param {object} event - Incoming event, either native event or hammer event\n * @param {boolean} clamp - True to clamp the point inside the component bounds\n * @returns {point}\n */\nfunction getLocalPoint(ctx, event, clamp = true) {\n  let x;\n  let y;\n\n  if (typeof event.center === 'object') {\n    x = event.center.x;\n    y = event.center.y;\n  } else {\n    x = event.clientX;\n    y = event.clientY;\n  }\n\n  const localX = x - ctx.state.boundingRect.left;\n  const localY = y - ctx.state.boundingRect.top;\n\n  return {\n    x: clamp ? Math.max(0, Math.min(localX, ctx.rect.width)) : localX,\n    y: clamp ? Math.max(0, Math.min(localY, ctx.rect.height)) : localY,\n  };\n}\n\n/**\n * Transform a local point into a point in the chart coordinate system.\n * @private\n * @param {object} ctx - Context\n * @param {object} p - Point to transform\n * @returns {point}\n */\nfunction localToChartPoint(ctx, p) {\n  return {\n    x: p.x + ctx.rect.x,\n    y: p.y + ctx.rect.y,\n  };\n}\n\n/**\n * Extract and apply default brush configuration.\n * @private\n * @param {object} settings\n * @returns {object[]} An Array of brush configurations\n */\nfunction getBrushConfig(settings) {\n  return settings.settings.brush.components.map((b) => ({\n    key: b.key,\n    contexts: b.contexts,\n    data: b.data,\n    action: b.action || 'set',\n  }));\n}\n\n/**\n * End all active brush contexts.\n * @private\n * @param {oject} state\n * @param {object} chart - Chart instance\n */\nfunction doEndBrush(state, chart) {\n  state.brushConfig.forEach((config) => {\n    if (Array.isArray(config.contexts)) {\n      config.contexts.forEach((context) => {\n        chart.brush(context).end();\n      });\n    }\n  });\n}\n\n/**\n * Convert two points into a rectangle.\n * @private\n * @param {point} p0\n * @param {point} p1\n * @returns {rect}\n */\nfunction toRect(p0, p1) {\n  const xMin = Math.min(p0.x, p1.x);\n  const yMin = Math.min(p0.y, p1.y);\n  const xMax = Math.max(p0.x, p1.x);\n  const yMax = Math.max(p0.y, p1.y);\n\n  return {\n    x: xMin,\n    y: yMin,\n    width: xMax - xMin,\n    height: yMax - yMin,\n  };\n}\n\n/**\n * Perform a brush on the given area.\n * @private\n * @param {object} ctx\n */\nfunction doAreaBrush(ctx) {\n  if (ctx.state.active) {\n    const start = localToChartPoint(ctx, ctx.state.start);\n    const end = localToChartPoint(ctx, ctx.state.end);\n\n    const shapes = ctx.chart.shapesAt(toRect(start, end), { components: ctx.state.brushConfig });\n    ctx.chart.brushFromShapes(shapes, { components: ctx.state.brushConfig });\n  }\n}\n\nfunction render(ctx) {\n  ctx.renderer.render([extend({ type: 'rect' }, toRect(ctx.state.start, ctx.state.end), ctx.style.area)]);\n}\n\nfunction resetState() {\n  return {\n    start: { x: 0, y: 0 },\n    end: { x: 0, y: 0 },\n    active: false,\n  };\n}\n\nconst definition = {\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 99,\n    },\n    settings: DEFAULT_SETTINGS,\n    style: {\n      area: '$selection-area-target',\n    },\n  },\n  on: {\n    areaStart(e) {\n      this.start(e);\n    },\n    areaMove(e) {\n      this.move(e);\n    },\n    areaEnd(e) {\n      this.end(e);\n    },\n    areaCancel() {\n      this.cancel();\n    },\n  },\n  created() {\n    this.state = resetState();\n  },\n  preferredSize() {\n    return 0;\n  },\n  render() {},\n  start(e) {\n    this.state.boundingRect = this.renderer.element().getBoundingClientRect();\n    const p = getLocalPoint(this, e, false);\n\n    // Require event to be inside the component bounds\n    if (\n      !testRectPoint(\n        {\n          x: 0,\n          y: 0,\n          width: this.rect.width,\n          height: this.rect.height,\n        },\n        p\n      )\n    ) {\n      return;\n    }\n\n    this.state.brushConfig = getBrushConfig(this.settings);\n    this.state.start = getLocalPoint(this, e);\n    this.state.active = true;\n  },\n  move(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    this.state.end = getLocalPoint(this, e);\n\n    doAreaBrush(this);\n    render(this);\n  },\n  end() {\n    if (!this.state.active) {\n      return;\n    }\n\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  cancel() {\n    if (!this.state.active) {\n      return;\n    }\n    doEndBrush(this.state, this.chart);\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n};\n\nexport default definition;\n","import definition from './brush-area';\n\nexport default function areaBrush(picasso) {\n  picasso.component('brush-area', definition);\n}\n","import extend from 'extend';\n\nexport default function extractor(nodes, { chart, scale, props, h }) {\n  const dataCtx = {\n    resources: {\n      dataset: chart.dataset,\n      scale: chart.scale,\n      formatter: chart.formatter,\n    },\n    scale,\n    h,\n  };\n\n  const data = [];\n  nodes.forEach((node) => {\n    if (typeof props.extract === 'function') {\n      const ctx = extend({ node }, dataCtx);\n      data.push(props.extract(ctx));\n    }\n  });\n\n  return data;\n}\n","import extend from 'extend';\nimport classString from '../../../core/utils/class-string';\n\nfunction resolveClasses(props, opts) {\n  return {\n    tooltip: typeof props.tooltipClass === 'function' ? props.tooltipClass({ dock: opts.dock }) : props.tooltipClass,\n    content: typeof props.contentClass === 'function' ? props.contentClass({ dock: opts.dock }) : props.contentClass,\n    arrow: typeof props.arrowClass === 'function' ? props.arrowClass({ dock: opts.dock }) : props.arrowClass,\n  };\n}\n\nfunction resolveContent(h, data, style, props) {\n  return props.content({\n    h,\n    style,\n    data,\n  });\n}\n\nexport default function render(data, placement, { renderer, style, props, h }) {\n  const classes = resolveClasses(props, placement);\n  const content = resolveContent(h, data, style, props);\n\n  const tooltipDefaultStyle = {\n    position: 'relative',\n    display: 'inline-block',\n  };\n\n  const tooltipNode = (\n    <div\n      dir={props.direction}\n      class={classString(extend({ 'pic-tooltip': true }, classes.tooltip))}\n      style={extend(tooltipDefaultStyle, placement.computedTooltipStyle)}\n    >\n      <div style={style.content} class={classString(extend({ 'pic-tooltip-content': true }, classes.content))}>\n        {content}\n      </div>\n      <div\n        class={classString(extend({ 'pic-tooltip-arrow': true }, classes.arrow))}\n        style={extend({}, style.arrow, style[`arrow-${placement.dock}`], placement.computedArrowStyle)}\n      ></div>\n    </div>\n  );\n\n  renderer.render(tooltipNode);\n\n  return renderer.element().children[0];\n}\n","// Successfull flow: pending -> active -> fulfilled (only with duration)\n// Cancelled flow: pending -> active -> cancelled\n// Rejected flow: pending -> rejected\n// Debounced flow: pending -> debounced -> pending -> [rejected|fulfilled]\nfunction dispatcherState() {\n  const fn = function fn() {};\n  const on = {\n    pending: [],\n    debounced: [],\n    active: [],\n    cancelled: [],\n    rejected: [],\n    fulfilled: [],\n  };\n  let state;\n\n  fn.set = (s) => {\n    state = s;\n    on[state].forEach((event) => event(s));\n  };\n\n  fn.on = (key, event) => {\n    if (Array.isArray(key)) {\n      key.forEach((k) => on[k].push(event));\n    } else {\n      on[key].push(event);\n    }\n  };\n\n  fn.destroy = () => {\n    Object.keys(on).forEach((key) => {\n      on[key].length = 0;\n    });\n  };\n\n  // fn.on(['pending', 'debounced', 'active', 'cancelled', 'rejected', 'fulfilled'], (e) => {\n  //   console.log(e);\n  // });\n\n  return fn;\n}\n\nexport default function timeSpanDispatcher({ defaultDuration, defaultDelay }) {\n  let actionId = null;\n  let fulfilledId = null;\n  let isActive = false;\n  const state = dispatcherState();\n  const fn = function fn() {};\n  const fulfilled = () => {\n    actionId = null;\n    fulfilledId = null;\n    isActive = false;\n    state.set('fulfilled');\n  };\n\n  fn.invoke = (action, duration = defaultDuration, delay = defaultDelay) => {\n    if (actionId) {\n      clearTimeout(actionId);\n      state.set('debounced');\n    }\n\n    state.set('pending');\n    actionId = setTimeout(() => {\n      action();\n      isActive = true;\n      actionId = null;\n      state.set('active');\n    }, delay);\n\n    if (duration > 0) {\n      if (fulfilledId) {\n        clearTimeout(fulfilledId);\n      }\n      fulfilledId = setTimeout(fulfilled, duration + Math.max(delay, 0));\n    }\n  };\n\n  fn.clear = () => {\n    if (isActive) {\n      state.set('cancelled');\n    } else if (actionId) {\n      clearTimeout(actionId);\n      state.set('rejected');\n    }\n    if (fulfilledId) {\n      clearTimeout(fulfilledId);\n    }\n    actionId = null;\n    fulfilledId = null;\n    isActive = false;\n  };\n\n  fn.on = (key, event) => {\n    state.on(key, event);\n  };\n\n  fn.destroy = () => {\n    fn.clear();\n    state.destroy();\n  };\n\n  return fn;\n}\n","import extend from 'extend';\n\nfunction getDockTransform(offset = 0) {\n  return {\n    left: `translate(-100%,-50%) translateX(${-offset}px)`,\n    right: `translate(${offset}px, -50%)`,\n    top: `translate(-50%, -100%) translateY(${-offset}px)`,\n    bottom: `translate(-50%, ${offset}px)`,\n  };\n}\n\nfunction getDockOffset(width, height, offset = 0) {\n  return {\n    left: { x: -width - offset, y: -height / 2 },\n    right: { x: offset, y: -height / 2 },\n    top: { x: -width / 2, y: -height - offset },\n    bottom: { x: -width / 2, y: offset },\n  };\n}\n\nfunction getComputedArrowStyle(offset) {\n  return {\n    left: {\n      left: '100%',\n      top: `calc(50% - ${offset}px)`,\n      borderWidth: `${offset}px`,\n    },\n    right: {\n      left: `${-offset * 2}px`,\n      top: `calc(50% - ${offset}px)`,\n      borderWidth: `${offset}px`,\n    },\n    top: {\n      left: `calc(50% - ${offset}px)`,\n      top: '100%',\n      borderWidth: `${offset}px`,\n    },\n    bottom: {\n      left: `calc(50% - ${offset}px)`,\n      top: `${-offset * 2}px`,\n      borderWidth: `${offset}px`,\n    },\n  };\n}\n\nfunction isInsideArea(area, vx, vy, width, height, offset) {\n  const rect = {\n    x: vx + offset.x,\n    y: vy + offset.y,\n    width,\n    height,\n  };\n\n  if (rect.x < 0 || rect.y < 0) {\n    return false;\n  }\n  if (rect.x + rect.width > area.width || rect.y + rect.height > area.height) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {vx} vx X-coordinate realative to the area\n * @param {vy} vy Y-coordinate realative to the area\n */\nexport function calcOffset({ area, vx, vy, width, height, offset }) {\n  const rect = {\n    x: vx + offset.x,\n    y: vy + offset.y,\n    width,\n    height,\n  };\n\n  let offsetX = rect.x < 0 ? -rect.x : 0;\n  let offsetY = rect.y < 0 ? -rect.y : 0;\n\n  offsetX += rect.x + rect.width > area.width ? -(rect.x + rect.width - area.width) : 0;\n  offsetY += rect.y + rect.height > area.height ? -(rect.y + rect.height - area.height) : 0;\n\n  return {\n    x: offsetX,\n    y: offsetY,\n  };\n}\n\nfunction alignToBounds({ resources, nodes, pointer, width: elmWidth, height: elmHeight, options }) {\n  const { targetBounds } = pointer;\n  const { x, y, width, height } = resources.getNodeBoundsRelativeToTarget(nodes[0]);\n\n  const docks = {\n    left: { x, y: y + height / 2 },\n    right: { x: x + width, y: y + height / 2 },\n    top: { x: x + width / 2, y },\n    bottom: { x: x + width / 2, y: y + height },\n  };\n\n  // Check if explicit dock\n  const dockTransforms = getDockTransform(options.offset);\n  const transform = dockTransforms[options.dock];\n  if (transform) {\n    return {\n      computedTooltipStyle: {\n        left: `${docks[options.dock].x}px`,\n        top: `${docks[options.dock].y}px`,\n        transform,\n      },\n      computedArrowStyle: getComputedArrowStyle(options.offset)[options.dock],\n      dock: options.dock,\n    };\n  }\n\n  const area = {\n    width: options.area === 'target' ? targetBounds.width : window.innerWidth,\n    height: options.area === 'target' ? targetBounds.height : window.innerHeight,\n  };\n  const dockOffsets = getDockOffset(elmWidth, elmHeight, options.offset);\n  const dockOrder = ['top', 'left', 'right', 'bottom'];\n\n  for (let i = 0; i < dockOrder.length; i += 1) {\n    const dock = dockOrder[i];\n    const vx = options.area === 'target' ? docks[dock].x : targetBounds.left + docks[dock].x;\n    const vy = options.area === 'target' ? docks[dock].y : targetBounds.top + docks[dock].y;\n    if (isInsideArea(area, vx, vy, elmWidth, elmHeight, dockOffsets[dock])) {\n      return {\n        computedTooltipStyle: {\n          left: `${docks[dock].x}px`,\n          top: `${docks[dock].y}px`,\n          transform: dockTransforms[dock],\n        },\n        computedArrowStyle: getComputedArrowStyle(options.offset)[dock],\n        dock,\n      };\n    }\n  }\n\n  return {\n    computedTooltipStyle: {\n      left: `${docks.top.x}px`,\n      top: `${docks.top.y}px`,\n      transform: dockTransforms.top,\n    },\n    computedArrowStyle: getComputedArrowStyle(options.offset).top,\n    dock: 'top',\n  };\n}\n\nfunction alignToPoint({ options, pointer, width, height, dockOrder, x, y }) {\n  const { targetBounds } = pointer;\n\n  // Check if explicit dock\n  const dockTransforms = getDockTransform(options.offset);\n  const transform = dockTransforms[options.dock];\n  if (transform) {\n    return {\n      computedTooltipStyle: {\n        left: `${x}px`,\n        top: `${y}px`,\n        transform,\n      },\n      computedArrowStyle: getComputedArrowStyle(options.offset)[options.dock],\n      dock: options.dock,\n    };\n  }\n\n  const area = {\n    width: options.area === 'target' ? targetBounds.width : window.innerWidth,\n    height: options.area === 'target' ? targetBounds.height : window.innerHeight,\n  };\n  const dockOffsets = getDockOffset(width, height, options.offset);\n\n  const results = [];\n  const edgeMargin = 20;\n  const vx = options.area === 'target' ? x : targetBounds.left + x;\n  const vy = options.area === 'target' ? y : targetBounds.top + y;\n\n  for (let i = 0; i < dockOrder.length; i += 1) {\n    const dock = dockOrder[i];\n\n    const offset = calcOffset({\n      area,\n      vx,\n      vy,\n      width,\n      height,\n      offset: dockOffsets[dock],\n    });\n\n    const computedTooltipStyle = {\n      left: `${x}px`,\n      top: `${y}px`,\n      transform: dockTransforms[dock],\n    };\n    const computedArrowStyle = getComputedArrowStyle(options.offset)[dock];\n\n    if (offset.x !== 0) {\n      computedTooltipStyle.width = `${width - edgeMargin - Math.abs(offset.x)}px`;\n\n      if (dock === 'top' || dock === 'bottom') {\n        computedTooltipStyle.left = `${x + offset.x}px`;\n\n        computedArrowStyle.left = `calc(50% ${offset.x > 0 ? '-' : '+'} ${Math.abs(offset.x)}px)`;\n      }\n    }\n\n    const result = {\n      computedTooltipStyle,\n      computedArrowStyle,\n      dock,\n      rect: {\n        width,\n        height,\n      },\n    };\n\n    if (offset.x === 0 && offset.y === 0) {\n      return result;\n    }\n\n    result.offset = offset;\n\n    results.push(result);\n  }\n\n  results.sort((a, b) => Math.abs(a.offset.x) - Math.abs(b.offset.x));\n\n  return results[0];\n}\n\nfunction alignToPointer({ options, pointer, width, height }) {\n  const { x, y } = pointer;\n\n  return alignToPoint({\n    x,\n    y,\n    pointer,\n    width,\n    height,\n    options,\n    dockOrder: ['top', 'left', 'right', 'bottom'],\n  });\n}\n\nfunction alignToSlice({ options, pointer, width, height, nodes, resources }) {\n  const node = nodes[0];\n  const { dx, dy } = pointer;\n  const componentBounds = resources.getComponentBoundsFromNode(node);\n\n  // cx and cy relative to targetBounds\n  const center = {\n    x: dx + componentBounds.x + componentBounds.width / 2,\n    y: dy + componentBounds.y + componentBounds.height / 2,\n  };\n\n  const { start, end, outerRadius } = node.desc.slice;\n\n  // Node origin is at 12 o clock, clockwise, but Math uses 3 a clock, so it's transformed to origin at 3 a clock\n  const middle = (start + end) / 2 - Math.PI / 2;\n  const PI2 = Math.PI * 2;\n  const radians = ((middle % PI2) + PI2) % PI2;\n  let dockOrder = ['top', 'left', 'right', 'bottom'];\n\n  if (options.dock === 'auto') {\n    if (radians <= Math.PI / 4 || radians >= (Math.PI * 7) / 4) {\n      dockOrder = ['right', 'top', 'bottom', 'left'];\n    } else if (radians <= (Math.PI * 3) / 4) {\n      dockOrder = ['bottom', 'left', 'right', 'top'];\n    } else if (radians <= (Math.PI * 5) / 4) {\n      dockOrder = ['left', 'top', 'bottom', 'right'];\n    } else {\n      dockOrder = ['top', 'left', 'right', 'bottom'];\n    }\n  }\n\n  return alignToPoint({\n    x: center.x + outerRadius * componentBounds.scaleRatio.x * Math.cos(radians),\n    y: center.y + outerRadius * componentBounds.scaleRatio.y * Math.sin(radians),\n    pointer,\n    width,\n    height,\n    options,\n    dockOrder,\n  });\n}\n\nfunction getComponentBoundsFromNode(node, pointer, chart) {\n  const comp = node.key\n    ? chart.component(node.key)\n    : chart.componentsFromPoint({ x: pointer.clientX, y: pointer.clientY })[0];\n\n  if (!comp) {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      scaleRatio: {\n        x: 1,\n        y: 1,\n      },\n    };\n  }\n\n  const componentSize = comp.rect;\n  return extend({ scaleRatio: componentSize.scaleRatio }, componentSize.computedInner);\n}\n\nfunction getNodeBoundsRelativeToTarget(node, pointer, chart) {\n  const componentBounds = getComponentBoundsFromNode(node, pointer, chart);\n  const bounds = node.bounds;\n\n  return {\n    x: componentBounds.x + pointer.dx + bounds.x,\n    y: componentBounds.y + pointer.dy + bounds.y,\n    width: bounds.width,\n    height: bounds.height,\n  };\n}\n\nconst STRATEGIES = {\n  bounds: alignToBounds,\n  pointer: alignToPointer,\n  slice: alignToSlice,\n};\n\nexport default function placement({ width, height }, { chart, state, props }) {\n  const propCtx = {\n    resources: {\n      formatter: chart.formatter,\n      scale: chart.scale,\n      component: chart.component,\n      getComponentBoundsFromNode: (node) => getComponentBoundsFromNode(node, state.pointer, chart),\n      getNodeBoundsRelativeToTarget: (node) => getNodeBoundsRelativeToTarget(node, state.pointer, chart),\n    },\n    nodes: state.activeNodes,\n    pointer: state.pointer,\n    width,\n    height,\n  };\n  const type = typeof props.placement;\n\n  if (type === 'object' && typeof props.placement.fn === 'function') {\n    // Custom placement strategy function\n    return props.placement.fn(propCtx);\n  }\n\n  let opts = {\n    type: 'pointer',\n    offset: 8,\n    dock: 'auto',\n    area: 'viewport',\n  };\n  if (type === 'function') {\n    // Custom placement function\n    opts = extend(opts, props.placement(propCtx));\n  }\n\n  if (type === 'object' && STRATEGIES[props.placement.type]) {\n    // Predefined placement function with options\n    opts = extend(opts, props.placement);\n  } else if (type === 'string' && STRATEGIES[props.placement]) {\n    // Predefined placement function without options\n    opts = extend(opts, { type: props.placement });\n  }\n\n  propCtx.options = opts;\n  const plcm = STRATEGIES[opts.type](propCtx);\n\n  let { x: minX, y: minY, width: maxX, height: maxY } = propCtx.resources.getComponentBoundsFromNode(propCtx.nodes[0]);\n  minX += propCtx.pointer.dx;\n  maxX += minX;\n  minY += propCtx.pointer.dy;\n  maxY += minY;\n\n  // Clamp tooltip position\n  plcm.computedTooltipStyle.left = `${Math.min(Math.max(0, minX, parseFloat(plcm.computedTooltipStyle.left)), maxX)}px`;\n  plcm.computedTooltipStyle.top = `${Math.min(Math.max(0, minY, parseFloat(plcm.computedTooltipStyle.top)), maxY)}px`;\n\n  return plcm;\n}\n","let instance;\n\nexport function setActive(action) {\n  instance = action;\n}\n\nexport function removeActive(action) {\n  if (instance === action) {\n    instance = null;\n    return true;\n  }\n\n  return false;\n}\n\nexport function cancelActive(a) {\n  if (instance && instance !== a) {\n    instance();\n  }\n}\n\nexport function getActive() {\n  return instance;\n}\n\nexport function remove() {\n  instance = null;\n}\n","import extend from 'extend';\nimport extractor from './extractor';\nimport render from './render';\nimport timeSpanDispatcher from './timespan-dispatcher';\nimport placement from './placement';\nimport { setActive, removeActive, cancelActive, remove } from './instance-handler';\n\n/**\n * @typedef {object}\n * @alias component--tooltip.settings\n */\nconst DEFAULT_SETTINGS = {\n  /**\n   * How long the tooltip is visible, in milliseconds\n   * @type {number=}\n   */\n  duration: 8000,\n  /**\n   * Delay before the tooltip is rendered, in milliseconds\n   * @type {number=}\n   */\n  delay: 500,\n  /**\n   * Reduce incoming nodes to only a set of applicable nodes. Is called as a part of the `show` event.\n   * @type {function=}\n   * @returns {array} An array of nodes\n   */\n  filter: (nodes) => nodes.filter((node) => node.data && typeof node.data.value !== 'undefined'),\n  /**\n   * Extract data from a node.\n   * @type {function=}\n   * @returns {object} An array of data\n   */\n  extract: (ctx) => ctx.node.data.value,\n  /**\n   * Content generator. Extracted data is available in the `data` property, where each value in the area is the extracted datum from a node.\n   * @type {function=}\n   * @returns {object[]} Array of h objects\n   */\n  content: ({ h, data }) => data.map((datum) => h('div', {}, datum)),\n  /**\n   * Comparison function. If evaluted to true, the incoming nodes in the `show` event are ignored. If evaluated to false, any active tooltip is cleared and a new tooltip is queued.\n   *\n   * The function gets two parameters, the first is the currently active set of nodes, if any, and the second is the incoming set of nodes. By default the two set of nodes are considered equal if their data attributes are the same.\n   * @type {function=}\n   * @returns {boolean}\n   */\n  isEqual: (prev, curr) =>\n    prev.length &&\n    prev.length === curr.length &&\n    prev.every((p, i) => curr[i] && JSON.stringify(p.data) === JSON.stringify(curr[i].data)),\n  /**\n   * @typedef {object=}\n   */\n  placement: {\n    /**\n     * Available types: [pointer | bounds | slice]\n     * @type {string=}\n     */\n    type: 'pointer',\n    /**\n     * Docking position of the tooltip. Available positions: [left | right | top | bottom | auto]\n     * @type {string=}\n     */\n    dock: 'auto',\n    /**\n     * Distance from the content area to the tooltip position, in px.\n     * @type {number=}\n     */\n    offset: 8,\n    /**\n     * Specify the limiting area, where target is the component area unless the appendTo property is set, in which case it referes to the appendTo element. Viewport is the browser viewport.\n     *\n     * Available options are: [viewport | target]\n     * @type {number=}\n     */\n    area: 'viewport',\n  },\n  /**\n   * Set tooltip class.\n   * @type {object<string, boolean>=}\n   */\n  tooltipClass: {},\n  /**\n   * Set content class.\n   * @type {object<string, boolean>=}\n   */\n  contentClass: {},\n  /**\n   * Set arrow class.\n   * @type {object<string, boolean>=}\n   */\n  arrowClass: {},\n  /**\n   * Content direction [ltr | rtl]\n   * @type {string=}\n   */\n  direction: 'ltr',\n  /**\n   * Explicitly set a target element. This allows the tooltip to attach itself outside the picasso container.\n   * @type {HTMLElement=}\n   */\n  appendTo: undefined,\n  /**\n   * Component lifecycle hook. Called before the tooltip is displayed.\n   * @type {function=}\n   */\n  beforeShow: undefined,\n  /**\n   * Component lifecycle hook. Called after the tooltip have been displayed.\n   * @type {function=}\n   */\n  afterShow: undefined,\n  /**\n   * Component lifecycle hook. Called before the tooltip is hidden.\n   * @type {function=}\n   */\n  beforeHide: undefined,\n  /**\n   * Component lifecycle hook. Called when the toolip is hidden. By default this deletes the tooltip element.\n   * @type {function=}\n   */\n  onHide: undefined,\n  /**\n   * Component lifecycle hook. Called after the tooltip is hidden.\n   * @type {function=}\n   */\n  afterHide: undefined,\n};\n\nconst DEFAULT_STYLE = {\n  tooltip: {},\n  content: {\n    backgroundColor: '$gray-25',\n    color: '$font-color--inverted',\n    fontFamily: '$font-family',\n    fontSize: '$font-size',\n    lineHeight: '$line-height',\n    borderRadius: '4px',\n    padding: '8px',\n    opacity: 0.9,\n  },\n  arrow: {\n    position: 'absolute',\n    width: '0px',\n    height: '0px',\n    borderStyle: 'solid',\n    color: '$gray-25',\n    opacity: 0.9,\n  },\n  'arrow-bottom': {\n    borderTopColor: 'transparent',\n    borderLeftColor: 'transparent',\n    borderRightColor: 'transparent',\n  },\n  'arrow-top': {\n    borderBottomColor: 'transparent',\n    borderLeftColor: 'transparent',\n    borderRightColor: 'transparent',\n  },\n  'arrow-right': {\n    borderTopColor: 'transparent',\n    borderLeftColor: 'transparent',\n    borderBottomColor: 'transparent',\n  },\n  'arrow-left': {\n    borderTopColor: 'transparent',\n    borderBottomColor: 'transparent',\n    borderRightColor: 'transparent',\n  },\n};\n\nfunction toPoint(event, { chart, state }) {\n  let x = 0;\n  let y = 0;\n  if (event.center) {\n    x += event.center.x;\n    y += event.center.y;\n  } else {\n    x += event.clientX;\n    y += event.clientY;\n  }\n  // TODO Don't do getBoundingClientRect lookup here. It's performance heavy.\n  const chartBounds = chart.element.getBoundingClientRect();\n  const targetBounds = state.targetElement.getBoundingClientRect();\n  const clientX = x;\n  const clientY = y;\n  const dx = chartBounds.left - targetBounds.left;\n  const dy = chartBounds.top - targetBounds.top;\n  const cx = x - chartBounds.left;\n  const cy = y - chartBounds.top;\n  x -= targetBounds.left;\n  y -= targetBounds.top;\n  return {\n    x, // Target point relative to the target bounds\n    y,\n    dx, // Delta from target bounds to the chart bounds\n    dy,\n    cx, // Target point relative to the chart bounds\n    cy,\n    clientX,\n    clientY,\n    targetBounds, // Target bounding rect\n    chartBounds, // Chart bounding rect\n  };\n}\n\nconst component = {\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    settings: DEFAULT_SETTINGS,\n    style: DEFAULT_STYLE,\n  },\n  renderer: 'dom',\n  on: {\n    hide() {\n      this.hide();\n    },\n    show(event, opts = {}) {\n      this.show(event, opts);\n    },\n    prevent(p) {\n      this.prevent(p);\n    },\n  },\n  hide() {\n    this.dispatcher.clear();\n    this.state.activeNodes = [];\n    this.state.pointer = {};\n  },\n  show(event, { nodes, duration, delay } = {}) {\n    if (this.state.prevent) {\n      return;\n    }\n\n    // Set pointer here to always expose latest pointer to invokeRenderer\n    this.state.pointer = toPoint(event, this);\n\n    let fNodes;\n    if (Array.isArray(nodes)) {\n      fNodes = this.props.filter(nodes);\n    } else {\n      fNodes = this.props.filter(\n        this.chart.shapesAt({\n          x: this.state.pointer.cx,\n          y: this.state.pointer.cy,\n        })\n      );\n    }\n\n    if (this.props.isEqual(this.state.activeNodes, fNodes)) {\n      return;\n    }\n\n    this.dispatcher.clear();\n    this.state.activeNodes = fNodes;\n\n    if (this.state.activeNodes.length) {\n      this.dispatcher.invoke(() => this.invokeRenderer(this.state.activeNodes), duration, delay);\n    }\n  },\n  prevent(p) {\n    this.state.prevent = !!p;\n  },\n  init(settings) {\n    this.state = {\n      activeNodes: [],\n      pointer: {},\n      targetElement: null,\n      prevent: false,\n    };\n    this.props = settings.settings;\n    this.dispatcher = timeSpanDispatcher({\n      defaultDuration: this.props.duration,\n      defaultDelay: this.props.delay,\n    });\n\n    const instanceId = this.dispatcher.clear;\n    this.dispatcher.on('pending', () => {\n      // Cancel only if the active is another instance\n      cancelActive(instanceId);\n      setActive(instanceId);\n\n      if (typeof this.props.beforeShow === 'function') {\n        this.props.beforeShow.call(undefined, {\n          resources: {\n            formatter: this.chart.formatter,\n            scale: this.chart.scale,\n          },\n        });\n      }\n    });\n\n    this.dispatcher.on(['cancelled', 'fulfilled'], () => {\n      const listenerCtx = {\n        resources: {\n          formatter: this.chart.formatter,\n          scale: this.chart.scale,\n        },\n      };\n\n      if (typeof this.props.beforeHide === 'function') {\n        this.props.beforeHide.call(undefined, extend({ element: this.state.tooltipElm }, listenerCtx));\n      }\n\n      if (typeof this.props.onHide === 'function') {\n        this.props.onHide.call(undefined, extend({ element: this.state.tooltipElm }, listenerCtx));\n      } else {\n        this.renderer.clear([]); // Hide tooltip\n      }\n\n      if (typeof this.props.afterHide === 'function') {\n        this.props.afterHide.call(undefined, listenerCtx);\n      }\n\n      removeActive(instanceId);\n      this.state.tooltipElm = undefined;\n    });\n\n    this.dispatcher.on('active', () => {\n      if (typeof this.props.afterShow === 'function') {\n        this.props.afterShow.call(undefined, {\n          element: this.state.tooltipElm,\n          resources: {\n            formatter: this.chart.formatter,\n            scale: this.chart.scale,\n          },\n        });\n      }\n    });\n  },\n  created() {\n    this.init(this.settings);\n  },\n  beforeUpdate({ settings }) {\n    if (this.dispatcher) {\n      this.dispatcher.destroy();\n      remove();\n    }\n    this.init(settings);\n  },\n  render(h) {\n    this.h = h;\n    return []; // Nothing to render initially.\n  },\n  beforeDestroy() {\n    this.dispatcher.destroy();\n    remove();\n  },\n  appendTo() {\n    if (this.props.appendTo) {\n      this.state.targetElement =\n        typeof this.props.appendTo === 'function'\n          ? this.props.appendTo({\n              resources: {\n                formatter: this.chart.formatter,\n                scale: this.chart.scale,\n              },\n            })\n          : this.props.appendTo;\n      const { width, height } = this.state.targetElement.getBoundingClientRect();\n      this.renderer.destroy();\n      this.renderer.size({ width, height });\n      this.renderer.appendTo(this.state.targetElement);\n    } else {\n      this.state.targetElement = this.renderer.element();\n    }\n  },\n  mounted() {\n    this.appendTo();\n  },\n  updated() {\n    // Append here to, otherwise the picasso displayOrder logic screw things up\n    this.appendTo();\n  },\n  invokeRenderer(nodes) {\n    const items = extractor(nodes, this);\n    const pseudoElement = render(items, { style: { left: '0px', top: '0px', visibility: 'hidden' } }, this);\n    const pos = placement(pseudoElement.getBoundingClientRect(), this);\n    this.state.tooltipElm = render(items, pos, this);\n  },\n};\n\nexport { component as default };\n","import tooltip from './tooltip';\n\n/**\n * @typedef {object} component--tooltip\n */\n\n/**\n * @type {string}\n * @memberof component--tooltip\n */\nconst type = 'tooltip';\n\nexport default function addTooltip(picasso) {\n  picasso.component(type, tooltip);\n}\n","const debugColliderDef = {\n  require: ['renderer', 'chart'],\n  defaultSettings: {\n    settings: {\n      target: '',\n      selector: '*',\n      fill: 'rgba(0, 255, 0, 0.1)',\n      stroke: 'lime',\n      opacity: 1,\n      useOuterRect: false,\n    },\n  },\n  on: {\n    update() {\n      this.draw();\n    },\n  },\n  draw() {\n    const shapes = this.chart.findShapes(this.props.selector).filter((s) => s.key === this.props.target); // Find all shapes\n    const colliders = shapes.filter((s) => s.collider).map((s) => s.collider);\n\n    colliders.forEach((c) => {\n      c.fill = this.props.fill;\n      c.stroke = this.props.stroke;\n      c.opacity = this.props.opacity;\n      c.collider = { type: null };\n    });\n\n    this.renderer.render(colliders);\n  },\n  created() {\n    this.props = this.settings.settings;\n  },\n  resize({ outer, inner }) {\n    if (this.props.useOuterRect) {\n      return outer;\n    }\n    return inner;\n  },\n  render() {},\n  mounted() {\n    this.draw();\n  },\n  updated() {\n    this.props = this.settings.settings;\n    this.draw();\n  },\n};\n\nexport default debugColliderDef;\n","import { toRadians } from './angles';\n\nconst PI_X2 = Math.PI * 2;\n\n/**\n * Implementation of F.6.5 https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n * @ignore\n * @param {number} rx - Arc x-radius\n * @param {number} ry - Arc y-radius\n * @param {number} rotation - Arc rotation in degrees (0-360)\n * @param {boolean} largeArcFlag\n * @param {boolean} sweepFlag\n * @param {number} endX - X-coordinate for end of arc\n * @param {number} endY - Y-coordinate for end of arc\n * @param {number} startX - X-coordinate for start of arc\n * @param {number} startY - Y-coordinate for start of arc\n * @returns {object}\n */\nfunction arcToCenter(rx, ry, rotation, largeArcFlag, sweepFlag, endX, endY, startX, startY) {\n  let startAngle;\n  let endAngle;\n  let sweepAngle;\n  let cx;\n  let cy;\n  let radiusRatio;\n\n  const rad = toRadians(rotation % 360);\n\n  // F.6.5.1\n  const cos = Math.cos(rad);\n  const sin = Math.sin(rad);\n  const hdx = (startX - endX) / 2;\n  const hdy = (startY - endY) / 2;\n\n  const x1d = cos * hdx + sin * hdy;\n  const y1d = cos * hdy - sin * hdx;\n\n  // F.6.6\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  radiusRatio = Math.pow(x1d, 2) / Math.pow(rx, 2) + Math.pow(y1d, 2) / Math.pow(ry, 2);\n  if (radiusRatio > 1) {\n    radiusRatio = Math.sqrt(radiusRatio);\n    rx *= radiusRatio;\n    ry *= radiusRatio;\n  }\n\n  // F.6.5.2\n  const rxry = rx * ry;\n  const rxy1d = rx * y1d;\n  const ryx1d = ry * x1d;\n  const den = Math.pow(rxy1d, 2) + Math.pow(ryx1d, 2);\n  const num = Math.pow(rxry, 2) - den;\n\n  let frac = Math.sqrt(Math.max(num / den, 0));\n\n  if (largeArcFlag === sweepFlag) {\n    frac = -frac;\n  }\n\n  const cxd = frac * (rxy1d / ry);\n  const cyd = frac * -(ryx1d / rx);\n\n  // F.6.5.3\n  const mx = (startX + endX) / 2;\n  const my = (startY + endY) / 2;\n  cx = cos * cxd - sin * cyd + mx;\n  cy = sin * cxd + cos * cyd + my;\n\n  // F.6.5.6 clockwise angle\n  const ux = (x1d - cxd) / rx;\n  const uy = (y1d - cyd) / ry;\n  const vx = (-x1d - cxd) / rx;\n  const vy = (-y1d - cyd) / ry;\n  startAngle = Math.atan2(uy, ux);\n  startAngle += startAngle < 0 ? PI_X2 : 0;\n  endAngle = Math.atan2(vy, vx);\n  endAngle += endAngle < 0 ? PI_X2 : 0;\n\n  sweepAngle = endAngle - startAngle;\n\n  if (!sweepFlag && startAngle < endAngle) {\n    sweepAngle -= PI_X2;\n  } else if (sweepFlag && endAngle < startAngle) {\n    sweepAngle += PI_X2;\n  }\n\n  sweepAngle %= PI_X2;\n\n  return {\n    startAngle,\n    sweepAngle,\n    cx,\n    cy,\n    rx,\n    ry,\n  };\n}\n\nexport { arcToCenter as default, PI_X2 };\n","/**\n * Measure the flatnass of a cubic bezier curve\n * @ignore\n * @param {point} s - Start point\n * @param {point} cp1 - First control point\n * @param {point} cp2 - Second control point\n * @param {point} e - End point\n */\nexport default function flatness(s, cp1, cp2, e) {\n  const ux = Math.abs(s.x + cp2.x - (cp1.x + cp1.x));\n  const uy = Math.abs(s.y + cp2.y - (cp1.y + cp1.y));\n  const vx = Math.abs(cp1.x + e.x - (cp2.x + cp2.x));\n  const vy = Math.abs(cp1.y + e.y - (cp2.y + cp2.y));\n\n  return ux + uy + vx + vy;\n}\n","import flatness from './curve-flattness';\n\nfunction mid(p0, p1) {\n  return {\n    x: (p0.x + p1.x) * 0.5,\n    y: (p0.y + p1.y) * 0.5,\n  };\n}\n\nfunction interpolate(t, s, cp1, cp2, e) {\n  const td = 1 - t;\n  const t0 = Math.pow(td, 3) * s;\n  const t1 = 3 * Math.pow(td, 2) * t * cp1;\n  const t2 = 3 * td * Math.pow(t, 2) * cp2;\n  const t3 = Math.pow(t, 3) * e;\n\n  return t0 + t1 + t2 + t3;\n}\n\n/**\n * Recursive subdivision of a curve using de Casteljau algorithm.\n * Splits the curve into multiple line segments where each segments is choosen based on a level of flatness.\n *\n * At most it will be able to generate 2**maxNbrOfSplits + 1 = 257 points\n * @ignore\n * @param {point} s - Start point\n * @param {point} cp1 - First control point\n * @param {point} cp2 - Second control point\n * @param {point} e - End point\n * @param {array} points - Initial set of points\n * @returns {point[]} Array of points\n */\nfunction toPoints(s, cp1, cp2, e, points = [], maxNbrOfSplits = 8) {\n  if (maxNbrOfSplits < 1 || flatness(s, cp1, cp2, e) <= 10) {\n    if (points[points.length - 1] !== s) {\n      points.push(s);\n    }\n\n    points.push(e);\n\n    return points;\n  }\n\n  const t = 0.5;\n\n  const m0 = mid(s, cp1);\n  const m1 = mid(cp1, cp2);\n  const m2 = mid(cp2, e);\n\n  const b = {\n    // Split curve at point\n    x: interpolate(t, s.x, cp1.x, cp2.x, e.x),\n    y: interpolate(t, s.y, cp1.y, cp2.y, e.y),\n  };\n\n  const q0 = mid(m0, m1); // New cp2 for left curve\n  const q1 = mid(m1, m2); // New cp1 for right curve\n\n  toPoints(s, m0, q0, b, points, maxNbrOfSplits - 1); // left curve\n  toPoints(b, q1, m2, e, points, maxNbrOfSplits - 1); // Right curve\n\n  return points;\n}\n\nexport { toPoints as default, interpolate };\n","import cubicToPoints from './cubic-bezier-curve-interpolation';\n\nfunction interpolate(t, s, cp, e) {\n  const td = 1 - t;\n\n  return Math.pow(td, 2) * s + 2 * td * t * cp + Math.pow(t, 2) * e;\n}\n\nfunction toCubic(s, cp, e) {\n  const cp1x = s.x + (2 / 3) * (cp.x - s.x);\n  const cp1y = s.y + (2 / 3) * (cp.y - s.y);\n  const cp2x = e.x + (2 / 3) * (cp.x - e.x);\n  const cp2y = e.y + (2 / 3) * (cp.y - e.y);\n  const cp1 = { x: cp1x, y: cp1y };\n  const cp2 = { x: cp2x, y: cp2y };\n\n  return { cp1, cp2 };\n}\n\n/**\n * Recursive subdivision of a curve using de Casteljau algorithm.\n * Splits the curve into multiple line segments where each segments is choosen based on a level of flatness.\n * @ignore\n * @param {point} s - Start point\n * @param {point} cp - Control point\n * @param {point} e - End point\n * @returns {point[]} Array of points\n */\nfunction toPoints(s, cp, e) {\n  const { cp1, cp2 } = toCubic(s, cp, e);\n\n  return cubicToPoints(s, cp1, cp2, e);\n}\n\nexport { interpolate, toPoints as default };\n","import { parsePath } from 'path2d-polyfill';\nimport arcToCenter, { PI_X2 } from '../math/arc-to-center';\nimport cubicCurveToPoints from '../math/cubic-bezier-curve-interpolation';\nimport quadCurveToPoints from '../math/quad-bezier-curve-interpolation';\n\nconst EPSILON = 1e-12;\n\nfunction removeDuplicates(points) {\n  for (let i = 0; i < points.length - 1; i++) {\n    const p0 = points[i];\n    const p1 = points[i + 1];\n    if (Math.abs(p0.x - p1.x) < EPSILON && Math.abs(p0.y - p1.y) < EPSILON) {\n      points.splice(i, 1);\n      i--;\n    }\n  }\n}\n\n/**\n * Transform an arc to a set of points a long the arc.\n * Specifiction F.6 (https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes)\n * @ignore\n * @param {array} s - Segments\n * @param {number} startX - X-coordinate for start of arc\n * @param {number} startY - Y-coordinate for start of arc\n */\nfunction arcToPoints(s, startX, startY) {\n  const points = [];\n  const largeArcFlag = !!s[4]; // F.6.3\n  const sweepFlag = !!s[5]; // F.6.3\n  const rotation = s[3];\n  let endX = s[6];\n  let endY = s[7];\n  let rx = s[1];\n  let ry = s[2];\n  let cx;\n  let cy;\n  let sweepAngle;\n  let startAngle;\n\n  if (s[0] === 'a') {\n    endX += startX;\n    endY += startY;\n  }\n\n  // F.6.2\n  if (startX === endY && startY === endY) {\n    return points;\n  }\n\n  // Given no radius, threat as lineTo command\n  if (!rx || !ry) {\n    points.push({ x: endX, y: endY });\n    return points;\n  }\n\n  ({ cx, cy, rx, ry, sweepAngle, startAngle } = arcToCenter(\n    rx,\n    ry,\n    rotation,\n    largeArcFlag,\n    sweepFlag,\n    endX,\n    endY,\n    startX,\n    startY\n  ));\n\n  // Approximation of perimeter\n  const p = Math.abs(sweepAngle * Math.sqrt((Math.pow(rx, 2) + Math.pow(ry, 2)) / 2));\n\n  // Generate a point every 10th pixel. Scaling of the node should probably be included in this calculation\n  const res = Math.ceil(p / 10);\n  const resAngle = sweepAngle / res;\n\n  for (let k = 1; k <= res; k++) {\n    const deltaAngle = resAngle * k;\n    const radians = (startAngle + deltaAngle) % PI_X2;\n    const cos = Math.cos(radians);\n    const sin = Math.sin(radians);\n    // F.6.3 https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n    points.push({\n      x: cx + cos * rx + -sin * cos,\n      y: cy + sin * ry + cos * sin,\n    });\n  }\n\n  // points.push({ x: cx, y: cy });\n\n  return points;\n}\n\n/**\n * Converts a SVG path data string into a set of points.\n * @ignore\n * @param {string} path\n * @returns {Array<point[]>} Array of points\n */\nexport default function pathToPoints(path) {\n  const commands = parsePath(path);\n  const segments = [];\n  const points = [];\n  let x = 0; // Current point\n  let y = 0;\n  let cpx = null; // Last control point on a cubic curve\n  let cpy = null;\n  let qcpx = null; // Last control point on a quad curve\n  let qcpy = null;\n\n  for (let i = 0; i < commands.length; ++i) {\n    const cmd = commands[i];\n    const pathType = cmd[0];\n\n    // Reset control point if command is not cubic\n    if (pathType !== 'S' && pathType !== 's' && pathType !== 'C' && pathType !== 'c') {\n      cpx = null;\n      cpy = null;\n    }\n\n    if (pathType !== 'T' && pathType !== 't' && pathType !== 'Q' && pathType !== 'q') {\n      qcpx = null;\n      qcpy = null;\n    }\n\n    switch (pathType) {\n      case 'm':\n        if (points.length) {\n          segments.push(points.splice(0));\n        }\n      // Fall through\n      case 'l': // eslint-disable-line no-fallthrough\n        x += cmd[1];\n        y += cmd[2];\n        points.push({ x, y });\n        break;\n      case 'M':\n        if (points.length) {\n          segments.push(points.splice(0));\n        }\n      // Fall through\n      case 'L': // eslint-disable-line no-fallthrough\n        x = cmd[1];\n        y = cmd[2];\n        points.push({ x, y });\n        break;\n      case 'H':\n        x = cmd[1];\n        points.push({ x, y });\n        break;\n      case 'h':\n        x += cmd[1];\n        points.push({ x, y });\n        break;\n      case 'V':\n        y = cmd[1];\n        points.push({ x, y });\n        break;\n      case 'v':\n        y += cmd[1];\n        points.push({ x, y });\n        break;\n      case 'a':\n        points.push(...arcToPoints(cmd, x, y));\n        x += cmd[6];\n        y += cmd[7];\n        break;\n      case 'A':\n        points.push(...arcToPoints(cmd, x, y));\n        x = cmd[6];\n        y = cmd[7];\n        break;\n      case 'c':\n        points.push(\n          ...cubicCurveToPoints(\n            { x, y },\n            { x: cmd[1] + x, y: cmd[2] + y },\n            { x: cmd[3] + x, y: cmd[4] + y },\n            { x: cmd[5] + x, y: cmd[6] + y }\n          )\n        );\n        cpx = cmd[3] + x; // Last control point\n        cpy = cmd[4] + y;\n        x += cmd[5];\n        y += cmd[6];\n        break;\n      case 'C':\n        points.push(\n          ...cubicCurveToPoints({ x, y }, { x: cmd[1], y: cmd[2] }, { x: cmd[3], y: cmd[4] }, { x: cmd[5], y: cmd[6] })\n        );\n        cpx = cmd[3]; // Last control point\n        cpy = cmd[4];\n        x = cmd[5];\n        y = cmd[6];\n        break;\n      case 's':\n        if (cpx === null || cpx === null) {\n          cpx = x;\n          cpy = y;\n        }\n\n        points.push(\n          ...cubicCurveToPoints(\n            { x, y },\n            { x: 2 * x - cpx, y: 2 * y - cpy },\n            { x: cmd[1] + x, y: cmd[2] + y },\n            { x: cmd[3] + x, y: cmd[4] + y }\n          )\n        );\n        cpx = cmd[1] + x; // last control point\n        cpy = cmd[2] + y;\n        x += cmd[3];\n        y += cmd[4];\n        break;\n      case 'S':\n        if (cpx === null || cpx === null) {\n          cpx = x;\n          cpy = y;\n        }\n\n        points.push(\n          ...cubicCurveToPoints(\n            { x, y },\n            { x: 2 * x - cpx, y: 2 * y - cpy },\n            { x: cmd[1], y: cmd[2] },\n            { x: cmd[3], y: cmd[4] }\n          )\n        );\n        cpx = cmd[1]; // last control point\n        cpy = cmd[2];\n        x = cmd[3];\n        y = cmd[4];\n        break;\n      case 'Q':\n        points.push(...quadCurveToPoints({ x, y }, { x: cmd[1], y: cmd[2] }, { x: cmd[3], y: cmd[4] }));\n\n        qcpx = cmd[1]; // last control point\n        qcpy = cmd[2];\n        x = cmd[3];\n        y = cmd[4];\n        break;\n      case 'q':\n        points.push(...quadCurveToPoints({ x, y }, { x: cmd[1] + x, y: cmd[2] + y }, { x: cmd[3] + x, y: cmd[4] + y }));\n\n        qcpx = cmd[1] + x; // last control point\n        qcpy = cmd[2] + y;\n        x += cmd[3];\n        y += cmd[4];\n        break;\n      case 'T':\n        if (qcpx === null || qcpx === null) {\n          qcpx = x;\n          qcpy = y;\n        }\n\n        qcpx = 2 * x - qcpx; // last control point\n        qcpy = 2 * y - qcpy;\n        points.push(...quadCurveToPoints({ x, y }, { x: qcpx, y: qcpy }, { x: cmd[1], y: cmd[2] }));\n\n        x = cmd[1];\n        y = cmd[2];\n        break;\n      case 't':\n        if (qcpx === null || qcpx === null) {\n          qcpx = x;\n          qcpy = y;\n        }\n\n        qcpx = 2 * x - qcpx; // last control point\n        qcpy = 2 * y - qcpy;\n        points.push(...quadCurveToPoints({ x, y }, { x: qcpx, y: qcpy }, { x: cmd[1] + x, y: cmd[2] + y }));\n        x += cmd[1];\n        y += cmd[2];\n        break;\n      case 'z':\n      case 'Z':\n        if (points.length) {\n          points.push({ x: points[0].x, y: points[0].y });\n        }\n        break;\n      default:\n      // Do nothing\n    }\n  }\n\n  removeDuplicates(points);\n  segments.push(points.splice(0));\n\n  return segments;\n}\n","import pathToSegments from '../../scene-graph/parse-path-d';\n\nconst debugPathToPointsDef = {\n  require: ['renderer', 'chart'],\n  defaultSettings: {\n    settings: {\n      target: '',\n      fill: 'transparent',\n      stroke: 'lime',\n      opacity: 1,\n      radius: 2,\n      useOuterRect: false,\n    },\n  },\n  on: {\n    update() {\n      this.draw();\n    },\n  },\n  draw() {\n    const shapes = this.chart.findShapes('path').filter((s) => s.key === this.props.target); // Find all shapes\n\n    const circles = [];\n    shapes.forEach((s) => {\n      pathToSegments(s.attrs.d).forEach((segment) => {\n        segment.forEach((p) => {\n          circles.push({\n            type: 'circle',\n            cx: p.x,\n            cy: p.y,\n            r: this.props.radius,\n            fill: this.props.fill,\n            stroke: this.props.stroke,\n            opacity: this.props.opacity,\n            collider: { type: null },\n          });\n        });\n      });\n    });\n\n    this.renderer.render(circles);\n  },\n  created() {\n    this.props = this.settings.settings;\n  },\n  resize({ outer, inner }) {\n    if (this.props.useOuterRect) {\n      return outer;\n    }\n    return inner;\n  },\n  render() {},\n  mounted() {\n    this.draw();\n  },\n  updated() {\n    this.props = this.settings.settings;\n    this.draw();\n  },\n};\n\nexport default debugPathToPointsDef;\n","import createDebugCollider from './debug-collider';\nimport createDebugPathToPoints from './debug-path-to-points';\n\nexport function debugCollider(picasso) {\n  picasso.component('debug-collider', createDebugCollider);\n}\n\nexport function debugPathToPoints(picasso) {\n  picasso.component('debug-path-to-points', createDebugPathToPoints);\n}\n","import boxComponent from '../core/chart-components/box';\nimport pointComponent from '../core/chart-components/point';\nimport pieComponent from '../core/chart-components/pie';\nimport gridLineComponent from '../core/chart-components/grid';\nimport refLineComponent from '../core/chart-components/ref-line';\nimport axisComponent from '../core/chart-components/axis';\nimport textComponent from '../core/chart-components/text';\nimport scrollbarComponent from '../core/chart-components/scrollbar';\nimport brushRangeComponent from '../web/components/brush-range';\nimport rangeComponent from '../core/chart-components/range';\nimport brushLassoComponent from '../core/chart-components/brush-lasso';\nimport labelsComponent from '../core/chart-components/labels';\nimport categoricalLegend from '../core/chart-components/legend-cat';\nimport sequentialLegend from '../core/chart-components/legend-seq';\nimport lineComponent from '../core/chart-components/line';\nimport brushAreaComponent from '../web/components/brush-area';\nimport tooltipComponent from '../web/components/tooltip';\nimport { debugCollider, debugPathToPoints } from '../core/chart-components/debug';\n\nexport default [\n  boxComponent,\n  pointComponent,\n  pieComponent,\n  gridLineComponent,\n  refLineComponent,\n  axisComponent,\n  textComponent,\n  scrollbarComponent,\n  brushRangeComponent,\n  rangeComponent,\n  brushLassoComponent,\n  labelsComponent,\n  categoricalLegend,\n  sequentialLegend,\n  lineComponent,\n  brushAreaComponent,\n  tooltipComponent,\n  debugCollider,\n  debugPathToPoints,\n];\n","class Node {\n  /**\n   * @private\n   */\n  constructor(type) {\n    this._parent = null;\n    this._children = [];\n    this._ancestors = null;\n    this.type = type;\n    this.data = null;\n  }\n\n  /**\n   * Detaches this node from its parent, if such exists.\n   * @returns {Node}\n   */\n  detach() {\n    if (this._parent) {\n      this._parent.removeChild(this);\n    }\n    return this;\n  }\n\n  /**\n   * Parent of this node.\n   * @readonly\n   * @type {Node}\n   */\n  get parent() {\n    return this._parent;\n  }\n\n  /**\n   * Checks whether this node is a branch.\n   *\n   * True if this node has children, false otherwise.\n   * @readonly\n   * @type {Boolean}\n   */\n  get isBranch() {\n    return this._children && this._children.length;\n  }\n\n  /**\n   * Children of this node.\n   * @readonly\n   * @type {Node[]}\n   */\n  get children() {\n    return this._children;\n  }\n\n  /**\n   * Ancestors of this node, including parent.\n   * @readonly\n   * @type {Node[]}\n   */\n  get ancestors() {\n    if (!this._ancestors) {\n      this._ancestors = [];\n      if (this.parent) {\n        this._ancestors.push(this.parent, ...this.parent.ancestors);\n      }\n    }\n\n    return this._ancestors;\n  }\n\n  /**\n   * Descendants of this node.\n   * @readonly\n   * @type {Node[]}\n   */\n  get descendants() {\n    const r = [];\n    const len = this.children.length;\n    let i;\n    let c;\n\n    for (i = 0, len; i < len; i++) {\n      c = this.children[i];\n      r.push(c);\n\n      if (c.children.length) {\n        r.push(...c.descendants);\n      }\n    }\n    return r;\n  }\n\n  /**\n   *\n   * @returns {Boolean}\n   */\n  equals(n) {\n    const children = this.children;\n    const nChildren = n.children;\n    if (children.length !== nChildren.length) {\n      return false;\n    }\n    // Requires deterministic child order\n    for (let i = 0; i < children.length; i++) {\n      if (!children[i].equals(nChildren[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  toJSON() {\n    return {\n      type: this.type,\n      children: this.children.map((ch) => ch.toJSON()),\n    };\n  }\n}\n\nexport default Node;\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleRect,\n  testPolygonRect,\n  testRectRect,\n  testRectPoint,\n  testRectLine,\n  testGeoPolygonRect,\n} from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoRect instance\n * @private\n */\nclass GeoRect {\n  constructor({ x = 0, y = 0, width = 0, height = 0, minWidth = 0, minHeight = 0 } = {}) {\n    this.set({\n      x,\n      y,\n      width,\n      height,\n      minWidth,\n      minHeight,\n    });\n  }\n\n  set({ x = 0, y = 0, width = 0, height = 0, minWidth = 0, minHeight = 0 } = {}) {\n    this.type = 'rect';\n\n    if (width >= 0) {\n      this.x = x;\n      this.width = Math.max(width, minWidth);\n    } else {\n      this.x = x + Math.min(width, -minWidth);\n      this.width = -Math.min(width, -minWidth);\n    }\n\n    if (height >= 0) {\n      this.y = y;\n      this.height = Math.max(height, minHeight);\n    } else {\n      this.y = y + Math.min(height, -minHeight);\n      this.height = -Math.min(height, -minHeight);\n    }\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return testRectPoint(this, p);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n    return testRectLine(this, line);\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return testRectRect(this, rect);\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return testCircleRect(c, this);\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testPolygonRect(polygon, this);\n  }\n\n  /**\n   * @param {GeoPolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonRect(geopolygon, this);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return [\n      { x: this.x, y: this.y },\n      { x: this.x + this.width, y: this.y },\n      { x: this.x + this.width, y: this.y + this.height },\n      { x: this.x, y: this.y + this.height },\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoRect(...args);\n}\n\nexport { GeoRect as default, create };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCirclePoint,\n  testCircleRect,\n  testCircleLine,\n  testCircleCircle,\n  testCirclePolygon,\n  testCircleGeoPolygon,\n} from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoCircle instance\n * @private\n */\nclass GeoCircle {\n  constructor({ cx = 0, cy = 0, r = 0, minRadius = 0 } = {}) {\n    this.set({\n      cx,\n      cy,\n      r,\n      minRadius,\n    });\n  }\n\n  set({ cx = 0, cy = 0, r = 0, minRadius = 0 } = {}) {\n    this.type = 'circle';\n    this.cx = cx;\n    this.cy = cy;\n    this.r = Math.max(r, minRadius);\n    this.vector = { x: this.cx, y: this.cy };\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return testCirclePoint(this, p);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n\n    return testCircleLine(this, line);\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n\n    return testCircleRect(this, rect);\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return testCircleCircle(this, c);\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testCirclePolygon(this, polygon);\n  }\n\n  /**\n   * @param {GeoPolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testCircleGeoPolygon(this, geopolygon);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return [\n      {\n        x: this.cx,\n        y: this.cy,\n      },\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoCircle(...args);\n}\n\nexport { GeoCircle as default, create };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleLine,\n  testPolygonLine,\n  testRectLine,\n  testLinePoint,\n  testLineLine,\n  testGeoPolygonLine,\n} from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoLine instance\n * @private\n */\nclass GeoLine {\n  constructor({ x1 = 0, y1 = 0, x2 = 0, y2 = 0, tolerance = 0 } = {}) {\n    this.set({\n      x1,\n      y1,\n      x2,\n      y2,\n      tolerance,\n    });\n  }\n\n  set({ x1 = 0, y1 = 0, x2 = 0, y2 = 0, tolerance = 0 } = {}) {\n    this.type = 'line';\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.tolerance = Math.max(0, Math.round(tolerance));\n\n    this.vectors = this.points();\n    this.zeroSize = x1 === x2 && y1 === y2;\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    if (this.tolerance > 0) {\n      const c = { cx: p.x, cy: p.y, r: this.tolerance };\n      return testCircleLine(c, this);\n    }\n    return testLinePoint(this, p);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n    return testLineLine(this, line);\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return testRectLine(rect, this);\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return testCircleLine(c, this);\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testPolygonLine(polygon, this);\n  }\n\n  /**\n   * @param {GeoPolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonLine(geopolygon, this);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return [\n      { x: this.x1, y: this.y1 },\n      { x: this.x2, y: this.y2 },\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoLine(...args);\n}\n\nexport { GeoLine as default, create };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCirclePolygon,\n  testPolygonPoint,\n  testPolygonLine,\n  testPolygonRect,\n  testPolygonPolygon,\n  testGeoPolygonPolygon,\n} from '../math/narrow-phase-collision';\n\nfunction close(vertices) {\n  const first = vertices[0];\n  const last = vertices[vertices.length - 1];\n\n  if (first.x !== last.x || first.y !== last.y) {\n    vertices.push(first);\n  }\n}\n\nfunction removeDuplicates(vertices) {\n  for (let i = 0; i < vertices.length - 1; i++) {\n    const v0 = vertices[i];\n    const v1 = vertices[i + 1];\n    if (v0.x === v1.x && v0.y === v1.y) {\n      vertices.splice(i, 1);\n      i--;\n    }\n  }\n}\n\n/**\n * Construct a new Polygon instance\n * @private\n */\nclass Polygon {\n  constructor({ vertices = [] } = {}) {\n    this.set({ vertices });\n  }\n\n  /**\n   * Set the vertices.\n   * If vertices doesn't close the polygon, a closing vertice is appended.\n   * @param {object} input An object with a vertices property\n   * @param {point[]} [input.vertices=[]] Vertices are represented as an array of points.\n   */\n  set({ vertices = [] } = {}) {\n    this.type = 'polygon';\n    this.vertices = vertices.slice();\n    this.edges = [];\n\n    removeDuplicates(this.vertices);\n\n    if (this.vertices.length <= 2) {\n      return;\n    }\n\n    close(this.vertices);\n\n    this.xMin = NaN;\n    this.yMin = NaN;\n    this.xMax = NaN;\n    this.yMax = NaN;\n\n    for (let i = 0; i < this.vertices.length; i++) {\n      if (i < this.vertices.length - 1) {\n        this.edges.push([this.vertices[i], this.vertices[i + 1]]);\n      }\n\n      this.xMin = isNaN(this.xMin) ? this.vertices[i].x : Math.min(this.xMin, this.vertices[i].x);\n      this.xMax = isNaN(this.xMax) ? this.vertices[i].x : Math.max(this.xMax, this.vertices[i].x);\n      this.yMin = isNaN(this.yMin) ? this.vertices[i].y : Math.min(this.yMin, this.vertices[i].y);\n      this.yMax = isNaN(this.yMax) ? this.vertices[i].y : Math.max(this.yMax, this.vertices[i].y);\n    }\n\n    this._bounds = null;\n    this._boundingRect = null;\n  }\n\n  /**\n   * Check if a point is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return testPolygonPoint(this, point);\n  }\n\n  /**\n   * Check if circle is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return testCirclePolygon(circle, this);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return testPolygonLine(this, pointsToLine(points));\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return testPolygonRect(this, pointsToRect(points));\n  }\n\n  /**\n   * Check if polygon intersects another polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testPolygonPolygon(this, polygon);\n  }\n\n  /**\n   * Check if polygon intersects a geopolygon.\n   * @param {GeoPolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonPolygon(geopolygon, this);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return this.vertices;\n  }\n\n  /**\n   * Get the bounds of the polygon, as an array of points\n   * @returns {point[]}\n   */\n  bounds() {\n    if (!this._bounds) {\n      this._bounds = [\n        { x: this.xMin, y: this.yMin },\n        { x: this.xMax, y: this.yMin },\n        { x: this.xMax, y: this.yMax },\n        { x: this.xMin, y: this.yMax },\n      ];\n    }\n\n    return this._bounds;\n  }\n\n  /**\n   * Get the bounding rect of the polygon\n   * @returns {rect}\n   */\n  boundingRect() {\n    if (!this._boundingRect) {\n      this._boundingRect = {\n        x: this.xMin,\n        y: this.yMin,\n        width: this.xMax - this.xMin,\n        height: this.yMax - this.yMin,\n      };\n    }\n    return this._boundingRect;\n  }\n}\n\n/**\n * Construct a new Polygon instance\n * @param {object} input An object with a vertices property\n * @param {point[]} [input.vertices=[]] Vertices are represented as an array of points.\n * @returns {Polygon} Polygon instance\n * @private\n */\nfunction create(...a) {\n  return new Polygon(...a);\n}\n\nexport { create, Polygon as default };\n","import { create as createPolygon } from './polygon';\nimport { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleGeoPolygon,\n  testGeoPolygonPoint,\n  testGeoPolygonLine,\n  testGeoPolygonRect,\n  testGeoPolygonPolygon,\n  testGeoPolygonGeoPolygon,\n} from '../math/narrow-phase-collision';\n\nfunction close(vertices) {\n  const first = vertices[0];\n  const last = vertices[vertices.length - 1];\n\n  if (first.x !== last.x || first.y !== last.y) {\n    vertices.push(first);\n  }\n}\n\nfunction removeDuplicates(vertices) {\n  for (let i = 0; i < vertices.length - 1; i++) {\n    const v0 = vertices[i];\n    const v1 = vertices[i + 1];\n    if (v0.x === v1.x && v0.y === v1.y) {\n      vertices.splice(i, 1);\n      i--;\n    }\n  }\n}\n\n/**\n * A geo-polygon is a polygon which is similar to a polygon in GeoJson. A typical geopolygon is an array of polygons where the first polygon is an outer polygon and the rest are inner polygons\n * @private\n */\n\n/**\n * Construct a new GeoPolygon instance\n * @private\n */\nclass GeoPolygon {\n  constructor({ vertices = [[]] } = {}) {\n    this.set({ vertices });\n  }\n\n  /**\n   * Set the vertices.\n   * If vertices doesn't close the polygon, a closing vertice is appended.\n   * @param {object} input An object with a vertices property\n   * @param {Array} [input.vertices=[]] Vertices are represented as an array of arrays of points.\n   */\n  set({ vertices = [] } = {}) {\n    this.type = 'geopolygon';\n    this.vertices = vertices.slice();\n    this.numPolygons = this.vertices.length;\n    this.polygons = [];\n    this.xMin = NaN;\n    this.yMin = NaN;\n    this.xMax = NaN;\n    this.yMax = NaN;\n\n    for (let i = 0; i < this.numPolygons; i++) {\n      removeDuplicates(this.vertices[i]);\n      if (this.vertices[i].length > 2) {\n        close(this.vertices[i]);\n      }\n      this.polygons[i] = createPolygon({ vertices: this.vertices[i] });\n      this.xMin = isNaN(this.xMin) ? this.polygons[i].xMin : Math.min(this.xMin, this.polygons[i].xMin);\n      this.xMax = isNaN(this.xMax) ? this.polygons[i].xMax : Math.max(this.xMax, this.polygons[i].xMax);\n      this.yMin = isNaN(this.yMin) ? this.polygons[i].yMin : Math.min(this.yMin, this.polygons[i].yMin);\n      this.yMax = isNaN(this.yMax) ? this.polygons[i].yMax : Math.max(this.yMax, this.polygons[i].yMax);\n    }\n\n    this._bounds = null;\n    this._boundingRect = null;\n  }\n\n  /**\n   * Check if a point is inside the area of the geopolygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return testGeoPolygonPoint(this, point);\n  }\n\n  /**\n   * Check if circle is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return testCircleGeoPolygon(circle, this);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return testGeoPolygonLine(this, pointsToLine(points));\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return testGeoPolygonRect(this, pointsToRect(points));\n  }\n\n  /**\n   * Check if geopolygon intersects another polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testGeoPolygonPolygon(this, polygon);\n  }\n\n  /**\n   * Check if geopolygon intersects another geopolygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {GeoPolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonGeoPolygon(this, geopolygon);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return this.vertices;\n  }\n\n  /**\n   * Get the bounds of the polygon, as an array of points\n   * @returns {point[]}\n   */\n  bounds() {\n    if (!this._bounds) {\n      this._bounds = [\n        { x: this.xMin, y: this.yMin },\n        { x: this.xMax, y: this.yMin },\n        { x: this.xMax, y: this.yMax },\n        { x: this.xMin, y: this.yMax },\n      ];\n    }\n\n    return this._bounds;\n  }\n\n  /**\n   * Get the bounding rect of the polygon\n   * @returns {rect}\n   */\n  boundingRect() {\n    if (!this._boundingRect) {\n      this._boundingRect = {\n        x: this.xMin,\n        y: this.yMin,\n        width: this.xMax - this.xMin,\n        height: this.yMax - this.yMin,\n      };\n    }\n    return this._boundingRect;\n  }\n}\n\n/**\n * Construct a new GeoPolygon instance\n * @param {object} input An object with a vertices property\n * @param {point[]} [input.vertices=[]] Vertices are represented as an array of points.\n * @returns {Polygon} Polygon instance\n * @private\n */\nfunction create(...a) {\n  return new GeoPolygon(...a);\n}\n\nexport { create, GeoPolygon as default };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleLine,\n  testPolygonLine,\n  testLinePoint,\n  testLineLine,\n  testRectLine,\n  testGeoPolygonLine,\n} from '../math/narrow-phase-collision';\n\nfunction pointsAreNotEqual(p0, p1) {\n  return p0.x !== p1.x || p0.y !== p1.y;\n}\n\n/**\n * Construct a new GeoPolyline instance\n * @private\n */\nclass GeoPolyline {\n  constructor({ points = [] } = {}) {\n    this.set({ points });\n  }\n\n  set({ points = [] } = {}) {\n    this.type = 'polyline';\n    this.segments = [];\n    this._points = points.slice();\n\n    if (this._points.length > 1) {\n      for (let i = 0, len = this._points.length - 1; i < len; i++) {\n        if (pointsAreNotEqual(this._points[i], this._points[i + 1])) {\n          this.segments.push({\n            x1: this._points[i].x,\n            y1: this._points[i].y,\n            x2: this._points[i + 1].x,\n            y2: this._points[i + 1].y,\n          });\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return this.segments.some((line) => testLinePoint(line, point));\n  }\n\n  /**\n   * @param {circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return this.segments.some((line) => testCircleLine(circle, line));\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const testLine = pointsToLine(points);\n    return this.segments.some((line) => testLineLine(line, testLine));\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return this.segments.some((line) => testRectLine(rect, line));\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    // This is a unoptimized solution and should be replaced by a more efficient algorithm.\n    return this.segments.some((line) => testPolygonLine(polygon, line));\n  }\n\n  /**\n   * @param {GeoPolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    // This is a unoptimized solution and should be replaced by a more efficient algorithm.\n    return this.segments.some((line) => testGeoPolygonLine(geopolygon, line));\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return this._points;\n  }\n}\n\nfunction create(...a) {\n  return new GeoPolyline(...a);\n}\n\nexport { create, GeoPolyline as default };\n","import { create as rect } from './rect';\nimport { create as circle } from './circle';\nimport { create as line } from './line';\nimport { create as polygon } from './polygon';\nimport { create as geopolygon } from './geopolygon';\nimport { create as polyline } from './polyline';\nimport registry from '../utils/registry';\n\nconst reg = registry();\n\nreg.add('rect', rect);\nreg.add('circle', circle);\nreg.add('line', line);\nreg.add('polygon', polygon);\nreg.add('geopolygon', geopolygon);\nreg.add('polyline', polyline);\n\n/* eslint-disable import/prefer-default-export */\nexport function create(type, input) {\n  return reg.get(type)(input);\n}\n/* eslint-enable import/prefer-default-export */\n\n/**\n * @typedef {object} rect\n * @property {number} x - X-coordinate\n * @property {number} y - Y-coordinate\n * @property {number} width - Width\n * @property {number} height - Height\n */\n\n/**\n * @typedef {object} line\n * @property {number} x1 - Start x-coordinate\n * @property {number} y1 - Start y-coordinate\n * @property {number} x2 - End x-coordinate\n * @property {number} y2 - End y-coordinate\n */\n\n/**\n * @typedef {object} point\n * @property {number} x - X-coordinate\n * @property {number} y - Y-coordinate\n */\n\n/**\n * @typedef {object} circle\n * @property {number} cx - Center x-coordinate\n * @property {number} cy - Center y-coordinate\n * @property {number} r - Circle radius\n */\n\n/**\n * @typedef {object} polygon\n * @property {Array<point>} points - Array of connected points\n */\n\n/**\n * @typedef {object} geopolygon\n * @property {Array<polygon>} polygons - Array of polygons\n */\n\n/**\n * @typedef {object} polyline\n * @property {Array<point>} points - Array of connected points\n */\n\n/**\n * @typedef {object} path\n * @property {string} d - Path definition\n */\n","import { create as factory } from './index';\n\n/**\n * Construct a new GeometryCollection instance\n * @private\n */\nclass GeometryCollection {\n  constructor(collection = []) {\n    this.set(collection);\n  }\n\n  set(collection = []) {\n    this.geometries = [];\n    collection.forEach((geo) => {\n      const geoInstance = factory(geo.type, geo);\n      if (geoInstance) {\n        this.geometries.push(geoInstance);\n      }\n    });\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return this.geometries.some((geo) => geo.containsPoint(p));\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return this.geometries.some((geo) => geo.intersectsLine(points));\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return this.geometries.some((geo) => geo.intersectsRect(points));\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return this.geometries.some((geo) => geo.intersectsCircle(c));\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return this.geometries.some((geo) => geo.intersectsPolygon(polygon));\n  }\n\n  /**\n   * @param {GeoPolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return this.geometries.some((geo) => geo.intersectsGeoPolygon(geopolygon));\n  }\n}\n\nfunction create(...args) {\n  return new GeometryCollection(...args);\n}\n\nexport { GeometryCollection as default, create };\n","class Matrix {\n  /**\n   * Creates a matrix with identity values.\n   * @private\n   */\n  constructor() {\n    this._elements = [\n      [1, 0, 0],\n      [0, 1, 0],\n      [0, 0, 1],\n    ];\n\n    this._stack = [];\n  }\n\n  /**\n   * Creates a new matrix with a copy of the current values.\n   */\n  clone() {\n    const mt = new Matrix();\n    return mt.multiply(this);\n  }\n\n  /**\n   * Sets the matrix values\n   * @param {Number[][]} arr A 3x3 array.\n   */\n  set(arr) {\n    this._elements = arr;\n    return this;\n  }\n\n  /**\n   * Saves the current matrix values to a stack.\n   */\n  save() {\n    this._stack.push(this.elements);\n    return this;\n  }\n\n  /**\n   * Sets the current matrix values to the last ones saved on to the stack.\n   */\n  restore() {\n    if (this._stack.length) {\n      this._elements = this._stack.pop(); // TODO - use a copy instead\n    }\n    return this;\n  }\n\n  /**\n   * Adds a scalar value to each element in the matrix.\n   * @param {Number} value\n   */\n  add(value) {\n    // assume scalar\n    let i, j;\n    for (i = 0; i < this._elements.length; i++) {\n      for (j = 0; j < this._elements[i].length; j++) {\n        this._elements[i][j] += value;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Translates the current matrix along the x and y axis.\n   * @param {Number} x\n   * @param {Number} y\n   */\n  translate(x, y) {\n    this.multiply([\n      [1, 0, x],\n      [0, 1, y],\n      [0, 0, 1],\n    ]);\n    return this;\n  }\n\n  /**\n   * Rotates the current matrix.\n   * @param {Number} radianAngle Angle in radians.\n   */\n  rotate(radianAngle) {\n    let cos = Math.cos(-radianAngle),\n      sin = Math.sin(-radianAngle);\n    this.multiply([\n      [cos, sin, 0],\n      [-sin, cos, 0],\n      [0, 0, 1],\n    ]);\n    return this;\n  }\n\n  /**\n   *\n   * If value is a number; multiplies each element in the matrix by the given value.\n   * If value is a matrix; multiplies the two matrices.\n   * @param {Number|Array|Matrix} value\n   */\n  multiply(value) {\n    let i, j, m, k;\n    if (value instanceof Matrix) {\n      value = value._elements;\n    }\n    if (Array.isArray(value)) {\n      // matrix multiplication\n      m = [\n        [0, 0, 0],\n        [0, 0, 0],\n        [0, 0, 0],\n      ];\n      for (i = 0; i < this._elements.length; i++) {\n        // row\n        for (j = 0; j < this._elements[i].length; j++) {\n          // column\n          for (k = 0; k < 3; k++) {\n            // row\n            m[i][j] += this._elements[i][k] * value[k][j];\n          }\n        }\n      }\n      this._elements = m;\n    } else {\n      // scalar multiplication\n      for (i = 0; i < this._elements.length; i++) {\n        for (j = 0; j < this._elements[i].length; j++) {\n          this._elements[i][j] *= value;\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Scales the matrix along x and y axis.\n   * @param {Number} x The value to scale the matrix with along the x direction\n   * @param {Number} [y=x] The value to scale the matrix with along the y direction.\n   */\n  scale(x, y = x) {\n    // if ( arguments.length < 2 || typeof y === \"undefined\" ) {\n    //  y = x;\n    // }\n\n    this.multiply([\n      [x, 0, 0],\n      [0, y, 0],\n      [0, 0, 1],\n    ]);\n    return this;\n  }\n\n  /**\n   * Multiples the matrix with the supplied transformation values\n   * @param {Number} a Horizontal scaling\n   * @param {Number} b Horizontal skewing\n   * @param {Number} c Vertical skewing\n   * @param {Number} d Vertical scaling\n   * @param {Number} e Horizontal moving\n   * @param {Number} f Vertical scaling\n   */\n  transform(a, b, c, d, e, f) {\n    this.multiply([\n      [a, c, e],\n      [b, d, f],\n      [0, 0, 1],\n    ]);\n\n    return this;\n  }\n\n  /**\n   * Gets the value of the determinant.\n   * @return {Number}\n   */\n  determinant() {\n    let a = this._elements[0][0],\n      b = this._elements[0][1],\n      c = this._elements[0][2],\n      d = this._elements[1][0],\n      e = this._elements[1][1],\n      f = this._elements[1][2],\n      g = this._elements[2][0],\n      h = this._elements[2][1],\n      i = this._elements[2][2],\n      p = 0;\n\n    p = a * e * i + b * f * g + c * d * h - c * e * g - b * d * i - a * f * h;\n\n    return p;\n  }\n\n  /**\n   * Inverts the matrix.\n   */\n  invert() {\n    let dt = this.determinant(),\n      a = this._elements[0][0],\n      b = this._elements[0][1],\n      c = this._elements[0][2],\n      d = this._elements[1][0],\n      e = this._elements[1][1],\n      f = this._elements[1][2],\n      g = this._elements[2][0],\n      h = this._elements[2][1],\n      k = this._elements[2][2];\n\n    this._elements = [\n      [e * k - f * h, c * h - b * k, b * f - c * e],\n      [f * g - d * k, a * k - c * g, c * d - a * f],\n      [d * h - e * g, g * b - a * h, a * e - b * d],\n    ];\n\n    this.multiply(1 / dt); // TODO - handle when dt === 0 ?\n    return this;\n  }\n\n  /**\n   * Transposes the elements of the matrix.\n   */\n  transpose() {\n    const m = Object.create(this._elements); // ?\n    this._elements = [\n      [m[0][0], m[1][0], m[2][0]],\n      [m[0][1], m[1][1], m[2][1]],\n      [m[0][2], m[1][2], m[2][2]],\n    ];\n    return this;\n  }\n\n  /**\n   * Resets the inner elements of the matrix to identity values.\n   */\n  identity() {\n    this._elements = [\n      [1, 0, 0],\n      [0, 1, 0],\n      [0, 0, 1],\n    ];\n    return this;\n  }\n\n  toString() {\n    return `${this._elements.map((r) => r.join('\\t')).join('\\n')}`;\n  }\n\n  isIdentity() {\n    const m = this._elements;\n    return (\n      m[0][0] === 1 &&\n      m[0][1] === 0 &&\n      m[0][2] === 0 &&\n      m[1][0] === 0 &&\n      m[1][1] === 1 &&\n      m[1][2] === 0 &&\n      m[2][0] === 0 &&\n      m[2][1] === 0 &&\n      m[2][2] === 1\n    );\n  }\n\n  /**\n   * Transforms the given point by this matrix and returns a new point\n   */\n  transformPoint(p) {\n    let vec = [p.x, p.y, 1],\n      i,\n      j,\n      e = this._elements,\n      m = [0, 0, 0];\n    for (i = 0; i < this._elements.length; i++) {\n      // row\n      for (j = 0; j < this._elements[i].length; j++) {\n        // column\n        m[i] += vec[j] * e[i][j];\n      }\n    }\n\n    return { x: m[0], y: m[1] };\n  }\n\n  /**\n   * Transforms the given points by this matrix and returns the new points\n   */\n  transformPoints(array) {\n    let vec,\n      i,\n      j,\n      k,\n      m,\n      e = this._elements,\n      ret = [];\n\n    for (k = 0; k < array.length; k++) {\n      vec = [array[k].x, array[k].y, 1];\n      m = [0, 0, 0];\n\n      for (i = 0; i < this._elements.length; i++) {\n        // row\n        for (j = 0; j < this._elements[i].length; j++) {\n          // column\n          m[i] += vec[j] * e[i][j];\n        }\n      }\n      ret.push({ x: m[0], y: m[1] });\n    }\n    return ret;\n  }\n\n  get elements() {\n    const m = this._elements;\n    return [\n      [m[0][0], m[0][1], m[0][2]],\n      [m[1][0], m[1][1], m[1][2]],\n      [m[2][0], m[2][1], m[2][2]],\n    ];\n  }\n}\n\nexport default Matrix;\n","const transformRegEx = /(translate|scale|rotate|matrix)\\(([0-9,.eE+-\\s]+)(?:,|\\s?)+\\)/g;\n\nfunction parseTransform(transform) {\n  let m,\n    commands = [];\n  /* eslint-disable no-cond-assign */\n  while ((m = transformRegEx.exec(transform)) !== null) {\n    const argsStr = m[2].trim();\n    const args = argsStr.indexOf(',') === -1 ? argsStr.split(' ') : argsStr.split(',');\n\n    commands.push({\n      cmd: m[1],\n      args: args.filter((a) => a.trim().length > 0).map((a) => Number(a)),\n    });\n  }\n  /* eslint-enable no-cond-assign */\n\n  return commands;\n}\n\nfunction resolveRotateCmd(matrix, transform) {\n  const radians = transform.args[0] * (Math.PI / 180);\n\n  if (transform.args.length > 2) {\n    const x = transform.args[1];\n    const y = transform.args[2];\n    matrix.translate(x, y);\n    matrix.rotate(radians);\n    matrix.translate(-x, -y);\n  } else if (transform.args.length === 1) {\n    matrix.rotate(radians);\n  }\n}\n\nfunction resolveScaleCmd(matrix, transform) {\n  const x = transform.args[0];\n  const y = isNaN(transform.args[1]) ? transform.args[0] : transform.args[1];\n  matrix.scale(x, y);\n}\n\nfunction resolveTranslateCmd(matrix, transform) {\n  const x = transform.args[0];\n  const y = isNaN(transform.args[1]) ? 0 : transform.args[1];\n  matrix.translate(x, y);\n}\n\nfunction resolveMatrixCmd(matrix, transform) {\n  if (transform.args.length >= 6) {\n    matrix.transform(...transform.args);\n  }\n}\n\nexport default function resolveTransform(t, matrix) {\n  const transforms = parseTransform(t);\n  let transform;\n\n  for (let i = 0, len = transforms.length; i < len; i++) {\n    transform = transforms[i];\n\n    if (transform.cmd === 'rotate') {\n      resolveRotateCmd(matrix, transform);\n    } else if (transform.cmd === 'scale') {\n      resolveScaleCmd(matrix, transform);\n    } else if (transform.cmd === 'matrix') {\n      resolveMatrixCmd(matrix, transform);\n    } else if (transform.cmd === 'translate') {\n      resolveTranslateCmd(matrix, transform);\n    }\n  }\n}\n","/* eslint-disable no-useless-escape */\n\nconst SELECTOR_MAPS = {\n  type: /^\\w[\\w-]+/,\n  attr: /^\\[\\w(?:[\\w\\._-]+)?(?:[!]?=['\\\"][\\w\\s*#_-]*['\\\"])?\\]/,\n  universal: /^(\\*)/,\n  tag: /^\\.(\\w+)/,\n};\n\nconst FILTERS = {\n  type: (c, objects) => {\n    // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const type = o.type;\n\n      if (type) {\n        return type.toLowerCase() === c.toLowerCase();\n      }\n      return false;\n    });\n  },\n\n  attr: (attr, operator, value, objects) => {\n    // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const v = o.attrs[attr];\n\n      if (!operator) {\n        // TODO handle undefined differently for != operator? As display object may very well have a default rendering color\n        return typeof v !== 'undefined';\n      }\n      if (typeof v === 'undefined') {\n        return false;\n      }\n\n      switch (operator) {\n        case '=':\n          return value === String(v);\n        case '!=':\n          return value !== String(v);\n        default:\n          return false;\n      }\n    });\n  },\n\n  universal: (objects) => objects,\n\n  tag: (selector, objects) => {\n    // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const tag = o.tag;\n      if (tag) {\n        return tag.trim().split(/\\s+/).indexOf(selector.replace('.', '')) !== -1;\n      }\n      return false;\n    });\n  },\n};\n\n/**\n * Filters out objects of given type and value\n * @ignore\n * @example\n * filter(\n *   {type:'type', value:'Circle'},\n *   [new Circle(), new Rectangle()]\n * )\n * // [Circle]\n * @param {Object} token\n * @param {Array} objects\n * @returns {Object[]} Objects that fulfill the type and value\n */\nexport function filter(token, objects) {\n  if (!objects || !objects.length || !token || typeof FILTERS[token.type] !== 'function') {\n    return [];\n  }\n\n  switch (token.type) {\n    case 'type':\n      return FILTERS[token.type](token.value, objects);\n    case 'attr':\n      return FILTERS[token.type](token.attribute, token.operator, token.attributeValue, objects);\n    case 'universal':\n      return FILTERS[token.type](objects);\n    case 'tag':\n      return FILTERS[token.type](token.value, objects);\n    default:\n      return [];\n  }\n}\n\n/**\n * Tokenizes a string into supported selectors\n * @ignore\n *\n * @example\n * tokenize(\"Circle[color='red']\")\n *\n * @param {String} s\n */\nexport function tokenize(s) {\n  const groups = [];\n  let sub;\n  let info;\n  let match;\n  let validSelector;\n\n  s.split(/\\s*,\\s*/).forEach((group) => {\n    group = group.trim();\n    sub = [];\n    const selectorMapsIterator = (key) => {\n      match = group.match(SELECTOR_MAPS[key]);\n      if (match) {\n        validSelector = true;\n        group = group.slice(match[0].length);\n        info = {\n          type: key,\n          value: match[0],\n        };\n\n        if (key === 'attr') {\n          // extract parts of attribute from e.g. [color='red'] => (color, =, red)\n          match = match[0].match(/\\[(\\w[\\w\\._-]+)?(?:([!]?=)['\\\"]([\\w\\s#_-]*)['\\\"])?\\]/);\n          info.attribute = match[1];\n          info.operator = match[2];\n          info.attributeValue = match[3];\n        }\n        sub.push(info);\n      }\n    };\n    while (group) {\n      validSelector = false;\n\n      match = group.match(/^\\s*([>+~]|\\s)\\s*/);\n      if (match) {\n        validSelector = true;\n        sub.push({\n          type: ' ',\n          value: match[0],\n        });\n        group = group.slice(match[0].length);\n      }\n\n      Object.keys(SELECTOR_MAPS).forEach(selectorMapsIterator);\n\n      if (sub && sub.length && groups.indexOf(sub) < 0) {\n        groups.push(sub);\n      }\n\n      if (!validSelector) {\n        break;\n      }\n    }\n  });\n  return groups;\n}\n\nfunction find(s, object) {\n  const result = [];\n  const groupResults = [];\n  let groups;\n  let descendants;\n\n  if (object.isBranch) {\n    groups = tokenize(s);\n    descendants = object.descendants;\n\n    let tokens;\n\n    for (let gi = 0, glen = groups.length; gi < glen; gi++) {\n      tokens = groups[gi];\n\n      const levels = [];\n      let filtered = descendants.slice();\n      let hasRemainder = false;\n      tokens.reverse().forEach((token) => {\n        if (token.type === ' ') {\n          levels.push(filtered);\n          filtered = descendants.slice();\n          hasRemainder = false;\n          return;\n        }\n\n        filtered = filter(token, filtered);\n        hasRemainder = true;\n      });\n\n      if (hasRemainder) {\n        levels.push(filtered);\n      }\n\n      const selected = levels[0].filter((node) => {\n        let ancestor = node.parent;\n        let idx;\n\n        for (let i = 1; i < levels.length; i++) {\n          idx = levels[i].indexOf(ancestor);\n          while (ancestor && idx < 0) {\n            ancestor = ancestor.parent;\n            idx = levels[i].indexOf(ancestor);\n          }\n          if (idx < 0) {\n            return false;\n          }\n        }\n        return true;\n      });\n\n      groupResults.push(selected);\n    }\n\n    for (let i = 0, len = groupResults.length; i < len; i++) {\n      for (let ni = 0, nlen = groupResults[i].length; ni < nlen; ni++) {\n        if (result.indexOf(groupResults[i][ni]) < 0) {\n          result.push(groupResults[i][ni]);\n        }\n      }\n    }\n  }\n\n  return result || [];\n}\n\nexport default {\n  find,\n};\n","import { pointsToRect, pointsToCircle, pointsToLine } from '../geometry/util';\nimport pointsToPath from '../utils/points-to-path';\n\nfunction appendDpi(points, dpi) {\n  for (let i = 0, len = points.length; i < len; i++) {\n    points[i].x /= dpi;\n    points[i].y /= dpi;\n  }\n}\n\nfunction geometryToDef(geometry, dpi, mvm) {\n  const type = geometry.type;\n  let points = geometry.points();\n  if (mvm) {\n    if (points.every((item) => Array.isArray(item))) {\n      points = points.map((item) => mvm.transformPoints(item));\n    } else {\n      points = mvm.transformPoints(points);\n    }\n  }\n  appendDpi(points, dpi);\n  let def = null;\n\n  if (type === 'rect' || type === 'bounds') {\n    def = pointsToRect(points);\n    def.type = type;\n  } else if (type === 'circle') {\n    def = pointsToCircle(points, geometry.r);\n    def.type = type;\n  } else if (type === 'line') {\n    def = pointsToLine(points);\n    def.type = type;\n  } else if (type === 'polygon' || type === 'polyline') {\n    const path = pointsToPath(points, type === 'polygon');\n    def = {\n      type: 'path',\n      d: path,\n    };\n  } else if (type === 'geopolygon') {\n    let path = '';\n    for (let i = 0; i < points.length; i++) {\n      path += pointsToPath(points[i], true);\n    }\n    def = {\n      type: 'path',\n      d: path,\n    };\n  }\n\n  return def;\n}\n\n/**\n * @ignore\n * @returns {object} Returns a node definition of the collider\n */\nfunction colliderToShape(node, dpi) {\n  if (node.collider) {\n    const mvm = node.modelViewMatrix;\n    const isCollection = node.colliderType === 'collection';\n\n    if (isCollection) {\n      const children = node.collider.geometries.map((geometry) => geometryToDef(geometry, dpi, mvm));\n\n      return {\n        type: 'container',\n        children,\n      };\n    }\n\n    return geometryToDef(node.collider, dpi, mvm);\n  }\n\n  return null;\n}\n\n/**\n * Read-only object representing a node on the scene.\n */\nclass SceneNode {\n  constructor(node) {\n    this._bounds = (includeTransform = true) => {\n      const { x, y, width, height } = node.boundingRect\n        ? node.boundingRect(includeTransform)\n        : {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n          };\n      return {\n        x,\n        y,\n        width,\n        height,\n      };\n    };\n    this._attrs = node.attrs;\n    this._type = node.type;\n    this._data = node.data;\n    this._dpi = node.stage ? node.stage.dpi : 1;\n    this._collider = () => colliderToShape(node, this._dpi);\n    this._desc = node.desc;\n    this._tag = node.tag;\n    this._children = () => node.children.map((n) => new SceneNode(n));\n    this._parent = () => (node.parent ? new SceneNode(node.parent) : null);\n\n    this._cache = {\n      elementBoundingRect: null,\n    };\n    this._getElementBoundingRect = () => {\n      if (!this._cache.elementBoundingRect && this.element) {\n        this._cache.elementBoundingRect = this.element.getBoundingClientRect();\n      }\n      return this._cache.elementBoundingRect || { left: 0, top: 0 };\n    };\n  }\n\n  /**\n   * Get child nodes\n   * @type {SceneNode[]}\n   */\n  get children() {\n    return this._children();\n  }\n\n  /**\n   * Get parent node\n   * @type {SceneNode}\n   */\n  get parent() {\n    return this._parent();\n  }\n\n  /**\n   * Node type\n   * @type {string}\n   */\n  get type() {\n    return this._type;\n  }\n\n  /**\n   * Get the associated data\n   * @type {any}\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Node attributes\n   * @type {object}\n   */\n  get attrs() {\n    return this._attrs;\n  }\n\n  /**\n   * Element the scene is attached to\n   * @type {HTMLElement}\n   * @private\n   */\n  set element(e) {\n    this._cache.elementBoundingRect = null;\n    this._element = e;\n  }\n\n  /**\n   * Element the scene is attached to\n   * @type {HTMLElement}\n   */\n  get element() {\n    return this._element;\n  }\n\n  /**\n   * Key of the component this shape belongs to\n   * @type {string}\n   * @private\n   */\n  set key(k) {\n    this._key = k;\n  }\n\n  /**\n   * Key of the component this shape belongs to\n   * @type {string}\n   */\n  get key() {\n    return this._key;\n  }\n\n  /**\n   * Bounding rectangle of the node. After any transform has been applied, if any, but excluding scaling transform related to devicePixelRatio.\n   * Origin is in the top-left corner of the scene element.\n   * @type {rect}\n   */\n  get bounds() {\n    const bounds = this._bounds();\n    bounds.x /= this._dpi;\n    bounds.y /= this._dpi;\n    bounds.width /= this._dpi;\n    bounds.height /= this._dpi;\n    return bounds;\n  }\n\n  /**\n   * Bounding rectangle of the node withing it's local coordinate system.\n   * Origin is in the top-left corner of the scene element.\n   * @type {rect}\n   */\n  get localBounds() {\n    const bounds = this._bounds(false);\n    return bounds;\n  }\n\n  /**\n   * Bounding rectangle of the node, relative a target.\n   *\n   * If target is an HTMLElement, the bounds are relative to the HTMLElement.\n   * Any other target type will return the bounds relative to the viewport of the browser.\n   *\n   * @param {HTMLElement|any} target\n   * @param {boolean} includeTransform - Whether to include any applied transforms on the node\n   * @returns {rect}\n   * @example\n   *\n   * node.boundsRelativeTo($('div'));\n   * node.boundsRelativeTo('viewport');\n   */\n  boundsRelativeTo(target, includeTransform = true) {\n    const type = typeof target;\n    const bounds = includeTransform ? this.bounds : this.localBounds;\n    const selfRect = this._getElementBoundingRect();\n    let dx = selfRect.left;\n    let dy = selfRect.top;\n\n    if (type === 'object' && target !== null && typeof target.getBoundingClientRect === 'function') {\n      const { left = 0, top = 0 } = target.getBoundingClientRect();\n      dx -= left;\n      dy -= top;\n    }\n\n    bounds.x += dx;\n    bounds.y += dy;\n\n    return bounds;\n  }\n\n  /**\n   * Collider of the node. Transform on the node has been applied to the collider shape, if any, but excluding scaling transform related to devicePixelRatio.\n   * Origin is in the top-left corner of the scene element.\n   *\n   * If node has no collider, null is returned.\n   * @type {line|rect|circle|path}\n   */\n  get collider() {\n    return this._collider();\n  }\n\n  /**\n   * Node description\n   * @type {object}\n   */\n  get desc() {\n    return this._desc;\n  }\n\n  /**\n   * Node tag\n   * @type {string}\n   */\n  get tag() {\n    return this._tag;\n  }\n}\n\nfunction create(...a) {\n  return new SceneNode(...a);\n}\n\nexport { create as default, SceneNode };\n","import createSceneNode from './scene-node';\n\nexport class Collision {\n  constructor(node) {\n    this._node = createSceneNode(node);\n    this._parent = null;\n    this._input = null;\n  }\n\n  get node() {\n    return this._node;\n  }\n\n  set parent(p) {\n    this._parent = p;\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  set input(i) {\n    this._input = i;\n  }\n\n  get input() {\n    return this._input;\n  }\n}\n\nexport default function create(...a) {\n  return new Collision(...a);\n}\n","import createCollision from './collision';\nimport { scalarMultiply } from '../math/vector';\nimport { create as createPolygon } from '../geometry/polygon';\nimport { create as createGeoPolygon } from '../geometry/geopolygon';\nimport { lineToPoints, rectToPoints, getShapeType } from '../geometry/util';\n\nfunction appendParentNode(node, collision) {\n  const p = node.parent;\n\n  if (p && p.type !== 'stage') {\n    collision.parent = createCollision(p);\n\n    const pp = p.parent;\n    if (pp && pp.type !== 'stage') {\n      appendParentNode(pp, collision.parent);\n    }\n  }\n}\n\nfunction appendInputShape(shape, collisions) {\n  for (let i = 0, len = collisions.length; i < len; i++) {\n    collisions[i].input = shape;\n  }\n}\n\nfunction resolveFrontChildCollision(node, type, input) {\n  const num = node.descendants.length;\n\n  for (let i = num - 1; i >= 0; i--) {\n    const desc = node.descendants[i];\n    if (desc.collider === null) {\n      continue;\n    }\n\n    if (desc.collider[type](input)) {\n      const collision = createCollision(desc);\n\n      appendParentNode(desc, collision);\n\n      return collision;\n    }\n  }\n  return null;\n}\n\nfunction resolveGeometryCollision(node, type, input) {\n  if (node.collider[type](input)) {\n    const c = createCollision(node);\n\n    appendParentNode(node, c);\n\n    return c;\n  }\n\n  return null;\n}\n\nfunction inverseTransform(node, input) {\n  let transformedInput = {};\n  if (node.modelViewMatrix) {\n    if (Array.isArray(input)) {\n      // Rect or Line\n      transformedInput = node.inverseModelViewMatrix.transformPoints(input);\n    } else if (!isNaN(input.r)) {\n      // Circle\n      const p = { x: input.cx, y: input.cy };\n      ({ x: transformedInput.cx, y: transformedInput.cy } = node.inverseModelViewMatrix.transformPoint(p));\n      transformedInput.r = input.r;\n    } else if (Array.isArray(input.vertices)) {\n      // Polygon\n      transformedInput.vertices = node.inverseModelViewMatrix.transformPoints(input.vertices);\n    } else {\n      // Point\n      transformedInput = node.inverseModelViewMatrix.transformPoint(input);\n    }\n  } else {\n    transformedInput = input;\n  }\n\n  if (Array.isArray(transformedInput.vertices)) {\n    if (transformedInput.vertices.every((item) => Array.isArray(item))) {\n      transformedInput = createGeoPolygon(transformedInput);\n    } else {\n      transformedInput = createPolygon(transformedInput); // TODO Shouldn't have to do this here, currently its beacause a collision algorithm optimization, i.e. caching of polygon bounds\n    }\n  }\n\n  return transformedInput;\n}\n\nfunction resolveCollision(node, intersectionType, input) {\n  if (node.colliderType === null) {\n    return null;\n  }\n\n  const transformedInput = inverseTransform(node, input);\n\n  if (node.colliderType === 'frontChild') {\n    return resolveFrontChildCollision(node, intersectionType, transformedInput);\n  }\n\n  return resolveGeometryCollision(node, intersectionType, transformedInput);\n}\n\nfunction findAllCollisions(nodes, intersectionType, ary, input) {\n  const num = nodes.length;\n  for (let i = 0; i < num; i++) {\n    const node = nodes[i];\n\n    const collision = resolveCollision(node, intersectionType, input);\n\n    if (collision) {\n      ary.push(collision);\n    }\n\n    // Only traverse children if no match is found on parent and it doesnt have any custom collider\n    if (node.children && !collision && !node.collider) {\n      findAllCollisions(node.children, intersectionType, ary, input);\n    }\n  }\n}\n\nfunction hasCollision(nodes, intersectionType, input) {\n  const num = nodes.length;\n  for (let i = 0; i < num; i++) {\n    const node = nodes[i];\n\n    const collision = resolveCollision(node, intersectionType, input);\n\n    if (collision !== null) {\n      return true;\n    }\n\n    if (node.children && !node.collider) {\n      return hasCollision(node.children, intersectionType, input);\n    }\n  }\n  return false;\n}\n\nfunction resolveShape(shape, ratio = 1) {\n  const type = getShapeType(shape);\n  let _shape = {};\n\n  switch (type) {\n    case 'circle':\n      _shape.cx = shape.cx * ratio;\n      _shape.cy = shape.cy * ratio;\n      _shape.r = shape.r;\n      return ['intersectsCircle', _shape];\n    case 'rect':\n      _shape = rectToPoints(shape).map((p) => scalarMultiply(p, ratio));\n      return ['intersectsRect', _shape];\n    case 'line':\n      _shape = lineToPoints(shape).map((p) => scalarMultiply(p, ratio));\n      return ['intersectsLine', _shape];\n    case 'point':\n      _shape = scalarMultiply(shape, ratio);\n      return ['containsPoint', _shape];\n    case 'polygon':\n      _shape.vertices = shape.vertices.map((vertex) => scalarMultiply(vertex, ratio));\n      return ['intersectsPolygon', _shape];\n    case 'geopolygon':\n      _shape.vertices = shape.vertices.map((vertices) => vertices.map((vertex) => scalarMultiply(vertex, ratio)));\n      return ['intersectsGeoPolygon', _shape];\n    default:\n      return [];\n  }\n}\n\nexport function resolveCollionsOnNode(node, shape) {\n  const [intersectionType, _shape] = resolveShape(shape, node.dpi);\n  const collisions = [];\n\n  if (intersectionType) {\n    findAllCollisions([node], intersectionType, collisions, _shape);\n    appendInputShape(shape, collisions);\n  }\n  return collisions;\n}\n\nexport function hasCollisionOnNode(node, shape) {\n  const [intersectionType, _shape] = resolveShape(shape, node.dpi);\n\n  return hasCollision([node], intersectionType, _shape);\n}\n","import extend from 'extend';\nimport Node from '../node';\nimport { create as geometry } from '../../geometry';\nimport { create as geometryCollection } from '../../geometry/geometry-collection';\nimport Matrix from '../../math/matrix';\nimport resolveTransform from '../transform-resolver';\nimport nodeSelector from '../node-selector';\nimport createSceneNode from '../scene-node';\nimport { resolveCollionsOnNode, hasCollisionOnNode } from '../collision-resolver';\nimport { assignMappedAttribute } from '../attributes';\n\n/**\n * @typedef {object} node-def\n * @property {string} type\n * @property {string|gradient-def|pattern-def} [fill] - {@link https://www.w3.org/TR/fill-stroke-3/#fill-shorthand}\n * @property {string|gradient-def|pattern-def} [stroke] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke}\n * @property {number} [strokeWidth] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke-width}\n * @property {string|number[]} [strokeDasharray] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke-dasharray}\n * @property {number} [opacity] - {@link https://www.w3.org/TR/css-color-4/#propdef-opacity}\n * @property {string} [transform] - {@link https://www.w3.org/TR/SVG/coords.html#TransformAttribute}\n * @property {object} [data] - Data object, may contain any properties\n * @property {object} [desc] - Meta-data object, may contain any properties\n * @property {string} [tag] - White-space seperated list of tags\n * @property {string} [id] - Unique identifier of the node\n * @property {object} [collider]\n */\n\nclass DisplayObject extends Node {\n  constructor(type) {\n    super(type);\n    this._stage = null;\n    this._collider = {\n      type: null,\n      definition: null,\n      fn: null,\n    };\n    this._attrs = {};\n    this._node = null;\n  }\n\n  set(v = {}) {\n    this.node = v;\n\n    const { data, desc, tag, strokeReference, fillReference } = v;\n\n    assignMappedAttribute(this.attrs, v);\n\n    if (typeof data !== 'undefined') {\n      this.data = data;\n    }\n\n    if (typeof desc === 'object') {\n      this.desc = extend(true, {}, desc);\n    }\n\n    if (typeof tag === 'string') {\n      this.tag = tag;\n    }\n\n    if (typeof strokeReference === 'string') {\n      this.strokeReference = strokeReference;\n    }\n\n    if (typeof fillReference === 'string') {\n      this.fillReference = fillReference;\n    }\n  }\n\n  findShapes(selector) {\n    return nodeSelector.find(selector, this).map((node) => createSceneNode(node));\n  }\n\n  getItemsFrom(shape) {\n    return resolveCollionsOnNode(this, shape);\n  }\n\n  containsPoint(p) {\n    return hasCollisionOnNode(this, p);\n  }\n\n  intersectsLine(line) {\n    return hasCollisionOnNode(this, line);\n  }\n\n  intersectsRect(rect) {\n    return hasCollisionOnNode(this, rect);\n  }\n\n  intersectsCircle(circle) {\n    return hasCollisionOnNode(this, circle);\n  }\n\n  intersectsPolygon(polygon) {\n    return hasCollisionOnNode(this, polygon);\n  }\n\n  intersectsGeoPolygon(geopolygon) {\n    return hasCollisionOnNode(this, geopolygon);\n  }\n\n  resolveLocalTransform(m = new Matrix()) {\n    if (typeof this.attrs.transform !== 'undefined') {\n      resolveTransform(this.attrs.transform, m);\n    }\n    this.modelViewMatrix = m.clone();\n  }\n\n  resolveGlobalTransform(m = new Matrix()) {\n    const a = this.ancestors;\n\n    if (a.length > 0) {\n      for (let i = a.length - 1; i >= 0; i--) {\n        a[i].resolveLocalTransform(m);\n        m = a[i].modelViewMatrix;\n      }\n    }\n\n    this.resolveLocalTransform(m);\n  }\n\n  /**\n   * Returns the value of attribute a.\n   * @private\n   * @param a\n   * @returns {*} The value of attribute a.\n   */\n  attr(a) {\n    return this.attrs[a];\n  }\n\n  equals(d) {\n    const attrs = this.attrs;\n    const attrKeys = Object.keys(attrs);\n    const dAttrs = d.attrs;\n    const dAttrKeys = Object.keys(dAttrs);\n    if (attrKeys.length !== dAttrKeys.length) {\n      return false;\n    }\n    for (let i = 0; i < attrKeys.length; i++) {\n      const key = attrKeys[i];\n      if (!Object.hasOwnProperty.call(dAttrs, key)) {\n        return false;\n      }\n      if (attrs[key] !== dAttrs[key]) {\n        return false;\n      }\n    }\n\n    return super.equals(d);\n  }\n\n  toJSON() {\n    const json = super.toJSON();\n    json.attrs = this.attrs;\n    return json;\n  }\n\n  get attrs() {\n    return this._attrs;\n  }\n\n  get stage() {\n    if (this._parent && !this._stage) {\n      // lazy evaluation\n      this._stage = this._parent.stage;\n    } else if (!this._parent && this._stage !== this) {\n      this._stage = null;\n    }\n    return this._stage;\n  }\n\n  set modelViewMatrix(m) {\n    this._mvm = m;\n    this._imvm = null;\n  }\n\n  get modelViewMatrix() {\n    return this._mvm;\n  }\n\n  get inverseModelViewMatrix() {\n    this._imvm = this._imvm ? this._imvm : this._mvm.clone().invert();\n    return this._imvm;\n  }\n\n  set node(n) {\n    this._node = n;\n  }\n\n  get node() {\n    return this._node;\n  }\n\n  set collider(definition) {\n    const type = Array.isArray(definition) ? 'collection' : definition && definition.type;\n    if (typeof type !== 'string') {\n      // Non string type definition resets the collider\n      this._collider.type = null;\n      this._collider.definition = null;\n      this._collider.fn = null;\n      return;\n    }\n\n    // Check if a collider of the same type is already defined, if so, do an update\n    if (this._collider !== null && this._collider.type === type && this._collider.fn !== null) {\n      this._collider.fn.set(definition);\n      this._collider.definition = definition;\n      return;\n    }\n\n    // Store the definition so that it can be lazy evaluated\n    this._collider.type = type;\n    this._collider.definition = definition;\n  }\n\n  get collider() {\n    // Resolve geometry function from cache\n    if (this._collider.fn !== null) {\n      return this._collider.fn;\n    }\n\n    // Resolve geometry function and store it in cache\n    switch (this._collider.type) {\n      case 'collection':\n        this._collider.fn = geometryCollection(this._collider.definition);\n        break;\n      case 'frontChild': // TODO Deprecate\n        // Front child is not resolved by a function on this node, but instead on one of its child nodes\n        return true;\n      case 'bounds':\n        this._collider.fn = geometry('rect', this.boundingRect());\n        break;\n      case 'line':\n      case 'rect':\n      case 'circle':\n      case 'polygon':\n      case 'geopolygon':\n      case 'polyline':\n        this._collider.fn = geometry(this._collider.type, this._collider.definition);\n        break;\n      default:\n        return null;\n    }\n\n    return this._collider.fn;\n  }\n\n  get colliderType() {\n    return this._collider.type;\n  }\n}\n\nexport default DisplayObject;\n","import Node from './node';\n\nclass NodeContainer extends Node {\n  addChild(c) {\n    if (!c || !(c instanceof Node)) {\n      throw new TypeError(`Expecting a Node as argument, but got ${c}`);\n    }\n\n    if (c === this) {\n      throw new Error('Can not add itself as child!');\n    }\n\n    if (c._children && c._children.length && this.ancestors.indexOf(c) >= 0) {\n      throw new Error('Can not add an ancestor as child!');\n    }\n\n    if (c._parent && c._parent !== this) {\n      c._parent.removeChild(c);\n    }\n\n    this._children.push(c);\n    c._parent = this;\n    c._ancestors = null;\n\n    return this;\n  }\n\n  addChildren(children) {\n    let i,\n      num = children ? children.length : 0;\n    for (i = 0; i < num; i++) {\n      this.addChild(children[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Removes given child node from this node.\n   * @private\n   * @param {Node} c\n   * @returns {Node} This object, for chaining purposes.\n   */\n  removeChild(c) {\n    const indx = this._children.indexOf(c);\n    if (indx >= 0) {\n      this._children.splice(indx, 1);\n      c._parent = null;\n      c._ancestors = null;\n    }\n    return this;\n  }\n\n  removeChildren(children) {\n    let i, num;\n    if (!this._children) {\n      return this;\n    }\n    if (children) {\n      num = children.length;\n      for (i = 0; i < num; i++) {\n        this.removeChild(children[i]);\n      }\n    } else {\n      while (this._children.length) {\n        this.removeChild(this._children[0]);\n      }\n    }\n    return this;\n  }\n}\n\nexport default NodeContainer;\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n/**\n * @extends node-def\n * @typedef {object} node--container-def\n * @property {node-def[]} children - Array of child nodes\n */\n\nconst NC = NodeContainer.prototype;\n\nexport default class Container extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const { collider } = v;\n    const opts = extend(\n      {\n        type: null,\n      },\n      collider\n    );\n\n    this.collider = opts;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  appendChildRect(child, includeTransform) {\n    if (typeof child.bounds !== 'undefined') {\n      const rect = this.__boundingRect[includeTransform] || {};\n      const [p0, , p2] = child.bounds(includeTransform);\n      const { x: xMin, y: yMin } = p0;\n      const { x: xMax, y: yMax } = p2;\n\n      const _xMax = isNaN(rect.width) ? xMax : Math.max(xMax, rect.width + rect.x);\n      const _yMax = isNaN(rect.height) ? yMax : Math.max(yMax, rect.height + rect.y);\n\n      rect.x = isNaN(rect.x) ? xMin : Math.min(xMin, rect.x);\n      rect.y = isNaN(rect.y) ? yMin : Math.min(yMin, rect.y);\n      rect.width = _xMax - rect.x;\n      rect.height = _yMax - rect.y;\n\n      this.__boundingRect[includeTransform] = rect;\n    }\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n\n    const num = this.children.length;\n\n    for (let i = 0; i < num; i++) {\n      this.appendChildRect(this.children[i], includeTransform);\n    }\n\n    this.__boundingRect[includeTransform] = extend(\n      {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      },\n      this.__boundingRect[includeTransform]\n    );\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      this.appendChildRect(c, true);\n      const opts = extend(\n        {\n          type: 'bounds',\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n        },\n        this.__boundingRect.true\n      );\n      this.collider = opts;\n    }\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n    const num = children.length;\n\n    if (this._collider && this._collider.type === 'bounds' && num > 0) {\n      for (let i = 0; i < num; i++) {\n        this.appendChildRect(children[i], true);\n      }\n      const opts = extend(\n        {\n          type: 'bounds',\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n        },\n        this.__boundingRect.true\n      );\n      this.collider = opts;\n    }\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      this.__boundingRect = { true: null, false: null };\n      this.__bounds = { true: null, false: null };\n      const opts = extend(this.boundingRect(true), { type: 'bounds' });\n      this.collider = opts;\n    }\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      this.__boundingRect = { true: null, false: null };\n      this.__bounds = { true: null, false: null };\n      const opts = extend(this.boundingRect(true), { type: 'bounds' });\n      this.collider = opts;\n    }\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new Container(...s);\n}\n","import Container from './container';\n\nexport default class Stage extends Container {\n  constructor(dpi) {\n    super('stage');\n    this._stage = this;\n    this._dpiRatio = dpi || 1;\n  }\n\n  get dpi() {\n    return this._dpiRatio;\n  }\n}\n\nexport function create(...a) {\n  return new Stage(...a);\n}\n","import DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n/**\n * @typedef {object} gradient-def\n * @property {string} type\n * @property {object[]} stops\n * @property {string} [stops[].type=linearGradient] - radialGradient|linearGradient\n * @property {string} stops[].color - {@link https://www.w3.org/TR/SVG/types.html#DataTypeColor}\n * @property {string} [stops[].opacity=1] - {@link https://www.w3.org/TR/css-color-4/#propdef-opacity}\n * @property {number} stops[].offset - {@link https://www.w3.org/TR/SVG/pservers.html#StopElementOffsetAttribute}\n * @property {number} [degree] - Gradient rotation angle\n */\n\n/**\n * @typedef {object} node--gradient-item-def\n * @property {string} id - Gradient identifier\n * @property {number} x1 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementX1Attribute}\n * @property {number} y1 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementY1Attribute}\n * @property {number} x2 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementX2Attribute}\n * @property {number} y2 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementY2Attribute}\n * @property {number} offset - {@link https://www.w3.org/TR/SVG/pservers.html#StopElementOffsetAttribute}\n * @property {object} style - {@link https://www.w3.org/TR/SVG/styling.html#StyleAttribute}\n */\n\nconst NC = NodeContainer.prototype;\n\nconst allowedAttrs = ['x1', 'x2', 'y1', 'y2', 'id', 'offset', 'style'];\n\nexport default class GradientItem extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n    this._boundingRect = {};\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const attrs = this.attrs;\n\n    let attrKey = '';\n\n    for (let i = 0, len = allowedAttrs.length; i !== len; i++) {\n      attrKey = allowedAttrs[i];\n\n      if (typeof v[attrKey] !== 'undefined') {\n        attrs[attrKey] = v[attrKey];\n      }\n    }\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new GradientItem(...s);\n}\n","import DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n/**\n * @experimental\n * @typedef {object} pattern-def\n * @property {'pattern'} type\n * @property {string} fill\n * @property {number} width\n * @property {number} height\n * @property {object[]} shapes\n * @example\n * Stripe pattern\n * ```js\n * {\n *   type: 'pattern',\n *   fill: 'red',\n *   width: 4,\n *   height: 4,\n *   shapes: [\n *     { type: 'rect', x: 3, y: 0, width: 1, height: 1 },\n *     { type: 'rect', x: 2, y: 1, width: 1, height: 1 },\n *     { type: 'rect', x: 1, y: 2, width: 1, height: 1 },\n *     { type: 'rect', x: 0, y: 3, width: 1, height: 1 },\n *   ]\n * }\n * ```\n */\n\nconst NC = NodeContainer.prototype;\n\nconst allowedAttrs = ['patternUnits', 'x', 'y', 'width', 'height', 'id'];\n\nexport default class PatternItem extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n    this._boundingRect = {};\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const attrs = this.attrs;\n\n    let attrKey = '';\n\n    for (let i = 0, len = allowedAttrs.length; i !== len; i++) {\n      attrKey = allowedAttrs[i];\n\n      if (typeof v[attrKey] !== 'undefined') {\n        attrs[attrKey] = v[attrKey];\n      }\n    }\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new PatternItem(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { rectToPoints, getMinMax } from '../../geometry/util';\n\n/**\n * @extends node-def\n * @typedef {object} node--rect-def\n * @property {number} x - {@link https://www.w3.org/TR/SVG/shapes.html#RectElementXAttribute}\n * @property {number} y - {@link https://www.w3.org/TR/SVG/shapes.html#RectElementYAttribute}\n * @property {number} width - {@link https://www.w3.org/TR/SVG/shapes.html#RectElementWidthAttribute}\n * @property {number} height- {@link https://www.w3.org/TR/SVG/shapes.html#RectElementHeightAttribute}\n */\n\nexport default class Rect extends DisplayObject {\n  constructor(...s) {\n    super('rect');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x = 0, y = 0, width = 0, height = 0, rx = 0, ry = 0, collider } = v;\n    const opts = extend(\n      {\n        type: 'rect',\n        x,\n        y,\n        width,\n        height,\n      },\n      collider\n    );\n\n    super.set(v);\n\n    if (width >= 0) {\n      this.attrs.x = x;\n      this.attrs.width = width;\n    } else {\n      this.attrs.x = x + width;\n      this.attrs.width = -width;\n    }\n\n    if (height >= 0) {\n      this.attrs.y = y;\n      this.attrs.height = height;\n    } else {\n      this.attrs.y = y + height;\n      this.attrs.height = -height;\n    }\n\n    if (rx > 0) {\n      this.attrs.rx = rx;\n    }\n    if (ry > 0) {\n      this.attrs.ry = ry;\n    }\n\n    this.collider = opts;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n    const p = rectToPoints(this.attrs);\n    const pt = includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(p) : p;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin,\n      y: yMin,\n      width: xMax - xMin,\n      height: yMax - yMin,\n    };\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Rect(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { getMinMax } from '../../geometry/util';\n\n/**\n * @extends node-def\n * @typedef {object} node--circle-def\n * @property {number} cx - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementCXAttribute}\n * @property {number} cy - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementCYAttribute}\n * @property {number} r - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementRAttribute}\n */\n\nexport default class Circle extends DisplayObject {\n  constructor(...s) {\n    super('circle');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { cx = 0, cy = 0, r = 0, collider } = v;\n    const opts = extend(\n      {\n        type: 'circle',\n        cx,\n        cy,\n        r,\n      },\n      collider\n    );\n\n    super.set(v);\n\n    this.attrs.cx = cx;\n    this.attrs.cy = cy;\n    this.attrs.r = r;\n\n    this.collider = opts;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n    // TODO Handle Circle bounds correctly for a circle transformed to an non axis aligned ellipse/circle\n    // Current solution only rotate the bounds, giving a larger boundingRect if rotated\n    const p = this.bounds(includeTransform);\n\n    this.__boundingRect[includeTransform] = {\n      x: p[0].x,\n      y: p[0].y,\n      width: p[2].x - p[0].x,\n      height: p[2].y - p[0].y,\n    };\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    // TODO Handle Circle bounds correctly for a circle transformed to an non axis aligned ellipse/circle\n    const { cx, cy, r: rX, r: rY } = this.attrs;\n    const x = cx - rX;\n    const y = cy - rY;\n    let w = rX * 2;\n    let h = rY * 2;\n    let p = [\n      { x, y },\n      { x: x + w, y },\n      { x: x + w, y: y + h },\n      { x, y: y + h },\n    ];\n\n    if (includeTransform && this.modelViewMatrix) {\n      p = this.modelViewMatrix.transformPoints(p);\n      const [xMin, yMin, xMax, yMax] = getMinMax(p);\n      w = xMax - xMin;\n      h = yMax - yMin;\n\n      this.__bounds[includeTransform] = [\n        { x: xMin, y: yMin },\n        { x: xMin + w, y: yMin },\n        { x: xMin + w, y: yMin + h },\n        { x: xMin, y: yMin + h },\n      ];\n    } else {\n      this.__bounds[includeTransform] = p;\n    }\n\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Circle(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { lineToPoints, getMinMax } from '../../geometry/util';\n\n/**\n * @extends node-def\n * @typedef {object} node--line-def\n * @property {number} x1 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementX1Attribute}\n * @property {number} y1 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementY1Attribute}\n * @property {number} x2 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementX2Attribute}\n * @property {number} y2 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementY2Attribute}\n */\n\nexport default class Line extends DisplayObject {\n  constructor(...s) {\n    super('line');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x1 = 0, y1 = 0, x2 = 0, y2 = 0, collider } = v;\n    super.set(v);\n    this.attrs.x1 = x1;\n    this.attrs.y1 = y1;\n    this.attrs.x2 = x2;\n    this.attrs.y2 = y2;\n\n    const defaultCollider = {\n      type: 'line',\n      x1,\n      y1,\n      x2,\n      y2,\n    };\n    this.collider = extend(defaultCollider, collider);\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n    let p = lineToPoints(this.attrs);\n\n    if (includeTransform && this.modelViewMatrix) {\n      p = this.modelViewMatrix.transformPoints(p);\n    }\n\n    const [xMin, yMin, xMax, yMax] = getMinMax(p);\n    const hasSize = xMin !== xMax || yMin !== yMax;\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin,\n      y: yMin,\n      width: hasSize ? Math.max(1, xMax - xMin) : 0,\n      height: hasSize ? Math.max(1, yMax - yMin) : 0,\n    };\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Line(...s);\n}\n","const PI_2 = Math.PI / 2;\n\nfunction lineAngle(p0, p1) {\n  const t = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n  return t < 0 ? t + Math.PI * 2 : t;\n}\n\n// TODO Find a more accurate method to find the open and closed points\nfunction rotatePoint(p, angle, radius) {\n  return {\n    x: p.x + Math.cos(angle) * radius,\n    y: p.y + Math.sin(angle) * radius,\n  };\n}\n\nexport default function polylineToPolygonCollider(points, radius, opts = {}) {\n  const open = [];\n  const close = [];\n\n  // TODO handle case if points.length === 2\n\n  if (opts.forceOrientation === 'h') {\n    const start = points[0].x < points[1].x ? -1 : 1;\n    const end = points[points.length - 1].x > points[points.length - 2].x ? 1 : -1;\n\n    points.unshift({ x: points[0].x + start, y: points[0].y });\n    points.push({ x: points[points.length - 1].x + end, y: points[points.length - 1].y });\n  } else if (opts.forceOrientation === 'v') {\n    const start = points[0].y < points[1].y ? -1 : 1;\n    const end = points[points.length - 1].y > points[points.length - 2].y ? 1 : -1;\n\n    points.unshift({ x: points[0].x, y: points[0].y + start });\n    points.push({ x: points[points.length - 1].x, y: points[points.length - 1].y + end });\n  }\n\n  const len = points.length - 1;\n  for (let i = 1; i < len; i++) {\n    const prev = points[i - 1];\n    const curr = points[i];\n    const next = points[i + 1];\n    const currToPrev = lineAngle(curr, prev);\n    const currToNext = lineAngle(curr, next);\n    const openAngle = (currToPrev + currToNext) / 2;\n    const closeAngle = openAngle + Math.PI;\n    const maxAngle = Math.max(openAngle, closeAngle);\n    const minAngle = Math.min(openAngle, closeAngle);\n    const openClose = currToPrev > currToNext;\n\n    if (i === 1) {\n      const prevToCurr = lineAngle(prev, curr);\n      open.push(rotatePoint(prev, prevToCurr - PI_2, radius));\n      close.unshift(rotatePoint(prev, prevToCurr + PI_2, radius));\n    }\n\n    const opened = openClose ? maxAngle : minAngle;\n    const closed = openClose ? minAngle : maxAngle;\n\n    open.push(rotatePoint(curr, opened, radius));\n    close.unshift(rotatePoint(curr, closed, radius));\n\n    if (i === len - 1) {\n      const nextToCurr = lineAngle(next, curr);\n      open.push(rotatePoint(next, nextToCurr + PI_2, radius));\n      close.unshift(rotatePoint(next, nextToCurr - PI_2, radius));\n    }\n  }\n\n  return {\n    type: 'polygon',\n    vertices: [...open, ...close],\n  };\n}\n","export default function flatten2d(ary) {\n  const newAry = [];\n  let a;\n  let len = ary.length;\n  for (let i = 0; i < len; i++) {\n    a = ary[i];\n    for (let k = 0; k < a.length; k++) {\n      newAry.push(a[k]);\n    }\n  }\n\n  return newAry;\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { getMinMax } from '../../geometry/util';\nimport pathToSegments from '../parse-path-d';\nimport polylineToPolygonCollider from '../polyline-to-polygon-collider';\nimport flatten from '../../utils/flatten-array';\n\nconst EPSILON = 1e-12;\n\n/**\n * @extends node-def\n * @typedef {object} node--path-def\n * @property {string} d - {@link https://www.w3.org/TR/SVG/paths.html#DAttribute}\n */\n\nfunction isClosed(points) {\n  if (points.length < 2) {\n    return false;\n  }\n  const p0 = points[0];\n  const p1 = points[points.length - 1];\n\n  return Math.abs(p0.x - p1.x) < EPSILON && Math.abs(p0.y - p1.y) < EPSILON;\n}\n\nexport default class Path extends DisplayObject {\n  constructor(...s) {\n    super('path');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    super.set(v);\n    this.segments = [];\n    this.points = [];\n    this.attrs.d = v.d;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n\n    if (Array.isArray(v.collider) || (typeof v.collider === 'object' && typeof v.collider.type !== 'undefined')) {\n      this.collider = v.collider;\n    } else if (v.d) {\n      this.segments = pathToSegments(v.d);\n      if (this.segments.length > 1 && this.segments.every((segment) => isClosed(segment))) {\n        this.collider = extend(\n          {\n            type: 'geopolygon',\n            vertices: this.segments,\n          },\n          v.collider\n        );\n        return;\n      }\n      this.segments.forEach((segment) => {\n        if (segment.length <= 1) {\n          // Omit empty and single point segments\n        } else if (isClosed(segment)) {\n          this.collider = extend(\n            {\n              type: 'polygon',\n              vertices: segment,\n            },\n            v.collider\n          );\n        } else if (typeof v.collider === 'object' && v.collider.visual) {\n          const size = this.attrs['stroke-width'] / 2;\n          this.collider = polylineToPolygonCollider(segment, size, v.collider);\n        } else {\n          this.collider = extend(\n            {\n              type: 'polyline',\n              points: segment,\n            },\n            v.collider\n          );\n        }\n      });\n    }\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n\n    if (!this.points.length) {\n      this.segments = this.segments.length ? this.segments : pathToSegments(this.attrs.d);\n      this.points = flatten(this.segments);\n    }\n\n    const pt =\n      includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(this.points) : this.points;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin || 0,\n      y: yMin || 0,\n      width: xMax - xMin || 0,\n      height: yMax - yMin || 0,\n    };\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Path(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { rectToPoints, getMinMax } from '../../geometry/util';\n\nfunction hasData({ data, _boundingRect, _textBoundsFn }) {\n  return typeof data !== 'undefined' && data !== null && (_boundingRect || _textBoundsFn);\n}\n\n/**\n * @extends node-def\n * @typedef {object} node--text-def\n * @property {string} text\n * @property {number} x - {@link https://www.w3.org/TR/SVG/text.html#TextElementXAttribute}\n * @property {number} y - {@link https://www.w3.org/TR/SVG/text.html#TextElementYAttribute}\n * @property {number} [dx] - {@link https://www.w3.org/TR/SVG/text.html#TextElementDXAttribute}\n * @property {number} [dy] - {@link https://www.w3.org/TR/SVG/text.html#TextElementDYAttribute}\n * @property {string} [fontSize] - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n * @property {string} [fontFamily] - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n * @property {rect} [boundingRect] - Explicitly set the bounding rectangle of the node. Has predence over textBoundsFn\n * @property {function} [textBoundsFn] - Implicitly set the bounding rectangle of the node, the function must return an object with x, y, width and height attributes\n * @property {string} [baseline] - Alias for dominantBaseline\n * @property {string} [dominantBaseline] - {@link https://www.w3.org/TR/SVG/text.html#BaselineAlignmentProperties}\n * @property {string} [anchor] - Alias for textAnchor\n * @property {string} [textAnchor] - {@link https://www.w3.org/TR/SVG/text.html#TextAnchorProperty}\n * @property {string} [wordBreak] - Word-break option\n * @property {number} [maxWidth] - Maximum allowed text width\n * @property {number} [maxHeight] - Maximum allowed text height. If both maxLines and maxHeight are set, the property that results in the fewest number of lines is used\n * @property {number} [maxLines] - Maximum number of lines allowed\n * @property {number} [lineHeight=1.2] - Line height\n */\n\nexport default class Text extends DisplayObject {\n  constructor(...s) {\n    super('text');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x = 0, y = 0, dx = 0, dy = 0, textBoundsFn, text, title, collider, boundingRect, ellipsed } = v;\n\n    super.set(v);\n    this.attrs.x = x;\n    this.attrs.y = y;\n    this.attrs.dx = dx;\n    this.attrs.dy = dy;\n    this.attrs.text = text;\n    if (typeof title !== 'undefined') {\n      this.attrs.title = String(title);\n    }\n    if (typeof boundingRect === 'object') {\n      this._textBoundsFn = () => boundingRect;\n    } else if (typeof textBoundsFn === 'function') {\n      this._textBoundsFn = textBoundsFn;\n    }\n\n    if (typeof ellipsed === 'string') {\n      this.ellipsed = ellipsed;\n    }\n\n    this.collider = extend({ type: hasData(this) ? 'bounds' : null }, collider);\n\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n\n    let rect;\n    if (typeof this._textBoundsFn === 'function') {\n      rect = this._textBoundsFn(this.attrs);\n    } else {\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      };\n    }\n\n    const p = rectToPoints(rect);\n    const pt = includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(p) : p;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin,\n      y: yMin,\n      width: xMax - xMin,\n      height: yMax - yMin,\n    };\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Text(...s);\n}\n","import { create as stage } from './stage';\nimport { create as container } from './container';\nimport { create as gradientItem } from './gradient-item';\nimport { create as patternItem } from './pattern-item';\nimport { create as rect } from './rect';\nimport { create as circle } from './circle';\nimport { create as line } from './line';\nimport { create as path } from './path';\nimport { create as text } from './text';\nimport registry from '../../utils/registry';\n\nconst reg = registry();\n\nreg.add('rect', rect);\nreg.add('circle', circle);\nreg.add('text', text);\nreg.add('line', line);\nreg.add('path', path);\nreg.add('stage', stage);\nreg.add('container', container);\nreg.add('defs', container);\nreg.add('linearGradient', gradientItem);\nreg.add('radialGradient', gradientItem);\nreg.add('stop', gradientItem);\nreg.add('pattern', patternItem);\n\n/* eslint-disable import/prefer-default-export */\nexport function create(type, input) {\n  return reg.get(type)(input);\n}\n/* eslint-enable import/prefer-default-export */\n","import extend from 'extend';\n\n/**\n * Creates a context. Input an array of strings that should be inherited by the context.\n * @private\n *\n * @param  {Array}  [whitelist=[]]  An array of whitelisted string keys to inherit\n * @return {Function}               A context function\n */\nfunction contextFactory(whitelist = []) {\n  const states = [{}];\n\n  /**\n   * Returns the current context as an object. The object is mutable.\n   * @private\n   *\n   * @return {Object}   Current context\n   */\n  function context() {\n    // Returns the current context, the last in the stack.\n    const item = states[states.length - 1];\n    return item;\n  }\n\n  /**\n   * Call context.save() to save the current context and move down the stack.\n   *\n   * @param  {Object} [item={}]   Optional item to save.\n   * @return {Object}             The current context, just as context()\n   */\n  context.save = function save(item = {}) {\n    const current = context();\n    const obj = {};\n    let key = '';\n\n    // Only inherit whitelisted properties\n    for (let i = 0; i < whitelist.length; i++) {\n      key = whitelist[i];\n      if (typeof current[key] !== 'undefined') {\n        obj[key] = current[key];\n      }\n    }\n\n    // Extend the new object with the saved item\n    extend(obj, item);\n\n    // Push it to the stack\n    states.push(obj);\n\n    // Return the new current context\n    return context();\n  };\n\n  /**\n   * Restore the previous context. Returns the context.\n   *\n   * @return {Undefined}   Returns nothing\n   */\n  context.restore = function restore() {\n    // Remove the last element from the stack\n    states.splice(states.length - 1, 1);\n  };\n\n  return context;\n}\n\nexport { contextFactory as default };\n","import { create } from './display-objects';\nimport Matrix from '../math/matrix';\nimport resolveTransform from './transform-resolver';\nimport contextFactory from './context';\n\nconst styleContext = contextFactory(['stroke', 'fill', 'strokeWidth', 'opacity', 'fontFamily', 'fontSize', 'baseline']);\n\nfunction doEvent(state, listeners) {\n  if (!Array.isArray(listeners)) {\n    return;\n  }\n\n  for (let i = 0, len = listeners.length; i < len; i++) {\n    listeners[i](state);\n  }\n}\n\nfunction updateState(state, index, nodes) {\n  state.node = nodes[index];\n  state.index = index;\n}\n\nfunction traverse(items, parent, matrix, on) {\n  let disabled = false;\n  const state = {\n    siblings: items,\n    node: null,\n    index: 0,\n  };\n  for (let i = 0, len = items.length; i < len; i++) {\n    updateState(state, i, items);\n    doEvent(state, on.create);\n\n    disabled = typeof state.node.disabled === 'function' ? state.node.disabled() : state.node.disabled;\n    if (disabled) {\n      continue;\n    }\n\n    // Save the current style context to be able to inherit styles\n    state.node = styleContext.save(state.node);\n\n    const displayNode = create(state.node.type, state.node);\n    if (displayNode) {\n      if (state.node.transform) {\n        matrix.save();\n        resolveTransform(state.node.transform, matrix);\n      }\n\n      if (!matrix.isIdentity()) {\n        displayNode.modelViewMatrix = matrix.clone();\n      }\n\n      parent.addChild(displayNode);\n      if (state.node.children) {\n        traverse(state.node.children, displayNode, matrix, on);\n      }\n\n      if (state.node.transform) {\n        matrix.restore();\n      }\n    }\n\n    // Revert to previous style context\n    styleContext.restore();\n  }\n}\n\nexport default function scene({ items, stage, dpi, on = {} }) {\n  if (!stage) {\n    stage = create('stage', dpi);\n  }\n\n  traverse(items, stage, new Matrix(), on);\n\n  return stage;\n}\n","import { degreesToPoints } from '../../../core/math/angles';\n\n/**\n * Get or create a gradient\n * @ignore\n * @param  {Object} g        Canvas 2d context\n * @param  {Object} node    Current node (for width/height properties)\n * @param  {Object} gradient The gradient properties\n * @return {Object}          A canvas compatible radial or linear gradient object\n */\nexport default function createCanvasGradient(g, node, gradient) {\n  const { orientation, degree, stops = [] } = gradient;\n\n  let newGradient = null;\n\n  if (orientation === 'radial') {\n    const bounds = node.boundingRect();\n\n    newGradient = g.createRadialGradient(\n      bounds.x + bounds.width / 2,\n      bounds.y + bounds.height / 2,\n      1e-5,\n      bounds.x + bounds.width / 2,\n      bounds.y + bounds.height / 2,\n      Math.max(bounds.width, bounds.height) / 2\n    );\n  } else {\n    const points = degreesToPoints(degree);\n    ['x1', 'x2', 'y1', 'y2'].forEach((c) => {\n      if (c in gradient) {\n        points[c] = gradient[c];\n      }\n    });\n\n    const bounds = node.boundingRect();\n\n    newGradient = g.createLinearGradient(\n      bounds.x + points.x1 * bounds.width,\n      bounds.y + points.y1 * bounds.height,\n      bounds.x + points.x2 * bounds.width,\n      bounds.y + points.y2 * bounds.height\n    );\n  }\n\n  for (let i = 0, len = stops.length; i < len; i++) {\n    let stop = stops[i];\n    newGradient.addColorStop(stop.offset, stop.color);\n  }\n\n  return newGradient;\n}\n","function getPattern(pattern, dummyCanvas, ctx) {\n  dummyCanvas.width = pattern.width;\n  dummyCanvas.height = pattern.height;\n  ctx.save();\n  ctx.fillStyle = pattern.fill;\n\n  pattern.shapes.forEach((s) => {\n    switch (s.type) {\n      case 'rect':\n        ctx.rect(s.x, s.y, s.width, s.height);\n        break;\n      default:\n        break;\n    }\n  });\n  ctx.fill();\n  ctx.restore();\n  return ctx.createPattern(dummyCanvas, 'repeat');\n}\n\nexport default function patternizer(document) {\n  const dummyCanvas = document.createElement('canvas');\n  const ctx = dummyCanvas.getContext('2d');\n\n  let cache = {};\n\n  return {\n    create(pattern) {\n      const key = pattern.key;\n      if (key) {\n        cache[key] = cache[key] || getPattern(pattern, dummyCanvas, ctx);\n        return cache[key];\n      }\n      return getPattern(pattern, dummyCanvas, ctx);\n    },\n    clear() {\n      cache = {};\n    },\n  };\n}\n","/**\n * @typedef {object} renderer-container-def\n * @property {number} [x] - x-coordinate\n * @property {number} [y] - y-coordinate\n * @property {number} [width] - Width\n * @property {number} [height] - Height\n * @property {object} [scaleRatio]\n * @property {number} [scaleRatio.x] - Scale ratio on x-axis\n * @property {number} [scaleRatio.y] - Scale ratio on y-axis\n * @property {object} [margin]\n * @property {number} [margin.left] - Left margin\n * @property {number} [margin.top] - Top margin\n */\n\n/**\n * Create the renderer box\n * @private\n * @param {renderer-container-def} [opts]\n * @returns {renderer-container-def} A svg renderer instance\n */\nexport default function createRendererBox({ x, y, width, height, scaleRatio, margin, edgeBleed } = {}) {\n  const box = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    scaleRatio: {\n      x: 1,\n      y: 1,\n    },\n    margin: {\n      left: 0,\n      top: 0,\n    },\n    edgeBleed: {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      bool: false,\n    },\n  };\n\n  box.x = isNaN(x) ? box.x : x;\n  box.y = isNaN(y) ? box.y : y;\n  box.width = isNaN(width) ? box.width : width;\n  box.height = isNaN(height) ? box.height : height;\n  if (typeof scaleRatio !== 'undefined') {\n    box.scaleRatio.x = isNaN(scaleRatio.x) ? box.scaleRatio.x : scaleRatio.x;\n    box.scaleRatio.y = isNaN(scaleRatio.y) ? box.scaleRatio.y : scaleRatio.y;\n  }\n\n  if (typeof margin !== 'undefined') {\n    box.margin.left = isNaN(margin.left) ? 0 : margin.left;\n    box.margin.top = isNaN(margin.top) ? 0 : margin.top;\n  }\n\n  if (typeof edgeBleed === 'object') {\n    ['left', 'right', 'top', 'bottom'].forEach((prop) => {\n      if (!isNaN(edgeBleed[prop]) && edgeBleed[prop] > 0) {\n        box.edgeBleed[prop] = edgeBleed[prop];\n        box.edgeBleed.bool = true;\n      }\n    });\n  }\n\n  box.computedPhysical = {\n    x: Math.round(box.margin.left + (box.x - box.edgeBleed.left) * box.scaleRatio.x),\n    y: Math.round(box.margin.top + (box.y - box.edgeBleed.top) * box.scaleRatio.y),\n    width: Math.round((box.width + box.edgeBleed.left + box.edgeBleed.right) * box.scaleRatio.x),\n    height: Math.round((box.height + box.edgeBleed.top + box.edgeBleed.bottom) * box.scaleRatio.y),\n  };\n\n  return box;\n}\n","import { measureText, textBounds } from '../text-manipulation';\n\n/**\n * Base renderer factory\n * @private\n */\nfunction create() {\n  /**\n   * @interface\n   * @alias renderer\n   */\n  const renderer = {\n    /**\n     * Get the element this renderer is attached to\n     * @returns {HTMLElement}\n     */\n    element: () => {},\n\n    /**\n     * Get the root element of the renderer\n     * @returns {HTMLElement}\n     */\n    root: () => {},\n\n    /**\n     * @param {HTMLElement} element - Element to attach renderer to\n     * @returns {HTMLElement} Root element of the renderer\n     */\n    appendTo: () => {},\n\n    /**\n     * @param {node-def[]} nodes - Nodes to render\n     * @returns {boolean} True if the nodes where rendered, otherwise false\n     */\n    render: () => false,\n\n    /**\n     * Get nodes renderer at area\n     * @param {point|circle|rect|line|polygon|geopolygon} geometry - Get nodes that intersects with geometry\n     * @returns {SceneNode[]}\n     */\n    itemsAt: () => [],\n\n    /**\n     * Get all nodes matching the provided selector\n     * @param {string} selector CSS selector [type, attribute, universal, class]\n     * @returns {SceneNode[]} Array of objects containing matching nodes\n     */\n    findShapes: () => [],\n\n    /**\n     * Clear all child elements from the renderer root element\n     * @returns {renderer} The renderer instance\n     */\n    clear: () => {},\n\n    /**\n     * Remove the renderer root element from its parent element\n     */\n    destory: () => {},\n\n    /**\n     * Set or Get the size definition of the renderer container.\n     * @param {renderer-container-def} [opts] - Size definition\n     * @returns {renderer-container-def} The current size definition\n     */\n    size: () => {},\n\n    /**\n     * @function\n     * @param {object} opts\n     * @param {string} opts.text - Text to measure\n     * @param {string} opts.fontSize - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n     * @param {string} opts.fontFamily - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n     * @returns {object} Width and height of text\n     * @example\n     * measureText({\n     *  text: 'my text',\n     *  fontSize: '12px',\n     *  fontFamily: 'Arial'\n     * }); // returns { width: 20, height: 12 }\n     */\n    measureText,\n\n    /**\n     * Calculates the bounding rectangle of a text node. Including any potential line breaks.\n     * @function\n     * @param {node--text-def} node\n     * @return {rect} The bounding rectangle\n     */\n    textBounds,\n\n    setKey: (key) => {\n      renderer.element().setAttribute('data-key', key);\n    },\n  };\n\n  return renderer;\n}\n\nexport { create as default };\n","function hasData(data) {\n  return typeof data !== 'undefined' && data !== null;\n}\n\nexport default function injectTextBoundsFn(renderer) {\n  return ({ node }) => {\n    if (node.type === 'text' && hasData(node.data) && !node.textBoundsFn) {\n      node.textBoundsFn = renderer.textBounds;\n    }\n  };\n}\n","import sceneFactory from '../../../core/scene-graph/scene';\nimport registry from '../../../core/utils/registry';\nimport { onLineBreak } from '../../text-manipulation';\nimport createCanvasGradient from './canvas-gradient';\nimport patternizer from './canvas-pattern';\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\nimport injectTextBoundsFn from '../../text-manipulation/inject-textbounds';\n\nconst reg = registry();\n\nfunction toLineDash(p) {\n  if (Array.isArray(p)) {\n    return p;\n  }\n  if (typeof p === 'string') {\n    if (p.indexOf(',') !== -1) {\n      return p.split(',');\n    }\n    return p.split(' ');\n  }\n  return [];\n}\n\nfunction dpiScale(g) {\n  const dpr = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n  const backingStorePixelRatio =\n    g.webkitBackingStorePixelRatio ||\n    g.mozBackingStorePixelRatio ||\n    g.msBackingStorePixelRatio ||\n    g.oBackingStorePixelRatio ||\n    g.backingStorePixelRatio ||\n    1;\n  return dpr / backingStorePixelRatio;\n}\n\nfunction resolveMatrix(p, g) {\n  g.setTransform(p[0][0], p[1][0], p[0][1], p[1][1], p[0][2], p[1][2]);\n}\n\nfunction applyContext(g, s, shapeToCanvasMap, computed = {}) {\n  const computedKeys = Object.keys(computed);\n\n  for (let i = 0, len = shapeToCanvasMap.length; i < len; i++) {\n    let cmd = shapeToCanvasMap[i];\n\n    const shapeCmd = cmd[0];\n    const canvasCmd = cmd[1];\n    const convertCmd = cmd[2];\n\n    if (shapeCmd in s.attrs && !(canvasCmd in computed) && g[canvasCmd] !== s.attrs[shapeCmd]) {\n      const val = convertCmd ? convertCmd(s.attrs[shapeCmd]) : s.attrs[shapeCmd];\n      if (typeof g[canvasCmd] === 'function') {\n        g[canvasCmd](val);\n      } else {\n        g[canvasCmd] = val;\n      }\n    }\n  }\n\n  for (let i = 0, len = computedKeys.length; i < len; i++) {\n    const key = computedKeys[i];\n    g[key] = computed[key];\n  }\n}\n\nfunction renderShapes(shapes, g, shapeToCanvasMap, deps) {\n  for (let i = 0, len = shapes.length; i < len; i++) {\n    let shape = shapes[i];\n    let computed = {};\n    g.save();\n\n    if (shape.attrs && (shape.attrs.fill || shape.attrs.stroke)) {\n      if (shape.attrs.fill && typeof shape.attrs.fill === 'object' && shape.attrs.fill.type === 'gradient') {\n        computed.fillStyle = createCanvasGradient(g, shape, shape.attrs.fill);\n      } else if (shape.attrs.fill && typeof shape.attrs.fill === 'object' && shape.attrs.fill.type === 'pattern') {\n        computed.fillStyle = deps.patterns.create(shape.attrs.fill);\n      }\n\n      if (shape.attrs.stroke && typeof shape.attrs.stroke === 'object' && shape.attrs.stroke.type === 'gradient') {\n        computed.strokeStyle = createCanvasGradient(g, shape, shape.attrs.stroke);\n      } else if (\n        shape.attrs.stroke &&\n        typeof shape.attrs.stroke === 'object' &&\n        shape.attrs.stroke.type === 'pattern'\n      ) {\n        computed.strokeStyle = deps.patterns.create(shape.attrs.stroke);\n      }\n    }\n\n    applyContext(g, shape, shapeToCanvasMap, computed);\n\n    if (shape.modelViewMatrix) {\n      resolveMatrix(shape.modelViewMatrix.elements, g);\n    }\n\n    if (reg.has(shape.type)) {\n      reg.get(shape.type)(shape.attrs, {\n        g,\n        doFill: 'fill' in shape.attrs && shape.attrs.fill !== 'none',\n        doStroke: 'stroke' in shape.attrs && shape.attrs['stroke-width'] !== 0,\n        ellipsed: shape.ellipsed,\n      });\n    }\n    if (shape.children) {\n      renderShapes(shape.children, g, shapeToCanvasMap, deps);\n    }\n    g.restore();\n  }\n}\n\n/**\n * Create a new canvas renderer\n * @typedef {function} canvasRendererFactory\n * @param {function} sceneFn - Scene factory\n * @returns {renderer} A canvas renderer instance\n */\nexport function renderer(sceneFn = sceneFactory) {\n  let el;\n  let scene;\n  let hasChangedRect = false;\n  let rect = createRendererBox();\n  const shapeToCanvasMap = [\n    ['fill', 'fillStyle'],\n    ['stroke', 'strokeStyle'],\n    ['opacity', 'globalAlpha'],\n    ['globalAlpha', 'globalAlpha'],\n    ['stroke-width', 'lineWidth'],\n    ['stroke-linejoin', 'lineJoin'],\n    ['stroke-dasharray', 'setLineDash', toLineDash],\n  ];\n\n  let patterns;\n\n  const canvasRenderer = create();\n\n  canvasRenderer.element = () => el;\n\n  canvasRenderer.root = () => el;\n\n  canvasRenderer.appendTo = (element) => {\n    if (!el) {\n      el = element.ownerDocument.createElement('canvas');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  canvasRenderer.render = (shapes) => {\n    if (!el) {\n      return false;\n    }\n    if (!patterns) {\n      patterns = patternizer(el.ownerDocument);\n    }\n\n    const g = el.getContext('2d');\n    const dpiRatio = dpiScale(g);\n    const scaleX = rect.scaleRatio.x;\n    const scaleY = rect.scaleRatio.y;\n\n    if (hasChangedRect) {\n      el.style.left = `${rect.computedPhysical.x}px`;\n      el.style.top = `${rect.computedPhysical.y}px`;\n      el.style.width = `${rect.computedPhysical.width}px`;\n      el.style.height = `${rect.computedPhysical.height}px`;\n      el.width = Math.round(rect.computedPhysical.width * dpiRatio);\n      el.height = Math.round(rect.computedPhysical.height * dpiRatio);\n    }\n\n    const sceneContainer = {\n      type: 'container',\n      children: shapes,\n      transform: rect.edgeBleed.bool\n        ? `translate(${rect.edgeBleed.left * dpiRatio * scaleX}, ${rect.edgeBleed.top * dpiRatio * scaleY})`\n        : '',\n    };\n\n    if (dpiRatio !== 1 || scaleX !== 1 || scaleY !== 1) {\n      sceneContainer.transform += `scale(${dpiRatio * scaleX}, ${dpiRatio * scaleY})`;\n    }\n\n    const newScene = sceneFn({\n      items: [sceneContainer],\n      dpi: dpiRatio,\n      on: {\n        create: [onLineBreak(canvasRenderer.measureText), injectTextBoundsFn(canvasRenderer)],\n      },\n    });\n    const hasChangedScene = scene ? !newScene.equals(scene) : true;\n\n    patterns.clear();\n\n    const doRender = hasChangedRect || hasChangedScene;\n    if (doRender) {\n      canvasRenderer.clear();\n      renderShapes(newScene.children, g, shapeToCanvasMap, {\n        patterns,\n      });\n    }\n\n    hasChangedRect = false;\n    scene = newScene;\n    return doRender;\n  };\n\n  canvasRenderer.itemsAt = (input) => (scene ? scene.getItemsFrom(input) : []);\n\n  canvasRenderer.findShapes = (selector) => (scene ? scene.findShapes(selector) : []);\n\n  canvasRenderer.clear = () => {\n    if (el) {\n      el.width = el.width; // eslint-disable-line\n    }\n    scene = null;\n\n    return canvasRenderer;\n  };\n\n  canvasRenderer.size = (opts) => {\n    if (opts) {\n      const newRect = createRendererBox(opts);\n\n      if (JSON.stringify(rect) !== JSON.stringify(newRect)) {\n        hasChangedRect = true;\n        rect = newRect;\n      }\n    }\n\n    return rect;\n  };\n\n  canvasRenderer.destroy = () => {\n    if (el) {\n      if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n      el = null;\n    }\n    scene = null;\n  };\n\n  return canvasRenderer;\n}\n\nexport function register(type, renderFn) {\n  reg.add(type, renderFn);\n}\n","function clampRadius(max, value) {\n  return Math.max(0, Math.min(max, value));\n}\n\n/**\n * Implementation details follow rx/ry restrictions from https://svgwg.org/svg2-draft/geometry.html#RX\n *\n * Using Quadratic Bézier curve it's not possible accurately represent a circle or ellipse but should for the case of a rounded rectangle be sufficent.\n * @private\n */\nfunction quadraticRoundedRect(g, x, y, width, height, rx, ry) {\n  rx = clampRadius(width / 2, rx > 0 ? rx : ry);\n  ry = clampRadius(height / 2, ry > 0 ? ry : rx);\n\n  g.moveTo(x, y + ry);\n  g.lineTo(x, y + height - ry);\n  g.quadraticCurveTo(x, y + height, x + rx, y + height);\n  g.lineTo(x + width - rx, y + height);\n  g.quadraticCurveTo(x + width, y + height, x + width, y + height - ry);\n  g.lineTo(x + width, y + ry);\n  g.quadraticCurveTo(x + width, y, x + width - rx, y);\n  g.lineTo(x + rx, y);\n  g.quadraticCurveTo(x, y, x, y + ry);\n}\n\nexport default function render(rect, { g, doFill, doStroke }) {\n  g.beginPath();\n\n  if (rect.rx > 0 || rect.ry > 0) {\n    quadraticRoundedRect(g, rect.x, rect.y, rect.width, rect.height, rect.rx, rect.ry);\n  } else {\n    g.rect(rect.x, rect.y, rect.width, rect.height);\n  }\n\n  if (doFill) {\n    g.fill();\n  }\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","export default function render(circle, { g, doFill, doStroke }) {\n  g.beginPath();\n  g.moveTo(circle.cx + circle.r, circle.cy);\n  g.arc(circle.cx, circle.cy, circle.r, 0, Math.PI * 2, false);\n  if (doFill) {\n    g.fill();\n  }\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","export default function render(line, { g, doStroke }) {\n  g.beginPath();\n  g.moveTo(line.x1, line.y1);\n  g.lineTo(line.x2, line.y2);\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","/* eslint no-misleading-character-class: 0 */\n// Source: https://en.wikipedia.org/wiki/Bi-directional_text and http://www.unicode.org/Public/6.0.0/ucd/UnicodeData.txt\n// 3 types of strong direction characters: L (strong left-to-right), R(strong right-to-left, Hebrew) and AL(strong right-to-left, Arabic language)\nconst rangesOfLChars =\n  '[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u02BB-\\u02C1\\u02D0-\\u02D1\\u02E0-\\u02E4\\u02EE\\u0370-\\u0373\\u0376-\\u037D\\u0386\\u0388-\\u03F5\\u03F7-\\u0482\\u048A-\\u0589\\u0903-\\u0939\\u093B\\u093D-\\u0940\\u0949-\\u094C\\u094E-\\u0950\\u0958-\\u0961\\u0964-\\u097F\\u0982-\\u09B9\\u09BD-\\u09C0\\u09C7-\\u09CC\\u09CE-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09FA\\u0A03-\\u0A39\\u0A3E-\\u0A40\\u0A59-\\u0A6F\\u0A72-\\u0A74\\u0A83-\\u0AB9\\u0ABD-\\u0AC0\\u0AC9-\\u0ACC\\u0AD0-\\u0AE1\\u0AE6-\\u0AEF\\u0B02-\\u0B39\\u0B3D-\\u0B3E\\u0B40\\u0B47-\\u0B4C\\u0B57-\\u0B61\\u0B66-\\u0B77\\u0B83-\\u0BBF\\u0BC1-\\u0BCC\\u0BD0-\\u0BF2\\u0C01-\\u0C3D\\u0C41-\\u0C44\\u0C58-\\u0C61\\u0C66-\\u0C6F\\u0C7F-\\u0CB9\\u0CBD-\\u0CCB\\u0CD5-\\u0CE1\\u0CE6-\\u0D40\\u0D46-\\u0D4C\\u0D4E-\\u0D61\\u0D66-\\u0DC6\\u0DCF-\\u0DD1\\u0DD8-\\u0E30\\u0E32-\\u0E33\\u0E40-\\u0E46\\u0E4F-\\u0EB0\\u0EB2-\\u0EB3\\u0EBD-\\u0EC6\\u0ED0-\\u0F17\\u0F1A-\\u0F34\\u0F36\\u0F38\\u0F3E-\\u0F6C\\u0F7F\\u0F85\\u0F88-\\u0F8C\\u0FBE-\\u0FC5\\u0FC7-\\u102C\\u1031\\u1038\\u103B-\\u103C\\u103F-\\u1057\\u105A-\\u105D\\u1061-\\u1070\\u1075-\\u1081\\u1083-\\u1084\\u1087-\\u108C\\u108E-\\u109C\\u109E-\\u135A\\u1360-\\u138F\\u13A0-\\u13F4\\u1401-\\u167F\\u1681-\\u169A\\u16A0-\\u1711\\u1720-\\u1731\\u1735-\\u1751\\u1760-\\u1770\\u1780-\\u17B6\\u17BE-\\u17C5\\u17C7-\\u17C8\\u17D4-\\u17DA\\u17DC\\u17E0-\\u17E9\\u1810-\\u18A8\\u18AA-\\u191C\\u1923-\\u1926\\u1929-\\u1931\\u1933-\\u1938\\u1946-\\u19DA\\u1A00-\\u1A16\\u1A19-\\u1A55\\u1A57\\u1A61\\u1A63-\\u1A64\\u1A6D-\\u1A72\\u1A80-\\u1AAD\\u1B04-\\u1B33\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43-\\u1B6A\\u1B74-\\u1B7C\\u1B82-\\u1BA1\\u1BA6-\\u1BA7\\u1BAA-\\u1BE5\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2-\\u1C2B\\u1C34-\\u1C35\\u1C3B-\\u1C7F\\u1CD3\\u1CE1\\u1CE9-\\u1CEC\\u1CEE-\\u1DBF\\u1E00-\\u1FBC\\u1FBE\\u1FC2-\\u1FCC\\u1FD0-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FFC\\u200E\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E-\\u214F\\u2160-\\u2188\\u2336-\\u237A\\u2395\\u249C-\\u24E9\\u26AC\\u2800-\\u28FF\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2D00-\\u2D70\\u2D80-\\u2DDE\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u31BA\\u31F0-\\u321C\\u3220-\\u324F\\u3260-\\u327B\\u327F-\\u32B0\\u32C0-\\u32CB\\u32D0-\\u3376\\u337B-\\u33DD\\u33E0-\\u33FE\\u3400-\\u4DB5\\u4E00-\\uA48C\\uA4D0-\\uA60C\\uA610-\\uA66E\\uA680-\\uA6EF\\uA6F2-\\uA6F7\\uA722-\\uA787\\uA789-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA824\\uA827\\uA830-\\uA837\\uA840-\\uA873\\uA880-\\uA8C3\\uA8CE-\\uA8D9\\uA8F2-\\uA925\\uA92E-\\uA946\\uA952-\\uA97C\\uA983-\\uA9B2\\uA9B4-\\uA9B5\\uA9BA-\\uA9BB\\uA9BD-\\uAA28\\uAA2F-\\uAA30\\uAA33-\\uAA34\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA4D-\\uAAAF\\uAAB1\\uAAB5-\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2-\\uABE4\\uABE6-\\uABE7\\uABE9-\\uABEC\\uABF0-\\uFB17\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]';\nconst rangesOfRChars =\n  '[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05F4\\u07C0-\\u07EA\\u07F4-\\u07F5\\u07FA-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u0858\\u085E\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB4F]';\nconst rangesOfALChars =\n  '[\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5-\\u06E6\\u06EE-\\u06EF\\u06FA-\\u070D\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\uFB50-\\uFD3D\\uFD50-\\uFDFC\\uFE70-\\uFEFC]';\n// let rangesOfNChars = '[\\u0009-\\u000D\\u001C-\\u0022\\u0026-\\u002A\\u003B-\\u0040\\u005B-\\u0060\\u007B-\\u007E\\u0085\\u00A1\\u00A6-\\u00A9\\u00AB-\\u00AC\\u00AE-\\u00AF\\u00B4\\u00B6-\\u00B8\\u00BB-\\u00BF\\u00D7\\u00F7\\u02B9-\\u02BA\\u02C2-\\u02CF\\u02D2-\\u02DF\\u02E5-\\u02ED\\u02EF-\\u02FF\\u0374-\\u0375\\u037E-\\u0385\\u0387\\u03F6\\u058A\\u0606-\\u0607\\u060E-\\u060F\\u06DE\\u06E9\\u07F6-\\u07F9\\u0BF3-\\u0BF8\\u0BFA\\u0C78-\\u0C7E\\u0F3A-\\u0F3D\\u1390-\\u1399\\u1400\\u1680\\u169B-\\u169C\\u17F0-\\u180A\\u180E\\u1940-\\u1945\\u19DE-\\u19FF\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD-\\u200A\\u2010-\\u2029\\u2035-\\u2043\\u2045-\\u205F\\u207C-\\u207E\\u208C-\\u208E\\u2100-\\u2101\\u2103-\\u2106\\u2108-\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u213A-\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u2150-\\u215F\\u2189-\\u2211\\u2214-\\u2335\\u237B-\\u2394\\u2396-\\u2487\\u24EA-\\u26AB\\u26AD-\\u27FF\\u2900-\\u2B59\\u2CE5-\\u2CEA\\u2CF9-\\u2CFF\\u2E00-\\u3004\\u3008-\\u3020\\u3030\\u3036-\\u3037\\u303D-\\u303F\\u309B-\\u309C\\u30A0\\u30FB\\u31C0-\\u31E3\\u321D-\\u321E\\u3250-\\u325F\\u327C-\\u327E\\u32B1-\\u32BF\\u32CC-\\u32CF\\u3377-\\u337A\\u33DE-\\u33DF\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA60D-\\uA60F\\uA673\\uA67E-\\uA67F\\uA700-\\uA721\\uA788\\uA828-\\uA82B\\uA874-\\uA877\\uFD3E-\\uFD3F\\uFDFD\\uFE10-\\uFE19\\uFE30-\\uFE4F\\uFE51\\uFE54\\uFE56-\\uFE5E\\uFE60-\\uFE61\\uFE64-\\uFE68\\uFE6B\\uFF01-\\uFF02\\uFF06-\\uFF0A\\uFF1B-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF65\\uFFE2-\\uFFE4\\uFFE8-\\uFFFD]';\nconst rangesOfLRgExp = new RegExp(rangesOfLChars);\nconst rangesOfRRgExp = new RegExp(rangesOfRChars);\nconst rangesOfALRgExp = new RegExp(rangesOfALChars);\n// let rangesOfNRgExp = new RegExp(rangesOfNChars);\n// let lrm = String.fromCharCode(8206); // left-to-right marker\n// let rlm = String.fromCharCode(8207); // right-to-left marker\n\nfunction isLtrChar(c) {\n  return rangesOfLRgExp.test(c);\n}\n\nfunction isRtlChar(c) {\n  return rangesOfRRgExp.test(c) || rangesOfALRgExp.test(c);\n}\n\nexport function detectTextDirection(s) {\n  let n = s ? s.length : 0,\n    i,\n    c;\n  for (i = 0; i < n; i++) {\n    c = s[i];\n    if (isLtrChar(c)) {\n      return 'ltr';\n    }\n    if (isRtlChar(c)) {\n      return 'rtl';\n    }\n  }\n  return 'ltr';\n}\n\nconst textAnchorRTLMap = {\n  start: 'end',\n  end: 'start',\n  center: 'center',\n  middle: 'middle',\n};\n\n/* let flippedTextAnchor = true;\nlet detected = false;\nexport function detectRtlSvgSupport(ns, ownerDoc) {\n  if (!detected) {\n    const body = ownerDoc.body;\n    if (body) {\n      const rtlTestSVG = ownerDoc.createElementNS(ns, 'svg');\n      const textNode = ownerDoc.createElementNS(ns, 'text');\n      const group = ownerDoc.createElementNS(ns, 'g');\n\n      rtlTestSVG.setAttribute('xmlns', ns);\n      rtlTestSVG.setAttribute('style', 'position: absolute; width: 100px; height: 100px; top: -100px; left: 0px');\n\n      textNode.setAttribute('text-anchor', 'start');\n      textNode.setAttribute('direction', 'rtl');\n      textNode.setAttribute('font-size', '14px');\n      textNode.setAttribute('x', 50);\n      textNode.setAttribute('y', 50);\n      textNode.textContent = 'ثعبان';\n\n      group.appendChild(textNode);\n      rtlTestSVG.appendChild(group);\n      body.appendChild(rtlTestSVG);\n\n      flippedTextAnchor = textNode.getBoundingClientRect().left < 50;\n      body.removeChild(rtlTestSVG);\n    }\n  }\n  detected = true;\n} */\n\nexport function flipTextAnchor(value, dir) {\n  if (dir === 'rtl') {\n    return textAnchorRTLMap[value];\n  }\n  return value;\n}\n","import { ellipsText, measureText } from '../../../text-manipulation';\nimport baselineHeuristic from '../../../text-manipulation/baseline-heuristic';\nimport { detectTextDirection, flipTextAnchor } from '../../../../core/utils/rtl-util';\n\nexport default function render(t, { g, ellipsed }) {\n  const text = ellipsed || ellipsText(t, measureText);\n  g.font = `${t['font-size']} ${t['font-family']}`;\n\n  const dir = detectTextDirection(t.text);\n  if (g.canvas.dir !== dir) {\n    g.canvas.dir = dir;\n  }\n  const textAnchor = t['text-anchor'] === 'middle' ? 'center' : t['text-anchor'];\n  const textAlign = flipTextAnchor(textAnchor, g.canvas.dir);\n  if (textAlign && g.textAlign !== textAlign) {\n    g.textAlign = textAlign;\n  }\n\n  const bdy = baselineHeuristic(t);\n\n  g.fillText(text, t.x + t.dx, t.y + t.dy + bdy);\n}\n","export default function render(path, { g, doStroke, doFill }) {\n  const p = new Path2D(path.d);\n  if (doFill) {\n    g.fill(p);\n  }\n  if (doStroke) {\n    g.stroke(p);\n  }\n}\n","import { renderer, register } from './canvas-renderer';\nimport rect from './shapes/rect';\nimport circle from './shapes/circle';\nimport line from './shapes/line';\nimport text from './shapes/text';\nimport path from './shapes/path';\n\nregister('rect', rect);\nregister('circle', circle);\nregister('line', line);\nregister('path', path);\nregister('text', text);\n\nexport default renderer;\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('canvas', renderer);\n}\n","function diff(from, to) {\n  const added = [];\n  let items;\n  const removed = [];\n  const updatedNew = [];\n  const updatedOld = [];\n  let fromIds;\n  let toIds;\n  const idMapper = (a) => a.id;\n  const nodeMapper = (node, i) => {\n    let id;\n    if (typeof node === 'object') {\n      if ('id' in node) {\n        id = node.id;\n      } else {\n        id = i;\n      }\n    } else {\n      id = node;\n    }\n    return {\n      content: node,\n      id: `${id}__${node.type || ''}`,\n    };\n  };\n\n  if (!from.isTree) {\n    from = from.map(nodeMapper);\n  }\n\n  to = to.map(nodeMapper);\n\n  fromIds = from.map(idMapper);\n  toIds = to.map(idMapper);\n  // TODO - handle duplicate values\n\n  // added = to.filter( v => fromIds.indexOf( v.id ) < 0 );\n  // updatedNew = to.filter( v => fromIds.indexOf( v.id ) >= 0 );\n  // removed = from.filter( v => toIds.indexOf( v.id ) < 0 );\n  // updatedOld = from.filter( v => toIds.indexOf( v.id ) >= 0 );\n\n  for (let i = 0, len = to.length; i < len; i++) {\n    const idx = fromIds.indexOf(to[i].id);\n    if (idx === -1) {\n      added.push(to[i]);\n    } else {\n      updatedNew.push(to[i]);\n    }\n  }\n\n  for (let i = 0, len = from.length; i < len; i++) {\n    const idx = toIds.indexOf(from[i].id);\n    if (idx === -1) {\n      removed.push(from[i]);\n    } else {\n      updatedOld.push(from[i]);\n    }\n  }\n\n  for (let i = 0, len = added.length; i < len; i++) {\n    if (added[i].content.children) {\n      added[i].diff = diff([], added[i].content.children);\n      added[i].children = added[i].diff.updatedNew.concat(added[i].diff.added);\n      added[i].children.isTree = true;\n    }\n  }\n\n  for (let i = 0, len = updatedNew.length; i < len; i++) {\n    updatedNew[i].diff = diff(updatedOld[i].children || [], updatedNew[i].content.children || []);\n    updatedNew[i].object = updatedOld[i].object;\n    updatedNew[i].children = updatedNew[i].diff.items;\n  }\n\n  items = updatedNew.concat(added);\n\n  added.isTree = true;\n  removed.isTree = true;\n  updatedNew.isTree = true;\n  updatedOld.isTree = true;\n  items.isTree = true;\n\n  return {\n    added,\n    updatedNew,\n    updatedOld,\n    removed,\n    items,\n  };\n}\n\nfunction createNodes(nodes, parent, create) {\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    nodes[i].object = create(nodes[i].content.type, parent);\n  }\n}\n\nfunction destroyNodes(nodes, destroy) {\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    if (nodes[i].object !== null && typeof nodes[i].object !== 'undefined') {\n      destroy(nodes[i].object);\n      nodes[i].object = null;\n    }\n  }\n}\n\nfunction updateNodes(nodes, creator, maintainer, destroyer) {\n  let item;\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    item = nodes[i];\n    if (item.object !== null && typeof item.object !== 'undefined') {\n      maintainer(item.object, item.content);\n      if (item.diff) {\n        createNodes(item.diff.added, item.object, creator);\n        destroyNodes(item.diff.removed, destroyer);\n        updateNodes(item.diff.items, creator, maintainer, destroyer);\n      }\n    }\n  }\n}\n\nfunction createTree(oldItems, newItems, root, creator, maintainer, destroyer) {\n  const d = diff(oldItems, newItems);\n\n  createNodes(d.added, root, creator);\n  destroyNodes(d.removed, destroyer);\n  updateNodes(d.items, creator, maintainer, destroyer);\n\n  return d.items;\n}\n\nexport { diff, createTree, destroyNodes, createNodes, updateNodes };\n","import { ellipsText, measureText } from '../../text-manipulation';\nimport baselineHeuristic from '../../text-manipulation/baseline-heuristic';\nimport { detectTextDirection, flipTextAnchor } from '../../../core/utils/rtl-util';\n\nconst svgNs = 'http://www.w3.org/2000/svg';\n\nconst creator = (type, parent) => {\n  if (!type || typeof type !== 'string') {\n    throw new Error(`Invalid type: ${type}`);\n  }\n\n  const el = parent.ownerDocument.createElementNS(svgNs, type === 'container' ? 'g' : type);\n\n  parent.appendChild(el);\n  return el;\n};\n\nconst destroyer = (el) => {\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n};\n\nconst maintainer = (element, item) => {\n  for (const attr in item.attrs) {\n    if (attr === 'stroke' && item.strokeReference) {\n      element.setAttribute('stroke', item.strokeReference);\n    } else if (attr === 'fill' && item.fillReference) {\n      element.setAttribute('fill', item.fillReference);\n    } else if (attr === 'text') {\n      element.setAttribute('style', 'white-space: pre');\n      element.textContent = item.ellipsed || ellipsText(item.attrs, measureText);\n      const dir = detectTextDirection(item.attrs.text);\n      if (dir === 'rtl') {\n        element.setAttribute('direction', 'rtl');\n        element.setAttribute('dir', 'rtl');\n        element.setAttribute('text-anchor', flipTextAnchor(element.getAttribute('text-anchor'), dir));\n      }\n    } else if (item.type === 'text' && (attr === 'dy' || attr === 'dominant-baseline')) {\n      const dy = +element.getAttribute(attr) || 0;\n      let val = 0;\n      if (attr === 'dominant-baseline') {\n        val = baselineHeuristic(item.attrs);\n      } else {\n        val = item.attrs[attr];\n      }\n      element.setAttribute('dy', val + dy);\n    } else if (item.type === 'text' && attr === 'title' && item.attrs.title) {\n      const t = element.ownerDocument.createElementNS(svgNs, 'title');\n      t.textContent = item.attrs.title;\n      element.appendChild(t);\n    } else {\n      element.setAttribute(attr, item.attrs[attr]);\n    }\n  }\n\n  if (typeof item.data === 'string' || typeof item.data === 'number' || typeof item.data === 'boolean') {\n    element.setAttribute('data', item.data);\n  } else if (typeof item.data === 'object' && item.data !== null) {\n    for (const d in item.data) {\n      if (typeof item.data[d] === 'string' || typeof item.data[d] === 'number' || typeof item.data[d] === 'boolean') {\n        element.setAttribute(`data-${d}`, item.data[d]);\n      }\n    }\n  }\n};\n\nexport { svgNs, creator, maintainer, destroyer };\n","import { createTree } from '../node-tree';\nimport { creator, maintainer, destroyer } from './svg-nodes';\n\nclass TreeItemRenderer {\n  /**\n   * Constructor\n   * @private\n   * @param  {TreeCreator} treeCreator - Function used to create the DOM tree..\n   * @param  {SVGCreator} nodeCreator - Function used to create nodes.\n   * @param  {SVGMaintainer} nodeMaintainer - Function used to update nodes.\n   * @param  {SVGDestroyer} nodeDestroyer - Function used to destroy nodes.\n   */\n  constructor(treeCreator, nodeCreator, nodeMaintainer, nodeDestroyer) {\n    this.create = treeCreator;\n    this.nodeCreator = nodeCreator;\n    this.nodeMaintainer = nodeMaintainer;\n    this.nodeDestroyer = nodeDestroyer;\n  }\n\n  render(newItems, root) {\n    return this.create([], newItems, root, this.nodeCreator, this.nodeMaintainer, this.nodeDestroyer);\n  }\n}\n\nfunction tree() {\n  return new TreeItemRenderer(createTree, creator, maintainer, destroyer);\n}\n\nexport { TreeItemRenderer as default, tree };\n\n/**\n * Create an SVGElement and attach to parent.\n * @private\n * @callback SVGCreator\n * @param {String} type - The type of element to create.\n * @param {SVGElement} parent - The parent element to append the new element to.\n * @return {SVGElement} The created element\n */\n\n/**\n * Update the element with content from item.\n * @private\n * @callback SVGMaintainer\n * @param {SVGElement} el - The element to update\n * @param {Object} item - The object to use as input for the update\n */\n\n/**\n * Detach element from its parent.\n * @private\n * @callback SVGDestroyer\n * @param {SVGElement} el - Element to destroy.\n */\n\n/**\n * Create, update and destroy nodes.\n * @private\n * @callback TreeCreator\n * @param {Object[]} existing - The existing items in the tree.\n * @param {Object[]} active - The new items to create the tree from.\n * @param {SVGCreator} creator - Function used to create nodes.\n * @param {SVGMaintainer} maintainer - Function used to update nodes.\n * @param {SVGDestroyer} destroyer - Function used to destroy nodes.\n */\n","/* eslint import/prefer-default-export: 0 */\n\n/**\n * Hash an object\n * Modified version of Java's HashCode function\n * Source: {@link http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/}\n * @ignore\n *\n * @param  {Object} item Item to hash\n * @return {String}      Unique hash id\n */\nexport function hashObject(item) {\n  let hash = 0;\n  let i;\n  let chr;\n  let len;\n\n  item = JSON.stringify(item);\n\n  if (item.length === 0) {\n    return hash;\n  }\n\n  for (i = 0, len = item.length; i < len; i++) {\n    chr = item.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}\n","import { degreesToPoints } from '../../../core/math/angles';\nimport { hashObject } from '../../../core/utils/crypto';\n\nexport default function gradienter(bucket, hasher = hashObject) {\n  let cache = {};\n  let uid = Date.now();\n\n  const p = {\n    getOrCreateGradient(item = {}, attr = 'fill', url = '') {\n      let gradientHash = hasher(item[attr]);\n      let gradientId = `picasso-gradient-${uid}-${gradientHash}`;\n\n      if (!cache[gradientHash]) {\n        let { orientation, degree, stops = [] } = item[attr];\n        let gradient = {};\n\n        if (degree === undefined) {\n          degree = 90;\n        }\n\n        // Default to linear\n        if (orientation === 'radial') {\n          gradient.type = 'radialGradient';\n        } else {\n          gradient = degreesToPoints(degree);\n          ['x1', 'x2', 'y1', 'y2'].forEach((c) => {\n            if (c in item[attr]) {\n              gradient[c] = item[attr][c];\n            }\n          });\n          gradient.type = 'linearGradient';\n        }\n\n        gradient.id = gradientId;\n        gradient.children = stops.map(({ offset, color, opacity }) => ({\n          type: 'stop',\n          offset: `${offset * 100}%`,\n          style: `stop-color:${color};stop-opacity:${typeof opacity !== 'undefined' ? opacity : 1}`,\n        }));\n\n        bucket.push(gradient);\n        cache[gradientHash] = gradientId;\n      }\n\n      return `url('${url}#${gradientId}')`;\n    },\n    onCreate(state) {\n      let url = '';\n      if (typeof window !== 'undefined') {\n        url = window.location.href.split('#')[0];\n      }\n\n      const item = state.node;\n      if (item.fill && typeof item.fill === 'object' && item.fill.type === 'gradient') {\n        item.fillReference = p.getOrCreateGradient(item, 'fill', url);\n      }\n\n      if (item.stroke && typeof item.stroke === 'object' && item.stroke.type === 'gradient') {\n        item.strokeReference = p.getOrCreateGradient(item, 'stroke', url);\n      }\n    },\n    clear() {\n      cache = {};\n    },\n  };\n\n  return p;\n}\n","import { hashObject } from '../../../core/utils/crypto';\n\nexport default function patternizer(bucket, hasher = hashObject) {\n  let cache = {};\n  let uid = Date.now();\n  const p = {\n    onCreate(state) {\n      let inputs = {};\n\n      if (\n        state.node &&\n        typeof state.node.fill === 'object' &&\n        state.node.fill.type === 'pattern' &&\n        state.node.fill.shapes\n      ) {\n        inputs.fill = state.node.fill;\n      }\n      if (\n        state.node &&\n        typeof state.node.stroke === 'object' &&\n        state.node.stroke.type === 'pattern' &&\n        state.node.stroke.shapes\n      ) {\n        inputs.stroke = state.node.stroke;\n      }\n\n      Object.keys(inputs).forEach((key) => {\n        let url = '';\n        const input = inputs[key];\n        const patternHash = hasher(input);\n        const pnid = `picasso-pattern-${uid}-${patternHash}`;\n\n        if (typeof window !== 'undefined') {\n          url = window.location.href.split('#')[0];\n        }\n\n        if (!cache[patternHash]) {\n          const pn = {\n            patternUnits: 'userSpaceOnUse',\n            x: 0,\n            y: 0,\n            width: input.width,\n            height: input.height,\n            type: 'pattern',\n            id: pnid,\n            children: [],\n            fill: input.fill,\n          };\n\n          input.shapes.forEach((s) => {\n            pn.children.push(s);\n          });\n\n          bucket.push(pn);\n          cache[patternHash] = true;\n        }\n\n        state.node[`${key}Reference`] = `url('${url}#${pnid}')`;\n      });\n    },\n    clear() {\n      cache = {};\n    },\n  };\n\n  return p;\n}\n","import { tree as treeFactory } from './svg-tree';\nimport { svgNs } from './svg-nodes';\nimport sceneFactory from '../../../core/scene-graph/scene';\nimport { onLineBreak } from '../../text-manipulation';\n// import {\n//   resetGradients,\n//   onGradient,\n//   createDefsNode\n// } from './svg-gradient';\n\nimport gradienter from './svg-gradient';\nimport patternizer from './svg-pattern';\n\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\nimport injectTextBoundsFn from '../../text-manipulation/inject-textbounds';\n\n/**\n * Create a new svg renderer\n * @typedef {function} svgRendererFactory\n * @param {function} treeFactory - Node tree factory\n * @param {string} ns - Namespace definition\n * @param {function} sceneFn - Scene factory\n * @returns {renderer} A svg renderer instance\n */\nexport default function renderer(treeFn = treeFactory, ns = svgNs, sceneFn = sceneFactory) {\n  const tree = treeFn();\n  let el;\n  let group;\n  let hasChangedRect = false;\n  let rect = createRendererBox();\n  let scene;\n\n  const svg = create();\n\n  const defs = {\n    type: 'defs',\n    children: [],\n  };\n  const patterns = patternizer(defs.children);\n  const gradients = gradienter(defs.children);\n\n  svg.element = () => el;\n\n  svg.root = () => group;\n\n  svg.appendTo = (element) => {\n    if (!el) {\n      el = element.ownerDocument.createElementNS(ns, 'svg');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n      el.setAttribute('xmlns', ns);\n      group = element.ownerDocument.createElementNS(ns, 'g');\n      group.style.pointerEvents = 'auto';\n      el.appendChild(group);\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  svg.render = (nodes) => {\n    if (!el) {\n      return false;\n    }\n\n    const scaleX = rect.scaleRatio.x;\n    const scaleY = rect.scaleRatio.y;\n\n    if (hasChangedRect) {\n      el.style.left = `${rect.computedPhysical.x}px`;\n      el.style.top = `${rect.computedPhysical.y}px`;\n      el.setAttribute('width', rect.computedPhysical.width);\n      el.setAttribute('height', rect.computedPhysical.height);\n    }\n\n    gradients.clear();\n    patterns.clear();\n    defs.children.length = 0;\n\n    const sceneContainer = {\n      type: 'container',\n      children: Array.isArray(nodes) ? [...nodes, defs] : nodes,\n      transform: rect.edgeBleed.bool\n        ? `translate(${rect.edgeBleed.left * scaleX}, ${rect.edgeBleed.top * scaleY})`\n        : '',\n    };\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      sceneContainer.transform += `scale(${scaleX}, ${scaleY})`;\n    }\n\n    const newScene = sceneFn({\n      items: [sceneContainer],\n      on: {\n        create: [\n          (state) => {\n            state.node.fillReference = undefined;\n            state.node.strokeReference = undefined;\n          },\n          gradients.onCreate,\n          patterns.onCreate,\n          onLineBreak(svg.measureText),\n          injectTextBoundsFn(svg),\n        ],\n      },\n    });\n    const hasChangedScene = scene ? !newScene.equals(scene) : true;\n\n    const doRender = hasChangedRect || hasChangedScene;\n    if (doRender) {\n      svg.clear();\n      tree.render(newScene.children, group);\n    }\n\n    hasChangedRect = false;\n    scene = newScene;\n    return doRender;\n  };\n\n  svg.itemsAt = (input) => (scene ? scene.getItemsFrom(input) : []);\n\n  svg.findShapes = (selector) => (scene ? scene.findShapes(selector) : []);\n\n  svg.clear = () => {\n    if (!group) {\n      return svg;\n    }\n    scene = null;\n    const g = group.cloneNode(false);\n    el.replaceChild(g, group);\n    group = g;\n    return svg;\n  };\n\n  svg.destroy = () => {\n    // parentElement is not supported in IE11 for SVGElement.\n    if (el && el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n    el = null;\n    group = null;\n  };\n\n  svg.size = (opts) => {\n    if (opts) {\n      const newRect = createRendererBox(opts);\n\n      if (JSON.stringify(rect) !== JSON.stringify(newRect)) {\n        hasChangedRect = true;\n        rect = newRect;\n      }\n    }\n\n    return rect;\n  };\n\n  return svg;\n}\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('svg', renderer);\n}\n","var n,l,u,i,t,r,o,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function v(n,l,u){var i,t=arguments,r={};for(i in l)\"key\"!==i&&\"ref\"!==i&&(r[i]=l[i]);if(arguments.length>3)for(u=[u],i=3;i<arguments.length;i++)u.push(t[i]);if(null!=u&&(r.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===r[i]&&(r[i]=n.defaultProps[i]);return h(n,r,l&&l.key,l&&l.ref,null)}function h(l,u,i,t,r){var o={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r};return null==r&&(o.__v=o),n.vnode&&n.vnode(o),o}function y(){return{current:null}}function p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?_(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function w(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!m.__r++||t!==n.debounceRendering)&&((t=n.debounceRendering)||i)(m)}function m(){for(var n;m.__r=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,r,o,f;n.__d&&(o=(r=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=s({},r)).__v=i,t=T(f,r,i,l.__n,void 0!==f.ownerSVGElement,null,u,null==o?_(r):o),$(u,r),t!=o&&k(r)))})}function g(n,l,u,i,t,r,o,c,s,v){var y,d,k,w,m,g,b,A=i&&i.__k||e,P=A.length;for(s==f&&(s=null!=o?o[0]:P?_(i,0):null),u.__k=[],y=0;y<l.length;y++)if(null!=(w=u.__k[y]=null==(w=l[y])||\"boolean\"==typeof w?null:\"string\"==typeof w||\"number\"==typeof w?h(null,w,null,null,w):Array.isArray(w)?h(p,{children:w},null,null,null):null!=w.__e||null!=w.__c?h(w.type,w.props,w.key,null,w.__v):w)){if(w.__=u,w.__b=u.__b+1,null===(k=A[y])||k&&w.key==k.key&&w.type===k.type)A[y]=void 0;else for(d=0;d<P;d++){if((k=A[d])&&w.key==k.key&&w.type===k.type){A[d]=void 0;break}k=null}m=T(n,w,k=k||f,t,r,o,c,s,v),(d=w.ref)&&k.ref!=d&&(b||(b=[]),k.ref&&b.push(k.ref,null,w),b.push(d,w.__c||m,w)),null!=m?(null==g&&(g=m),s=x(n,w,k,A,o,m,s),\"option\"==u.type?n.value=\"\":\"function\"==typeof u.type&&(u.__d=s)):s&&k.__e==s&&s.parentNode!=n&&(s=_(k))}if(u.__e=g,null!=o&&\"function\"!=typeof u.type)for(y=o.length;y--;)null!=o[y]&&a(o[y]);for(y=P;y--;)null!=A[y]&&I(A[y],A[y]);if(b)for(y=0;y<b.length;y++)H(b[y],b[++y],b[++y])}function b(n){return null==n||\"boolean\"==typeof n?[]:Array.isArray(n)?e.concat.apply([],n.map(b)):[n]}function x(n,l,u,i,t,r,o){var f,e,c;if(void 0!==l.__d)f=l.__d,l.__d=void 0;else if(t==u||r!=o||null==r.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(r),f=null;else{for(e=o,c=0;(e=e.nextSibling)&&c<i.length;c+=2)if(e==r)break n;n.insertBefore(r,o),f=o}return void 0!==f?f:r.nextSibling}function A(n,l,u,i,t){var r;for(r in u)\"children\"===r||\"key\"===r||r in l||C(n,r,null,u[r],i);for(r in l)t&&\"function\"!=typeof l[r]||\"children\"===r||\"key\"===r||\"value\"===r||\"checked\"===r||u[r]===l[r]||C(n,r,l[r],u[r],i)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=\"number\"==typeof u&&!1===c.test(l)?u+\"px\":null==u?\"\":u}function C(n,l,u,i,t){var r,o,f,e,c;if(t?\"className\"===l&&(l=\"class\"):\"class\"===l&&(l=\"className\"),\"style\"===l)if(r=n.style,\"string\"==typeof u)r.cssText=u;else{if(\"string\"==typeof i&&(r.cssText=\"\",i=null),i)for(e in i)u&&e in u||P(r,e,\"\");if(u)for(c in u)i&&u[c]===i[c]||P(r,c,u[c])}else\"o\"===l[0]&&\"n\"===l[1]?(o=l!==(l=l.replace(/Capture$/,\"\")),f=l.toLowerCase(),l=(f in n?f:l).slice(2),u?(i||n.addEventListener(l,N,o),(n.l||(n.l={}))[l]=u):n.removeEventListener(l,N,o)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/^xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function N(l){this.l[l.type](n.event?n.event(l):l)}function z(n,l,u){var i,t;for(i=0;i<n.__k.length;i++)(t=n.__k[i])&&(t.__=n,t.__e&&(\"function\"==typeof t.type&&t.__k.length>1&&z(t,l,u),l=x(u,t,t,n.__k,null,t.__e,l),\"function\"==typeof n.type&&(n.__d=l)))}function T(l,u,i,t,r,o,f,e,c){var a,v,h,y,_,k,w,m,b,x,A,P=u.type;if(void 0!==u.constructor)return null;(a=n.__b)&&a(u);try{n:if(\"function\"==typeof P){if(m=u.props,b=(a=P.contextType)&&t[a.__c],x=a?b?b.props.value:a.__:t,i.__c?w=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(m,x):(u.__c=v=new d(m,x),v.constructor=P,v.render=L),b&&b.sub(v),v.props=m,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=s({},v.__s)),s(v.__s,P.getDerivedStateFromProps(m,v.__s))),y=v.props,_=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==y&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(m,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(m,v.__s,x)||u.__v===i.__v){v.props=m,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),z(u,e,l);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(m,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(y,_,k)})}v.context=x,v.props=m,v.state=v.__s,(a=n.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=l,a=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(t=s(s({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(k=v.getSnapshotBeforeUpdate(y,_)),A=null!=a&&a.type==p&&null==a.key?a.props.children:a,g(l,Array.isArray(A)?A:[A],u,i,t,r,o,f,e,c),v.base=u.__e,v.__h.length&&f.push(v),w&&(v.__E=v.__=null),v.__e=!1}else null==o&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=j(i.__e,u,i,t,r,o,f,c);(a=n.diffed)&&a(u)}catch(l){u.__v=null,n.__e(l,u,i)}return u.__e}function $(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function j(n,l,u,i,t,r,o,c){var s,a,v,h,y,p=u.props,d=l.props;if(t=\"svg\"===l.type||t,null!=r)for(s=0;s<r.length;s++)if(null!=(a=r[s])&&((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,r[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,d.is&&{is:d.is}),r=null,c=!1}if(null===l.type)p!==d&&n.data!=d&&(n.data=d);else{if(null!=r&&(r=e.slice.call(n.childNodes)),v=(p=u.props||f).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!c){if(null!=r)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||v)&&(h&&v&&h.__html==v.__html||(n.innerHTML=h&&h.__html||\"\"))}A(n,d,p,t,c),h?l.__k=[]:(s=l.props.children,g(n,Array.isArray(s)?s:[s],l,u,i,\"foreignObject\"!==l.type&&t,r,o,f,c)),c||(\"value\"in d&&void 0!==(s=d.value)&&s!==n.value&&C(n,\"value\",s,p.value,!1),\"checked\"in d&&void 0!==(s=d.checked)&&s!==n.checked&&C(n,\"checked\",s,p.checked,!1))}return n}function H(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function I(l,u,i){var t,r,o;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||H(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(r=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(o=0;o<t.length;o++)t[o]&&I(t[o],u,i);null!=r&&a(r)}function L(n,l,u){return this.constructor(n,u)}function M(l,u,i){var t,o,c;n.__&&n.__(l,u),o=(t=i===r)?null:i&&i.__k||u.__k,l=v(p,null,[l]),c=[],T(u,(t?u:i||u).__k=l,o||f,f,void 0!==u.ownerSVGElement,i&&!t?[i]:o?null:u.childNodes.length?e.slice.call(u.childNodes):null,c,i||f,t),$(c,l)}function O(n,l){M(n,l,r)}function S(n,l){var u,i;for(i in l=s(s({},n.props),l),arguments.length>2&&(l.children=e.slice.call(arguments,2)),u={},l)\"key\"!==i&&\"ref\"!==i&&(u[i]=l[i]);return h(n.type,u,l.key||n.key,l.ref||n.ref,null)}function q(n){var l={},u={__c:\"__cC\"+o++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var i,t=this;return this.getChildContext||(i=[],this.getChildContext=function(){return l[u.__c]=t,l},this.shouldComponentUpdate=function(n){t.props.value!==n.value&&i.some(function(l){l.context=n.value,w(l)})},this.sub=function(n){i.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){i.splice(i.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Consumer.contextType=u,u.Provider.__=u,u}n={__e:function(n,l){for(var u,i;l=l.__;)if((u=l.__c)&&!u.__)try{if(u.constructor&&null!=u.constructor.getDerivedStateFromError&&(i=!0,u.setState(u.constructor.getDerivedStateFromError(n))),null!=u.componentDidCatch&&(i=!0,u.componentDidCatch(n)),i)return w(u.__E=u)}catch(l){n=l}throw n}},l=function(n){return null!=n&&void 0===n.constructor},d.prototype.setState=function(n,l){var u;u=this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(u,this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),w(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),w(this))},d.prototype.render=p,u=[],i=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m.__r=0,r=f,o=0;export{M as render,O as hydrate,v as createElement,v as h,p as Fragment,y as createRef,l as isValidElement,d as Component,S as cloneElement,q as createContext,b as toChildArray,I as __u,n as options};\n//# sourceMappingURL=preact.module.js.map\n","import { h, render } from 'preact';\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\n\nexport default function renderer(opts = {}) {\n  const { createElement = document.createElement.bind(document) } = opts;\n\n  let el;\n  let rect = createRendererBox();\n  let dNode;\n\n  const dom = create();\n\n  dom.element = () => el;\n\n  dom.root = () => el;\n\n  dom.appendTo = (element) => {\n    if (!el) {\n      el = createElement('div');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  dom.render = (nodes) => {\n    if (!el) {\n      return false;\n    }\n\n    el.style.left = `${rect.computedPhysical.x}px`;\n    el.style.top = `${rect.computedPhysical.y}px`;\n    el.style.width = `${rect.computedPhysical.width}px`;\n    el.style.height = `${rect.computedPhysical.height}px`;\n\n    let vNode;\n    if (Array.isArray(nodes)) {\n      vNode = <div>{nodes}</div>;\n    } else {\n      vNode = nodes;\n    }\n\n    dNode = render(vNode, el, dNode);\n\n    return true;\n  };\n\n  dom.renderArgs = [h]; // Arguments to render functions using the DOM renderer\n\n  dom.clear = () => {\n    if (el) {\n      let first = el.firstChild;\n\n      while (first) {\n        el.removeChild(first);\n        first = el.firstChild;\n      }\n      dNode = null;\n    }\n\n    return dom;\n  };\n\n  dom.destroy = () => {\n    if (el && el.parentElement) {\n      el.parentElement.removeChild(el);\n    }\n    el = null;\n    dNode = null;\n  };\n\n  dom.size = (inner) => {\n    if (inner) {\n      rect = createRendererBox(inner);\n    }\n    return rect;\n  };\n\n  return dom;\n}\n","import renderer from './dom-renderer';\n\nexport default renderer;\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('dom', renderer);\n}\n","import { rendererComponent as canvas } from '../web/renderer/canvas-renderer';\nimport { rendererComponent as svg } from '../web/renderer/svg-renderer/svg-renderer';\nimport { rendererComponent as dom } from '../web/renderer/dom-renderer';\n\nexport default [svg, canvas, dom];\n","export default [];\n","const LOG_LEVEL = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  DEBUG: 4,\n};\n\nconst loggerFn = ({ level = LOG_LEVEL.OFF, pipe = console } = {}) => {\n  let currentlevel = level;\n\n  const LOG_FN = {\n    [LOG_LEVEL.OFF]: () => {},\n    [LOG_LEVEL.ERROR]: (...args) => pipe.error(...args),\n    [LOG_LEVEL.WARN]: (...args) => pipe.warn(...args),\n    [LOG_LEVEL.INFO]: (...args) => pipe.info(...args),\n    [LOG_LEVEL.DEBUG]: (...args) => pipe.log(...args),\n  };\n\n  const log = (lev, ...args) => {\n    if (!lev || currentlevel < lev) {\n      return;\n    }\n\n    (LOG_FN[lev] || LOG_FN[LOG_LEVEL.DEBUG])(...args);\n  };\n\n  /**\n   * @typedef {object} logger\n   * @private\n   */\n\n  return /** @lends logger */ {\n    /**\n     * Log a message\n     * @param {number} lev - The log level\n     * @param {...any} args\n     * @kind function\n     */\n    log,\n\n    /**\n     * Log an error message\n     * @param {...any} args\n     */\n    error: (...args) => log(LOG_LEVEL.ERROR, ...args),\n\n    /**\n     * Log a warning message\n     * @param {...any} args\n     */\n    warn: (...args) => log(LOG_LEVEL.WARN, ...args),\n\n    /**\n     * Log an info message\n     * @param {...any} args\n     */\n    info: (...args) => log(LOG_LEVEL.INFO, ...args),\n\n    /**\n     * Log a debug message\n     * @param {...any} args\n     */\n    debug: (...args) => log(LOG_LEVEL.DEBUG, ...args),\n\n    /**\n     * Set the current log level\n     * @param {number} lev - The log level\n     */\n    level: (lev) => {\n      if (typeof lev === 'number') {\n        currentlevel = lev;\n      }\n      return currentlevel;\n    },\n\n    LOG_LEVEL,\n  };\n};\n\nexport { loggerFn as default };\n","const palettes = [\n  {\n    key: 'categorical',\n    colors: [\n      [\n        '#a54343',\n        '#d76c6c',\n        '#ec983d',\n        '#ecc43d',\n        '#f9ec86',\n        '#cbe989',\n        '#70ba6e',\n        '#578b60',\n        '#79d69f',\n        '#26a0a7',\n        '#138185',\n        '#65d3da',\n      ], // breeze colors\n    ],\n  },\n  {\n    key: 'diverging',\n    colors: [\n      ['#3d52a1', '#3a89c9', '#77b7e5', '#b4ddf7', '#e6f5fe', '#ffe3aa', '#f9bd7e', '#ed875e', '#d24d3e', '#ae1c3e'],\n    ],\n  },\n  {\n    key: 'sequential',\n    colors: [['rgb(180,221,212)', 'rgb(34, 83, 90)']],\n  },\n];\n\n/* eslint quote-props: 0 */\nconst style = {\n  // -- FOUNDATION --\n  // fonts\n  '$font-family': \"'Source Sans Pro', Arial, sans-serif\",\n  '$font-size': '12px',\n  '$line-height': '16px',\n  '$font-size--l': '16px',\n\n  // base grays\n  '$gray-100': '#ffffff',\n  '$gray-98': '#f9f9f9',\n  '$gray-95': '#f2f2f2',\n  '$gray-90': '#e6e6e6',\n  '$gray-35': '#595959',\n  '$gray-30': '#4d4d4d',\n  '$gray-25': '#404040',\n  '$gray-20': '#333333',\n\n  // borders\n  '$border-95': 'rgba(255, 255, 255, 0.05)',\n  '$border-90': 'rgba(255, 255, 255, 0.1)',\n  '$border-80': 'rgba(255, 255, 255, 0.2)',\n  '$border-20': 'rgba(0, 0, 0, 0.2)',\n  '$border-10': 'rgba(0, 0, 0, 0.1)',\n  '$border-5': 'rgba(0, 0, 0, 0.05)',\n\n  // primary colors\n  '$primary-blue': '#3F8AB3',\n  '$primary-green': '#6CB33F',\n  '$primary-red': '#DC423F',\n  '$primary-orange': '#EF960F',\n\n  // spacing\n  '$spacing--s': 4,\n  $spacing: 8,\n  '$spacing--l': 12,\n  // -------------------------\n\n  // -- ALIASES --\n  '$font-color': '$gray-35',\n  '$font-color--inverted': '$gray-90',\n  '$guide-color': '$gray-90',\n  '$guide-color--inverted': '$gray-35',\n  $border: '$border-80',\n  '$border--inverted': '$border-10',\n  // -------------------------\n\n  // -- MIXINS --\n  // data points\n  $shape: {\n    // data shape\n    fill: '$primary-blue',\n    strokeWidth: 1,\n    stroke: '$border',\n  },\n\n  '$shape-outline': {\n    // data shape which usually does not have a fill, e.g. the line in a linechart\n    stroke: '$primary-blue',\n    strokeWidth: 2,\n  },\n\n  '$shape-guide': {\n    // lines that somehow belongs to a data shape, e.g. whiskers in a boxplot\n    stroke: '$guide-color',\n    strokeWidth: 1,\n  },\n\n  '$shape-guide--inverted': {\n    '@extend': '$shape-guide',\n    stroke: '$guide-color--inverted',\n  },\n\n  $label: {\n    fontSize: '$font-size',\n    fontFamily: '$font-family',\n    fill: '$font-color',\n  },\n\n  '$label--inverted': {\n    $extend: '$label',\n    fill: '$font-color--inverted',\n  },\n\n  // user interface\n  '$label-overlay': {\n    // e.g. selection range bubble\n    fontSize: '$font-size--l',\n    fontFamily: '$font-family',\n    fill: '$gray-100', // background fill\n    color: '$font-color',\n    stroke: '$guide-color--inverted',\n    strokeWidth: 1,\n    borderRadius: 4,\n  },\n\n  $title: {\n    '@extend': '$label',\n    fontSize: '$font-size--l',\n  },\n\n  '$guide-line': {\n    strokeWidth: 1,\n    stroke: '$guide-color',\n  },\n\n  '$guide-line--minor': {\n    strokeWidth: 1,\n    stroke: '$gray-95', // needs alias\n  },\n\n  '$padding--s': {\n    left: '$spacing--s',\n    right: '$spacing--s',\n    top: '$spacing--s',\n    bottom: '$spacing--s',\n  },\n\n  $padding: {\n    left: '$spacing',\n    right: '$spacing',\n    top: '$spacing',\n    bottom: '$spacing',\n  },\n\n  '$selection-area-target': {\n    fill: '$primary-green',\n    strokeWidth: 0,\n    opacity: 0.2,\n  },\n};\n\nexport { style, palettes };\n","import 'path2d-polyfill';\nimport extend from 'extend';\nimport about from './about';\n\nimport { chart, renderer } from './core';\n\nimport { components, scales, renderers } from './api';\n\nimport componentRegistry from './core/component';\nimport dataRegistry from './core/data';\nimport formatterRegistry from './core/formatter';\nimport interactionRegistry from './core/interaction';\nimport scaleRegistry from './core/chart/scales';\nimport { symbolRegistry } from './core/symbols';\n\nimport loggerFn from './core/utils/logger';\nimport registry from './core/utils/registry';\n\nimport { style, palettes } from './core/theme/light';\n\nfunction usePlugin(plugin, options = {}, api) {\n  plugin(api, options);\n}\n\nfunction pic(config = {}, registries = {}) {\n  const logger = loggerFn(config.logger);\n\n  /**\n   * @lends picassojs\n   */\n  const regis = {\n    // -- registries --\n    /**\n     * Component registry\n     * @type {registry}\n     */\n    component: registry(registries.component, 'component', logger),\n    /**\n     * Data registry\n     * @type {registry}\n     */\n    data: registry(registries.data, 'data', logger),\n    /**\n     * Formatter registry\n     * @type {registry}\n     */\n    formatter: registry(registries.formatter, 'formatter', logger),\n    /**\n     * Interaction registry\n     * @type {registry}\n     */\n    interaction: registry(registries.interaction, 'interaction', logger),\n    /**\n     * Renderer registry\n     * @type {registry}\n     */\n    renderer: renderer(registries.renderer, 'renderer', logger),\n    /**\n     * Scale registry\n     * @type {registry}\n     */\n    scale: registry(registries.scale, 'scale', logger),\n    /**\n     * Symbol registry\n     * @type {registry}\n     * @private\n     */\n    symbol: registry(registries.symbol, 'symbol', logger),\n    // -- misc --\n    /**\n     * log some some stuff\n     * @type {logger}\n     * @private\n     */\n    logger,\n  };\n\n  if (config.renderer && config.renderer.prio) {\n    regis.renderer.default(config.renderer.prio[0]);\n  }\n\n  /**\n   * picasso.js entry point\n   * @experimental\n   * @entry\n   * @alias picassojs\n   * @param {object} cfg\n   * @param {object} cfg.renderer\n   * @param {Array<string>} cfg.renderer.prio\n   * @param {object} cfg.logger\n   * @param {number} cfg.logger.level\n   * @param {object} cfg.style\n   * @param {Array<object>} cfg.palettes\n   * @returns {picassojs}\n   */\n  function picassojs(cfg = {}) {\n    let cc = {\n      palettes: config.palettes.concat(cfg.palettes || []),\n      style: extend({}, config.style, cfg.style),\n      logger: cfg.logger || config.logger,\n      renderer: cfg.renderer || config.renderer,\n    };\n    return pic(cc, regis);\n  }\n\n  /**\n   * @callback picassojs~plugin\n   * @param {picassojs~registries} registries\n   * @param {object} options\n   */\n\n  /**\n   * @param {picassojs~plugin} plugin\n   * @param {object} [options]\n   */\n  picassojs.use = (plugin, options = {}) => usePlugin(plugin, options, regis);\n\n  /**\n   * @param {chart-definition} definition\n   * @returns {chart}\n   */\n  picassojs.chart = (definition) =>\n    chart(definition, {\n      registries: regis,\n      logger,\n      style: config.style,\n      palettes: config.palettes,\n    });\n  picassojs.config = () => config;\n\n  Object.keys(regis).forEach((key) => {\n    picassojs[key] = regis[key];\n  });\n\n  /**\n   * picasso.js version\n   * @type {string}\n   */\n  picassojs.version = about.version;\n\n  return picassojs;\n}\n\nconst p = pic(\n  {\n    renderer: {\n      prio: ['svg', 'canvas'],\n    },\n    logger: {\n      level: 0,\n    },\n    style,\n    palettes,\n  },\n  {\n    component: componentRegistry,\n    data: dataRegistry,\n    formatter: formatterRegistry,\n    interaction: interactionRegistry,\n    renderer: renderer(),\n    scale: scaleRegistry,\n    symbol: symbolRegistry,\n  }\n);\n\ncomponents.forEach(p.use);\nrenderers.forEach(p.use);\nscales.forEach(p.use);\n\nexport { p as default };\n"],"names":["ARG_LENGTH","a","c","h","l","m","q","s","t","v","z","SEGMENT_PATTERN","NUMBER","numbers","args","data","p","String","type","command","theArgs","parseValues","theCommand","version","dockConfig","settings","callbackContext","dock","displayOrder","prioOrder","preferredSize","minimumLayoutMode","show","computePreferredSize","inner","outer","val","roundRect","rect","x","Math","floor","y","width","height","resolveContainerRects","containerRect","logicalContainerRect","size","isNaN","logicalSize","align","min","max","preserveAspectRatio","resolveSettings","center","minWidthRatio","minHeightRatio","minWidth","minHeight","extend","isNumber","notNumber","value","getMinMax","points","num","length","xMin","NaN","xMax","yMin","yMax","i","lineToPoints","line","x1","y1","x2","y2","rectToPoints","pointsToRect","pointsToCircle","r","cx","cy","pointsToLine","getShapeType","shape","vertices","Array","isArray","every","item","expandRect","createRect","margin","cacheSize","reducedRect","layoutRect","cachedSize","config","comp","relevantSize","ceil","edgeBleed","validateReduceRect","minReduceWidth","minReduceHeight","reduceDocRect","addEdgeBleed","currentEdgeBleed","left","right","top","bottom","reduceEdgeBleed","reducedRectRightBoundary","reducedRectBottomBoundary","reduceSingleLayoutRect","newReduceRect","newEdgeBleed","isValid","filterReferencedDocks","visible","hidden","referencedDocks","isAllHidden","refDock","some","key","push","splice","reduceLayoutRect","sortedComponents","slice","sort","b","filteredUnsortedComps","filter","indexOf","computeRect","scaleRatio","appendScaleRatio","outerRect","xLessThenY","minRatio","area","spread","boundingBox","rects","concat","map","positionComponents","translation","vRect","hRect","referencedComponents","referenceArray","elementOrder","diff","forEach","d","refs","ref","computed","resize","undefined","checkShowSettings","strategySettings","dockSettings","layoutModes","validateComponent","component","Error","filterComponents","components","instance","layout","test","split","replace","dockLayout","initialSettings","docker","order","settingsFn","detectTouchSupport","e","navigator","maxTouchPoints","isTouchEvent","changedTouches","isValidTapEvent","eventInfo","isTouch","ee","dt","Date","now","time","dx","abs","clientX","dy","clientY","button","multiTouch","datasets","dataSources","types","logger","sets","warn","datasetFactory","dataset","fn","Object","keys","epsilon","pi","tau","pointX","pointY","point","orderNone","offsetNone","none","registryFactory","parentRegistry","registerName","defaultValue","reg","parent","get","has","default","add","TypeError","remove","getKeys","getValues","deflt","registry","ret","register","identity","formatter","pattern","thousand","decimal","locale","d3format","format","localeFn","formatLocale","reset","thousands","grouping","currency","formatFn","patternFn","interval","day","timeMonday","timeDay","timeYear","timeSunday","timeThursday","timeFormatLocale","dateTime","date","periods","days","shortDays","months","shortMonths","parse","parsePattern","formatterRegistry","d3NumberFormatter","d3TimeFormatter","getFormatter","f","formatterFn","accessors","id","source","title","tags","values","label","field","raw","items","OFFSETS","diverging","stackOffsetDiverging","stackOffsetNone","silhouette","stackOffsetSilhouette","expand","stackOffsetExpand","wiggle","stackOffsetWiggle","ORDERS","ascending","stackOrderAscending","insideout","stackOrderInsideOut","stackOrderNone","reverse","stackOrderReverse","stacked","ds","stackIds","stackFn","stackKey","valueFn","startProp","endProp","offset","valueRef","maxStackCount","valueFields","sourceField","ff","sid","apply","Number","call","matrix","d3Stack","stack","series","serie","range","stackedFields","dSource","fieldFn","join","fields","extract","dataConfig","opts","extracted","collection","labelFn","groupBy","mapTo","hierarchy","root","extractionsConfigs","sourceFields","cfg","amend","obj","create","extractor","collections","k","coll","filtered","options","deps","extractData","formatterType","formattersConfig","formatters","def","all","constant","rgb","colorRgb","number","object","bisect","formatDecimal","re","formatSpecifier","FormatSpecifier","prefixExponent","formatRounded","formatPrefixAuto","prefixes","formatGroup","formatNumerals","formatTypes","formatTrim","exponent","linear","applyFormat","clamp","isObject","minorTicksGenerator","count","start","end","ticks","appendMinorTicks","majorTicks","minorCount","scale","looseDistanceBasedGenerator","distance","unitDivider","step","round","ticksFormatted","tick","position","isMinor","tightDistanceBasedGenerator","n","nice","ticksByCount","ticksByValue","ary","isObj","forceTicksAtBounds","ticksP","lastTick","generateContinuousTicks","minorTicks","copy","tickGen","tight","forceBounds","generateDiscreteTicks","domain","dataItems","labels","bandwidth","defaultSettings","context","stngs","DEFAULT_SETTINGS","include","invert","DEFAULT_TICKS_SETTINGS","DEFAULT_MINORTICKS_SETTINGS","fieldMin","fieldMax","minValues","maxValues","mini","maxi","initNormScale","normScale","scaleLinear","resources","d3Scale","d3ScaleLinear","ctx","stgns","tickCache","rangeRound","cachedTicks","fnCachedTicks","clearTicksCache","fnClearTicks","input","tickFormat","interpolate","func","arguments","classify","segments","valueRange","samplePos","lastVal","calIntervalPos","calSamplePos","sampleColValue","pop","cop","norm","normInvert","padding","paddingInner","paddingOuter","maxPxStep","scaleBand","domainToDataMapping","augmentScaleBand","band","fsettings","datum","domainValue","trackBy","d3ScaleBand","pxScale","sizeRelativeToStep","newBand","arg","depth","keyGen","node","ancestors","toString","flattenTree","rootNode","ticksDepth","expando","eachAfter","leaves","isBranch","children","leftEdge","rightEdge","spill","scaleHierarchicalBand","bandInstance","bandScale","hBand","strVal","bw","isLeaf","leafCount","stepSize","orgPxScale","minAccessor","maxAccessor","minmax","arr","definedMin","definedMax","arrMin","numericFilter","arrMax","generateDomain","len","part","scaleSequentialColor","interpolateRgb","isDomain","isRange","DEFAULT_COLORS","theme","palette","getBreaks","generateRange","colors","seq","sequential","generateNiceDomain","numPoints","lin","shift","scaleThresholdColor","scaleThreshold","ordinal","scaleOrdinal","unknown","DEFAULT_EXPLICIT_SETTINGS","override","scaleCategorical","explicit","un","explicitDomain","explicitRange","numCopies","index","idx","scaleRegistry","threshold","categorical","getTypeFromMeta","deduceScaleTypeFromData","dataSourceConfig","scalesConfig","scales","mixin","EventEmitter","prototype","init","scrollApi","viewSize","move","moveTo","newStart","emit","update","triggerUpdate","getState","createOrUpdate","oldApi","builder","oldScrollApis","scrollApis","hasOwnProperty","getOrCreateScrollApi","lessThanOrEqual","limit","lessThan","boundaries","after","contains","minCondition","maxCondition","rangeCollection","configure","includeMax","includeMin","i0","i1","before","set","clear","containsValue","containsRange","toggle","ranges","valueCollection","vc","DEFAULT_RANGE_CONFIG","changedMap","changed","vi","collectUnique","filteredSet","createValueCollection","addedMap","removedMap","added","removed","fs","setKeys","addedKeys","removedKeys","old","current","changedValues","filterFn","vCollection","oldMap","vcKeys","createValueCollectionFn","fsKeys","applyAliases","aliases","its","intercept","handlers","reduce","interceptor","toCamelCase","$1","toUpperCase","toSnakeCase","toLowerCase","updateRange","action","interceptors","rc","rangeConfig","inter","sources","rangeValues","brush","activated","addValues","removeValues","toggleValues","setValues","addRanges","setRanges","removeRanges","toggleRanges","state","links","ls","_state","updateValues","updateRanges","attr","link","target","isActive","brushes","hasChanged","result","addValue","removeValue","addAndRemoveValues","addItems","removeItems","addIts","removeIts","toggleValue","toggled","addRange","removeRange","setRange","toggleRange","containsRangeValue","containsMappedData","props","mode","status","bool","name","ic","removeInterceptor","removeAllInterceptors","toRemove","interceptorHandlers","handler","addKeyAlias","alias","removeKeyAlias","nodeId","text","tween","renderer","ticker","toBeUpdated","entered","nodes","ips","exited","updated","stages","tweener","ids","interpolateObject","opacity","easing","easeCubic","duration","tweens","easeElasticOut","started","window","requestAnimationFrame","currentStage","stop","currentNodes","tweenedNodes","ip","render","cancelAnimationFrame","GLOBAL_DEFAULTS","fontFamily","fontSize","color","backgroundColor","stroke","strokeWidth","$fill","REF_RX","isPrimitive","normalizeSettings","defaults","chart","composition","defs","vType","defaultType","resolveForItem","normalized","fallbackData","normalizedProp","exists","hasExplicitDataProp","hasImplicitDataProp","propData","updateScaleSize","path","o","scaleWithSize","externals","cache","resolve","scaled","res","resolved","reduceToLeafNodes","styler","style","brusher","dataProps","active","inactive","styleProps","activeNodes","globalActivation","getNodes","nodeData","globalChanged","__style","activeIdx","original","onStart","suppressRender","onEnd","onUpdate","externalUpdate","on","cleanUp","removeListener","brushDataPoints","dataPoints","trigger","rangeBrush","actionFn","valueBrush","dataPoint","it","contexts","brushFromSceneNodes","resolveEvent","collisions","brushCollisions","propagation","touchSingleContactPoint","singleContactPoint","resolveCollisions","element","getBoundingClientRect","touchRadius","mouseRadius","itemsAt","resolveAction","resolveTapEvent","resolveOverEvent","mappedAttributes","fill","strokeLinejoin","baseline","dominantBaseline","anchor","textAnchor","maxWidth","transform","strokeDasharray","assignMappedAttribute","sourceValue","mappedKey","circle","pointsToPath","close","diamond","generateCrossPoints","barWidth","innerLeft","innerTop","cross","angleToPoints","angle","segment","PI","diagonal","op","cos","sqrt","sin","toRadians","degreesToPoints","v1","v2","sub","scalarMultiply","distanceX","distanceY","sqrDistance","pow","dot","projectOnto","rotate","radians","origin","t1","t2","saltire","adjustedSize","asin","centroid","square","DIRECTION_TO_ANGLE","up","down","triangle","directionAngle","direction","halfSize","pp","createRectCollider","isVertical","collider","star","outerRadius","drawPoints","innerRadius","startAngle","pAngle","innerRadians","iy","ix","nPolygon","radius","sides","bar","halfWidth","parentReg","applyOpts","isReservedProperty","prop","prepareContext","definition","require","mediatorSettings","mediator","registries","resolver","_DO_NOT_USE_getInfo","symbol","isVisible","defineProperty","bind","req","eventName","createDockDefinition","getLayoutProperty","propName","setUpEmitter","emitter","event","eventListeners","listener","tearDownEmitter","componentFactory","container","settingsResolver","brushArgs","brushTriggers","tap","over","brushStylers","definitionContext","instanceContext","createCallback","method","defaultMethod","canBeValue","cb","inDefinition","inConfig","returnValue","created","beforeMount","mounted","beforeUnmount","beforeUpdate","beforeRender","beforeDestroy","destroyed","addBrushStylers","consume","brushStyler","addBrushTriggers","rendString","rend","dockConfigCallbackContext","createDockConfig","appendComponentMeta","dataCollection","newSize","computedPhysical","computedOuter","computedInner","getRect","getRenderArgs","renderArgs","hide","unmount","currentTween","bs","animations","enabled","setKey","destroy","updateNodes","createSymbolFactory","getBrushedShapes","brushCtx","shapes","sceneNodes","findShapes","selector","shapesAt","brushFromShapes","mount","appendTo","onBrushTap","globalPropagation","toggleBrushing","onBrushOver","EPSILON","closestPointToLine","startToPoint","startToEnd","pointOnLine","isPointOnLine","rectContainsRect","lineHasNoLength","rectHasNoSize","circleHasNoSize","toFewEdges","polygon","edges","testPolygonPolygonSubCase","polygon1","polygon2","intersects","testPolygonLine","testGeoPolygonPolygonCase1","geopolygon","testGeoPolygonLine","testGeoPolygonPolygonCase2","numPolygons","polygons","testPolygonPolygon","testGeoPolygonGeoPolygonSubCase","geopolygon1","geopolygon2","testGeoPolygonPolygon","testCirclePoint","sqrDist","testCircleRect","rX","rY","rcX","rcY","dX","dY","testCircleLine","p1","p2","dist","testCircleCircle","circle1","circle2","testCirclePolygon","testPolygonPoint","edge","testRectPoint","boundingRect","inside","j","tx","testLineLine","testPolygonRect","testRectLine","p3","p4","testRectRect","rect1","rect2","testRectContainsRect","rectEdges","line1","line2","dx1","dy1","dx2","dy2","dx3","dy3","ub","uat","ubt","ua","testLinePoint","testGeoPolygonGeoPolygon","testCircleGeoPolygon","testGeoPolygonPoint","testGeoPolygonRect","VARIABLE_RX","EXTEND","throwCyclical","references","extendFrom","pext","themeFn","palettes","pals","internalStyle","setPalettes","pal","sizes","getPalette","styleResolver","setStyle","addComponentDelta","containerBounds","componentBounds","deltaShape","moveToPosition","el","additionalEl","additionalElements","Boolean","insertBefore","ae","appendChild","orderComponents","visibleComponents","elToIdx","numElements","ordered","chartFn","listeners","mediatorFactory","currentComponents","currentScales","currentFormatters","currentScrollApis","currentInteractions","stopBrushing","createComponent","compSettings","componentDefinition","compInstance","hasKey","findComponent","componentInstance","findComponentIndexByKey","currComp","getElementRect","vcomponents","layoutComponents","layoutSettings","strategy","createDockLayout","_data","_settings","partialData","scroll","datasources","dataCollections","scaleCollection","formatterCollection","buildScroll","setInteractions","interactions","newKeys","cit","intSettings","intDefinition","interaction","componentsFromPoint","br","tp","addDefaultEventListeners","addEventListener","onTapDown","touches","comps","disableTriggers","preventDefault","brushEventList","removeDefaultEventListeners","removeEventListener","innerHTML","newProps","excludeFromUpdate","visibleOrder","updateWith","toUpdate","toRender","toRenderOrUpdate","getAffectedShapes","compKeys","stopPropagation","iKey","compShapes","brushFn","instances","off","rendererRegistry","prio","componentRegistry","findField","query","filters","numeric","unfilteredReducers","sum","reducers","first","last","avg","normalizeProperties","dataProperties","main","mainField","pConfig","reduceLabel","getPropsInfo","collectItems","collect","trackedItems","propsArr","mainFormatter","propsFormatters","track","itemData","tracker","trackType","trackId","trackedItem","datumExtract","propCfg","cell","cfgs","sourceKey","mapped","mainCell","exclude","propCell","storeTracked","createFields","headers","content","rowFn","row","flds","fieldValues","fv","numericValues","isMeasure","dsv","rows","row0","row1","delimiter","guesses","parseData","dd","util","normalizeConfig","dataRegistry","native","nativeEvents","itKey","isOn","setDefaultSettings","newSettings","events","enable","addEvents","removeAddedEvents","cap","resolveDiff","minPx","maxPx","high","low","highModified","lowModified","wantedDiff","actualDiff","startModifier","actualLow","oob","boxCenter","rendWidth","rendHeight","flipXY","calcwidth","calcheight","box","boxWidth","boxPadding","minHeightPx","major","verticalLine","from","to","horizontalLine","getBoxWidth","maxMajorWidth","maxWidthPx","minWidthPx","sign","buildShapes","output","majorItems","majorSettings","minorProps","minor","numMinorProps","nonOobKeys","minorItem","isLowerOutOfBounds","isHigherOutOfBounds","isOutOfBounds","numKeys","numNonOobKeys","addBox","boxShapesHelper","addLine","addMedian","median","med","addWhisker","whisker","whiskerWidth","addOutOfBounds","addMarkerList","checkOutOfBounds","MAX_VALUE","majorItem","majorVal","majorEndVal","binStart","binEnd","majorEnd","complexResolver","orientation","majorResolved","minorSettings","defaultMinorSettings","minorResolved","ext","ki","DEFAULT_DATA_SETTINGS","dataKeys","picasso","DEFAULT_ERROR_SETTINGS","errorShape","PX_RX","SIZE_LIMITS","maxRelExtent","minRelExtent","maxRelDiscrete","minRelDiscrete","getPxSpaceFromScale","space","isBandwidth","getPointSizeLimits","limits","xSpacePx","ySpacePx","maxSizePx","minSizePx","maxGlobal","minGlobal","getType","createDisplayPoints","pointSize","shapeFn","parseInt","typeProps","shapeSpec","sizeLimits","pointMarker","pointMarkerComponent","endAngle","arc","cornerRadius","offsetSlice","vx","vy","vlen","createDisplayPies","arcData","slices","arcGen","or","ir","desc","share","arcValue","pieComponent","padAngle","arcValues","pieGen","pie","sortValues","crispifierFactory","crispMap","append","condition","conditionAppend","self","toAppend","crispItem","doAppend","rounded","multiple","crispifier","Transposer","coordinate","isFinite","firstChar","substring","storage","newItem","crisp","objectKeys","kl","nkey","evaluateKey","nval","transposeCoordinate","crispify","processItem","rest","transposer","lineGen","gridLineComponent","blueprint","lines","addTicks","dir","gridLine","directionMarker","directionTriangle","oobManager","oobKeys","charAt","xPadding","yPadding","indicator","refLabelDefaultSettings","background","alignmentToNumber","createLineWithLabel","doesNotCollide","measuredValue","valueString","scaleData","showValue","measureText","measuredLabel","measured","labelPadding","vAlign","calcWidth","calcHeight","rectWidth","rectHeight","curItem","createOobData","filterUndefinedValue","refLineComponent","x0","y0","refLine","appendStyle","struct","buildOpts","buildLine","innerRect","checkText","clampEnds","tilted","leftBoundary","rightBoundary","textWidth","textRect","leftTextBoundary","rightTextBoundary","topBoundary","bottomBoundary","textHeight","maxHeight","topTextBoundary","bottomTextBoundary","appendPadding","appendTilting","paddingEnd","bandwidthCollider","tickCenter","widthClip","heightClip","boundsCollider","tiltedCollider","startAnchor","em","sp","rotateVector","leftPoint","rightPoint","orderedPoints","appendCollider","layered","appendBounds","textBounds","w","buildNode","adjustForEnds","tickSize","isMajorTick","isVerticalLabelOverlapping","isHorizontalLabelOverlapping","activeMode","d1","d2","shouldAutoTilt","measure","glyphCount","maxGlyphCount","magicSizeRatioMultipler","tiltThreshold","ellipsCharSize","maxLabelWidth","minBandwidth","prev","curr","Infinity","isTiltedLabelOverlapping","bleedSize","absAngle","reciprocal","distanceBetweenLabels","isToLarge","horizontal","getClampedValue","maxValue","minValue","modifier","getSize","isDiscrete","maxLengthPx","minLengthPx","filterOverlapping","toLargeSize","sizeFromTextRect","tiltAngle","tickMeasures","labelSizes","textSize","extendLeft","labelWidth","adjustByPosition","pos","maxEdgeBleed","bleedDir","PADDING","tickDistance","getLeftEdgeWidth","nextWidth","leftEdgeBleed","minDubble","getRightEdgeWidth","prevWidth","rightEdgeBleed","getHorizontalWidth","next","tickSpacing","spacing","paddingStart","tickMinorSpacing","labelsSpacing","calcActualTextRect","tickBuilder","buildTick","tickBandwidth","labelBuilder","resolveTickOpts","buildLabel","layeredLabelBuilder","padding2","layer","filterOverlappingLabels","isOverlapping","discreteCalcMaxTextRect","textMetrics","continuousCalcMaxTextRect","getHorizontalContinuousWidth","getStepSizeFn","nodeBuilder","resolveLabelRect","continuous","discrete","build","majorTickNodes","maxSize","labelNodes","DEFAULT_DISCRETE_SETTINGS","DEFAULT_CONTINUOUS_SETTINGS","calcRequiredSize","getLabelSize","labelSize","minorTicksSize","alignTransform","resolveAlign","vertical","resolveLocalSettings","defaultStgns","localStgns","defaultDock","updateActiveMode","isHorizontal","axisComponent","concreteNodeBuilder","setState","reqSize","extendedInner","finalOuter","axis","parseTitle","titles","getTextAnchor","generateTitle","definitionSettings","paddingLeft","paddingRight","rotation","textComponent","_scrollbar","lengthAttr","currentMove","scrollState","startOffset","startScroll","swipe","scrollPoint","scrollMove","scrollStart","scrollCenter","getLocalPos","scrollbarComponent","panStart","startPos","deltaX","deltaY","panMove","panEnd","panCancel","thumbColor","_rect","thumbStart","thumbRange","pointerEvents","class","scrollbar","TARGET_SIZE","VERTICAL","HORIZONTAL","borderHit","isAlignStart","alignStart","alignEnd","alignStyle","targetRect","bubbles","onmouseover","srcElement","onmouseout","cursor","buildBubble","otherValue","rangeIdx","isOutside","placement","outside","bubbleDock","inEdit","edit","bubbleIdx","bubbleStyle","borderRadius","bubble","border","textAlign","overflow","textOverflow","whiteSpace","currentBorderColor","onkeyup","newValue","parseFloat","onEditConfirmed","onEditCanceled","buildArea","buildRange","els","vStart","vEnd","targetOffset","hasScale","targetFillRect","targetSize","targetStart","targetEnd","targetHeight","targetTop","targetArea","valStart","valEnd","isStartVisible","isEndVisible","getMoveDelta","posDelta","limitHigh","negDelta","limitLow","delta","rangelimits","areaLimits","findActive","rs","activeRange","startArea","document","elementFromPoint","tempState","relX","relY","startPoint","cssCoord","coord","relStart","hasAttribute","getAttribute","multi","pxStart","pxEnd","fauxBrushInstance","brushInstance","endArea","rel","moveArea","sourceData","ordRS","oldValues","findValues","addedValues","removedValues","setEditedRanges","startValue","endValue","limitMin","limitMax","findClosest","minDist","halfBandwidth","findClosestLabel","rangesOverlap","r1","r2","rangesValues","scaleRange","startIdx","endIdx","resolveNodeBounds","targetNodes","bounds","resolveTarget","targets","targetFillNodes","fillSelector","fillBounds","brushRangeComponent","rangeStart","rangeMove","rangeEnd","rangeClear","bubbleStart","renderRanges","editable","brushFactory","valueRanges","observeBrush","observe","sourcedFromThisComponent","srcEvent","ed","JSON","stringify","stopImmediatePropagation","wrapper","parentNode","inputEl","querySelector","focus","select","shapesFromRange","brushRange","shapeAt","brushFromShape","newShapes","getBubbleLabel","labelShape","s0","s1","bounds0","bounds1","compConfig","c0","c1","brushAreaDirectionalComponent","areaStart","areaMove","areaEnd","areaClear","getFormat","rangeBrushComponent","FILL","OPACITY","otherSize","setup","teardown","rangeComponent","getPoint","rendererBounds","eventOffsetX","eventOffsetY","withinThreshold","snapIndicator","appendToPath","setSnapIndictor","showSnapIndicator","setStartPoint","getComponentDelta","chartBounds","doLineBrush","lineBrushShape","componentDelta","brushConfig","doPolygonBrush","initPath","initSnapIndicator","initStartPoint","getBrushConfig","endBrush","resetState","brushLassoComponent","lasso","lassoStart","lassoEnd","lassoMove","lassoCancel","cancel","shouldSnap","lassoBrush","lassoBrushComponent","binaryLeftSearch","labelBounds","side","extractBounds","findLeft","renderLabels","getTextBounds","getNodeBounds","localBounds","doNotUse","labelIndex","labelNode","leftStartLabel","leftStartNode","labelRightBoundary","cbContext","isValidText","toBackground","rx","ry","backgroundBounds","isTextWidthInRectWidth","isTextHeightInRectHeight","isGoodPlacement","fitsHorizontally","fitWidth","fitHeight","isTextInRect","placeSegmentInSegment","majorSegmentPosition","majorSegmentSize","minorSegmentSize","majorSegmentCenter","minorSegmentCenter","minorSegmentPosition","placeTextInRect","baseLineOffset","justify","limitBounds","view","minY","maxY","minX","maxX","pad","getBarRect","findBestPlacement","placementSettings","barRect","largest","testBounds","dimension","approxTextBounds","rotated","PADDING_OFFSET","placeInBars","collectiveOrientation","findPlacement","placer","postFilter","postFilterContext","lblStngs","placements","texts","labelSettings","measurements","bestPlacement","linkData","isRotated","filteredLabels","backgrounds","lb","precalculate","labelStruct","hasHorizontalDirection","lblStng","bars","labelSetting","LABEL_OVERLAP_THRESHOLD_X","normalize","PI2","getTopLeftBounds","getLineCircleIntersection","D","sqrtD","getRectFromCircleIntersection","lineOffset","section","intersection","getHorizontalInsideSliceRect","store","middle","insideLabelBounds","getHorizontalIntoSliceRect","startLine","endLine","getRotatedInsideSliceRect","tan","minReqWidth","getRotatedOusideSliceRect","minR","outOfSpace","q1maxY","q2minY","q3minY","q4maxY","adjustBounds","LINE_PADDING","LIMIT","updateContext","getHorizontalOusideSliceRect","placeTextOnPoint","getSliceRect","sliceRect","sortNodes","q1","q2","q3","q4","sortFn","middleA","middleB","reverseSortFn","metrics","topLeftBounds","LINEBREAK_REGEX","WHITESPACE_REGEX","HYPHEN_REGEX","NO_BREAK","MANDATORY","BREAK_ALLOWED","includesLineBreak","search","includesWhiteSpace","hyphenationAllowed","resolveBreakOpportunity","chunk","chunks","mandatory","noBreakAllowed","cleanEmptyChunks","stringTokenizer","string","separator","mandatoryBreakIdentifiers","noBreakAllowedIdentifiers","suppressIdentifier","hyphenationIdentifiers","isNotDone","peek","peekAt","textMeasure","opportunity","breakOpportunity","suppress","hyphenation","done","jumpToPosition","HYPHENS_CHAR","ELLIPSIS_CHAR","BASE","PAD","BUMP","DEFAULT_FONT_HEIGHT","DEFAULT_LINE_HEIGHT","TEXT_REGEX","isValidFontSize","fontSizeToHeight","fontSizeToLineHeight","lineHeight","resolveMaxAllowedLines","maxLines","computedLineHeight","initState","hyphens","char","newLine","appendToLine","token","insertHyphenAndJump","iterator","startIndex","pairToken","breakSequence","charTokenIterator","charToken","breakAll","reduced","breakWord","generateLineNodes","halfLead","currentY","_lineBreak","shouldLineBreak","wrappedMeasureText","resolveLineBreakAlgorithm","WORDBREAK","wordBreak","onLineBreak","wordBreakFn","tm","ellipsText","reduceIndex","reduceText","substr","baselineHeuristic","textNode","heightCache","widthCache","contextCache","setContext","createElement","getContext","setFont","font","measureTextWidth","measureTextHeight","calcTextBounds","attrs","measureFn","calWidth","lineBreakFn","resolvedLineBreaks","nodeCopy","widestLine","LINE_HEIGHT","CIRCLE_FACTOR","wiggleWidth","getRectFromCircle","getSliceBounds","getBounds","rowSettings","totalHeight","labelCount","wiggleHeight","maxYDistToCenter","ellipsed","labelsComponent","strategies","scrollOffset","navigation","tabIndex","disabled","shapeSettings","symbols","wiggleSymbol","createRenderItem","globalMetrics","createSymbol","displayObject","symbolItem","meta","rtl","labelRect","maxLabelBounds","maxSymbolSize","wiggled","maxItemBounds","getItemsToRender","viewRect","itemized","parallels","legendItems","renderItems","fixedHeight","fixedWidth","rowHeight","columnWidth","renderItem","itemize","sourceItems","sourceSymbols","sourceLabels","maxLabelHeight","extent","property","parallelize","availableExtent","availableSpread","extentProperty","extentInPx","numNeeded","spreadProperty","spreadMargin","spreadMarginSize","numAllowed","numInput","legend","onScroll","api","getContentOverflow","offsetProperty","hasContentOverflow","getNextSize","getPrevSize","hasNext","hasPrev","classString","classMap","className","DIR","btn","nav","attrsMerged","tabindex","itemRenderer","isRtl","buttonSize","display","navigationRenderer","titleRenderer","isPreliminary","paddedRect","availableExtentForItems","availableSpreadForItems","navigationSize","navigationSpread","tempLayout","contentItems","views","renderElement","panstart","contentOverflow","panmove","panend","itemRendererFactory","navigationRendererFactory","titleRendererFactory","categoricalLegend","applyAlignJustify","cmd","generateStopNodes","fillScale","majorScale","stops","createTitleNode","isTickLeft","isTickTop","requiredWidth","tag","createLegendRectNode","requiredHeight","degree","createTickNodes","legendNode","rangeSelectorRect","textBoundsFn","resolveAnchor","valid","resolveTickAnchor","dockAnchorMap","resolveTitleAnchor","initRect","getTicks","titleStgns","tickValues","tickAnchor","titleTextMetrics","titleTextBounds","mw","fnPos","legendDef","prefSize","paddings","tHeight","tWidth","titleNode","stopNodes","rectNode","tickNodes","targetNode","sequentialLegend","legendSeq","CURVES","curveStep","stepAfter","curveStepAfter","stepBefore","curveStepBefore","curveLinear","basis","curveBasis","cardinal","curveCardinal","tension","catmullRom","curveCatmullRom","monotonex","curveMonotoneX","monotoney","curveMonotoneY","natural","curveNatural","SETTINGS","coordinates","layerId","connect","layers","curve","showMinor0","createDisplayLayer","generator","createDisplayLayers","missingMinor0","layerStngs","lineObj","layerObj","areaObj","areaGenerator","defined","lineGenerator","secondaryLineGenerator","temp","minor0","dummy","filteredPoints","consumableData","injectDummy","layerIds","numLines","lid","lastItem","lastOrderIdx","metaLayers","layersData","layersResolved","linesResolved","areasResolved","areas","calculateVisibleLayers","visibleLayers","pData","lineMarkerComponent","sortable","getLocalPoint","localX","localY","localToChartPoint","doEndBrush","toRect","p0","doAreaBrush","areaCancel","areaBrush","dataCtx","resolveClasses","tooltip","tooltipClass","contentClass","arrow","arrowClass","resolveContent","classes","tooltipDefaultStyle","tooltipNode","computedTooltipStyle","computedArrowStyle","dispatcherState","pending","debounced","cancelled","rejected","fulfilled","timeSpanDispatcher","defaultDuration","defaultDelay","actionId","fulfilledId","invoke","delay","clearTimeout","setTimeout","getDockTransform","getDockOffset","getComputedArrowStyle","borderWidth","isInsideArea","calcOffset","offsetX","offsetY","alignToBounds","pointer","elmWidth","elmHeight","targetBounds","getNodeBoundsRelativeToTarget","docks","dockTransforms","innerWidth","innerHeight","dockOffsets","dockOrder","alignToPoint","results","edgeMargin","alignToPointer","alignToSlice","getComponentBoundsFromNode","componentSize","STRATEGIES","propCtx","plcm","setActive","removeActive","cancelActive","isEqual","beforeShow","afterShow","beforeHide","onHide","afterHide","DEFAULT_STYLE","borderStyle","borderTopColor","borderLeftColor","borderRightColor","borderBottomColor","toPoint","targetElement","prevent","dispatcher","fNodes","invokeRenderer","instanceId","listenerCtx","tooltipElm","pseudoElement","visibility","addTooltip","debugColliderDef","useOuterRect","draw","colliders","PI_X2","arcToCenter","largeArcFlag","sweepFlag","endX","endY","startX","startY","sweepAngle","radiusRatio","rad","hdx","hdy","x1d","y1d","rxry","rxy1d","ryx1d","den","frac","cxd","cyd","mx","my","ux","uy","atan2","flatness","cp1","cp2","mid","td","t0","t3","toPoints","maxNbrOfSplits","m0","m1","m2","q0","toCubic","cp","cp1x","cp1y","cp2x","cp2y","cubicToPoints","removeDuplicates","arcToPoints","resAngle","deltaAngle","pathToPoints","commands","parsePath","cpx","cpy","qcpx","qcpy","pathType","cubicCurveToPoints","quadCurveToPoints","debugPathToPointsDef","circles","pathToSegments","debugCollider","createDebugCollider","debugPathToPoints","createDebugPathToPoints","boxComponent","pointComponent","lineComponent","brushAreaComponent","tooltipComponent","Node","_parent","_children","_ancestors","removeChild","nChildren","equals","ch","toJSON","descendants","GeoRect","GeoCircle","minRadius","vector","GeoLine","tolerance","vectors","zeroSize","v0","Polygon","_bounds","_boundingRect","GeoPolygon","createPolygon","pointsAreNotEqual","GeoPolyline","_points","testLine","polyline","GeometryCollection","geometries","geo","geoInstance","factory","containsPoint","intersectsLine","intersectsRect","intersectsCircle","intersectsPolygon","intersectsGeoPolygon","Matrix","_elements","_stack","mt","multiply","elements","radianAngle","g","determinant","vec","array","transformRegEx","parseTransform","exec","argsStr","trim","resolveRotateCmd","translate","resolveScaleCmd","resolveTranslateCmd","resolveMatrixCmd","resolveTransform","transforms","SELECTOR_MAPS","universal","FILTERS","objects","operator","attribute","attributeValue","tokenize","groups","info","match","validSelector","group","selectorMapsIterator","find","groupResults","tokens","gi","glen","levels","hasRemainder","selected","ancestor","ni","nlen","appendDpi","dpi","geometryToDef","geometry","mvm","transformPoints","colliderToShape","modelViewMatrix","isCollection","colliderType","SceneNode","includeTransform","_attrs","_type","_dpi","stage","_collider","_desc","_tag","_cache","elementBoundingRect","_getElementBoundingRect","selfRect","_element","_key","Collision","_node","createSceneNode","_input","appendParentNode","collision","createCollision","appendInputShape","resolveFrontChildCollision","resolveGeometryCollision","inverseTransform","transformedInput","inverseModelViewMatrix","transformPoint","createGeoPolygon","resolveCollision","intersectionType","findAllCollisions","hasCollision","resolveShape","ratio","_shape","vertex","resolveCollionsOnNode","hasCollisionOnNode","DisplayObject","_stage","strokeReference","fillReference","nodeSelector","clone","resolveLocalTransform","attrKeys","dAttrs","dAttrKeys","json","_mvm","_imvm","geometryCollection","NodeContainer","addChild","indx","NC","Container","__boundingRect","true","false","__bounds","child","_xMax","_yMax","appendChildRect","addChildren","removeChildren","Stage","_dpiRatio","allowedAttrs","GradientItem","attrKey","PatternItem","Rect","pt","Circle","Line","defaultCollider","hasSize","PI_2","lineAngle","rotatePoint","polylineToPolygonCollider","open","forceOrientation","unshift","currToPrev","currToNext","openAngle","closeAngle","maxAngle","minAngle","openClose","prevToCurr","opened","closed","nextToCurr","flatten2d","newAry","isClosed","Path","visual","flatten","hasData","_textBoundsFn","Text","gradientItem","patternItem","contextFactory","whitelist","states","save","restore","styleContext","doEvent","updateState","traverse","siblings","displayNode","isIdentity","scene","createCanvasGradient","gradient","newGradient","createRadialGradient","createLinearGradient","addColorStop","getPattern","dummyCanvas","fillStyle","createPattern","patternizer","createRendererBox","destory","setAttribute","injectTextBoundsFn","toLineDash","dpiScale","dpr","devicePixelRatio","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","resolveMatrix","setTransform","applyContext","shapeToCanvasMap","computedKeys","shapeCmd","canvasCmd","convertCmd","renderShapes","patterns","strokeStyle","doFill","doStroke","sceneFn","sceneFactory","hasChangedRect","canvasRenderer","ownerDocument","dpiRatio","scaleX","scaleY","sceneContainer","newScene","hasChangedScene","doRender","getItemsFrom","newRect","parentElement","renderFn","clampRadius","quadraticRoundedRect","lineTo","quadraticCurveTo","beginPath","rangesOfLChars","rangesOfRChars","rangesOfALChars","rangesOfLRgExp","RegExp","rangesOfRRgExp","rangesOfALRgExp","isLtrChar","isRtlChar","detectTextDirection","textAnchorRTLMap","flipTextAnchor","canvas","bdy","fillText","Path2D","rendererComponent","updatedNew","updatedOld","fromIds","toIds","idMapper","nodeMapper","isTree","createNodes","destroyNodes","creator","maintainer","destroyer","createTree","oldItems","newItems","svgNs","createElementNS","textContent","TreeItemRenderer","treeCreator","nodeCreator","nodeMaintainer","nodeDestroyer","tree","hashObject","hash","chr","charCodeAt","gradienter","bucket","hasher","uid","getOrCreateGradient","url","gradientHash","gradientId","onCreate","location","href","inputs","patternHash","pnid","pn","patternUnits","treeFn","treeFactory","ns","svg","gradients","cloneNode","replaceChild","dNode","dom","vNode","firstChild","LOG_LEVEL","OFF","ERROR","WARN","INFO","DEBUG","loggerFn","level","pipe","console","currentlevel","LOG_FN","error","log","lev","debug","$spacing","$border","$shape","$label","$extend","$title","$padding","usePlugin","plugin","pic","regis","picassojs","cc","use","about","interactionRegistry","symbolRegistry","renderers"],"mappings":"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CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,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AAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAC,CAAC,KAAK,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAC,CAAC,CAAC,EAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,C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"}